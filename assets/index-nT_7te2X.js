var oWe=Object.defineProperty;var aWe=(e,t,n)=>t in e?oWe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var uWe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ku=(e,t,n)=>(aWe(e,typeof t!="symbol"?t+"":t,n),n);var $An=uWe((IIn,kie)=>{function lWe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cWe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ywe={exports:{}},d6={},vwe={exports:{}},qn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC=Symbol.for("react.element"),fWe=Symbol.for("react.portal"),dWe=Symbol.for("react.fragment"),hWe=Symbol.for("react.strict_mode"),pWe=Symbol.for("react.profiler"),mWe=Symbol.for("react.provider"),gWe=Symbol.for("react.context"),yWe=Symbol.for("react.forward_ref"),vWe=Symbol.for("react.suspense"),_We=Symbol.for("react.memo"),bWe=Symbol.for("react.lazy"),Xie=Symbol.iterator;function wWe(e){return e===null||typeof e!="object"?null:(e=Xie&&e[Xie]||e["@@iterator"],typeof e=="function"?e:null)}var _we={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bwe=Object.assign,wwe={};function tS(e,t,n){this.props=e,this.context=t,this.refs=wwe,this.updater=n||_we}tS.prototype.isReactComponent={};tS.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tS.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ewe(){}Ewe.prototype=tS.prototype;function sG(e,t,n){this.props=e,this.context=t,this.refs=wwe,this.updater=n||_we}var oG=sG.prototype=new Ewe;oG.constructor=sG;bwe(oG,tS.prototype);oG.isPureReactComponent=!0;var Qie=Array.isArray,Swe=Object.prototype.hasOwnProperty,aG={current:null},xwe={key:!0,ref:!0,__self:!0,__source:!0};function Twe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Swe.call(t,r)&&!xwe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ZC,type:e,key:s,ref:o,props:i,_owner:aG.current}}function EWe(e,t){return{$$typeof:ZC,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uG(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZC}function SWe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jie=/\/+/g;function s9(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SWe(""+e.key):t.toString(36)}function i$(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ZC:case fWe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+s9(o,0):r,Qie(i)?(n="",e!=null&&(n=e.replace(Jie,"$&/")+"/"),i$(i,t,n,"",function(l){return l})):i!=null&&(uG(i)&&(i=EWe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Qie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+s9(s,a);o+=i$(s,t,n,u,i)}else if(u=wWe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+s9(s,a++),o+=i$(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sP(e,t,n){if(e==null)return e;var r=[],i=0;return i$(e,r,"","",function(s){return t.call(n,s,i++)}),r}function xWe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Za={current:null},s$={transition:null},TWe={ReactCurrentDispatcher:Za,ReactCurrentBatchConfig:s$,ReactCurrentOwner:aG};qn.Children={map:sP,forEach:function(e,t,n){sP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return sP(e,function(){t++}),t},toArray:function(e){return sP(e,function(t){return t})||[]},only:function(e){if(!uG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qn.Component=tS;qn.Fragment=dWe;qn.Profiler=pWe;qn.PureComponent=sG;qn.StrictMode=hWe;qn.Suspense=vWe;qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TWe;qn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=bwe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=aG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Swe.call(t,u)&&!xwe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ZC,type:e.type,key:i,ref:s,props:r,_owner:o}};qn.createContext=function(e){return e={$$typeof:gWe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mWe,_context:e},e.Consumer=e};qn.createElement=Twe;qn.createFactory=function(e){var t=Twe.bind(null,e);return t.type=e,t};qn.createRef=function(){return{current:null}};qn.forwardRef=function(e){return{$$typeof:yWe,render:e}};qn.isValidElement=uG;qn.lazy=function(e){return{$$typeof:bWe,_payload:{_status:-1,_result:e},_init:xWe}};qn.memo=function(e,t){return{$$typeof:_We,type:e,compare:t===void 0?null:t}};qn.startTransition=function(e){var t=s$.transition;s$.transition={};try{e()}finally{s$.transition=t}};qn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qn.useCallback=function(e,t){return Za.current.useCallback(e,t)};qn.useContext=function(e){return Za.current.useContext(e)};qn.useDebugValue=function(){};qn.useDeferredValue=function(e){return Za.current.useDeferredValue(e)};qn.useEffect=function(e,t){return Za.current.useEffect(e,t)};qn.useId=function(){return Za.current.useId()};qn.useImperativeHandle=function(e,t,n){return Za.current.useImperativeHandle(e,t,n)};qn.useInsertionEffect=function(e,t){return Za.current.useInsertionEffect(e,t)};qn.useLayoutEffect=function(e,t){return Za.current.useLayoutEffect(e,t)};qn.useMemo=function(e,t){return Za.current.useMemo(e,t)};qn.useReducer=function(e,t,n){return Za.current.useReducer(e,t,n)};qn.useRef=function(e){return Za.current.useRef(e)};qn.useState=function(e){return Za.current.useState(e)};qn.useSyncExternalStore=function(e,t,n){return Za.current.useSyncExternalStore(e,t,n)};qn.useTransition=function(){return Za.current.useTransition()};qn.version="18.2.0";vwe.exports=qn;var P=vwe.exports;const j=Pl(P),o1=lWe({__proto__:null,default:j},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AWe=P,CWe=Symbol.for("react.element"),IWe=Symbol.for("react.fragment"),OWe=Object.prototype.hasOwnProperty,PWe=AWe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kWe={key:!0,ref:!0,__self:!0,__source:!0};function Awe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)OWe.call(t,r)&&!kWe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:CWe,type:e,key:s,ref:o,props:i,_owner:PWe.current}}d6.Fragment=IWe;d6.jsx=Awe;d6.jsxs=Awe;ywe.exports=d6;var $=ywe.exports,y7={},Cwe={exports:{}},kl={},Iwe={exports:{}},Owe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,Y){var q=H.length;H.push(Y);e:for(;0<q;){var D=q-1>>>1,M=H[D];if(0<i(M,Y))H[D]=Y,H[q]=M,q=D;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],q=H.pop();if(q!==Y){H[0]=q;e:for(var D=0,M=H.length,W=M>>>1;D<W;){var z=2*(D+1)-1,V=H[z],te=z+1,le=H[te];if(0>i(V,q))te<M&&0>i(le,V)?(H[D]=le,H[te]=q,D=te):(H[D]=V,H[z]=q,D=z);else if(te<M&&0>i(le,q))H[D]=le,H[te]=q,D=te;else break e}}return Y}function i(H,Y){var q=H.sortIndex-Y.sortIndex;return q!==0?q:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var Y=n(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=H)r(l),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(l)}}function w(H){if(m=!1,_(H),!p)if(n(u)!==null)p=!0,U(x);else{var Y=n(l);Y!==null&&G(w,Y.startTime-H)}}function x(H,Y){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var q=d;try{for(_(Y),f=n(u);f!==null&&(!(f.expirationTime>Y)||H&&!O());){var D=f.callback;if(typeof D=="function"){f.callback=null,d=f.priorityLevel;var M=D(f.expirationTime<=Y);Y=e.unstable_now(),typeof M=="function"?f.callback=M:f===n(u)&&r(u),_(Y)}else r(u);f=n(u)}if(f!==null)var W=!0;else{var z=n(l);z!==null&&G(w,z.startTime-Y),W=!1}return W}finally{f=null,d=q,h=!1}}var E=!1,b=null,T=-1,C=5,A=-1;function O(){return!(e.unstable_now()-A<C)}function N(){if(b!==null){var H=e.unstable_now();A=H;var Y=!0;try{Y=b(!0,H)}finally{Y?k():(E=!1,b=null)}}else E=!1}var k;if(typeof v=="function")k=function(){v(N)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=N,k=function(){B.postMessage(null)}}else k=function(){g(N,0)};function U(H){b=H,E||(E=!0,k())}function G(H,Y){T=g(function(){H(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,U(x))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(H){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var q=d;d=Y;try{return H()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=d;d=H;try{return Y()}finally{d=q}},e.unstable_scheduleCallback=function(H,Y,q){var D=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?D+q:D):q=D,H){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=q+M,H={id:c++,callback:Y,priorityLevel:H,startTime:q,expirationTime:M,sortIndex:-1},q>D?(H.sortIndex=q,t(l,H),n(u)===null&&H===n(l)&&(m?(y(T),T=-1):m=!0,G(w,q-D))):(H.sortIndex=M,t(u,H),p||h||(p=!0,U(x))),H},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(H){var Y=d;return function(){var q=d;d=Y;try{return H.apply(this,arguments)}finally{d=q}}}})(Owe);Iwe.exports=Owe;var $We=Iwe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pwe=P,bl=$We;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kwe=new Set,hA={};function K1(e,t){Fw(e,t),Fw(e+"Capture",t)}function Fw(e,t){for(hA[e]=t,e=0;e<t.length;e++)kwe.add(t[e])}var Bp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v7=Object.prototype.hasOwnProperty,RWe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zie={},ese={};function NWe(e){return v7.call(ese,e)?!0:v7.call(Zie,e)?!1:RWe.test(e)?ese[e]=!0:(Zie[e]=!0,!1)}function DWe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MWe(e,t,n,r){if(t===null||typeof t>"u"||DWe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function eu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var No={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){No[e]=new eu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];No[t]=new eu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){No[e]=new eu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){No[e]=new eu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){No[e]=new eu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){No[e]=new eu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){No[e]=new eu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){No[e]=new eu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){No[e]=new eu(e,5,!1,e.toLowerCase(),null,!1,!1)});var lG=/[\-:]([a-z])/g;function cG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lG,cG);No[t]=new eu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lG,cG);No[t]=new eu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lG,cG);No[t]=new eu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){No[e]=new eu(e,1,!1,e.toLowerCase(),null,!1,!1)});No.xlinkHref=new eu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){No[e]=new eu(e,1,!1,e.toLowerCase(),null,!0,!0)});function fG(e,t,n,r){var i=No.hasOwnProperty(t)?No[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MWe(t,n,i,r)&&(n=null),r||i===null?NWe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var dm=Pwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oP=Symbol.for("react.element"),xb=Symbol.for("react.portal"),Tb=Symbol.for("react.fragment"),dG=Symbol.for("react.strict_mode"),_7=Symbol.for("react.profiler"),$we=Symbol.for("react.provider"),Rwe=Symbol.for("react.context"),hG=Symbol.for("react.forward_ref"),b7=Symbol.for("react.suspense"),w7=Symbol.for("react.suspense_list"),pG=Symbol.for("react.memo"),Jm=Symbol.for("react.lazy"),Nwe=Symbol.for("react.offscreen"),tse=Symbol.iterator;function px(e){return e===null||typeof e!="object"?null:(e=tse&&e[tse]||e["@@iterator"],typeof e=="function"?e:null)}var ji=Object.assign,o9;function _T(e){if(o9===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);o9=t&&t[1]||""}return`
`+o9+e}var a9=!1;function u9(e,t){if(!e||a9)return"";a9=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{a9=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_T(e):""}function LWe(e){switch(e.tag){case 5:return _T(e.type);case 16:return _T("Lazy");case 13:return _T("Suspense");case 19:return _T("SuspenseList");case 0:case 2:case 15:return e=u9(e.type,!1),e;case 11:return e=u9(e.type.render,!1),e;case 1:return e=u9(e.type,!0),e;default:return""}}function E7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tb:return"Fragment";case xb:return"Portal";case _7:return"Profiler";case dG:return"StrictMode";case b7:return"Suspense";case w7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rwe:return(e.displayName||"Context")+".Consumer";case $we:return(e._context.displayName||"Context")+".Provider";case hG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pG:return t=e.displayName||null,t!==null?t:E7(e.type)||"Memo";case Jm:t=e._payload,e=e._init;try{return E7(e(t))}catch{}}return null}function FWe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E7(t);case 8:return t===dG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function u0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dwe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BWe(e){var t=Dwe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function aP(e){e._valueTracker||(e._valueTracker=BWe(e))}function Mwe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dwe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function RR(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function S7(e,t){var n=t.checked;return ji({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nse(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=u0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lwe(e,t){t=t.checked,t!=null&&fG(e,"checked",t,!1)}function x7(e,t){Lwe(e,t);var n=u0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?T7(e,t.type,n):t.hasOwnProperty("defaultValue")&&T7(e,t.type,u0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rse(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function T7(e,t,n){(t!=="number"||RR(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bT=Array.isArray;function Zb(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+u0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function A7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return ji({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ise(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(bT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:u0(n)}}function Fwe(e,t){var n=u0(t.value),r=u0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sse(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bwe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bwe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uP,jwe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uP=uP||document.createElement("div"),uP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var f2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jWe=["Webkit","ms","Moz","O"];Object.keys(f2).forEach(function(e){jWe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),f2[t]=f2[e]})});function Uwe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||f2.hasOwnProperty(e)&&f2[e]?(""+t).trim():t+"px"}function zwe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Uwe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var UWe=ji({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I7(e,t){if(t){if(UWe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function O7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P7=null;function mG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var k7=null,ew=null,tw=null;function ose(e){if(e=nI(e)){if(typeof k7!="function")throw Error(et(280));var t=e.stateNode;t&&(t=y6(t),k7(e.stateNode,e.type,t))}}function Vwe(e){ew?tw?tw.push(e):tw=[e]:ew=e}function Hwe(){if(ew){var e=ew,t=tw;if(tw=ew=null,ose(e),t)for(e=0;e<t.length;e++)ose(t[e])}}function qwe(e,t){return e(t)}function Wwe(){}var l9=!1;function Gwe(e,t,n){if(l9)return e(t,n);l9=!0;try{return qwe(e,t,n)}finally{l9=!1,(ew!==null||tw!==null)&&(Wwe(),Hwe())}}function mA(e,t){var n=e.stateNode;if(n===null)return null;var r=y6(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var $7=!1;if(Bp)try{var mx={};Object.defineProperty(mx,"passive",{get:function(){$7=!0}}),window.addEventListener("test",mx,mx),window.removeEventListener("test",mx,mx)}catch{$7=!1}function zWe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var d2=!1,NR=null,DR=!1,R7=null,VWe={onError:function(e){d2=!0,NR=e}};function HWe(e,t,n,r,i,s,o,a,u){d2=!1,NR=null,zWe.apply(VWe,arguments)}function qWe(e,t,n,r,i,s,o,a,u){if(HWe.apply(this,arguments),d2){if(d2){var l=NR;d2=!1,NR=null}else throw Error(et(198));DR||(DR=!0,R7=l)}}function X1(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ywe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ase(e){if(X1(e)!==e)throw Error(et(188))}function WWe(e){var t=e.alternate;if(!t){if(t=X1(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ase(i),e;if(s===r)return ase(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function Kwe(e){return e=WWe(e),e!==null?Xwe(e):null}function Xwe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xwe(e);if(t!==null)return t;e=e.sibling}return null}var Qwe=bl.unstable_scheduleCallback,use=bl.unstable_cancelCallback,GWe=bl.unstable_shouldYield,YWe=bl.unstable_requestPaint,os=bl.unstable_now,KWe=bl.unstable_getCurrentPriorityLevel,gG=bl.unstable_ImmediatePriority,Jwe=bl.unstable_UserBlockingPriority,MR=bl.unstable_NormalPriority,XWe=bl.unstable_LowPriority,Zwe=bl.unstable_IdlePriority,h6=null,kd=null;function QWe(e){if(kd&&typeof kd.onCommitFiberRoot=="function")try{kd.onCommitFiberRoot(h6,e,void 0,(e.current.flags&128)===128)}catch{}}var pf=Math.clz32?Math.clz32:eGe,JWe=Math.log,ZWe=Math.LN2;function eGe(e){return e>>>=0,e===0?32:31-(JWe(e)/ZWe|0)|0}var lP=64,cP=4194304;function wT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function LR(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=wT(a):(s&=o,s!==0&&(r=wT(s)))}else o=n&~i,o!==0?r=wT(o):s!==0&&(r=wT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-pf(t),i=1<<n,r|=e[n],t&=~i;return r}function tGe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nGe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-pf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=tGe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function N7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eEe(){var e=lP;return lP<<=1,!(lP&4194240)&&(lP=64),e}function c9(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pf(t),e[t]=n}function rGe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-pf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function yG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Mr=0;function tEe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nEe,vG,rEe,iEe,sEe,D7=!1,fP=[],Dg=null,Mg=null,Lg=null,gA=new Map,yA=new Map,ug=[],iGe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lse(e,t){switch(e){case"focusin":case"focusout":Dg=null;break;case"dragenter":case"dragleave":Mg=null;break;case"mouseover":case"mouseout":Lg=null;break;case"pointerover":case"pointerout":gA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yA.delete(t.pointerId)}}function gx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=nI(t),t!==null&&vG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function sGe(e,t,n,r,i){switch(t){case"focusin":return Dg=gx(Dg,e,t,n,r,i),!0;case"dragenter":return Mg=gx(Mg,e,t,n,r,i),!0;case"mouseover":return Lg=gx(Lg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gA.set(s,gx(gA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yA.set(s,gx(yA.get(s)||null,e,t,n,r,i)),!0}return!1}function oEe(e){var t=vv(e.target);if(t!==null){var n=X1(t);if(n!==null){if(t=n.tag,t===13){if(t=Ywe(n),t!==null){e.blockedOn=t,sEe(e.priority,function(){rEe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function o$(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=M7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);P7=r,n.target.dispatchEvent(r),P7=null}else return t=nI(n),t!==null&&vG(t),e.blockedOn=n,!1;t.shift()}return!0}function cse(e,t,n){o$(e)&&n.delete(t)}function oGe(){D7=!1,Dg!==null&&o$(Dg)&&(Dg=null),Mg!==null&&o$(Mg)&&(Mg=null),Lg!==null&&o$(Lg)&&(Lg=null),gA.forEach(cse),yA.forEach(cse)}function yx(e,t){e.blockedOn===t&&(e.blockedOn=null,D7||(D7=!0,bl.unstable_scheduleCallback(bl.unstable_NormalPriority,oGe)))}function vA(e){function t(i){return yx(i,e)}if(0<fP.length){yx(fP[0],e);for(var n=1;n<fP.length;n++){var r=fP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Dg!==null&&yx(Dg,e),Mg!==null&&yx(Mg,e),Lg!==null&&yx(Lg,e),gA.forEach(t),yA.forEach(t),n=0;n<ug.length;n++)r=ug[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ug.length&&(n=ug[0],n.blockedOn===null);)oEe(n),n.blockedOn===null&&ug.shift()}var nw=dm.ReactCurrentBatchConfig,FR=!0;function aGe(e,t,n,r){var i=Mr,s=nw.transition;nw.transition=null;try{Mr=1,_G(e,t,n,r)}finally{Mr=i,nw.transition=s}}function uGe(e,t,n,r){var i=Mr,s=nw.transition;nw.transition=null;try{Mr=4,_G(e,t,n,r)}finally{Mr=i,nw.transition=s}}function _G(e,t,n,r){if(FR){var i=M7(e,t,n,r);if(i===null)b9(e,t,r,BR,n),lse(e,r);else if(sGe(i,e,t,n,r))r.stopPropagation();else if(lse(e,r),t&4&&-1<iGe.indexOf(e)){for(;i!==null;){var s=nI(i);if(s!==null&&nEe(s),s=M7(e,t,n,r),s===null&&b9(e,t,r,BR,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else b9(e,t,r,null,n)}}var BR=null;function M7(e,t,n,r){if(BR=null,e=mG(r),e=vv(e),e!==null)if(t=X1(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ywe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return BR=e,null}function aEe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KWe()){case gG:return 1;case Jwe:return 4;case MR:case XWe:return 16;case Zwe:return 536870912;default:return 16}default:return 16}}var vg=null,bG=null,a$=null;function uEe(){if(a$)return a$;var e,t=bG,n=t.length,r,i="value"in vg?vg.value:vg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return a$=i.slice(e,1<r?1-r:void 0)}function u$(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dP(){return!0}function fse(){return!1}function $l(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dP:fse,this.isPropagationStopped=fse,this}return ji(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dP)},persist:function(){},isPersistent:dP}),t}var nS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wG=$l(nS),tI=ji({},nS,{view:0,detail:0}),lGe=$l(tI),f9,d9,vx,p6=ji({},tI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vx&&(vx&&e.type==="mousemove"?(f9=e.screenX-vx.screenX,d9=e.screenY-vx.screenY):d9=f9=0,vx=e),f9)},movementY:function(e){return"movementY"in e?e.movementY:d9}}),dse=$l(p6),cGe=ji({},p6,{dataTransfer:0}),fGe=$l(cGe),dGe=ji({},tI,{relatedTarget:0}),h9=$l(dGe),hGe=ji({},nS,{animationName:0,elapsedTime:0,pseudoElement:0}),pGe=$l(hGe),mGe=ji({},nS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gGe=$l(mGe),yGe=ji({},nS,{data:0}),hse=$l(yGe),vGe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_Ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bGe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wGe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bGe[e])?!!t[e]:!1}function EG(){return wGe}var EGe=ji({},tI,{key:function(e){if(e.key){var t=vGe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=u$(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_Ge[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EG,charCode:function(e){return e.type==="keypress"?u$(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?u$(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SGe=$l(EGe),xGe=ji({},p6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pse=$l(xGe),TGe=ji({},tI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EG}),AGe=$l(TGe),CGe=ji({},nS,{propertyName:0,elapsedTime:0,pseudoElement:0}),IGe=$l(CGe),OGe=ji({},p6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PGe=$l(OGe),kGe=[9,13,27,32],SG=Bp&&"CompositionEvent"in window,h2=null;Bp&&"documentMode"in document&&(h2=document.documentMode);var $Ge=Bp&&"TextEvent"in window&&!h2,lEe=Bp&&(!SG||h2&&8<h2&&11>=h2),mse=" ",gse=!1;function cEe(e,t){switch(e){case"keyup":return kGe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fEe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ab=!1;function RGe(e,t){switch(e){case"compositionend":return fEe(t);case"keypress":return t.which!==32?null:(gse=!0,mse);case"textInput":return e=t.data,e===mse&&gse?null:e;default:return null}}function NGe(e,t){if(Ab)return e==="compositionend"||!SG&&cEe(e,t)?(e=uEe(),a$=bG=vg=null,Ab=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lEe&&t.locale!=="ko"?null:t.data;default:return null}}var DGe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DGe[e.type]:t==="textarea"}function dEe(e,t,n,r){Vwe(r),t=jR(t,"onChange"),0<t.length&&(n=new wG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var p2=null,_A=null;function MGe(e){SEe(e,0)}function m6(e){var t=Ob(e);if(Mwe(t))return e}function LGe(e,t){if(e==="change")return t}var hEe=!1;if(Bp){var p9;if(Bp){var m9="oninput"in document;if(!m9){var vse=document.createElement("div");vse.setAttribute("oninput","return;"),m9=typeof vse.oninput=="function"}p9=m9}else p9=!1;hEe=p9&&(!document.documentMode||9<document.documentMode)}function _se(){p2&&(p2.detachEvent("onpropertychange",pEe),_A=p2=null)}function pEe(e){if(e.propertyName==="value"&&m6(_A)){var t=[];dEe(t,_A,e,mG(e)),Gwe(MGe,t)}}function FGe(e,t,n){e==="focusin"?(_se(),p2=t,_A=n,p2.attachEvent("onpropertychange",pEe)):e==="focusout"&&_se()}function BGe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return m6(_A)}function jGe(e,t){if(e==="click")return m6(t)}function UGe(e,t){if(e==="input"||e==="change")return m6(t)}function zGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ef=typeof Object.is=="function"?Object.is:zGe;function bA(e,t){if(Ef(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!v7.call(t,i)||!Ef(e[i],t[i]))return!1}return!0}function bse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wse(e,t){var n=bse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bse(n)}}function mEe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mEe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gEe(){for(var e=window,t=RR();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=RR(e.document)}return t}function xG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function VGe(e){var t=gEe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mEe(n.ownerDocument.documentElement,n)){if(r!==null&&xG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=wse(n,s);var o=wse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HGe=Bp&&"documentMode"in document&&11>=document.documentMode,Cb=null,L7=null,m2=null,F7=!1;function Ese(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;F7||Cb==null||Cb!==RR(r)||(r=Cb,"selectionStart"in r&&xG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),m2&&bA(m2,r)||(m2=r,r=jR(L7,"onSelect"),0<r.length&&(t=new wG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cb)))}function hP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ib={animationend:hP("Animation","AnimationEnd"),animationiteration:hP("Animation","AnimationIteration"),animationstart:hP("Animation","AnimationStart"),transitionend:hP("Transition","TransitionEnd")},g9={},yEe={};Bp&&(yEe=document.createElement("div").style,"AnimationEvent"in window||(delete Ib.animationend.animation,delete Ib.animationiteration.animation,delete Ib.animationstart.animation),"TransitionEvent"in window||delete Ib.transitionend.transition);function g6(e){if(g9[e])return g9[e];if(!Ib[e])return e;var t=Ib[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yEe)return g9[e]=t[n];return e}var vEe=g6("animationend"),_Ee=g6("animationiteration"),bEe=g6("animationstart"),wEe=g6("transitionend"),EEe=new Map,Sse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Y0(e,t){EEe.set(e,t),K1(t,[e])}for(var y9=0;y9<Sse.length;y9++){var v9=Sse[y9],qGe=v9.toLowerCase(),WGe=v9[0].toUpperCase()+v9.slice(1);Y0(qGe,"on"+WGe)}Y0(vEe,"onAnimationEnd");Y0(_Ee,"onAnimationIteration");Y0(bEe,"onAnimationStart");Y0("dblclick","onDoubleClick");Y0("focusin","onFocus");Y0("focusout","onBlur");Y0(wEe,"onTransitionEnd");Fw("onMouseEnter",["mouseout","mouseover"]);Fw("onMouseLeave",["mouseout","mouseover"]);Fw("onPointerEnter",["pointerout","pointerover"]);Fw("onPointerLeave",["pointerout","pointerover"]);K1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));K1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));K1("onBeforeInput",["compositionend","keypress","textInput","paste"]);K1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));K1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));K1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ET="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GGe=new Set("cancel close invalid load scroll toggle".split(" ").concat(ET));function xse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qWe(r,t,void 0,e),e.currentTarget=null}function SEe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;xse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;xse(i,a,l),s=u}}}if(DR)throw e=R7,DR=!1,R7=null,e}function di(e,t){var n=t[V7];n===void 0&&(n=t[V7]=new Set);var r=e+"__bubble";n.has(r)||(xEe(t,e,2,!1),n.add(r))}function _9(e,t,n){var r=0;t&&(r|=4),xEe(n,e,r,t)}var pP="_reactListening"+Math.random().toString(36).slice(2);function wA(e){if(!e[pP]){e[pP]=!0,kwe.forEach(function(n){n!=="selectionchange"&&(GGe.has(n)||_9(n,!1,e),_9(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pP]||(t[pP]=!0,_9("selectionchange",!1,t))}}function xEe(e,t,n,r){switch(aEe(t)){case 1:var i=aGe;break;case 4:i=uGe;break;default:i=_G}n=i.bind(null,t,n,e),i=void 0,!$7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function b9(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Gwe(function(){var l=s,c=mG(n),f=[];e:{var d=EEe.get(e);if(d!==void 0){var h=wG,p=e;switch(e){case"keypress":if(u$(n)===0)break e;case"keydown":case"keyup":h=SGe;break;case"focusin":p="focus",h=h9;break;case"focusout":p="blur",h=h9;break;case"beforeblur":case"afterblur":h=h9;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=dse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=fGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=AGe;break;case vEe:case _Ee:case bEe:h=pGe;break;case wEe:h=IGe;break;case"scroll":h=lGe;break;case"wheel":h=PGe;break;case"copy":case"cut":case"paste":h=gGe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=pse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=mA(v,y),w!=null&&m.push(EA(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==P7&&(p=n.relatedTarget||n.fromElement)&&(vv(p)||p[jp]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?vv(p):null,p!==null&&(g=X1(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=dse,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=pse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Ob(h),_=p==null?d:Ob(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,vv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=F_(_))v++;for(_=0,w=y;w;w=F_(w))_++;for(;0<v-_;)m=F_(m),v--;for(;0<_-v;)y=F_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=F_(m),y=F_(y)}m=null}else m=null;h!==null&&Tse(f,d,h,m,!1),p!==null&&g!==null&&Tse(f,g,p,m,!0)}}e:{if(d=l?Ob(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=LGe;else if(yse(d))if(hEe)x=UGe;else{x=BGe;var E=FGe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=jGe);if(x&&(x=x(e,l))){dEe(f,x,n,c);break e}E&&E(e,d,l),e==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&T7(d,"number",d.value)}switch(E=l?Ob(l):window,e){case"focusin":(yse(E)||E.contentEditable==="true")&&(Cb=E,L7=l,m2=null);break;case"focusout":m2=L7=Cb=null;break;case"mousedown":F7=!0;break;case"contextmenu":case"mouseup":case"dragend":F7=!1,Ese(f,n,c);break;case"selectionchange":if(HGe)break;case"keydown":case"keyup":Ese(f,n,c)}var b;if(SG)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ab?cEe(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(lEe&&n.locale!=="ko"&&(Ab||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ab&&(b=uEe()):(vg=c,bG="value"in vg?vg.value:vg.textContent,Ab=!0)),E=jR(l,T),0<E.length&&(T=new hse(T,e,null,n,c),f.push({event:T,listeners:E}),b?T.data=b:(b=fEe(n),b!==null&&(T.data=b)))),(b=$Ge?RGe(e,n):NGe(e,n))&&(l=jR(l,"onBeforeInput"),0<l.length&&(c=new hse("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=b))}SEe(f,t)})}function EA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mA(e,n),s!=null&&r.unshift(EA(e,s,i)),s=mA(e,t),s!=null&&r.push(EA(e,s,i))),e=e.return}return r}function F_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=mA(n,s),u!=null&&o.unshift(EA(n,u,a))):i||(u=mA(n,s),u!=null&&o.push(EA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var YGe=/\r\n?/g,KGe=/\u0000|\uFFFD/g;function Ase(e){return(typeof e=="string"?e:""+e).replace(YGe,`
`).replace(KGe,"")}function mP(e,t,n){if(t=Ase(t),Ase(e)!==t&&n)throw Error(et(425))}function UR(){}var B7=null,j7=null;function U7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z7=typeof setTimeout=="function"?setTimeout:void 0,XGe=typeof clearTimeout=="function"?clearTimeout:void 0,Cse=typeof Promise=="function"?Promise:void 0,QGe=typeof queueMicrotask=="function"?queueMicrotask:typeof Cse<"u"?function(e){return Cse.resolve(null).then(e).catch(JGe)}:z7;function JGe(e){setTimeout(function(){throw e})}function w9(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),vA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vA(t)}function Fg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ise(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rS=Math.random().toString(36).slice(2),hd="__reactFiber$"+rS,SA="__reactProps$"+rS,jp="__reactContainer$"+rS,V7="__reactEvents$"+rS,ZGe="__reactListeners$"+rS,eYe="__reactHandles$"+rS;function vv(e){var t=e[hd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jp]||n[hd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ise(e);e!==null;){if(n=e[hd])return n;e=Ise(e)}return t}e=n,n=e.parentNode}return null}function nI(e){return e=e[hd]||e[jp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ob(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function y6(e){return e[SA]||null}var H7=[],Pb=-1;function K0(e){return{current:e}}function _i(e){0>Pb||(e.current=H7[Pb],H7[Pb]=null,Pb--)}function ui(e,t){Pb++,H7[Pb]=e.current,e.current=t}var l0={},ga=K0(l0),Iu=K0(!1),a1=l0;function Bw(e,t){var n=e.type.contextTypes;if(!n)return l0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ou(e){return e=e.childContextTypes,e!=null}function zR(){_i(Iu),_i(ga)}function Ose(e,t,n){if(ga.current!==l0)throw Error(et(168));ui(ga,t),ui(Iu,n)}function TEe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,FWe(e)||"Unknown",i));return ji({},n,r)}function VR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||l0,a1=ga.current,ui(ga,e),ui(Iu,Iu.current),!0}function Pse(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=TEe(e,t,a1),r.__reactInternalMemoizedMergedChildContext=e,_i(Iu),_i(ga),ui(ga,e)):_i(Iu),ui(Iu,n)}var Jh=null,v6=!1,E9=!1;function AEe(e){Jh===null?Jh=[e]:Jh.push(e)}function tYe(e){v6=!0,AEe(e)}function X0(){if(!E9&&Jh!==null){E9=!0;var e=0,t=Mr;try{var n=Jh;for(Mr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Jh=null,v6=!1}catch(i){throw Jh!==null&&(Jh=Jh.slice(e+1)),Qwe(gG,X0),i}finally{Mr=t,E9=!1}}return null}var kb=[],$b=0,HR=null,qR=0,Gl=[],Yl=0,u1=null,cp=1,fp="";function Hy(e,t){kb[$b++]=qR,kb[$b++]=HR,HR=e,qR=t}function CEe(e,t,n){Gl[Yl++]=cp,Gl[Yl++]=fp,Gl[Yl++]=u1,u1=e;var r=cp;e=fp;var i=32-pf(r)-1;r&=~(1<<i),n+=1;var s=32-pf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cp=1<<32-pf(t)+i|n<<i|r,fp=s+e}else cp=1<<s|n<<i|r,fp=e}function TG(e){e.return!==null&&(Hy(e,1),CEe(e,1,0))}function AG(e){for(;e===HR;)HR=kb[--$b],kb[$b]=null,qR=kb[--$b],kb[$b]=null;for(;e===u1;)u1=Gl[--Yl],Gl[Yl]=null,fp=Gl[--Yl],Gl[Yl]=null,cp=Gl[--Yl],Gl[Yl]=null}var pl=null,ul=null,Oi=!1,Jc=null;function IEe(e,t){var n=tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function kse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pl=e,ul=Fg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pl=e,ul=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=u1!==null?{id:cp,overflow:fp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=tc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,pl=e,ul=null,!0):!1;default:return!1}}function q7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function W7(e){if(Oi){var t=ul;if(t){var n=t;if(!kse(e,t)){if(q7(e))throw Error(et(418));t=Fg(n.nextSibling);var r=pl;t&&kse(e,t)?IEe(r,n):(e.flags=e.flags&-4097|2,Oi=!1,pl=e)}}else{if(q7(e))throw Error(et(418));e.flags=e.flags&-4097|2,Oi=!1,pl=e}}}function $se(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pl=e}function gP(e){if(e!==pl)return!1;if(!Oi)return $se(e),Oi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!U7(e.type,e.memoizedProps)),t&&(t=ul)){if(q7(e))throw OEe(),Error(et(418));for(;t;)IEe(e,t),t=Fg(t.nextSibling)}if($se(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ul=Fg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ul=null}}else ul=pl?Fg(e.stateNode.nextSibling):null;return!0}function OEe(){for(var e=ul;e;)e=Fg(e.nextSibling)}function jw(){ul=pl=null,Oi=!1}function CG(e){Jc===null?Jc=[e]:Jc.push(e)}var nYe=dm.ReactCurrentBatchConfig;function Wc(e,t){if(e&&e.defaultProps){t=ji({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var WR=K0(null),GR=null,Rb=null,IG=null;function OG(){IG=Rb=GR=null}function PG(e){var t=WR.current;_i(WR),e._currentValue=t}function G7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rw(e,t){GR=e,IG=Rb=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Su=!0),e.firstContext=null)}function cc(e){var t=e._currentValue;if(IG!==e)if(e={context:e,memoizedValue:t,next:null},Rb===null){if(GR===null)throw Error(et(308));Rb=e,GR.dependencies={lanes:0,firstContext:e}}else Rb=Rb.next=e;return t}var _v=null;function kG(e){_v===null?_v=[e]:_v.push(e)}function PEe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,kG(t)):(n.next=i.next,i.next=n),t.interleaved=n,Up(e,r)}function Up(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zm=!1;function $G(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kEe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,cr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Up(e,n)}return i=r.interleaved,i===null?(t.next=t,kG(r)):(t.next=i.next,i.next=t),r.interleaved=t,Up(e,n)}function l$(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yG(e,n)}}function Rse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function YR(e,t,n,r){var i=e.updateQueue;Zm=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=ji({},f,d);break e;case 2:Zm=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);c1|=o,e.lanes=o,e.memoizedState=f}}function Nse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var $Ee=new Pwe.Component().refs;function Y7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ji({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _6={isMounted:function(e){return(e=e._reactInternals)?X1(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ua(),i=Ug(e),s=xp(r,i);s.payload=t,n!=null&&(s.callback=n),t=Bg(e,s,i),t!==null&&(mf(t,e,i,r),l$(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ua(),i=Ug(e),s=xp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Bg(e,s,i),t!==null&&(mf(t,e,i,r),l$(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ua(),r=Ug(e),i=xp(n,r);i.tag=2,t!=null&&(i.callback=t),t=Bg(e,i,r),t!==null&&(mf(t,e,r,n),l$(t,e,r))}};function Dse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!bA(n,r)||!bA(i,s):!0}function REe(e,t,n){var r=!1,i=l0,s=t.contextType;return typeof s=="object"&&s!==null?s=cc(s):(i=Ou(t)?a1:ga.current,r=t.contextTypes,s=(r=r!=null)?Bw(e,i):l0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Mse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_6.enqueueReplaceState(t,t.state,null)}function K7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=$Ee,$G(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=cc(s):(s=Ou(t)?a1:ga.current,i.context=Bw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Y7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_6.enqueueReplaceState(i,i.state,null),YR(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function _x(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===$Ee&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function yP(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lse(e){var t=e._init;return t(e._payload)}function NEe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=zg(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=O9(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var x=_.type;return x===Tb?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Jm&&Lse(x)===v.type)?(w=i(v,_.props),w.ref=_x(y,v,_),w.return=y,w):(w=m$(_.type,_.key,_.props,null,y.mode,w),w.ref=_x(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=P9(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,x){return v===null||v.tag!==7?(v=Bv(_,y.mode,w,x),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=O9(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oP:return _=m$(v.type,v.key,v.props,null,y.mode,_),_.ref=_x(y,null,v),_.return=y,_;case xb:return v=P9(v,y.mode,_),v.return=y,v;case Jm:var w=v._init;return f(y,w(v._payload),_)}if(bT(v)||px(v))return v=Bv(v,y.mode,_,null),v.return=y,v;yP(y,v)}return null}function d(y,v,_,w){var x=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case oP:return _.key===x?u(y,v,_,w):null;case xb:return _.key===x?l(y,v,_,w):null;case Jm:return x=_._init,d(y,v,x(_._payload),w)}if(bT(_)||px(_))return x!==null?null:c(y,v,_,w,null);yP(y,_)}return null}function h(y,v,_,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oP:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,x);case xb:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,x);case Jm:var E=w._init;return h(y,v,_,E(w._payload),x)}if(bT(w)||px(w))return y=y.get(_)||null,c(v,y,w,x,null);yP(v,w)}return null}function p(y,v,_,w){for(var x=null,E=null,b=v,T=v=0,C=null;b!==null&&T<_.length;T++){b.index>T?(C=b,b=null):C=b.sibling;var A=d(y,b,_[T],w);if(A===null){b===null&&(b=C);break}e&&b&&A.alternate===null&&t(y,b),v=s(A,v,T),E===null?x=A:E.sibling=A,E=A,b=C}if(T===_.length)return n(y,b),Oi&&Hy(y,T),x;if(b===null){for(;T<_.length;T++)b=f(y,_[T],w),b!==null&&(v=s(b,v,T),E===null?x=b:E.sibling=b,E=b);return Oi&&Hy(y,T),x}for(b=r(y,b);T<_.length;T++)C=h(b,y,T,_[T],w),C!==null&&(e&&C.alternate!==null&&b.delete(C.key===null?T:C.key),v=s(C,v,T),E===null?x=C:E.sibling=C,E=C);return e&&b.forEach(function(O){return t(y,O)}),Oi&&Hy(y,T),x}function m(y,v,_,w){var x=px(_);if(typeof x!="function")throw Error(et(150));if(_=x.call(_),_==null)throw Error(et(151));for(var E=x=null,b=v,T=v=0,C=null,A=_.next();b!==null&&!A.done;T++,A=_.next()){b.index>T?(C=b,b=null):C=b.sibling;var O=d(y,b,A.value,w);if(O===null){b===null&&(b=C);break}e&&b&&O.alternate===null&&t(y,b),v=s(O,v,T),E===null?x=O:E.sibling=O,E=O,b=C}if(A.done)return n(y,b),Oi&&Hy(y,T),x;if(b===null){for(;!A.done;T++,A=_.next())A=f(y,A.value,w),A!==null&&(v=s(A,v,T),E===null?x=A:E.sibling=A,E=A);return Oi&&Hy(y,T),x}for(b=r(y,b);!A.done;T++,A=_.next())A=h(b,y,T,A.value,w),A!==null&&(e&&A.alternate!==null&&b.delete(A.key===null?T:A.key),v=s(A,v,T),E===null?x=A:E.sibling=A,E=A);return e&&b.forEach(function(N){return t(y,N)}),Oi&&Hy(y,T),x}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===Tb&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case oP:e:{for(var x=_.key,E=v;E!==null;){if(E.key===x){if(x=_.type,x===Tb){if(E.tag===7){n(y,E.sibling),v=i(E,_.props.children),v.return=y,y=v;break e}}else if(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Jm&&Lse(x)===E.type){n(y,E.sibling),v=i(E,_.props),v.ref=_x(y,E,_),v.return=y,y=v;break e}n(y,E);break}else t(y,E);E=E.sibling}_.type===Tb?(v=Bv(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=m$(_.type,_.key,_.props,null,y.mode,w),w.ref=_x(y,v,_),w.return=y,y=w)}return o(y);case xb:e:{for(E=_.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=P9(_,y.mode,w),v.return=y,y=v}return o(y);case Jm:return E=_._init,g(y,v,E(_._payload),w)}if(bT(_))return p(y,v,_,w);if(px(_))return m(y,v,_,w);yP(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=O9(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Uw=NEe(!0),DEe=NEe(!1),rI={},$d=K0(rI),xA=K0(rI),TA=K0(rI);function bv(e){if(e===rI)throw Error(et(174));return e}function RG(e,t){switch(ui(TA,t),ui(xA,e),ui($d,rI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C7(t,e)}_i($d),ui($d,t)}function zw(){_i($d),_i(xA),_i(TA)}function MEe(e){bv(TA.current);var t=bv($d.current),n=C7(t,e.type);t!==n&&(ui(xA,e),ui($d,n))}function NG(e){xA.current===e&&(_i($d),_i(xA))}var Fi=K0(0);function KR(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var S9=[];function DG(){for(var e=0;e<S9.length;e++)S9[e]._workInProgressVersionPrimary=null;S9.length=0}var c$=dm.ReactCurrentDispatcher,x9=dm.ReactCurrentBatchConfig,l1=0,Bi=null,Ps=null,Qs=null,XR=!1,g2=!1,AA=0,rYe=0;function Vo(){throw Error(et(321))}function MG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ef(e[n],t[n]))return!1;return!0}function LG(e,t,n,r,i,s){if(l1=s,Bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,c$.current=e===null||e.memoizedState===null?aYe:uYe,e=n(r,i),g2){s=0;do{if(g2=!1,AA=0,25<=s)throw Error(et(301));s+=1,Qs=Ps=null,t.updateQueue=null,c$.current=lYe,e=n(r,i)}while(g2)}if(c$.current=QR,t=Ps!==null&&Ps.next!==null,l1=0,Qs=Ps=Bi=null,XR=!1,t)throw Error(et(300));return e}function FG(){var e=AA!==0;return AA=0,e}function ed(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?Bi.memoizedState=Qs=e:Qs=Qs.next=e,Qs}function fc(){if(Ps===null){var e=Bi.alternate;e=e!==null?e.memoizedState:null}else e=Ps.next;var t=Qs===null?Bi.memoizedState:Qs.next;if(t!==null)Qs=t,Ps=e;else{if(e===null)throw Error(et(310));Ps=e,e={memoizedState:Ps.memoizedState,baseState:Ps.baseState,baseQueue:Ps.baseQueue,queue:Ps.queue,next:null},Qs===null?Bi.memoizedState=Qs=e:Qs=Qs.next=e}return Qs}function CA(e,t){return typeof t=="function"?t(e):t}function T9(e){var t=fc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=Ps,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((l1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Bi.lanes|=c,c1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Ef(r,t.memoizedState)||(Su=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Bi.lanes|=s,c1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function A9(e){var t=fc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ef(s,t.memoizedState)||(Su=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function LEe(){}function FEe(e,t){var n=Bi,r=fc(),i=t(),s=!Ef(r.memoizedState,i);if(s&&(r.memoizedState=i,Su=!0),r=r.queue,BG(UEe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Qs!==null&&Qs.memoizedState.tag&1){if(n.flags|=2048,IA(9,jEe.bind(null,n,r,i,t),void 0,null),ao===null)throw Error(et(349));l1&30||BEe(n,t,i)}return i}function BEe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Bi.updateQueue,t===null?(t={lastEffect:null,stores:null},Bi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jEe(e,t,n,r){t.value=n,t.getSnapshot=r,zEe(t)&&VEe(e)}function UEe(e,t,n){return n(function(){zEe(t)&&VEe(e)})}function zEe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ef(e,n)}catch{return!0}}function VEe(e){var t=Up(e,1);t!==null&&mf(t,e,1,-1)}function Fse(e){var t=ed();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:CA,lastRenderedState:e},t.queue=e,e=e.dispatch=oYe.bind(null,Bi,e),[t.memoizedState,e]}function IA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Bi.updateQueue,t===null?(t={lastEffect:null,stores:null},Bi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function HEe(){return fc().memoizedState}function f$(e,t,n,r){var i=ed();Bi.flags|=e,i.memoizedState=IA(1|t,n,void 0,r===void 0?null:r)}function b6(e,t,n,r){var i=fc();r=r===void 0?null:r;var s=void 0;if(Ps!==null){var o=Ps.memoizedState;if(s=o.destroy,r!==null&&MG(r,o.deps)){i.memoizedState=IA(t,n,s,r);return}}Bi.flags|=e,i.memoizedState=IA(1|t,n,s,r)}function Bse(e,t){return f$(8390656,8,e,t)}function BG(e,t){return b6(2048,8,e,t)}function qEe(e,t){return b6(4,2,e,t)}function WEe(e,t){return b6(4,4,e,t)}function GEe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function YEe(e,t,n){return n=n!=null?n.concat([e]):null,b6(4,4,GEe.bind(null,t,e),n)}function jG(){}function KEe(e,t){var n=fc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&MG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function XEe(e,t){var n=fc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&MG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function QEe(e,t,n){return l1&21?(Ef(n,t)||(n=eEe(),Bi.lanes|=n,c1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Su=!0),e.memoizedState=n)}function iYe(e,t){var n=Mr;Mr=n!==0&&4>n?n:4,e(!0);var r=x9.transition;x9.transition={};try{e(!1),t()}finally{Mr=n,x9.transition=r}}function JEe(){return fc().memoizedState}function sYe(e,t,n){var r=Ug(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ZEe(e))eSe(t,n);else if(n=PEe(e,t,n,r),n!==null){var i=Ua();mf(n,e,r,i),tSe(n,t,r)}}function oYe(e,t,n){var r=Ug(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZEe(e))eSe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ef(a,o)){var u=t.interleaved;u===null?(i.next=i,kG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=PEe(e,t,i,r),n!==null&&(i=Ua(),mf(n,e,r,i),tSe(n,t,r))}}function ZEe(e){var t=e.alternate;return e===Bi||t!==null&&t===Bi}function eSe(e,t){g2=XR=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tSe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yG(e,n)}}var QR={readContext:cc,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},aYe={readContext:cc,useCallback:function(e,t){return ed().memoizedState=[e,t===void 0?null:t],e},useContext:cc,useEffect:Bse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,f$(4194308,4,GEe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return f$(4194308,4,e,t)},useInsertionEffect:function(e,t){return f$(4,2,e,t)},useMemo:function(e,t){var n=ed();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ed();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sYe.bind(null,Bi,e),[r.memoizedState,e]},useRef:function(e){var t=ed();return e={current:e},t.memoizedState=e},useState:Fse,useDebugValue:jG,useDeferredValue:function(e){return ed().memoizedState=e},useTransition:function(){var e=Fse(!1),t=e[0];return e=iYe.bind(null,e[1]),ed().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Bi,i=ed();if(Oi){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),ao===null)throw Error(et(349));l1&30||BEe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Bse(UEe.bind(null,r,s,e),[e]),r.flags|=2048,IA(9,jEe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ed(),t=ao.identifierPrefix;if(Oi){var n=fp,r=cp;n=(r&~(1<<32-pf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=AA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rYe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uYe={readContext:cc,useCallback:KEe,useContext:cc,useEffect:BG,useImperativeHandle:YEe,useInsertionEffect:qEe,useLayoutEffect:WEe,useMemo:XEe,useReducer:T9,useRef:HEe,useState:function(){return T9(CA)},useDebugValue:jG,useDeferredValue:function(e){var t=fc();return QEe(t,Ps.memoizedState,e)},useTransition:function(){var e=T9(CA)[0],t=fc().memoizedState;return[e,t]},useMutableSource:LEe,useSyncExternalStore:FEe,useId:JEe,unstable_isNewReconciler:!1},lYe={readContext:cc,useCallback:KEe,useContext:cc,useEffect:BG,useImperativeHandle:YEe,useInsertionEffect:qEe,useLayoutEffect:WEe,useMemo:XEe,useReducer:A9,useRef:HEe,useState:function(){return A9(CA)},useDebugValue:jG,useDeferredValue:function(e){var t=fc();return Ps===null?t.memoizedState=e:QEe(t,Ps.memoizedState,e)},useTransition:function(){var e=A9(CA)[0],t=fc().memoizedState;return[e,t]},useMutableSource:LEe,useSyncExternalStore:FEe,useId:JEe,unstable_isNewReconciler:!1};function Vw(e,t){try{var n="",r=t;do n+=LWe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function C9(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function X7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cYe=typeof WeakMap=="function"?WeakMap:Map;function nSe(e,t,n){n=xp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ZR||(ZR=!0,oz=r),X7(e,t)},n}function rSe(e,t,n){n=xp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){X7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){X7(e,t),typeof r!="function"&&(jg===null?jg=new Set([this]):jg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function jse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cYe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xYe.bind(null,e,t,n),t.then(e,e))}function Use(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xp(-1,1),t.tag=2,Bg(n,t,1))),n.lanes|=1),e)}var fYe=dm.ReactCurrentOwner,Su=!1;function Ra(e,t,n,r){t.child=e===null?DEe(t,null,n,r):Uw(t,e.child,n,r)}function Vse(e,t,n,r,i){n=n.render;var s=t.ref;return rw(t,i),r=LG(e,t,n,r,s,i),n=FG(),e!==null&&!Su?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zp(e,t,i)):(Oi&&n&&TG(t),t.flags|=1,Ra(e,t,r,i),t.child)}function Hse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!YG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,iSe(e,t,s,r,i)):(e=m$(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:bA,n(o,r)&&e.ref===t.ref)return zp(e,t,i)}return t.flags|=1,e=zg(s,r),e.ref=t.ref,e.return=t,t.child=e}function iSe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(bA(s,r)&&e.ref===t.ref)if(Su=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Su=!0);else return t.lanes=e.lanes,zp(e,t,i)}return Q7(e,t,n,r,i)}function sSe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ui(Db,el),el|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ui(Db,el),el|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ui(Db,el),el|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ui(Db,el),el|=r;return Ra(e,t,i,n),t.child}function oSe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Q7(e,t,n,r,i){var s=Ou(n)?a1:ga.current;return s=Bw(t,s),rw(t,i),n=LG(e,t,n,r,s,i),r=FG(),e!==null&&!Su?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zp(e,t,i)):(Oi&&r&&TG(t),t.flags|=1,Ra(e,t,n,i),t.child)}function qse(e,t,n,r,i){if(Ou(n)){var s=!0;VR(t)}else s=!1;if(rw(t,i),t.stateNode===null)d$(e,t),REe(t,n,r),K7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=cc(l):(l=Ou(n)?a1:ga.current,l=Bw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Mse(t,o,r,l),Zm=!1;var d=t.memoizedState;o.state=d,YR(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Iu.current||Zm?(typeof c=="function"&&(Y7(t,n,c,r),u=t.memoizedState),(a=Zm||Dse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,kEe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Wc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cc(u):(u=Ou(n)?a1:ga.current,u=Bw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Mse(t,o,r,u),Zm=!1,d=t.memoizedState,o.state=d,YR(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Iu.current||Zm?(typeof h=="function"&&(Y7(t,n,h,r),p=t.memoizedState),(l=Zm||Dse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return J7(e,t,n,r,s,i)}function J7(e,t,n,r,i,s){oSe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Pse(t,n,!1),zp(e,t,s);r=t.stateNode,fYe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Uw(t,e.child,null,s),t.child=Uw(t,null,a,s)):Ra(e,t,a,s),t.memoizedState=r.state,i&&Pse(t,n,!0),t.child}function aSe(e){var t=e.stateNode;t.pendingContext?Ose(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ose(e,t.context,!1),RG(e,t.containerInfo)}function Wse(e,t,n,r,i){return jw(),CG(i),t.flags|=256,Ra(e,t,n,r),t.child}var Z7={dehydrated:null,treeContext:null,retryLane:0};function ez(e){return{baseLanes:e,cachePool:null,transitions:null}}function uSe(e,t,n){var r=t.pendingProps,i=Fi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ui(Fi,i&1),e===null)return W7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=S6(o,r,0,null),e=Bv(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ez(n),t.memoizedState=Z7,e):UG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dYe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=zg(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zg(a,s):(s=Bv(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?ez(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Z7,r}return s=e.child,e=s.sibling,r=zg(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function UG(e,t){return t=S6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vP(e,t,n,r){return r!==null&&CG(r),Uw(t,e.child,null,n),e=UG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dYe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=C9(Error(et(422))),vP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=S6({mode:"visible",children:r.children},i,0,null),s=Bv(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Uw(t,e.child,null,o),t.child.memoizedState=ez(o),t.memoizedState=Z7,s);if(!(t.mode&1))return vP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=C9(s,r,void 0),vP(e,t,o,r)}if(a=(o&e.childLanes)!==0,Su||a){if(r=ao,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Up(e,i),mf(r,e,i,-1))}return GG(),r=C9(Error(et(421))),vP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=TYe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ul=Fg(i.nextSibling),pl=t,Oi=!0,Jc=null,e!==null&&(Gl[Yl++]=cp,Gl[Yl++]=fp,Gl[Yl++]=u1,cp=e.id,fp=e.overflow,u1=t),t=UG(t,r.children),t.flags|=4096,t)}function Gse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),G7(e.return,t,n)}function I9(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function lSe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ra(e,t,r.children,n),r=Fi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gse(e,n,t);else if(e.tag===19)Gse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Fi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&KR(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),I9(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&KR(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}I9(t,!0,n,null,s);break;case"together":I9(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function d$(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zp(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),c1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=zg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hYe(e,t,n){switch(t.tag){case 3:aSe(t),jw();break;case 5:MEe(t);break;case 1:Ou(t.type)&&VR(t);break;case 4:RG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ui(WR,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ui(Fi,Fi.current&1),t.flags|=128,null):n&t.child.childLanes?uSe(e,t,n):(ui(Fi,Fi.current&1),e=zp(e,t,n),e!==null?e.sibling:null);ui(Fi,Fi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return lSe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Fi,Fi.current),r)break;return null;case 22:case 23:return t.lanes=0,sSe(e,t,n)}return zp(e,t,n)}var cSe,tz,fSe,dSe;cSe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tz=function(){};fSe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,bv($d.current);var s=null;switch(n){case"input":i=S7(e,i),r=S7(e,r),s=[];break;case"select":i=ji({},i,{value:void 0}),r=ji({},r,{value:void 0}),s=[];break;case"textarea":i=A7(e,i),r=A7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=UR)}I7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(hA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(hA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&di("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};dSe=function(e,t,n,r){n!==r&&(t.flags|=4)};function bx(e,t){if(!Oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pYe(e,t,n){var r=t.pendingProps;switch(AG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:return Ou(t.type)&&zR(),Ho(t),null;case 3:return r=t.stateNode,zw(),_i(Iu),_i(ga),DG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gP(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jc!==null&&(lz(Jc),Jc=null))),tz(e,t),Ho(t),null;case 5:NG(t);var i=bv(TA.current);if(n=t.type,e!==null&&t.stateNode!=null)fSe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Ho(t),null}if(e=bv($d.current),gP(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hd]=t,r[SA]=s,e=(t.mode&1)!==0,n){case"dialog":di("cancel",r),di("close",r);break;case"iframe":case"object":case"embed":di("load",r);break;case"video":case"audio":for(i=0;i<ET.length;i++)di(ET[i],r);break;case"source":di("error",r);break;case"img":case"image":case"link":di("error",r),di("load",r);break;case"details":di("toggle",r);break;case"input":nse(r,s),di("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},di("invalid",r);break;case"textarea":ise(r,s),di("invalid",r)}I7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&mP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mP(r.textContent,a,e),i=["children",""+a]):hA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&di("scroll",r)}switch(n){case"input":aP(r),rse(r,s,!0);break;case"textarea":aP(r),sse(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=UR)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bwe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[hd]=t,e[SA]=r,cSe(e,t,!1,!1),t.stateNode=e;e:{switch(o=O7(n,r),n){case"dialog":di("cancel",e),di("close",e),i=r;break;case"iframe":case"object":case"embed":di("load",e),i=r;break;case"video":case"audio":for(i=0;i<ET.length;i++)di(ET[i],e);i=r;break;case"source":di("error",e),i=r;break;case"img":case"image":case"link":di("error",e),di("load",e),i=r;break;case"details":di("toggle",e),i=r;break;case"input":nse(e,r),i=S7(e,r),di("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ji({},r,{value:void 0}),di("invalid",e);break;case"textarea":ise(e,r),i=A7(e,r),di("invalid",e);break;default:i=r}I7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?zwe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jwe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&pA(e,u):typeof u=="number"&&pA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&di("scroll",e):u!=null&&fG(e,s,u,o))}switch(n){case"input":aP(e),rse(e,r,!1);break;case"textarea":aP(e),sse(e);break;case"option":r.value!=null&&e.setAttribute("value",""+u0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Zb(e,!!r.multiple,s,!1):r.defaultValue!=null&&Zb(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=UR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&t.stateNode!=null)dSe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=bv(TA.current),bv($d.current),gP(t)){if(r=t.stateNode,n=t.memoizedProps,r[hd]=t,(s=r.nodeValue!==n)&&(e=pl,e!==null))switch(e.tag){case 3:mP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hd]=t,t.stateNode=r}return Ho(t),null;case 13:if(_i(Fi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oi&&ul!==null&&t.mode&1&&!(t.flags&128))OEe(),jw(),t.flags|=98560,s=!1;else if(s=gP(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[hd]=t}else jw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ho(t),s=!1}else Jc!==null&&(lz(Jc),Jc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fi.current&1?Ds===0&&(Ds=3):GG())),t.updateQueue!==null&&(t.flags|=4),Ho(t),null);case 4:return zw(),tz(e,t),e===null&&wA(t.stateNode.containerInfo),Ho(t),null;case 10:return PG(t.type._context),Ho(t),null;case 17:return Ou(t.type)&&zR(),Ho(t),null;case 19:if(_i(Fi),s=t.memoizedState,s===null)return Ho(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)bx(s,!1);else{if(Ds!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=KR(e),o!==null){for(t.flags|=128,bx(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Fi,Fi.current&1|2),t.child}e=e.sibling}s.tail!==null&&os()>Hw&&(t.flags|=128,r=!0,bx(s,!1),t.lanes=4194304)}else{if(!r)if(e=KR(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),bx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oi)return Ho(t),null}else 2*os()-s.renderingStartTime>Hw&&n!==1073741824&&(t.flags|=128,r=!0,bx(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=os(),t.sibling=null,n=Fi.current,ui(Fi,r?n&1|2:n&1),t):(Ho(t),null);case 22:case 23:return WG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?el&1073741824&&(Ho(t),t.subtreeFlags&6&&(t.flags|=8192)):Ho(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function mYe(e,t){switch(AG(t),t.tag){case 1:return Ou(t.type)&&zR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zw(),_i(Iu),_i(ga),DG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NG(t),null;case 13:if(_i(Fi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));jw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _i(Fi),null;case 4:return zw(),null;case 10:return PG(t.type._context),null;case 22:case 23:return WG(),null;case 24:return null;default:return null}}var _P=!1,ia=!1,gYe=typeof WeakSet=="function"?WeakSet:Set,It=null;function Nb(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wi(e,t,r)}else n.current=null}function nz(e,t,n){try{n()}catch(r){Wi(e,t,r)}}var Yse=!1;function yYe(e,t){if(B7=FR,e=gEe(),xG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(j7={focusedElem:e,selectionRange:n},FR=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){t=It;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Wi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}return p=Yse,Yse=!1,p}function y2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&nz(t,n,s)}i=i.next}while(i!==r)}}function w6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hSe(e){var t=e.alternate;t!==null&&(e.alternate=null,hSe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hd],delete t[SA],delete t[V7],delete t[ZGe],delete t[eYe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pSe(e){return e.tag===5||e.tag===3||e.tag===4}function Kse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pSe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=UR));else if(r!==4&&(e=e.child,e!==null))for(iz(e,t,n),e=e.sibling;e!==null;)iz(e,t,n),e=e.sibling}function sz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sz(e,t,n),e=e.sibling;e!==null;)sz(e,t,n),e=e.sibling}var _o=null,Yc=!1;function Mm(e,t,n){for(n=n.child;n!==null;)mSe(e,t,n),n=n.sibling}function mSe(e,t,n){if(kd&&typeof kd.onCommitFiberUnmount=="function")try{kd.onCommitFiberUnmount(h6,n)}catch{}switch(n.tag){case 5:ia||Nb(n,t);case 6:var r=_o,i=Yc;_o=null,Mm(e,t,n),_o=r,Yc=i,_o!==null&&(Yc?(e=_o,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_o.removeChild(n.stateNode));break;case 18:_o!==null&&(Yc?(e=_o,n=n.stateNode,e.nodeType===8?w9(e.parentNode,n):e.nodeType===1&&w9(e,n),vA(e)):w9(_o,n.stateNode));break;case 4:r=_o,i=Yc,_o=n.stateNode.containerInfo,Yc=!0,Mm(e,t,n),_o=r,Yc=i;break;case 0:case 11:case 14:case 15:if(!ia&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nz(n,t,o),i=i.next}while(i!==r)}Mm(e,t,n);break;case 1:if(!ia&&(Nb(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wi(n,t,a)}Mm(e,t,n);break;case 21:Mm(e,t,n);break;case 22:n.mode&1?(ia=(r=ia)||n.memoizedState!==null,Mm(e,t,n),ia=r):Mm(e,t,n);break;default:Mm(e,t,n)}}function Xse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gYe),t.forEach(function(r){var i=AYe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:_o=a.stateNode,Yc=!1;break e;case 3:_o=a.stateNode.containerInfo,Yc=!0;break e;case 4:_o=a.stateNode.containerInfo,Yc=!0;break e}a=a.return}if(_o===null)throw Error(et(160));mSe(s,o,i),_o=null,Yc=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Wi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gSe(t,e),t=t.sibling}function gSe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mc(t,e),Wf(e),r&4){try{y2(3,e,e.return),w6(3,e)}catch(m){Wi(e,e.return,m)}try{y2(5,e,e.return)}catch(m){Wi(e,e.return,m)}}break;case 1:Mc(t,e),Wf(e),r&512&&n!==null&&Nb(n,n.return);break;case 5:if(Mc(t,e),Wf(e),r&512&&n!==null&&Nb(n,n.return),e.flags&32){var i=e.stateNode;try{pA(i,"")}catch(m){Wi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Lwe(i,s),O7(a,o);var l=O7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?zwe(i,f):c==="dangerouslySetInnerHTML"?jwe(i,f):c==="children"?pA(i,f):fG(i,c,f,l)}switch(a){case"input":x7(i,s);break;case"textarea":Fwe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Zb(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Zb(i,!!s.multiple,s.defaultValue,!0):Zb(i,!!s.multiple,s.multiple?[]:"",!1))}i[SA]=s}catch(m){Wi(e,e.return,m)}}break;case 6:if(Mc(t,e),Wf(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Wi(e,e.return,m)}}break;case 3:if(Mc(t,e),Wf(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vA(t.containerInfo)}catch(m){Wi(e,e.return,m)}break;case 4:Mc(t,e),Wf(e);break;case 13:Mc(t,e),Wf(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(HG=os())),r&4&&Xse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ia=(l=ia)||c,Mc(t,e),ia=l):Mc(t,e),Wf(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(It=e,c=e.child;c!==null;){for(f=It=c;It!==null;){switch(d=It,h=d.child,d.tag){case 0:case 11:case 14:case 15:y2(4,d,d.return);break;case 1:Nb(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Wi(r,n,m)}}break;case 5:Nb(d,d.return);break;case 22:if(d.memoizedState!==null){Jse(f);continue}}h!==null?(h.return=d,It=h):Jse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Uwe("display",o))}catch(m){Wi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Wi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mc(t,e),Wf(e),r&4&&Xse(e);break;case 21:break;default:Mc(t,e),Wf(e)}}function Wf(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(pSe(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pA(i,""),r.flags&=-33);var s=Kse(e);sz(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Kse(e);iz(e,a,o);break;default:throw Error(et(161))}}catch(u){Wi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vYe(e,t,n){It=e,ySe(e)}function ySe(e,t,n){for(var r=(e.mode&1)!==0;It!==null;){var i=It,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_P;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ia;a=_P;var l=ia;if(_P=o,(ia=u)&&!l)for(It=i;It!==null;)o=It,u=o.child,o.tag===22&&o.memoizedState!==null?Zse(i):u!==null?(u.return=o,It=u):Zse(i);for(;s!==null;)It=s,ySe(s),s=s.sibling;It=i,_P=a,ia=l}Qse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,It=s):Qse(e)}}function Qse(e){for(;It!==null;){var t=It;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ia||w6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ia)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Nse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Nse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&vA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}ia||t.flags&512&&rz(t)}catch(d){Wi(t,t.return,d)}}if(t===e){It=null;break}if(n=t.sibling,n!==null){n.return=t.return,It=n;break}It=t.return}}function Jse(e){for(;It!==null;){var t=It;if(t===e){It=null;break}var n=t.sibling;if(n!==null){n.return=t.return,It=n;break}It=t.return}}function Zse(e){for(;It!==null;){var t=It;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{w6(4,t)}catch(u){Wi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Wi(t,i,u)}}var s=t.return;try{rz(t)}catch(u){Wi(t,s,u)}break;case 5:var o=t.return;try{rz(t)}catch(u){Wi(t,o,u)}}}catch(u){Wi(t,t.return,u)}if(t===e){It=null;break}var a=t.sibling;if(a!==null){a.return=t.return,It=a;break}It=t.return}}var _Ye=Math.ceil,JR=dm.ReactCurrentDispatcher,zG=dm.ReactCurrentOwner,oc=dm.ReactCurrentBatchConfig,cr=0,ao=null,bs=null,Oo=0,el=0,Db=K0(0),Ds=0,OA=null,c1=0,E6=0,VG=0,v2=null,pu=null,HG=0,Hw=1/0,Gh=null,ZR=!1,oz=null,jg=null,bP=!1,_g=null,eN=0,_2=0,az=null,h$=-1,p$=0;function Ua(){return cr&6?os():h$!==-1?h$:h$=os()}function Ug(e){return e.mode&1?cr&2&&Oo!==0?Oo&-Oo:nYe.transition!==null?(p$===0&&(p$=eEe()),p$):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:aEe(e.type)),e):1}function mf(e,t,n,r){if(50<_2)throw _2=0,az=null,Error(et(185));eI(e,n,r),(!(cr&2)||e!==ao)&&(e===ao&&(!(cr&2)&&(E6|=n),Ds===4&&lg(e,Oo)),Pu(e,r),n===1&&cr===0&&!(t.mode&1)&&(Hw=os()+500,v6&&X0()))}function Pu(e,t){var n=e.callbackNode;nGe(e,t);var r=LR(e,e===ao?Oo:0);if(r===0)n!==null&&use(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&use(n),t===1)e.tag===0?tYe(eoe.bind(null,e)):AEe(eoe.bind(null,e)),QGe(function(){!(cr&6)&&X0()}),n=null;else{switch(tEe(r)){case 1:n=gG;break;case 4:n=Jwe;break;case 16:n=MR;break;case 536870912:n=Zwe;break;default:n=MR}n=TSe(n,vSe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function vSe(e,t){if(h$=-1,p$=0,cr&6)throw Error(et(327));var n=e.callbackNode;if(iw()&&e.callbackNode!==n)return null;var r=LR(e,e===ao?Oo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tN(e,r);else{t=r;var i=cr;cr|=2;var s=bSe();(ao!==e||Oo!==t)&&(Gh=null,Hw=os()+500,Fv(e,t));do try{EYe();break}catch(a){_Se(e,a)}while(!0);OG(),JR.current=s,cr=i,bs!==null?t=0:(ao=null,Oo=0,t=Ds)}if(t!==0){if(t===2&&(i=N7(e),i!==0&&(r=i,t=uz(e,i))),t===1)throw n=OA,Fv(e,0),lg(e,r),Pu(e,os()),n;if(t===6)lg(e,r);else{if(i=e.current.alternate,!(r&30)&&!bYe(i)&&(t=tN(e,r),t===2&&(s=N7(e),s!==0&&(r=s,t=uz(e,s))),t===1))throw n=OA,Fv(e,0),lg(e,r),Pu(e,os()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:qy(e,pu,Gh);break;case 3:if(lg(e,r),(r&130023424)===r&&(t=HG+500-os(),10<t)){if(LR(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ua(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=z7(qy.bind(null,e,pu,Gh),t);break}qy(e,pu,Gh);break;case 4:if(lg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-pf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=os()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_Ye(r/1960))-r,10<r){e.timeoutHandle=z7(qy.bind(null,e,pu,Gh),r);break}qy(e,pu,Gh);break;case 5:qy(e,pu,Gh);break;default:throw Error(et(329))}}}return Pu(e,os()),e.callbackNode===n?vSe.bind(null,e):null}function uz(e,t){var n=v2;return e.current.memoizedState.isDehydrated&&(Fv(e,t).flags|=256),e=tN(e,t),e!==2&&(t=pu,pu=n,t!==null&&lz(t)),e}function lz(e){pu===null?pu=e:pu.push.apply(pu,e)}function bYe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ef(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lg(e,t){for(t&=~VG,t&=~E6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-pf(t),r=1<<n;e[n]=-1,t&=~r}}function eoe(e){if(cr&6)throw Error(et(327));iw();var t=LR(e,0);if(!(t&1))return Pu(e,os()),null;var n=tN(e,t);if(e.tag!==0&&n===2){var r=N7(e);r!==0&&(t=r,n=uz(e,r))}if(n===1)throw n=OA,Fv(e,0),lg(e,t),Pu(e,os()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qy(e,pu,Gh),Pu(e,os()),null}function qG(e,t){var n=cr;cr|=1;try{return e(t)}finally{cr=n,cr===0&&(Hw=os()+500,v6&&X0())}}function f1(e){_g!==null&&_g.tag===0&&!(cr&6)&&iw();var t=cr;cr|=1;var n=oc.transition,r=Mr;try{if(oc.transition=null,Mr=1,e)return e()}finally{Mr=r,oc.transition=n,cr=t,!(cr&6)&&X0()}}function WG(){el=Db.current,_i(Db)}function Fv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,XGe(n)),bs!==null)for(n=bs.return;n!==null;){var r=n;switch(AG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zR();break;case 3:zw(),_i(Iu),_i(ga),DG();break;case 5:NG(r);break;case 4:zw();break;case 13:_i(Fi);break;case 19:_i(Fi);break;case 10:PG(r.type._context);break;case 22:case 23:WG()}n=n.return}if(ao=e,bs=e=zg(e.current,null),Oo=el=t,Ds=0,OA=null,VG=E6=c1=0,pu=v2=null,_v!==null){for(t=0;t<_v.length;t++)if(n=_v[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_v=null}return e}function _Se(e,t){do{var n=bs;try{if(OG(),c$.current=QR,XR){for(var r=Bi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}XR=!1}if(l1=0,Qs=Ps=Bi=null,g2=!1,AA=0,zG.current=null,n===null||n.return===null){Ds=1,OA=t,bs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Oo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Use(o);if(h!==null){h.flags&=-257,zse(h,o,a,s,t),h.mode&1&&jse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){jse(s,l,t),GG();break e}u=Error(et(426))}}else if(Oi&&a.mode&1){var g=Use(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),zse(g,o,a,s,t),CG(Vw(u,a));break e}}s=u=Vw(u,a),Ds!==4&&(Ds=2),v2===null?v2=[s]:v2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=nSe(s,u,t);Rse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jg===null||!jg.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=rSe(s,a,t);Rse(s,w);break e}}s=s.return}while(s!==null)}ESe(n)}catch(x){t=x,bs===n&&n!==null&&(bs=n=n.return);continue}break}while(!0)}function bSe(){var e=JR.current;return JR.current=QR,e===null?QR:e}function GG(){(Ds===0||Ds===3||Ds===2)&&(Ds=4),ao===null||!(c1&268435455)&&!(E6&268435455)||lg(ao,Oo)}function tN(e,t){var n=cr;cr|=2;var r=bSe();(ao!==e||Oo!==t)&&(Gh=null,Fv(e,t));do try{wYe();break}catch(i){_Se(e,i)}while(!0);if(OG(),cr=n,JR.current=r,bs!==null)throw Error(et(261));return ao=null,Oo=0,Ds}function wYe(){for(;bs!==null;)wSe(bs)}function EYe(){for(;bs!==null&&!GWe();)wSe(bs)}function wSe(e){var t=xSe(e.alternate,e,el);e.memoizedProps=e.pendingProps,t===null?ESe(e):bs=t,zG.current=null}function ESe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=mYe(n,t),n!==null){n.flags&=32767,bs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ds=6,bs=null;return}}else if(n=pYe(n,t,el),n!==null){bs=n;return}if(t=t.sibling,t!==null){bs=t;return}bs=t=e}while(t!==null);Ds===0&&(Ds=5)}function qy(e,t,n){var r=Mr,i=oc.transition;try{oc.transition=null,Mr=1,SYe(e,t,n,r)}finally{oc.transition=i,Mr=r}return null}function SYe(e,t,n,r){do iw();while(_g!==null);if(cr&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(rGe(e,s),e===ao&&(bs=ao=null,Oo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bP||(bP=!0,TSe(MR,function(){return iw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=oc.transition,oc.transition=null;var o=Mr;Mr=1;var a=cr;cr|=4,zG.current=null,yYe(e,n),gSe(n,e),VGe(j7),FR=!!B7,j7=B7=null,e.current=n,vYe(n),YWe(),cr=a,Mr=o,oc.transition=s}else e.current=n;if(bP&&(bP=!1,_g=e,eN=i),s=e.pendingLanes,s===0&&(jg=null),QWe(n.stateNode),Pu(e,os()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ZR)throw ZR=!1,e=oz,oz=null,e;return eN&1&&e.tag!==0&&iw(),s=e.pendingLanes,s&1?e===az?_2++:(_2=0,az=e):_2=0,X0(),null}function iw(){if(_g!==null){var e=tEe(eN),t=oc.transition,n=Mr;try{if(oc.transition=null,Mr=16>e?16:e,_g===null)var r=!1;else{if(e=_g,_g=null,eN=0,cr&6)throw Error(et(331));var i=cr;for(cr|=4,It=e.current;It!==null;){var s=It,o=s.child;if(It.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(It=l;It!==null;){var c=It;switch(c.tag){case 0:case 11:case 15:y2(8,c,s)}var f=c.child;if(f!==null)f.return=c,It=f;else for(;It!==null;){c=It;var d=c.sibling,h=c.return;if(hSe(c),c===l){It=null;break}if(d!==null){d.return=h,It=d;break}It=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}It=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,It=o;else e:for(;It!==null;){if(s=It,s.flags&2048)switch(s.tag){case 0:case 11:case 15:y2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,It=y;break e}It=s.return}}var v=e.current;for(It=v;It!==null;){o=It;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,It=_;else e:for(o=v;It!==null;){if(a=It,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:w6(9,a)}}catch(x){Wi(a,a.return,x)}if(a===o){It=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,It=w;break e}It=a.return}}if(cr=i,X0(),kd&&typeof kd.onPostCommitFiberRoot=="function")try{kd.onPostCommitFiberRoot(h6,e)}catch{}r=!0}return r}finally{Mr=n,oc.transition=t}}return!1}function toe(e,t,n){t=Vw(n,t),t=nSe(e,t,1),e=Bg(e,t,1),t=Ua(),e!==null&&(eI(e,1,t),Pu(e,t))}function Wi(e,t,n){if(e.tag===3)toe(e,e,n);else for(;t!==null;){if(t.tag===3){toe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jg===null||!jg.has(r))){e=Vw(n,e),e=rSe(t,e,1),t=Bg(t,e,1),e=Ua(),t!==null&&(eI(t,1,e),Pu(t,e));break}}t=t.return}}function xYe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ua(),e.pingedLanes|=e.suspendedLanes&n,ao===e&&(Oo&n)===n&&(Ds===4||Ds===3&&(Oo&130023424)===Oo&&500>os()-HG?Fv(e,0):VG|=n),Pu(e,t)}function SSe(e,t){t===0&&(e.mode&1?(t=cP,cP<<=1,!(cP&130023424)&&(cP=4194304)):t=1);var n=Ua();e=Up(e,t),e!==null&&(eI(e,t,n),Pu(e,n))}function TYe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),SSe(e,n)}function AYe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),SSe(e,n)}var xSe;xSe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Iu.current)Su=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Su=!1,hYe(e,t,n);Su=!!(e.flags&131072)}else Su=!1,Oi&&t.flags&1048576&&CEe(t,qR,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;d$(e,t),e=t.pendingProps;var i=Bw(t,ga.current);rw(t,n),i=LG(null,t,r,e,i,n);var s=FG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ou(r)?(s=!0,VR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$G(t),i.updater=_6,t.stateNode=i,i._reactInternals=t,K7(t,r,e,n),t=J7(null,t,r,!0,s,n)):(t.tag=0,Oi&&s&&TG(t),Ra(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(d$(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=IYe(r),e=Wc(r,e),i){case 0:t=Q7(null,t,r,e,n);break e;case 1:t=qse(null,t,r,e,n);break e;case 11:t=Vse(null,t,r,e,n);break e;case 14:t=Hse(null,t,r,Wc(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wc(r,i),Q7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wc(r,i),qse(e,t,r,i,n);case 3:e:{if(aSe(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,kEe(e,t),YR(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Vw(Error(et(423)),t),t=Wse(e,t,r,n,i);break e}else if(r!==i){i=Vw(Error(et(424)),t),t=Wse(e,t,r,n,i);break e}else for(ul=Fg(t.stateNode.containerInfo.firstChild),pl=t,Oi=!0,Jc=null,n=DEe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jw(),r===i){t=zp(e,t,n);break e}Ra(e,t,r,n)}t=t.child}return t;case 5:return MEe(t),e===null&&W7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,U7(r,i)?o=null:s!==null&&U7(r,s)&&(t.flags|=32),oSe(e,t),Ra(e,t,o,n),t.child;case 6:return e===null&&W7(t),null;case 13:return uSe(e,t,n);case 4:return RG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Uw(t,null,r,n):Ra(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wc(r,i),Vse(e,t,r,i,n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:return Ra(e,t,t.pendingProps.children,n),t.child;case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ui(WR,r._currentValue),r._currentValue=o,s!==null)if(Ef(s.value,o)){if(s.children===i.children&&!Iu.current){t=zp(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=xp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),G7(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),G7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ra(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,rw(t,n),i=cc(i),r=r(i),t.flags|=1,Ra(e,t,r,n),t.child;case 14:return r=t.type,i=Wc(r,t.pendingProps),i=Wc(r.type,i),Hse(e,t,r,i,n);case 15:return iSe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wc(r,i),d$(e,t),t.tag=1,Ou(r)?(e=!0,VR(t)):e=!1,rw(t,n),REe(t,r,i),K7(t,r,i,n),J7(null,t,r,!0,e,n);case 19:return lSe(e,t,n);case 22:return sSe(e,t,n)}throw Error(et(156,t.tag))};function TSe(e,t){return Qwe(e,t)}function CYe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tc(e,t,n,r){return new CYe(e,t,n,r)}function YG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function IYe(e){if(typeof e=="function")return YG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hG)return 11;if(e===pG)return 14}return 2}function zg(e,t){var n=e.alternate;return n===null?(n=tc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function m$(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")YG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tb:return Bv(n.children,i,s,t);case dG:o=8,i|=8;break;case _7:return e=tc(12,n,t,i|2),e.elementType=_7,e.lanes=s,e;case b7:return e=tc(13,n,t,i),e.elementType=b7,e.lanes=s,e;case w7:return e=tc(19,n,t,i),e.elementType=w7,e.lanes=s,e;case Nwe:return S6(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $we:o=10;break e;case Rwe:o=9;break e;case hG:o=11;break e;case pG:o=14;break e;case Jm:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=tc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Bv(e,t,n,r){return e=tc(7,e,r,t),e.lanes=n,e}function S6(e,t,n,r){return e=tc(22,e,r,t),e.elementType=Nwe,e.lanes=n,e.stateNode={isHidden:!1},e}function O9(e,t,n){return e=tc(6,e,null,t),e.lanes=n,e}function P9(e,t,n){return t=tc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OYe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c9(0),this.expirationTimes=c9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c9(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KG(e,t,n,r,i,s,o,a,u){return e=new OYe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$G(s),e}function PYe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xb,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ASe(e){if(!e)return l0;e=e._reactInternals;e:{if(X1(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ou(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Ou(n))return TEe(e,n,t)}return t}function CSe(e,t,n,r,i,s,o,a,u){return e=KG(n,r,!0,e,i,s,o,a,u),e.context=ASe(null),n=e.current,r=Ua(),i=Ug(n),s=xp(r,i),s.callback=t??null,Bg(n,s,i),e.current.lanes=i,eI(e,i,r),Pu(e,r),e}function x6(e,t,n,r){var i=t.current,s=Ua(),o=Ug(i);return n=ASe(n),t.context===null?t.context=n:t.pendingContext=n,t=xp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Bg(i,t,o),e!==null&&(mf(e,i,o,s),l$(e,i,o)),o}function nN(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function noe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function XG(e,t){noe(e,t),(e=e.alternate)&&noe(e,t)}function kYe(){return null}var ISe=typeof reportError=="function"?reportError:function(e){console.error(e)};function QG(e){this._internalRoot=e}T6.prototype.render=QG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));x6(e,t,null,null)};T6.prototype.unmount=QG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;f1(function(){x6(null,e,null,null)}),t[jp]=null}};function T6(e){this._internalRoot=e}T6.prototype.unstable_scheduleHydration=function(e){if(e){var t=iEe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ug.length&&t!==0&&t<ug[n].priority;n++);ug.splice(n,0,e),n===0&&oEe(e)}};function JG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function A6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function roe(){}function $Ye(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=nN(o);s.call(l)}}var o=CSe(t,r,e,0,null,!1,!1,"",roe);return e._reactRootContainer=o,e[jp]=o.current,wA(e.nodeType===8?e.parentNode:e),f1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=nN(u);a.call(l)}}var u=KG(e,0,!1,null,null,!1,!1,"",roe);return e._reactRootContainer=u,e[jp]=u.current,wA(e.nodeType===8?e.parentNode:e),f1(function(){x6(t,u,n,r)}),u}function C6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=nN(o);a.call(u)}}x6(t,o,e,i)}else o=$Ye(n,t,e,i,r);return nN(o)}nEe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wT(t.pendingLanes);n!==0&&(yG(t,n|1),Pu(t,os()),!(cr&6)&&(Hw=os()+500,X0()))}break;case 13:f1(function(){var r=Up(e,1);if(r!==null){var i=Ua();mf(r,e,1,i)}}),XG(e,1)}};vG=function(e){if(e.tag===13){var t=Up(e,134217728);if(t!==null){var n=Ua();mf(t,e,134217728,n)}XG(e,134217728)}};rEe=function(e){if(e.tag===13){var t=Ug(e),n=Up(e,t);if(n!==null){var r=Ua();mf(n,e,t,r)}XG(e,t)}};iEe=function(){return Mr};sEe=function(e,t){var n=Mr;try{return Mr=e,t()}finally{Mr=n}};k7=function(e,t,n){switch(t){case"input":if(x7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=y6(r);if(!i)throw Error(et(90));Mwe(r),x7(r,i)}}}break;case"textarea":Fwe(e,n);break;case"select":t=n.value,t!=null&&Zb(e,!!n.multiple,t,!1)}};qwe=qG;Wwe=f1;var RYe={usingClientEntryPoint:!1,Events:[nI,Ob,y6,Vwe,Hwe,qG]},wx={findFiberByHostInstance:vv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NYe={bundleType:wx.bundleType,version:wx.version,rendererPackageName:wx.rendererPackageName,rendererConfig:wx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kwe(e),e===null?null:e.stateNode},findFiberByHostInstance:wx.findFiberByHostInstance||kYe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wP.isDisabled&&wP.supportsFiber)try{h6=wP.inject(NYe),kd=wP}catch{}}kl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RYe;kl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JG(t))throw Error(et(200));return PYe(e,t,null,n)};kl.createRoot=function(e,t){if(!JG(e))throw Error(et(299));var n=!1,r="",i=ISe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=KG(e,1,!1,null,null,n,!1,r,i),e[jp]=t.current,wA(e.nodeType===8?e.parentNode:e),new QG(t)};kl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=Kwe(t),e=e===null?null:e.stateNode,e};kl.flushSync=function(e){return f1(e)};kl.hydrate=function(e,t,n){if(!A6(t))throw Error(et(200));return C6(null,e,t,!0,n)};kl.hydrateRoot=function(e,t,n){if(!JG(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ISe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=CSe(t,null,e,1,n??null,i,!1,s,o),e[jp]=t.current,wA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new T6(t)};kl.render=function(e,t,n){if(!A6(t))throw Error(et(200));return C6(null,e,t,!1,n)};kl.unmountComponentAtNode=function(e){if(!A6(e))throw Error(et(40));return e._reactRootContainer?(f1(function(){C6(null,null,e,!1,function(){e._reactRootContainer=null,e[jp]=null})}),!0):!1};kl.unstable_batchedUpdates=qG;kl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!A6(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return C6(e,t,n,!1,r)};kl.version="18.2.0-next-9e3b772b8-20220608";function OSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OSe)}catch(e){console.error(e)}}OSe(),Cwe.exports=kl;var Q1=Cwe.exports,ioe=Q1;y7.createRoot=ioe.createRoot,y7.hydrateRoot=ioe.hydrateRoot;const PSe=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),xa=()=>P.useContext(PSe);function DYe({children:e}){const[t,n]=j.useState(void 0),r=j.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return $.jsx(PSe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function PA(){return PA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PA.apply(this,arguments)}var bg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bg||(bg={}));const soe="popstate";function MYe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return cz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kSe(i)}return FYe(t,n,null,e)}function Es(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ZG(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LYe(){return Math.random().toString(36).substr(2,8)}function ooe(e,t){return{usr:e.state,key:e.key,idx:t}}function cz(e,t,n,r){return n===void 0&&(n=null),PA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?iS(t):t,{state:n,key:t&&t.key||r||LYe()})}function kSe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function iS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function FYe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=bg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(PA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=bg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=bg.Push;let v=cz(m.location,g,y);n&&n(v,g),l=c()+1;let _=ooe(v,l),w=m.createHref(v);try{o.pushState(_,"",w)}catch{i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=bg.Replace;let v=cz(m.location,g,y);n&&n(v,g),l=c();let _=ooe(v,l),w=m.createHref(v);o.replaceState(_,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:kSe(g);return Es(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(soe,f),u=g,()=>{i.removeEventListener(soe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var aoe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(aoe||(aoe={}));function BYe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?iS(t):t,i=NSe(r.pathname||"/",n);if(i==null)return null;let s=$Se(e);jYe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=KYe(s[a],JYe(i));return o}function $Se(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Es(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Vg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Es(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),$Se(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:GYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of RSe(s.path))i(s,o,u)}),t}function RSe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=RSe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function jYe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:YYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const UYe=/^:\w+$/,zYe=3,VYe=2,HYe=1,qYe=10,WYe=-2,uoe=e=>e==="*";function GYe(e,t){let n=e.split("/"),r=n.length;return n.some(uoe)&&(r+=WYe),t&&(r+=VYe),n.filter(i=>!uoe(i)).reduce((i,s)=>i+(UYe.test(s)?zYe:s===""?HYe:qYe),r)}function YYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function KYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=XYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Vg([i,c.pathname]),pathnameBase:nKe(Vg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Vg([i,c.pathnameBase]))}return s}function XYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=QYe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=ZYe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function QYe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ZG(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function JYe(e){try{return decodeURI(e)}catch(t){return ZG(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ZYe(e,t){try{return decodeURIComponent(e)}catch(n){return ZG(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function NSe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function eKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?iS(e):e;return{pathname:n?n.startsWith("/")?n:tKe(n,t):t,search:rKe(r),hash:iKe(i)}}function tKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function k9(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DSe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function MSe(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=iS(e):(i=PA({},e),Es(!i.pathname||!i.pathname.includes("?"),k9("?","pathname","search",i)),Es(!i.pathname||!i.pathname.includes("#"),k9("#","pathname","hash",i)),Es(!i.search||!i.search.includes("#"),k9("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=eKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Vg=e=>e.join("/").replace(/\/\/+/g,"/"),nKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LSe=["post","put","patch","delete"];new Set(LSe);const oKe=["get",...LSe];new Set(oKe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aKe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const uKe=typeof Object.is=="function"?Object.is:aKe,{useState:lKe,useEffect:cKe,useLayoutEffect:fKe,useDebugValue:dKe}=o1;function hKe(e,t,n){const r=t(),[{inst:i},s]=lKe({inst:{value:r,getSnapshot:t}});return fKe(()=>{i.value=r,i.getSnapshot=t,$9(i)&&s({inst:i})},[e,r,t]),cKe(()=>($9(i)&&s({inst:i}),e(()=>{$9(i)&&s({inst:i})})),[e]),dKe(r),r}function $9(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!uKe(n,r)}catch{return!0}}function pKe(e,t,n){return t()}const mKe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gKe=!mKe,yKe=gKe?pKe:hKe;"useSyncExternalStore"in o1&&(e=>e.useSyncExternalStore)(o1);const FSe=P.createContext(null),eY=P.createContext(null),I6=P.createContext(null),O6=P.createContext(null),Q0=P.createContext({outlet:null,matches:[]}),BSe=P.createContext(null);function fz(){return fz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fz.apply(this,arguments)}function vKe(e,t){let{relative:n}=t===void 0?{}:t;sS()||Es(!1);let{basename:r,navigator:i}=P.useContext(I6),{hash:s,pathname:o,search:a}=wKe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Vg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function sS(){return P.useContext(O6)!=null}function iI(){return sS()||Es(!1),P.useContext(O6).location}function hm(){sS()||Es(!1);let{basename:e,navigator:t}=P.useContext(I6),{matches:n}=P.useContext(Q0),{pathname:r}=iI(),i=JSON.stringify(DSe(n).map(a=>a.pathnameBase)),s=P.useRef(!1);return P.useEffect(()=>{s.current=!0}),P.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=MSe(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:Vg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const _Ke=P.createContext(null);function bKe(e){let t=P.useContext(Q0).outlet;return t&&P.createElement(_Ke.Provider,{value:e},t)}function qw(){let{matches:e}=P.useContext(Q0),t=e[e.length-1];return t?t.params:{}}function wKe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=P.useContext(Q0),{pathname:i}=iI(),s=JSON.stringify(DSe(r).map(o=>o.pathnameBase));return P.useMemo(()=>MSe(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function jSe(e,t){sS()||Es(!1);let{navigator:n}=P.useContext(I6),r=P.useContext(eY),{matches:i}=P.useContext(Q0),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=iI(),l;if(t){var c;let m=typeof t=="string"?iS(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||Es(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=BYe(e,{pathname:d}),p=TKe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Vg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Vg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?P.createElement(O6.Provider,{value:{location:fz({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:bg.Pop}},p):p}function EKe(){let e=OKe(),t=sKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,s)}class SKe extends P.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?P.createElement(Q0.Provider,{value:this.props.routeContext},P.createElement(BSe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xKe(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(FSe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Q0.Provider,{value:t},r)}function TKe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||Es(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=P.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=P.createElement(EKe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=P.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),P.createElement(xKe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?P.createElement(SKe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var loe;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(loe||(loe={}));var rN;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(rN||(rN={}));function AKe(e){let t=P.useContext(eY);return t||Es(!1),t}function CKe(e){let t=P.useContext(Q0);return t||Es(!1),t}function IKe(e){let t=CKe(),n=t.matches[t.matches.length-1];return n.route.id||Es(!1),n.route.id}function OKe(){var e;let t=P.useContext(BSe),n=AKe(rN.UseRouteError),r=IKe(rN.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function tY(e){let{to:t,replace:n,state:r,relative:i}=e;sS()||Es(!1);let s=P.useContext(eY),o=hm();return P.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function PKe(e){return bKe(e.context)}function qh(e){Es(!1)}function kKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=bg.Pop,navigator:s,static:o=!1}=e;sS()&&Es(!1);let a=t.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=iS(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=P.useMemo(()=>{let m=NSe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:P.createElement(I6.Provider,{value:u},P.createElement(O6.Provider,{children:n,value:p}))}function $Ke(e){let{children:t,location:n}=e,r=P.useContext(FSe),i=r&&!t?r.router.routes:dz(t);return jSe(i,n)}var coe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(coe||(coe={}));new Promise(()=>{});function dz(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,dz(r.props.children,s));return}r.type!==qh&&Es(!1),!r.props.index||!r.props.children||Es(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dz(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function RKe(e,t){let n=hz(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function NKe(e){let{basename:t,children:n,window:r}=e,i=P.useRef();i.current==null&&(i.current=MYe({window:r,v5Compat:!0}));let s=i.current,[o,a]=P.useState({action:s.action,location:s.location});return P.useLayoutEffect(()=>s.listen(a),[s]),P.createElement(kKe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var foe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(foe||(foe={}));var doe;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(doe||(doe={}));function nY(e){let t=P.useRef(hz(e)),n=P.useRef(!1),r=iI(),i=P.useMemo(()=>RKe(r.search,n.current?null:t.current),[r.search]),s=hm(),o=P.useCallback((a,u)=>{const l=hz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function iN(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function DKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function MKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function LKe(e,t,n){return iN(e,n)===iN(t,n)}function USe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=iN(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>LKe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=MKe(c,l,r),d=DKe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function FKe(e,t,n){var r;return n?Array.from(((r=iN(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function rY(e){const t=P.createContext(null);return[({children:i,value:s})=>j.createElement(t.Provider,{value:s},i),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function c0(e){return Array.isArray(e)?e:[e]}function hoe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const BKe=()=>{};function jKe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||BKe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function dp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function UKe(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function zSe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function sI(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==j.Fragment:!1}function VSe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=VSe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function HSe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=VSe(t))&&(r&&(r+=" "),r+=n);return r}const zKe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function VKe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var HKe=Object.defineProperty,poe=Object.getOwnPropertySymbols,qKe=Object.prototype.hasOwnProperty,WKe=Object.prototype.propertyIsEnumerable,moe=(e,t,n)=>t in e?HKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,goe=(e,t)=>{for(var n in t||(t={}))qKe.call(t,n)&&moe(e,n,t[n]);if(poe)for(var n of poe(t))WKe.call(t,n)&&moe(e,n,t[n]);return e};function GKe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:goe({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:goe({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function oI(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function iY(e){const t=oI(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function qSe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function YKe(e,...t){return`linear-gradient(${e}deg, ${qSe(t)})`}function KKe(...e){return`radial-gradient(circle, ${qSe(e)})`}function WSe(e){const t=iY(e),n=oI(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function sY(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function XKe(e){return t=>`@media (min-width: ${sY({size:t,sizes:e.breakpoints})}px)`}function QKe(e){return t=>`@media (max-width: ${sY({size:t,sizes:e.breakpoints})-1}px)`}function JKe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function ZKe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function eXe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function oY(e){return JKe(e)?ZKe(e):e.startsWith("rgb")?eXe(e):{r:0,g:0,b:0,a:1}}function ub(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=oY(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function tXe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function nXe(e,t){const{r:n,g:r,b:i,a:s}=oY(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function rXe(e,t){const{r:n,g:r,b:i,a:s}=oY(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function iXe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function sXe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function oXe(e){const t=iY(e),n=oI(e),r=WSe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=sXe(s,e);switch(i){case"light":return{border:"transparent",background:ub(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:ub(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:ub(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?ub(t(s,5,a,!1),.05):ub(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function aXe(e){return t=>{const n=oI(e)(t);return e.colors[e.primaryColor][n]}}function uXe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Gs={fontStyles:VKe,themeColor:iY,focusStyles:GKe,linearGradient:YKe,radialGradient:KKe,smallerThan:QKe,largerThan:XKe,rgba:ub,size:sY,cover:tXe,darken:nXe,lighten:rXe,radius:iXe,variant:oXe,primaryShade:oI,hover:uXe,gradient:WSe,primaryColor:aXe};var lXe=Object.defineProperty,cXe=Object.defineProperties,fXe=Object.getOwnPropertyDescriptors,yoe=Object.getOwnPropertySymbols,dXe=Object.prototype.hasOwnProperty,hXe=Object.prototype.propertyIsEnumerable,voe=(e,t,n)=>t in e?lXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pXe=(e,t)=>{for(var n in t||(t={}))dXe.call(t,n)&&voe(e,n,t[n]);if(yoe)for(var n of yoe(t))hXe.call(t,n)&&voe(e,n,t[n]);return e},mXe=(e,t)=>cXe(e,fXe(t));function gXe(e){return mXe(pXe({},e),{fn:{fontStyles:Gs.fontStyles(e),themeColor:Gs.themeColor(e),focusStyles:Gs.focusStyles(e),largerThan:Gs.largerThan(e),smallerThan:Gs.smallerThan(e),radialGradient:Gs.radialGradient,linearGradient:Gs.linearGradient,gradient:Gs.gradient(e),rgba:Gs.rgba,size:Gs.size,cover:Gs.cover,lighten:Gs.lighten,darken:Gs.darken,primaryShade:Gs.primaryShade(e),radius:Gs.radius(e),variant:Gs.variant(e),hover:Gs.hover,primaryColor:Gs.primaryColor(e)}})}const yXe=["xs","sm","md","lg","xl"],vXe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:zKe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},GSe=gXe(vXe);function _Xe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function bXe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var wXe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bXe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=_Xe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Qo="-ms-",sN="-moz-",xr="-webkit-",YSe="comm",aY="rule",uY="decl",EXe="@import",KSe="@keyframes",SXe=Math.abs,P6=String.fromCharCode,xXe=Object.assign;function TXe(e,t){return xo(e,0)^45?(((t<<2^xo(e,0))<<2^xo(e,1))<<2^xo(e,2))<<2^xo(e,3):0}function XSe(e){return e.trim()}function AXe(e,t){return(e=t.exec(e))?e[0]:e}function kr(e,t,n){return e.replace(t,n)}function pz(e,t){return e.indexOf(t)}function xo(e,t){return e.charCodeAt(t)|0}function kA(e,t,n){return e.slice(t,n)}function ld(e){return e.length}function lY(e){return e.length}function EP(e,t){return t.push(e),e}function CXe(e,t){return e.map(t).join("")}var k6=1,Ww=1,QSe=0,Ru=0,vs=0,oS="";function $6(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:k6,column:Ww,length:o,return:""}}function Ex(e,t){return xXe($6("",null,null,"",null,null,0),e,{length:-e.length},t)}function IXe(){return vs}function OXe(){return vs=Ru>0?xo(oS,--Ru):0,Ww--,vs===10&&(Ww=1,k6--),vs}function ml(){return vs=Ru<QSe?xo(oS,Ru++):0,Ww++,vs===10&&(Ww=1,k6++),vs}function Rd(){return xo(oS,Ru)}function g$(){return Ru}function aI(e,t){return kA(oS,e,t)}function $A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function JSe(e){return k6=Ww=1,QSe=ld(oS=e),Ru=0,[]}function ZSe(e){return oS="",e}function y$(e){return XSe(aI(Ru-1,mz(e===91?e+2:e===40?e+1:e)))}function PXe(e){for(;(vs=Rd())&&vs<33;)ml();return $A(e)>2||$A(vs)>3?"":" "}function kXe(e,t){for(;--t&&ml()&&!(vs<48||vs>102||vs>57&&vs<65||vs>70&&vs<97););return aI(e,g$()+(t<6&&Rd()==32&&ml()==32))}function mz(e){for(;ml();)switch(vs){case e:return Ru;case 34:case 39:e!==34&&e!==39&&mz(vs);break;case 40:e===41&&mz(e);break;case 92:ml();break}return Ru}function $Xe(e,t){for(;ml()&&e+vs!==57;)if(e+vs===84&&Rd()===47)break;return"/*"+aI(t,Ru-1)+"*"+P6(e===47?e:ml())}function RXe(e){for(;!$A(Rd());)ml();return aI(e,Ru)}function NXe(e){return ZSe(v$("",null,null,null,[""],e=JSe(e),0,[0],e))}function v$(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",w=i,x=s,E=r,b=_;g;)switch(p=v,v=ml()){case 40:if(p!=108&&xo(b,f-1)==58){pz(b+=kr(y$(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:b+=y$(v);break;case 9:case 10:case 13:case 32:b+=PXe(p);break;case 92:b+=kXe(g$()-1,7);continue;case 47:switch(Rd()){case 42:case 47:EP(DXe($Xe(ml(),g$()),t,n),u);break;default:b+="/"}break;case 123*m:a[l++]=ld(b)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&ld(b)-f&&EP(h>32?boe(b+";",r,n,f-1):boe(kr(b," ","")+";",r,n,f-2),u);break;case 59:b+=";";default:if(EP(E=_oe(b,t,n,l,c,i,a,_,w=[],x=[],f),s),v===123)if(c===0)v$(b,t,E,E,w,s,f,a,x);else switch(d===99&&xo(b,3)===110?100:d){case 100:case 109:case 115:v$(e,E,E,r&&EP(_oe(e,E,E,0,0,i,a,_,i,w=[],f),x),i,x,f,a,r?w:x);break;default:v$(b,E,E,E,[""],x,0,a,x)}}l=c=h=0,m=y=1,_=b="",f=o;break;case 58:f=1+ld(b),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&OXe()==125)continue}switch(b+=P6(v),v*m){case 38:y=c>0?1:(b+="\f",-1);break;case 44:a[l++]=(ld(b)-1)*y,y=1;break;case 64:Rd()===45&&(b+=y$(ml())),d=Rd(),c=f=ld(_=b+=RXe(g$())),v++;break;case 45:p===45&&ld(b)==2&&(m=0)}}return s}function _oe(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=lY(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=kA(e,f+1,f=SXe(m=o[p])),_=e;y<h;++y)(_=XSe(m>0?d[y]+" "+v:kr(v,/&\f/g,d[y])))&&(u[g++]=_);return $6(e,t,n,i===0?aY:a,u,l,c)}function DXe(e,t,n){return $6(e,t,n,YSe,P6(IXe()),kA(e,2,-2),0)}function boe(e,t,n,r){return $6(e,t,n,uY,kA(e,0,r),kA(e,r+1,-1),r)}function sw(e,t){for(var n="",r=lY(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function MXe(e,t,n,r){switch(e.type){case EXe:case uY:return e.return=e.return||e.value;case YSe:return"";case KSe:return e.return=e.value+"{"+sw(e.children,r)+"}";case aY:e.value=e.props.join(",")}return ld(n=sw(e.children,r))?e.return=e.value+"{"+n+"}":""}function LXe(e){var t=lY(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function FXe(e){return function(t){t.root||(t=t.return)&&e(t)}}function BXe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var jXe=function(t,n,r){for(var i=0,s=0;i=s,s=Rd(),i===38&&s===12&&(n[r]=1),!$A(s);)ml();return aI(t,Ru)},UXe=function(t,n){var r=-1,i=44;do switch($A(i)){case 0:i===38&&Rd()===12&&(n[r]=1),t[r]+=jXe(Ru-1,n,r);break;case 2:t[r]+=y$(i);break;case 4:if(i===44){t[++r]=Rd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=P6(i)}while(i=ml());return t},zXe=function(t,n){return ZSe(UXe(JSe(t),n))},woe=new WeakMap,VXe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!woe.get(r))&&!i){woe.set(t,!0);for(var s=[],o=zXe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},HXe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function exe(e,t){switch(TXe(e,t)){case 5103:return xr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xr+e+sN+e+Qo+e+e;case 6828:case 4268:return xr+e+Qo+e+e;case 6165:return xr+e+Qo+"flex-"+e+e;case 5187:return xr+e+kr(e,/(\w+).+(:[^]+)/,xr+"box-$1$2"+Qo+"flex-$1$2")+e;case 5443:return xr+e+Qo+"flex-item-"+kr(e,/flex-|-self/,"")+e;case 4675:return xr+e+Qo+"flex-line-pack"+kr(e,/align-content|flex-|-self/,"")+e;case 5548:return xr+e+Qo+kr(e,"shrink","negative")+e;case 5292:return xr+e+Qo+kr(e,"basis","preferred-size")+e;case 6060:return xr+"box-"+kr(e,"-grow","")+xr+e+Qo+kr(e,"grow","positive")+e;case 4554:return xr+kr(e,/([^-])(transform)/g,"$1"+xr+"$2")+e;case 6187:return kr(kr(kr(e,/(zoom-|grab)/,xr+"$1"),/(image-set)/,xr+"$1"),e,"")+e;case 5495:case 3959:return kr(e,/(image-set\([^]*)/,xr+"$1$`$1");case 4968:return kr(kr(e,/(.+:)(flex-)?(.*)/,xr+"box-pack:$3"+Qo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xr+e+e;case 4095:case 3583:case 4068:case 2532:return kr(e,/(.+)-inline(.+)/,xr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ld(e)-1-t>6)switch(xo(e,t+1)){case 109:if(xo(e,t+4)!==45)break;case 102:return kr(e,/(.+:)(.+)-([^]+)/,"$1"+xr+"$2-$3$1"+sN+(xo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~pz(e,"stretch")?exe(kr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xo(e,t+1)!==115)break;case 6444:switch(xo(e,ld(e)-3-(~pz(e,"!important")&&10))){case 107:return kr(e,":",":"+xr)+e;case 101:return kr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+xr+(xo(e,14)===45?"inline-":"")+"box$3$1"+xr+"$2$3$1"+Qo+"$2box$3")+e}break;case 5936:switch(xo(e,t+11)){case 114:return xr+e+Qo+kr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xr+e+Qo+kr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xr+e+Qo+kr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return xr+e+Qo+e+e}return e}var qXe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case uY:t.return=exe(t.value,t.length);break;case KSe:return sw([Ex(t,{value:kr(t.value,"@","@"+xr)})],i);case aY:if(t.length)return CXe(t.props,function(s){switch(AXe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sw([Ex(t,{props:[kr(s,/:(read-\w+)/,":"+sN+"$1")]})],i);case"::placeholder":return sw([Ex(t,{props:[kr(s,/:(plac\w+)/,":"+xr+"input-$1")]}),Ex(t,{props:[kr(s,/:(plac\w+)/,":"+sN+"$1")]}),Ex(t,{props:[kr(s,/:(plac\w+)/,Qo+"input-$1")]})],i)}return""})}},WXe=[qXe],GXe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||WXe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[VXe,HXe];{var c,f=[MXe,FXe(function(m){c.insert(m)})],d=LXe(l.concat(i,f)),h=function(g){return sw(NXe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new wXe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};const txe=GXe;function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki.apply(this,arguments)}var nxe={exports:{}},Lr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var co=typeof Symbol=="function"&&Symbol.for,cY=co?Symbol.for("react.element"):60103,fY=co?Symbol.for("react.portal"):60106,R6=co?Symbol.for("react.fragment"):60107,N6=co?Symbol.for("react.strict_mode"):60108,D6=co?Symbol.for("react.profiler"):60114,M6=co?Symbol.for("react.provider"):60109,L6=co?Symbol.for("react.context"):60110,dY=co?Symbol.for("react.async_mode"):60111,F6=co?Symbol.for("react.concurrent_mode"):60111,B6=co?Symbol.for("react.forward_ref"):60112,j6=co?Symbol.for("react.suspense"):60113,YXe=co?Symbol.for("react.suspense_list"):60120,U6=co?Symbol.for("react.memo"):60115,z6=co?Symbol.for("react.lazy"):60116,KXe=co?Symbol.for("react.block"):60121,XXe=co?Symbol.for("react.fundamental"):60117,QXe=co?Symbol.for("react.responder"):60118,JXe=co?Symbol.for("react.scope"):60119;function Rl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case cY:switch(e=e.type,e){case dY:case F6:case R6:case D6:case N6:case j6:return e;default:switch(e=e&&e.$$typeof,e){case L6:case B6:case z6:case U6:case M6:return e;default:return t}}case fY:return t}}}function rxe(e){return Rl(e)===F6}Lr.AsyncMode=dY;Lr.ConcurrentMode=F6;Lr.ContextConsumer=L6;Lr.ContextProvider=M6;Lr.Element=cY;Lr.ForwardRef=B6;Lr.Fragment=R6;Lr.Lazy=z6;Lr.Memo=U6;Lr.Portal=fY;Lr.Profiler=D6;Lr.StrictMode=N6;Lr.Suspense=j6;Lr.isAsyncMode=function(e){return rxe(e)||Rl(e)===dY};Lr.isConcurrentMode=rxe;Lr.isContextConsumer=function(e){return Rl(e)===L6};Lr.isContextProvider=function(e){return Rl(e)===M6};Lr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===cY};Lr.isForwardRef=function(e){return Rl(e)===B6};Lr.isFragment=function(e){return Rl(e)===R6};Lr.isLazy=function(e){return Rl(e)===z6};Lr.isMemo=function(e){return Rl(e)===U6};Lr.isPortal=function(e){return Rl(e)===fY};Lr.isProfiler=function(e){return Rl(e)===D6};Lr.isStrictMode=function(e){return Rl(e)===N6};Lr.isSuspense=function(e){return Rl(e)===j6};Lr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===R6||e===F6||e===D6||e===N6||e===j6||e===YXe||typeof e=="object"&&e!==null&&(e.$$typeof===z6||e.$$typeof===U6||e.$$typeof===M6||e.$$typeof===L6||e.$$typeof===B6||e.$$typeof===XXe||e.$$typeof===QXe||e.$$typeof===JXe||e.$$typeof===KXe)};Lr.typeOf=Rl;nxe.exports=Lr;var ZXe=nxe.exports,ixe=ZXe,eQe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tQe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sxe={};sxe[ixe.ForwardRef]=eQe;sxe[ixe.Memo]=tQe;var nQe=!0;function rQe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var iQe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||nQe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},oxe=function(t,n,r){iQe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function sQe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var oQe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aQe=/[A-Z]|^ms/g,uQe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,axe=function(t){return t.charCodeAt(1)===45},Eoe=function(t){return t!=null&&typeof t!="boolean"},R9=BXe(function(e){return axe(e)?e:e.replace(aQe,"-$&").toLowerCase()}),Soe=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(uQe,function(r,i,s){return cd={name:i,styles:s,next:cd},i})}return oQe[t]!==1&&!axe(t)&&typeof n=="number"&&n!==0?n+"px":n};function RA(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return cd={name:n.name,styles:n.styles,next:cd},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)cd={name:r.name,styles:r.styles,next:cd},r=r.next;var i=n.styles+";";return i}return lQe(e,t,n)}case"function":{if(e!==void 0){var s=cd,o=n(e);return cd=s,RA(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function lQe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=RA(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":Eoe(o)&&(r+=R9(s)+":"+Soe(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)Eoe(o[a])&&(r+=R9(s)+":"+Soe(s,o[a])+";");else{var u=RA(e,t,o);switch(s){case"animation":case"animationName":{r+=R9(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var xoe=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cd,hY=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";cd=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=RA(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=RA(r,n,t[a]),i&&(s+=o[a]);xoe.lastIndex=0;for(var u="",l;(l=xoe.exec(s))!==null;)u+="-"+l[1];var c=sQe(s)+u;return{name:c,styles:s,next:cd}},cQe=o1.useInsertionEffect?o1.useInsertionEffect:!1,Toe=cQe||P.useLayoutEffect,uxe=P.createContext(typeof HTMLElement<"u"?txe({key:"css"}):null);uxe.Provider;var fQe=function(t){return P.forwardRef(function(n,r){var i=P.useContext(uxe);return t(n,i,r)})},dQe=P.createContext({}),hQe=fQe(function(e,t){var n=e.styles,r=hY([n],void 0,P.useContext(dQe)),i=P.useRef();return Toe(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),Toe(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&oxe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function lxe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hY(t)}var pQe=function(){var t=lxe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function cxe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var mQe=Object.defineProperty,Aoe=Object.getOwnPropertySymbols,gQe=Object.prototype.hasOwnProperty,yQe=Object.prototype.propertyIsEnumerable,Coe=(e,t,n)=>t in e?mQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N9=(e,t)=>{for(var n in t||(t={}))gQe.call(t,n)&&Coe(e,n,t[n]);if(Aoe)for(var n of Aoe(t))yQe.call(t,n)&&Coe(e,n,t[n]);return e};const fxe=P.createContext({theme:GSe});function As(){var e;return((e=P.useContext(fxe))==null?void 0:e.theme)||GSe}function vQe(e){const t=As(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function dxe(){var e;return(e=P.useContext(fxe))==null?void 0:e.emotionCache}function Ot(e,t,n){var r;const s=(r=As().components[e])==null?void 0:r.defaultProps;return N9(N9(N9({},t),s),cxe(n))}const hxe=P.createContext({classNames:{},styles:{},unstyled:!1});function pY({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return j.createElement(hxe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function J0(){return P.useContext(hxe)}const _Qe={app:100,modal:200,popover:300,overlay:400,max:9999};function Ta(e){return _Qe[e]}function bQe(e,t){const n=P.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const wQe=txe({key:"mantine",prepend:!0});function EQe(){return dxe()||wQe}var SQe=Object.defineProperty,Ioe=Object.getOwnPropertySymbols,xQe=Object.prototype.hasOwnProperty,TQe=Object.prototype.propertyIsEnumerable,Ooe=(e,t,n)=>t in e?SQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AQe=(e,t)=>{for(var n in t||(t={}))xQe.call(t,n)&&Ooe(e,n,t[n]);if(Ioe)for(var n of Ioe(t))TQe.call(t,n)&&Ooe(e,n,t[n]);return e};const D9="ref";function CQe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(D9 in n))return{args:e,ref:t};t=n[D9];const r=AQe({},n);return delete r[D9],{args:[r],ref:t}}const{cssFactory:IQe}=(()=>{function e(n,r,i){const s=[],o=rQe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=CQe(o),l=hY(u,r.registered);return oxe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,HSe(o))}}return{cssFactory:t}})();function pxe(){const e=EQe();return bQe(()=>IQe({cache:e}),[e])}function OQe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var PQe=Object.defineProperty,Poe=Object.getOwnPropertySymbols,kQe=Object.prototype.hasOwnProperty,$Qe=Object.prototype.propertyIsEnumerable,koe=(e,t,n)=>t in e?PQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M9=(e,t)=>{for(var n in t||(t={}))kQe.call(t,n)&&koe(e,n,t[n]);if(Poe)for(var n of Poe(t))$Qe.call(t,n)&&koe(e,n,t[n]);return e};function RQe(e){return`__mantine-ref-${e||""}`}function $oe(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=M9(M9({},i[o]),s[o]):i[o]=M9({},s[o])}),i),{}):r(e)}function yt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=As(),o=vQe(i==null?void 0:i.name),a=dxe(),{css:u,cx:l}=pxe(),c=t(s,r,RQe),f=$oe(i==null?void 0:i.styles,s,r),d=$oe(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:OQe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function mxe({styles:e}){const t=As();return j.createElement(hQe,{styles:lxe(typeof e=="function"?e(t):e)})}var NQe=Object.defineProperty,DQe=Object.defineProperties,MQe=Object.getOwnPropertyDescriptors,Roe=Object.getOwnPropertySymbols,LQe=Object.prototype.hasOwnProperty,FQe=Object.prototype.propertyIsEnumerable,Noe=(e,t,n)=>t in e?NQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sx=(e,t)=>{for(var n in t||(t={}))LQe.call(t,n)&&Noe(e,n,t[n]);if(Roe)for(var n of Roe(t))FQe.call(t,n)&&Noe(e,n,t[n]);return e},xx=(e,t)=>DQe(e,MQe(t));const Tx={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},SP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:xx(Sx({},Tx),{common:{transformOrigin:"center center"}}),"pop-bottom-left":xx(Sx({},Tx),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":xx(Sx({},Tx),{common:{transformOrigin:"bottom right"}}),"pop-top-left":xx(Sx({},Tx),{common:{transformOrigin:"top left"}}),"pop-top-right":xx(Sx({},Tx),{common:{transformOrigin:"top right"}})},Doe=["mousedown","touchstart"];function BQe(e,t,n){const r=P.useRef();return P.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Doe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Doe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function jQe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function UQe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function zQe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?!1:UQe(e,t)),s=P.useRef();return P.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),jQe(s.current,o=>i(o.matches))},[e]),r}function gf(e,t,n){return Math.min(Math.max(e,t),n)}const mY=typeof document<"u"?P.useLayoutEffect:P.useEffect;function Fs(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function gY({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Fs(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const VQe=/input|select|textarea|button|object/,gxe="a, input, select, textarea, button, object, [tabindex]";function HQe(e){return e.style.display==="none"}function qQe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(HQe(n))return!1;n=n.parentNode}return!0}function yxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function gz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(yxe(e));return(VQe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&qQe(e)}function vxe(e){const t=yxe(e);return(Number.isNaN(t)||t>=0)&&gz(e)}function WQe(e){return Array.from(e.querySelectorAll(gxe)).filter(vxe)}function GQe(e,t){const n=WQe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function YQe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function yY(e=!0){const t=P.useRef(),n=P.useRef(null),r=P.useCallback(i=>{if(e&&i!==null&&(n.current=YQe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(gxe));o=a.find(vxe)||a.find(gz)||null,!o&&gz(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return P.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&GQe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const KQe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,XQe=j.useId||(()=>{});function QQe(){const[e,t]=P.useState("");return mY(()=>{t(KQe())},[]),e}function JQe(){const e=XQe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Vu(e){return typeof e=="string"?e:JQe()||QQe()}function yz(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function _xe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function bxe(...e){return t=>{e.forEach(n=>_xe(n,t))}}function Hs(...e){return P.useCallback(bxe(...e),e)}function wxe(e,t,n="ltr"){const r=P.useRef(),i=P.useRef(!1),s=P.useRef(!1),o=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const w=r.current.getBoundingClientRect();if(w.width&&w.height){const x=gf((v-w.left)/w.width,0,1);e({x:n==="ltr"?x:1-x,y:gf((_-w.top)/w.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ya({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=P.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function V6(e,t){return zQe("(prefers-reduced-motion: reduce)",e,t)}const ZQe=e=>e<.5?2*e*e:-1+(4-2*e)*e,eJe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},tJe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},nJe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function Exe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=ZQe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=P.useRef(0),u=P.useRef(0),l=P.useRef(!1),c=P.useRef(null),f=P.useRef(null),d=V6(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=P.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=tJe({parent:c.current,axis:t}))!=null?y:0,_=eJe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function w(){u.current===0&&(u.current=performance.now());const E=performance.now()-u.current,b=d||e===0?1:E/e,T=v+_*r(b);nJe({parent:c.current,axis:t,distance:T}),!l.current&&b<1?a.current=requestAnimationFrame(w):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}w()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return yz("wheel",m,{passive:!0}),yz("touchmove",m,{passive:!0}),P.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const rJe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function jv(){const e=P.useRef(0),t=P.useRef(null),[n,r]=P.useState(rJe),i=P.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return P.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function iJe(){const[e,{width:t,height:n}]=jv();return{ref:e,width:t,height:n}}function sJe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const oJe=({disableBodyPadding:e})=>{const t=e?null:sJe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function aJe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uJe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function lJe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function Sxe(e,t={disableBodyPadding:!1}){const[n,r]=P.useState(e||!1),i=P.useRef(0),{disableBodyPadding:s}=t,o=P.useRef(null),a=()=>{i.current=window.scrollY;const l=oJe({disableBodyPadding:s}),c=lJe();aJe(c,l),uJe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return P.useEffect(()=>(n?a():u(),u),[n]),P.useEffect(()=>{e!==void 0&&r(e)},[e]),P.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var cJe=Object.defineProperty,fJe=Object.defineProperties,dJe=Object.getOwnPropertyDescriptors,Moe=Object.getOwnPropertySymbols,hJe=Object.prototype.hasOwnProperty,pJe=Object.prototype.propertyIsEnumerable,Loe=(e,t,n)=>t in e?cJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mJe=(e,t)=>{for(var n in t||(t={}))hJe.call(t,n)&&Loe(e,n,t[n]);if(Moe)for(var n of Moe(t))pJe.call(t,n)&&Loe(e,n,t[n]);return e},gJe=(e,t)=>fJe(e,dJe(t));function yJe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return gJe(mJe({},n),{key:i})}function vJe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function _Je(e){return t=>vJe(yJe(e),t)}function bJe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{_Je(r)(n)&&(t.preventDefault(),i(n))})}}function wJe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function EJe(){return typeof window<"u"?wJe():"undetermined"}function SJe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n.type==="checkbox"?e(n.checked):e(n.value)}else e(t)}}function xJe(e){const[t,n]=P.useState(e);return[t,SJe(n)]}function Mb(e,t){const[n,r]=P.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function _$(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function wg(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var Foe=Object.getOwnPropertySymbols,TJe=Object.prototype.hasOwnProperty,AJe=Object.prototype.propertyIsEnumerable,CJe=(e,t)=>{var n={};for(var r in e)TJe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Foe)for(var r of Foe(e))t.indexOf(r)<0&&AJe.call(e,r)&&(n[r]=e[r]);return n};function $f(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:x,lts:E,ta:b,lh:T,fs:C,tt:A,td:O,w:N,miw:k,maw:L,h:B,mih:U,mah:G,bgsz:H,bgp:Y,bgr:q,bga:D,pos:M,top:W,left:z,bottom:V,right:te,inset:le,display:me}=t,ye=CJe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:cxe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:x,lts:E,ta:b,lh:T,fs:C,tt:A,td:O,w:N,miw:k,maw:L,h:B,mih:U,mah:G,bgsz:H,bgp:Y,bgr:q,bga:D,pos:M,top:W,left:z,bottom:V,right:te,inset:le,display:me}),rest:ye}}function IJe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function OJe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return IJe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function PJe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function kJe(e){return e}function $Je(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const RJe=["-xs","-sm","-md","-lg","-xl"];function NJe(e,t){return RJe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const DJe={color:PJe,default:kJe,fontSize:$Je,spacing:NJe},MJe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var LJe=Object.defineProperty,Boe=Object.getOwnPropertySymbols,FJe=Object.prototype.hasOwnProperty,BJe=Object.prototype.propertyIsEnumerable,joe=(e,t,n)=>t in e?LJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uoe=(e,t)=>{for(var n in t||(t={}))FJe.call(t,n)&&joe(e,n,t[n]);if(Boe)for(var n of Boe(t))BJe.call(t,n)&&joe(e,n,t[n]);return e};function vz(e,t,n=MJe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(OJe({value:e[s],getValue:DJe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=Uoe(Uoe({},i[o]),s[o]):i[o]=s[o]}),i),{})}function zoe(e,t){return typeof e=="function"?e(t):e}function jJe(e,t,n){const r=As(),{css:i,cx:s}=pxe();return Array.isArray(e)?s(n,i(vz(t,r)),e.map(o=>i(zoe(o,r)))):s(n,i(zoe(e,r)),i(vz(t,r)))}var UJe=Object.defineProperty,oN=Object.getOwnPropertySymbols,xxe=Object.prototype.hasOwnProperty,Txe=Object.prototype.propertyIsEnumerable,Voe=(e,t,n)=>t in e?UJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zJe=(e,t)=>{for(var n in t||(t={}))xxe.call(t,n)&&Voe(e,n,t[n]);if(oN)for(var n of oN(t))Txe.call(t,n)&&Voe(e,n,t[n]);return e},VJe=(e,t)=>{var n={};for(var r in e)xxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oN)for(var r of oN(e))t.indexOf(r)<0&&Txe.call(e,r)&&(n[r]=e[r]);return n};const Axe=P.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=VJe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=$f(a),c=i||"div";return j.createElement(c,zJe({ref:t,className:jJe(o,u,r),style:s},l))});Axe.displayName="@mantine/core/Box";const pt=Axe;var HJe=Object.defineProperty,qJe=Object.defineProperties,WJe=Object.getOwnPropertyDescriptors,Hoe=Object.getOwnPropertySymbols,GJe=Object.prototype.hasOwnProperty,YJe=Object.prototype.propertyIsEnumerable,qoe=(e,t,n)=>t in e?HJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Woe=(e,t)=>{for(var n in t||(t={}))GJe.call(t,n)&&qoe(e,n,t[n]);if(Hoe)for(var n of Hoe(t))YJe.call(t,n)&&qoe(e,n,t[n]);return e},KJe=(e,t)=>qJe(e,WJe(t)),XJe=yt(e=>({root:KJe(Woe(Woe({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const QJe=XJe;var JJe=Object.defineProperty,aN=Object.getOwnPropertySymbols,Cxe=Object.prototype.hasOwnProperty,Ixe=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?JJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZJe=(e,t)=>{for(var n in t||(t={}))Cxe.call(t,n)&&Goe(e,n,t[n]);if(aN)for(var n of aN(t))Ixe.call(t,n)&&Goe(e,n,t[n]);return e},eZe=(e,t)=>{var n={};for(var r in e)Cxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aN)for(var r of aN(e))t.indexOf(r)<0&&Ixe.call(e,r)&&(n[r]=e[r]);return n};const Oxe=P.forwardRef((e,t)=>{const n=Ot("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=eZe(n,["className","component","unstyled"]),{classes:a,cx:u}=QJe(null,{name:"UnstyledButton",unstyled:s});return j.createElement(pt,ZJe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});Oxe.displayName="@mantine/core/UnstyledButton";const pm=Oxe;var tZe=Object.defineProperty,nZe=Object.defineProperties,rZe=Object.getOwnPropertyDescriptors,uN=Object.getOwnPropertySymbols,Pxe=Object.prototype.hasOwnProperty,kxe=Object.prototype.propertyIsEnumerable,Yoe=(e,t,n)=>t in e?tZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lc=(e,t)=>{for(var n in t||(t={}))Pxe.call(t,n)&&Yoe(e,n,t[n]);if(uN)for(var n of uN(t))kxe.call(t,n)&&Yoe(e,n,t[n]);return e},Ax=(e,t)=>nZe(e,rZe(t)),iZe=(e,t)=>{var n={};for(var r in e)Pxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uN)for(var r of uN(e))t.indexOf(r)<0&&kxe.call(e,r)&&(n[r]=e[r]);return n};function sZe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function L9(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function oZe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const Fh=typeof window<"u"&&window.requestAnimationFrame;function aZe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=P.useRef(null),o="0px",[a,u]=P.useState({}),l=g=>{Q1.flushSync(()=>u(g))},c=g=>{l(y=>Lc(Lc({},y),g))};function f(g){const y=e||sZe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:oZe(s),height:L9(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};P.useEffect(()=>{Fh(()=>{const{x:g,y}=h();i==="x"&&!r?l(Lc({},g)):i==="y"&&!r&&l(Lc({},y))})},[]),Fs(()=>{i!=="x"&&Fh(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Fh(()=>{const g=L9(s);c(Ax(Lc({},f(g)),{height:g}))})}:()=>{const g=L9(s);c(Ax(Lc({},f(g)),{willChange:"height",height:g})),Fh(()=>c({height:o,overflow:"hidden"}))})},[r]),Fs(()=>{i!=="y"&&Fh(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),Fh(()=>{c(Ax(Lc({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(Ax(Lc({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),Fh(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,w=iZe(y,["style","refKey"]);const x=w[_];return Ax(Lc({"aria-hidden":!r},w),{[_]:bxe(s,x),onTransitionEnd:p,style:Lc(Lc({boxSizing:"border-box"},v),a)})}return m}var uZe=Object.defineProperty,lN=Object.getOwnPropertySymbols,$xe=Object.prototype.hasOwnProperty,Rxe=Object.prototype.propertyIsEnumerable,Koe=(e,t,n)=>t in e?uZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xP=(e,t)=>{for(var n in t||(t={}))$xe.call(t,n)&&Koe(e,n,t[n]);if(lN)for(var n of lN(t))Rxe.call(t,n)&&Koe(e,n,t[n]);return e},lZe=(e,t)=>{var n={};for(var r in e)$xe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lN)for(var r of lN(e))t.indexOf(r)<0&&Rxe.call(e,r)&&(n[r]=e[r]);return n};const cZe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},Nxe=P.forwardRef((e,t)=>{const n=Ot("Collapse",cZe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=lZe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=As(),h=V6(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=$f(f),v=aZe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?j.createElement(pt,xP({},y),r):null:j.createElement(pt,xP({},v(xP(xP({style:a,ref:t},y),g))),j.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});Nxe.displayName="@mantine/core/Collapse";var fZe=Object.defineProperty,Xoe=Object.getOwnPropertySymbols,dZe=Object.prototype.hasOwnProperty,hZe=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?fZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pZe=(e,t)=>{for(var n in t||(t={}))dZe.call(t,n)&&Qoe(e,n,t[n]);if(Xoe)for(var n of Xoe(t))hZe.call(t,n)&&Qoe(e,n,t[n]);return e};function mZe(e){return j.createElement("svg",pZe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),j.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var gZe=Object.defineProperty,yZe=Object.defineProperties,vZe=Object.getOwnPropertyDescriptors,Joe=Object.getOwnPropertySymbols,_Ze=Object.prototype.hasOwnProperty,bZe=Object.prototype.propertyIsEnumerable,Zoe=(e,t,n)=>t in e?gZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dxe=(e,t)=>{for(var n in t||(t={}))_Ze.call(t,n)&&Zoe(e,n,t[n]);if(Joe)for(var n of Joe(t))bZe.call(t,n)&&Zoe(e,n,t[n]);return e},wZe=(e,t)=>yZe(e,vZe(t));const ST={xs:18,sm:22,md:28,lg:34,xl:44};function EZe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Dxe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var SZe=yt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:wZe(Dxe({},EZe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:ST}),minHeight:e.fn.size({size:n,sizes:ST}),width:e.fn.size({size:n,sizes:ST}),minWidth:e.fn.size({size:n,sizes:ST}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})}));const xZe=SZe;var TZe=Object.defineProperty,cN=Object.getOwnPropertySymbols,Mxe=Object.prototype.hasOwnProperty,Lxe=Object.prototype.propertyIsEnumerable,eae=(e,t,n)=>t in e?TZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AZe=(e,t)=>{for(var n in t||(t={}))Mxe.call(t,n)&&eae(e,n,t[n]);if(cN)for(var n of cN(t))Lxe.call(t,n)&&eae(e,n,t[n]);return e},CZe=(e,t)=>{var n={};for(var r in e)Mxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cN)for(var r of cN(e))t.indexOf(r)<0&&Lxe.call(e,r)&&(n[r]=e[r]);return n};function IZe(e){var t=e,{size:n,color:r}=t,i=CZe(t,["size","color"]);return j.createElement("svg",AZe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),j.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var OZe=Object.defineProperty,fN=Object.getOwnPropertySymbols,Fxe=Object.prototype.hasOwnProperty,Bxe=Object.prototype.propertyIsEnumerable,tae=(e,t,n)=>t in e?OZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PZe=(e,t)=>{for(var n in t||(t={}))Fxe.call(t,n)&&tae(e,n,t[n]);if(fN)for(var n of fN(t))Bxe.call(t,n)&&tae(e,n,t[n]);return e},kZe=(e,t)=>{var n={};for(var r in e)Fxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fN)for(var r of fN(e))t.indexOf(r)<0&&Bxe.call(e,r)&&(n[r]=e[r]);return n};function $Ze(e){var t=e,{size:n,color:r}=t,i=kZe(t,["size","color"]);return j.createElement("svg",PZe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),j.createElement("g",{fill:"none",fillRule:"evenodd"},j.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},j.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),j.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},j.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var RZe=Object.defineProperty,dN=Object.getOwnPropertySymbols,jxe=Object.prototype.hasOwnProperty,Uxe=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?RZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NZe=(e,t)=>{for(var n in t||(t={}))jxe.call(t,n)&&nae(e,n,t[n]);if(dN)for(var n of dN(t))Uxe.call(t,n)&&nae(e,n,t[n]);return e},DZe=(e,t)=>{var n={};for(var r in e)jxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dN)for(var r of dN(e))t.indexOf(r)<0&&Uxe.call(e,r)&&(n[r]=e[r]);return n};function MZe(e){var t=e,{size:n,color:r}=t,i=DZe(t,["size","color"]);return j.createElement("svg",NZe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),j.createElement("circle",{cx:"15",cy:"15",r:"15"},j.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},j.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("circle",{cx:"105",cy:"15",r:"15"},j.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var LZe=Object.defineProperty,hN=Object.getOwnPropertySymbols,zxe=Object.prototype.hasOwnProperty,Vxe=Object.prototype.propertyIsEnumerable,rae=(e,t,n)=>t in e?LZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FZe=(e,t)=>{for(var n in t||(t={}))zxe.call(t,n)&&rae(e,n,t[n]);if(hN)for(var n of hN(t))Vxe.call(t,n)&&rae(e,n,t[n]);return e},BZe=(e,t)=>{var n={};for(var r in e)zxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hN)for(var r of hN(e))t.indexOf(r)<0&&Vxe.call(e,r)&&(n[r]=e[r]);return n};const F9={bars:IZe,oval:$Ze,dots:MZe},jZe={xs:18,sm:22,md:36,lg:44,xl:58},UZe={size:"md"};function J1(e){const t=Ot("Loader",UZe,e),{size:n,color:r,variant:i}=t,s=BZe(t,["size","color","variant"]),o=As(),a=i in F9?i:o.loader;return j.createElement(pt,FZe({role:"presentation",component:F9[a]||F9.bars,size:o.fn.size({size:n,sizes:jZe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}J1.displayName="@mantine/core/Loader";var zZe=Object.defineProperty,pN=Object.getOwnPropertySymbols,Hxe=Object.prototype.hasOwnProperty,qxe=Object.prototype.propertyIsEnumerable,iae=(e,t,n)=>t in e?zZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sae=(e,t)=>{for(var n in t||(t={}))Hxe.call(t,n)&&iae(e,n,t[n]);if(pN)for(var n of pN(t))qxe.call(t,n)&&iae(e,n,t[n]);return e},VZe=(e,t)=>{var n={};for(var r in e)Hxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&qxe.call(e,r)&&(n[r]=e[r]);return n};const HZe={color:"gray",size:"md",variant:"subtle",loading:!1},Wxe=P.forwardRef((e,t)=>{const n=Ot("ActionIcon",HZe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=VZe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=xZe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=j.createElement(J1,sae({color:v.color,size:y.fn.size({size:a,sizes:ST})-12},f));return j.createElement(pm,sae({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});Wxe.displayName="@mantine/core/ActionIcon";const NA=Wxe;function Gxe(e){const{children:t,target:n,className:r}=Ot("Portal",{},e),i=As(),[s,o]=P.useState(!1),a=P.useRef();return mY(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?Q1.createPortal(j.createElement("div",{className:r,dir:i.dir},t),a.current):null}Gxe.displayName="@mantine/core/Portal";var qZe=Object.defineProperty,mN=Object.getOwnPropertySymbols,Yxe=Object.prototype.hasOwnProperty,Kxe=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?qZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WZe=(e,t)=>{for(var n in t||(t={}))Yxe.call(t,n)&&oae(e,n,t[n]);if(mN)for(var n of mN(t))Kxe.call(t,n)&&oae(e,n,t[n]);return e},GZe=(e,t)=>{var n={};for(var r in e)Yxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&Kxe.call(e,r)&&(n[r]=e[r]);return n};function aS(e){var t=e,{withinPortal:n=!0,children:r}=t,i=GZe(t,["withinPortal","children"]);return n?j.createElement(Gxe,WZe({},i),r):j.createElement(j.Fragment,null,r)}aS.displayName="@mantine/core/OptionalPortal";var YZe=Object.defineProperty,KZe=Object.defineProperties,XZe=Object.getOwnPropertyDescriptors,aae=Object.getOwnPropertySymbols,QZe=Object.prototype.hasOwnProperty,JZe=Object.prototype.propertyIsEnumerable,uae=(e,t,n)=>t in e?YZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B9=(e,t)=>{for(var n in t||(t={}))QZe.call(t,n)&&uae(e,n,t[n]);if(aae)for(var n of aae(t))JZe.call(t,n)&&uae(e,n,t[n]);return e},lae=(e,t)=>KZe(e,XZe(t));function ZZe({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var eet=yt((e,{color:t,radius:n,variant:r})=>({root:B9(lae(B9({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),ZZe({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:lae(B9({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}}));const tet=eet;var net=Object.defineProperty,cae=Object.getOwnPropertySymbols,ret=Object.prototype.hasOwnProperty,iet=Object.prototype.propertyIsEnumerable,fae=(e,t,n)=>t in e?net(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,set=(e,t)=>{for(var n in t||(t={}))ret.call(t,n)&&fae(e,n,t[n]);if(cae)for(var n of cae(t))iet.call(t,n)&&fae(e,n,t[n]);return e};function Xxe(e){return j.createElement("svg",set({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}Xxe.displayName="@mantine/core/CloseIcon";var oet=Object.defineProperty,gN=Object.getOwnPropertySymbols,Qxe=Object.prototype.hasOwnProperty,Jxe=Object.prototype.propertyIsEnumerable,dae=(e,t,n)=>t in e?oet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aet=(e,t)=>{for(var n in t||(t={}))Qxe.call(t,n)&&dae(e,n,t[n]);if(gN)for(var n of gN(t))Jxe.call(t,n)&&dae(e,n,t[n]);return e},uet=(e,t)=>{var n={};for(var r in e)Qxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&Jxe.call(e,r)&&(n[r]=e[r]);return n};const cet={xs:12,sm:14,md:16,lg:20,xl:24},fet={size:"md"},Zxe=P.forwardRef((e,t)=>{const n=Ot("CloseButton",fet,e),{iconSize:r,size:i="md"}=n,s=uet(n,["iconSize","size"]),o=As(),a=r||o.fn.size({size:i,sizes:cet});return j.createElement(NA,aet({size:i,ref:t},s),j.createElement(Xxe,{width:a,height:a}))});Zxe.displayName="@mantine/core/CloseButton";const mm=Zxe;var det=Object.defineProperty,yN=Object.getOwnPropertySymbols,eTe=Object.prototype.hasOwnProperty,tTe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?det(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,het=(e,t)=>{for(var n in t||(t={}))eTe.call(t,n)&&hae(e,n,t[n]);if(yN)for(var n of yN(t))tTe.call(t,n)&&hae(e,n,t[n]);return e},pet=(e,t)=>{var n={};for(var r in e)eTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&tTe.call(e,r)&&(n[r]=e[r]);return n};const met={variant:"light"},nTe=P.forwardRef((e,t)=>{const n=Ot("Alert",met,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=pet(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=tet({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),w=Vu(r),x=s&&`${w}-title`,E=`${w}-body`;return j.createElement(pt,het({id:w,role:"alert","aria-labelledby":x,"aria-describedby":E,className:_(v.root,v[o],i),ref:t},y),j.createElement("div",{className:v.wrapper},c&&j.createElement("div",{className:v.icon},c),j.createElement("div",{className:v.body},s&&j.createElement("div",{className:v.title,"data-with-close-button":p||void 0},j.createElement("span",{id:x,className:v.label},s)),p&&j.createElement(mm,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),j.createElement("div",{id:E,className:v.message},a))))});nTe.displayName="@mantine/core/Alert";var get=Object.defineProperty,yet=Object.defineProperties,vet=Object.getOwnPropertyDescriptors,pae=Object.getOwnPropertySymbols,_et=Object.prototype.hasOwnProperty,bet=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?get(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TP=(e,t)=>{for(var n in t||(t={}))_et.call(t,n)&&mae(e,n,t[n]);if(pae)for(var n of pae(t))bet.call(t,n)&&mae(e,n,t[n]);return e},wet=(e,t)=>yet(e,vet(t));function Eet({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function xet({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function Tet(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var Aet=yt((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:TP(wet(TP(TP(TP({},e.fn.fontStyles()),e.fn.focusStyles()),Tet(i)),{color:xet({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:Eet({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const Cet=Aet;var Iet=Object.defineProperty,vN=Object.getOwnPropertySymbols,rTe=Object.prototype.hasOwnProperty,iTe=Object.prototype.propertyIsEnumerable,gae=(e,t,n)=>t in e?Iet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oet=(e,t)=>{for(var n in t||(t={}))rTe.call(t,n)&&gae(e,n,t[n]);if(vN)for(var n of vN(t))iTe.call(t,n)&&gae(e,n,t[n]);return e},Pet=(e,t)=>{var n={};for(var r in e)rTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&iTe.call(e,r)&&(n[r]=e[r]);return n};const ket={variant:"text"},sTe=P.forwardRef((e,t)=>{const n=Ot("Text",ket,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:w}=n,x=Pet(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:E,cx:b}=Cet({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return j.createElement(pt,Oet({ref:t,className:b(E.root,{[E.gradient]:l==="gradient"},r),component:w?"span":"div"},x))});sTe.displayName="@mantine/core/Text";const gt=sTe;var $et=yt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}}));const Ret=$et;var Net=Object.defineProperty,_N=Object.getOwnPropertySymbols,oTe=Object.prototype.hasOwnProperty,aTe=Object.prototype.propertyIsEnumerable,yae=(e,t,n)=>t in e?Net(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vae=(e,t)=>{for(var n in t||(t={}))oTe.call(t,n)&&yae(e,n,t[n]);if(_N)for(var n of _N(t))aTe.call(t,n)&&yae(e,n,t[n]);return e},Det=(e,t)=>{var n={};for(var r in e)oTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&aTe.call(e,r)&&(n[r]=e[r]);return n};const Met={},uTe=P.forwardRef((e,t)=>{const n=Ot("Anchor",Met,e),{component:r,className:i,unstyled:s}=n,o=Det(n,["component","className","unstyled"]),{classes:a,cx:u}=Ret(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return j.createElement(gt,vae(vae({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});uTe.displayName="@mantine/core/Anchor";const H6=uTe,lTe=P.createContext({}),Let=lTe.Provider;function cTe(){return P.useContext(lTe)}function q6(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var Fet=Object.defineProperty,Bet=Object.defineProperties,jet=Object.getOwnPropertyDescriptors,_ae=Object.getOwnPropertySymbols,Uet=Object.prototype.hasOwnProperty,zet=Object.prototype.propertyIsEnumerable,bae=(e,t,n)=>t in e?Fet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AP=(e,t)=>{for(var n in t||(t={}))Uet.call(t,n)&&bae(e,n,t[n]);if(_ae)for(var n of _ae(t))zet.call(t,n)&&bae(e,n,t[n]);return e},wae=(e,t)=>Bet(e,jet(t)),Vet=yt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?q6(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:wae(AP(AP(wae(AP(AP({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const Het=Vet;var qet=Object.defineProperty,bN=Object.getOwnPropertySymbols,fTe=Object.prototype.hasOwnProperty,dTe=Object.prototype.propertyIsEnumerable,Eae=(e,t,n)=>t in e?qet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sae=(e,t)=>{for(var n in t||(t={}))fTe.call(t,n)&&Eae(e,n,t[n]);if(bN)for(var n of bN(t))dTe.call(t,n)&&Eae(e,n,t[n]);return e},Wet=(e,t)=>{var n={};for(var r in e)fTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&dTe.call(e,r)&&(n[r]=e[r]);return n};const vY=P.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=Ta("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=Wet(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=cTe(),{classes:w,cx:x,theme:E}=Het({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),b=q6(r,E).reduce((T,[C,A])=>(T[`@media (min-width: ${C}px)`]={[`--mantine-${m}-width`]:`${A}px`},T),{});return j.createElement(pt,Sae({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:x(w.root,f)},v),p,j.createElement(mxe,{styles:()=>({":root":Sae({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},b)})}))});vY.displayName="@mantine/core/HorizontalSection";var Get=Object.defineProperty,wN=Object.getOwnPropertySymbols,hTe=Object.prototype.hasOwnProperty,pTe=Object.prototype.propertyIsEnumerable,xae=(e,t,n)=>t in e?Get(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yet=(e,t)=>{for(var n in t||(t={}))hTe.call(t,n)&&xae(e,n,t[n]);if(wN)for(var n of wN(t))pTe.call(t,n)&&xae(e,n,t[n]);return e},Ket=(e,t)=>{var n={};for(var r in e)hTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&pTe.call(e,r)&&(n[r]=e[r]);return n};const mTe=P.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=Ket(n,["children","grow","sx"]);return j.createElement(pt,Yet({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...c0(s)]},o),r)});mTe.displayName="@mantine/core/Section";const gTe=mTe;var Xet=Object.defineProperty,Tae=Object.getOwnPropertySymbols,Qet=Object.prototype.hasOwnProperty,Jet=Object.prototype.propertyIsEnumerable,Aae=(e,t,n)=>t in e?Xet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zet=(e,t)=>{for(var n in t||(t={}))Qet.call(t,n)&&Aae(e,n,t[n]);if(Tae)for(var n of Tae(t))Jet.call(t,n)&&Aae(e,n,t[n]);return e};const ett={fixed:!1,position:{top:0,left:0},zIndex:Ta("app"),hiddenBreakpoint:"md",hidden:!1},b2=P.forwardRef((e,t)=>{const n=Ot("Navbar",ett,e);return j.createElement(vY,Zet({section:"navbar",__staticSelector:"Navbar",ref:t},n))});b2.Section=gTe;b2.displayName="@mantine/core/Navbar";var ttt=Object.defineProperty,ntt=Object.defineProperties,rtt=Object.getOwnPropertyDescriptors,Cae=Object.getOwnPropertySymbols,itt=Object.prototype.hasOwnProperty,stt=Object.prototype.propertyIsEnumerable,Iae=(e,t,n)=>t in e?ttt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j9=(e,t)=>{for(var n in t||(t={}))itt.call(t,n)&&Iae(e,n,t[n]);if(Cae)for(var n of Cae(t))stt.call(t,n)&&Iae(e,n,t[n]);return e},Oae=(e,t)=>ntt(e,rtt(t)),ott=yt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?q6(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:Oae(j9(Oae(j9(j9({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const att=ott;var utt=Object.defineProperty,EN=Object.getOwnPropertySymbols,yTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,Pae=(e,t,n)=>t in e?utt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kae=(e,t)=>{for(var n in t||(t={}))yTe.call(t,n)&&Pae(e,n,t[n]);if(EN)for(var n of EN(t))vTe.call(t,n)&&Pae(e,n,t[n]);return e},ltt=(e,t)=>{var n={};for(var r in e)yTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&vTe.call(e,r)&&(n[r]=e[r]);return n};const _Te=P.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=Ta("app"),section:d,unstyled:h,__staticSelector:p}=n,m=ltt(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=cTe(),{classes:y,cx:v,theme:_}=att({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),w=typeof a=="object"&&a!==null?q6(a,_).reduce((x,[E,b])=>(x[`@media (min-width: ${E}px)`]={[`--mantine-${d}-height`]:`${b}px`},x),{}):null;return j.createElement(pt,kae({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,j.createElement(mxe,{styles:()=>({":root":kae({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},w)})}))});_Te.displayName="@mantine/core/VerticalSection";var ctt=Object.defineProperty,ftt=Object.defineProperties,dtt=Object.getOwnPropertyDescriptors,$ae=Object.getOwnPropertySymbols,htt=Object.prototype.hasOwnProperty,ptt=Object.prototype.propertyIsEnumerable,Rae=(e,t,n)=>t in e?ctt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mtt=(e,t)=>{for(var n in t||(t={}))htt.call(t,n)&&Rae(e,n,t[n]);if($ae)for(var n of $ae(t))ptt.call(t,n)&&Rae(e,n,t[n]);return e},gtt=(e,t)=>ftt(e,dtt(t));const ytt={fixed:!1,position:{top:0,left:0,right:0},zIndex:Ta("app")},_Y=P.forwardRef((e,t)=>{const n=Ot("Header",ytt,e);return j.createElement(_Te,gtt(mtt({section:"header",__staticSelector:"Header"},n),{ref:t}))});_Y.displayName="@mantine/core/Header";var vtt=Object.defineProperty,Nae=Object.getOwnPropertySymbols,_tt=Object.prototype.hasOwnProperty,btt=Object.prototype.propertyIsEnumerable,Dae=(e,t,n)=>t in e?vtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wtt=(e,t)=>{for(var n in t||(t={}))_tt.call(t,n)&&Dae(e,n,t[n]);if(Nae)for(var n of Nae(t))btt.call(t,n)&&Dae(e,n,t[n]);return e};const Ett={fixed:!1,position:{top:0,right:0},zIndex:Ta("app"),hiddenBreakpoint:"md",hidden:!1},bY=P.forwardRef((e,t)=>{const n=Ot("Aside",Ett,e);return j.createElement(vY,wtt({section:"aside",__staticSelector:"Aside",ref:t},n))});bY.Section=gTe;bY.displayName="@mantine/core/Aside";var Stt=Object.defineProperty,Mae=Object.getOwnPropertySymbols,xtt=Object.prototype.hasOwnProperty,Ttt=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?Stt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Att=(e,t)=>{for(var n in t||(t={}))xtt.call(t,n)&&Lae(e,n,t[n]);if(Mae)for(var n of Mae(t))Ttt.call(t,n)&&Lae(e,n,t[n]);return e};function Ctt(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var Itt=yt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:Att({flex:1,width:"100vw",boxSizing:"border-box"},Ctt(t,e))}));const Ott=Itt;var Ptt=Object.defineProperty,SN=Object.getOwnPropertySymbols,bTe=Object.prototype.hasOwnProperty,wTe=Object.prototype.propertyIsEnumerable,Fae=(e,t,n)=>t in e?Ptt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ktt=(e,t)=>{for(var n in t||(t={}))bTe.call(t,n)&&Fae(e,n,t[n]);if(SN)for(var n of SN(t))wTe.call(t,n)&&Fae(e,n,t[n]);return e},$tt=(e,t)=>{var n={};for(var r in e)bTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&wTe.call(e,r)&&(n[r]=e[r]);return n};const Rtt={fixed:!0,zIndex:Ta("app"),padding:"md"},uI=P.forwardRef((e,t)=>{const n=Ot("AppShell",Rtt,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=$tt(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:w}=Ott({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?j.createElement(j.Fragment,null,r):j.createElement(Let,{value:{fixed:u,zIndex:l}},j.createElement(pt,ktt({className:w(_.root,h),ref:t},v),s,j.createElement("div",{className:_.body},i,j.createElement("main",{className:_.main},r),a),o))});uI.displayName="@mantine/core/AppShell";const CP={xs:1,sm:2,md:3,lg:4,xl:5};function IP(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var Ntt=yt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:CP})}px ${n} ${IP(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:CP})}px ${n} ${IP(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:CP}),borderTopColor:IP(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:CP}),borderLeftColor:IP(e,r),borderLeftStyle:n}}));const Dtt=Ntt;var Mtt=Object.defineProperty,Ltt=Object.defineProperties,Ftt=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,ETe=Object.prototype.hasOwnProperty,STe=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?Mtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jae=(e,t)=>{for(var n in t||(t={}))ETe.call(t,n)&&Bae(e,n,t[n]);if(xN)for(var n of xN(t))STe.call(t,n)&&Bae(e,n,t[n]);return e},Btt=(e,t)=>Ltt(e,Ftt(t)),jtt=(e,t)=>{var n={};for(var r in e)ETe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&STe.call(e,r)&&(n[r]=e[r]);return n};const Utt={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},TN=P.forwardRef((e,t)=>{const n=Ot("Divider",Utt,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=jtt(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=Dtt({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,w=!(l!=null&&l.color);return j.createElement(pt,jae({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&j.createElement(gt,Btt(jae({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:w})}),a))});TN.displayName="@mantine/core/Divider";var ztt=Object.defineProperty,Vtt=Object.defineProperties,Htt=Object.getOwnPropertyDescriptors,Uae=Object.getOwnPropertySymbols,qtt=Object.prototype.hasOwnProperty,Wtt=Object.prototype.propertyIsEnumerable,zae=(e,t,n)=>t in e?ztt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vae=(e,t)=>{for(var n in t||(t={}))qtt.call(t,n)&&zae(e,n,t[n]);if(Uae)for(var n of Uae(t))Wtt.call(t,n)&&zae(e,n,t[n]);return e},Gtt=(e,t)=>Vtt(e,Htt(t)),Ytt=yt((e,{size:t})=>({item:Gtt(Vae({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":Vae({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const Ktt=Ytt;var Xtt=Object.defineProperty,Hae=Object.getOwnPropertySymbols,Qtt=Object.prototype.hasOwnProperty,Jtt=Object.prototype.propertyIsEnumerable,qae=(e,t,n)=>t in e?Xtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ztt=(e,t)=>{for(var n in t||(t={}))Qtt.call(t,n)&&qae(e,n,t[n]);if(Hae)for(var n of Hae(t))Jtt.call(t,n)&&qae(e,n,t[n]);return e};function wY({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=Ktt({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const w=(E,b)=>{const T=typeof i=="function"?i(E.value):!1;return j.createElement(c,Ztt({key:E.value,className:g.item,"data-disabled":E.disabled||void 0,"data-hovered":!E.disabled&&t===b||void 0,"data-selected":!E.disabled&&T||void 0,onMouseEnter:()=>a(b),id:`${s}-${b}`,role:"option",tabIndex:-1,"aria-selected":t===b,ref:C=>{l&&l.current&&(l.current[E.value]=C)},onMouseDown:E.disabled?null:C=>{C.preventDefault(),u(E)},disabled:E.disabled},E))};let x=null;if(e.forEach((E,b)=>{E.creatable?_=b:E.group?(x!==E.group&&(x=E.group,v.push(j.createElement("div",{className:g.separator,key:`__mantine-divider-${b}`},j.createElement(TN,{classNames:{label:g.separatorLabel},label:E.group})))),v.push(w(E,b))):y.push(w(E,b))}),h){const E=e[_];y.push(j.createElement("div",{key:_$(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:b=>{b.preventDefault(),u(E)},tabIndex:-1,ref:b=>{l&&l.current&&(l.current[E.value]=b)}},p))}return v.length>0&&y.length>0&&y.unshift(j.createElement("div",{className:g.separator,key:"empty-group-separator"},j.createElement(TN,null))),v.length>0||y.length>0?j.createElement(j.Fragment,null,v,y):j.createElement(gt,{size:f,unstyled:m,className:g.nothingFound},d)}wY.displayName="@mantine/core/SelectItems";var ent=Object.defineProperty,AN=Object.getOwnPropertySymbols,xTe=Object.prototype.hasOwnProperty,TTe=Object.prototype.propertyIsEnumerable,Wae=(e,t,n)=>t in e?ent(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tnt=(e,t)=>{for(var n in t||(t={}))xTe.call(t,n)&&Wae(e,n,t[n]);if(AN)for(var n of AN(t))TTe.call(t,n)&&Wae(e,n,t[n]);return e},nnt=(e,t)=>{var n={};for(var r in e)xTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&TTe.call(e,r)&&(n[r]=e[r]);return n};const EY=P.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=nnt(n,["label","value"]);return j.createElement("div",tnt({ref:t},s),r||i)});EY.displayName="@mantine/core/DefaultItem";function rnt(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ATe(...e){return t=>e.forEach(n=>rnt(n,t))}function Z1(...e){return P.useCallback(ATe(...e),e)}const CTe=P.forwardRef((e,t)=>{const{children:n,...r}=e,i=P.Children.toArray(n),s=i.find(snt);if(s){const o=s.props.children,a=i.map(u=>u===s?P.Children.count(o)>1?P.Children.only(null):P.isValidElement(o)?o.props.children:null:u);return P.createElement(_z,ki({},r,{ref:t}),P.isValidElement(o)?P.cloneElement(o,void 0,a):null)}return P.createElement(_z,ki({},r,{ref:t}),n)});CTe.displayName="Slot";const _z=P.forwardRef((e,t)=>{const{children:n,...r}=e;return P.isValidElement(n)?P.cloneElement(n,{...ont(r,n.props),ref:ATe(t,n.ref)}):P.Children.count(n)>1?P.Children.only(null):null});_z.displayName="SlotClone";const int=({children:e})=>P.createElement(P.Fragment,null,e);function snt(e){return P.isValidElement(e)&&e.type===int}function ont(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const ant=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],lI=ant.reduce((e,t)=>{const n=P.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?CTe:t;return P.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),P.createElement(a,ki({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),bz=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{};function unt(e,t){return P.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const cI=e=>{const{present:t,children:n}=e,r=lnt(t),i=typeof n=="function"?n({present:r.isPresent}):P.Children.only(n),s=Z1(r.ref,i.ref);return typeof n=="function"||r.isPresent?P.cloneElement(i,{ref:s}):null};cI.displayName="Presence";function lnt(e){const[t,n]=P.useState(),r=P.useRef({}),i=P.useRef(e),s=P.useRef("none"),o=e?"mounted":"unmounted",[a,u]=unt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const l=OP(r.current);s.current=a==="mounted"?l:"none"},[a]),bz(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=OP(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),bz(()=>{if(t){const l=f=>{const h=OP(r.current).includes(f.animationName);f.target===t&&h&&Q1.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=OP(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:P.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function OP(e){return(e==null?void 0:e.animationName)||"none"}function cnt(e,t=[]){let n=[];function r(s,o){const a=P.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=P.useMemo(()=>p,Object.values(p));return P.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=P.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>P.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return P.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,fnt(i,...t)]}function fnt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return P.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function iv(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const dnt=P.createContext(void 0);function hnt(e){const t=P.useContext(dnt);return e||t||"ltr"}function pnt(e,[t,n]){return Math.min(n,Math.max(t,e))}function Uv(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function mnt(e,t){return P.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const ITe="ScrollArea",[OTe,NAn]=cnt(ITe),[gnt,wc]=OTe(ITe),ynt=P.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=P.useState(null),[l,c]=P.useState(null),[f,d]=P.useState(null),[h,p]=P.useState(null),[m,g]=P.useState(null),[y,v]=P.useState(0),[_,w]=P.useState(0),[x,E]=P.useState(!1),[b,T]=P.useState(!1),C=Z1(t,O=>u(O)),A=hnt(i);return P.createElement(gnt,{scope:n,type:r,dir:A,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:b,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w},P.createElement(lI.div,ki({dir:A},o,{ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),vnt="ScrollAreaViewport",_nt=P.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=wc(vnt,n),o=P.useRef(null),a=Z1(t,o,s.onViewportChange);return P.createElement(P.Fragment,null,P.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),P.createElement(lI.div,ki({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),P.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),gm="ScrollAreaScrollbar",bnt=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=wc(gm,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?P.createElement(wnt,ki({},r,{ref:t,forceMount:n})):i.type==="scroll"?P.createElement(Ent,ki({},r,{ref:t,forceMount:n})):i.type==="auto"?P.createElement(PTe,ki({},r,{ref:t,forceMount:n})):i.type==="always"?P.createElement(SY,ki({},r,{ref:t})):null}),wnt=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=wc(gm,e.__scopeScrollArea),[s,o]=P.useState(!1);return P.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),P.createElement(cI,{present:n||s},P.createElement(PTe,ki({"data-state":s?"visible":"hidden"},r,{ref:t})))}),Ent=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=wc(gm,e.__scopeScrollArea),s=e.orientation==="horizontal",o=G6(()=>u("SCROLL_END"),100),[a,u]=mnt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return P.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),P.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),P.createElement(cI,{present:n||a!=="hidden"},P.createElement(SY,ki({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:Uv(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Uv(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),PTe=P.forwardRef((e,t)=>{const n=wc(gm,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=P.useState(!1),a=e.orientation==="horizontal",u=G6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return Gw(n.viewport,u),Gw(n.content,u),P.createElement(cI,{present:r||s},P.createElement(SY,ki({"data-state":s?"visible":"hidden"},i,{ref:t})))}),SY=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=wc(gm,e.__scopeScrollArea),s=P.useRef(null),o=P.useRef(0),[a,u]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=NTe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return Pnt(d,o.current,a,h)}return n==="horizontal"?P.createElement(Snt,ki({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=Gae(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?P.createElement(xnt,ki({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=Gae(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),Snt=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=wc(gm,e.__scopeScrollArea),[o,a]=P.useState(),u=P.useRef(null),l=Z1(t,u,s.onScrollbarXChange);return P.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),P.createElement($Te,ki({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":W6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),MTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:CN(o.paddingLeft),paddingEnd:CN(o.paddingRight)}})}}))}),xnt=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=wc(gm,e.__scopeScrollArea),[o,a]=P.useState(),u=P.useRef(null),l=Z1(t,u,s.onScrollbarYChange);return P.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),P.createElement($Te,ki({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":W6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),MTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:CN(o.paddingTop),paddingEnd:CN(o.paddingBottom)}})}}))}),[Tnt,kTe]=OTe(gm),$Te=P.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=wc(gm,n),[p,m]=P.useState(null),g=Z1(t,C=>m(C)),y=P.useRef(null),v=P.useRef(""),_=h.viewport,w=r.content-r.viewport,x=iv(c),E=iv(u),b=G6(f,10);function T(C){if(y.current){const A=C.clientX-y.current.left,O=C.clientY-y.current.top;l({x:A,y:O})}}return P.useEffect(()=>{const C=A=>{const O=A.target;(p==null?void 0:p.contains(O))&&x(A,w)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[_,p,w,x]),P.useEffect(E,[r,E]),Gw(p,b),Gw(h.content,b),P.createElement(Tnt,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:iv(s),onThumbPointerUp:iv(o),onThumbPositionChange:E,onThumbPointerDown:iv(a)},P.createElement(lI.div,ki({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:Uv(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(C))}),onPointerMove:Uv(e.onPointerMove,T),onPointerUp:Uv(e.onPointerUp,C=>{C.target.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),wz="ScrollAreaThumb",Ant=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=kTe(wz,e.__scopeScrollArea);return P.createElement(cI,{present:n||i.hasThumb},P.createElement(Cnt,ki({ref:t},r)))}),Cnt=P.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=wc(wz,n),o=kTe(wz,n),{onThumbPositionChange:a}=o,u=Z1(t,f=>o.onThumbChange(f)),l=P.useRef(),c=G6(()=>{l.current&&(l.current(),l.current=void 0)},100);return P.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=knt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),P.createElement(lI.div,ki({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Uv(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:Uv(e.onPointerUp,o.onThumbPointerUp)}))}),RTe="ScrollAreaCorner",Int=P.forwardRef((e,t)=>{const n=wc(RTe,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?P.createElement(Ont,ki({},e,{ref:t})):null}),Ont=P.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=wc(RTe,n),[s,o]=P.useState(0),[a,u]=P.useState(0),l=!!(s&&a);return Gw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Gw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?P.createElement(lI.div,ki({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function CN(e){return e?parseInt(e,10):0}function NTe(e,t){const n=e/t;return isNaN(n)?0:n}function W6(e){const t=NTe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Pnt(e,t,n,r="ltr"){const i=W6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return DTe([u,l],f)(e)}function Gae(e,t,n="ltr"){const r=W6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=pnt(e,u);return DTe([0,o],[0,a])(l)}function DTe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function MTe(e,t){return e>0&&e<t}const knt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function G6(e,t){const n=iv(e),r=P.useRef(0);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),P.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Gw(e,t){const n=iv(t);bz(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const $nt=ynt,Rnt=_nt,Yae=bnt,Kae=Ant,Nnt=Int;var Dnt=yt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const Mnt=Dnt;var Lnt=Object.defineProperty,Fnt=Object.defineProperties,Bnt=Object.getOwnPropertyDescriptors,IN=Object.getOwnPropertySymbols,LTe=Object.prototype.hasOwnProperty,FTe=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?Lnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BTe=(e,t)=>{for(var n in t||(t={}))LTe.call(t,n)&&Xae(e,n,t[n]);if(IN)for(var n of IN(t))FTe.call(t,n)&&Xae(e,n,t[n]);return e},jnt=(e,t)=>Fnt(e,Bnt(t)),jTe=(e,t)=>{var n={};for(var r in e)LTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&FTe.call(e,r)&&(n[r]=e[r]);return n};const UTe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},Y6=P.forwardRef((e,t)=>{const n=Ot("ScrollArea",UTe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=jTe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=P.useState(!1),v=As(),{classes:_,cx:w}=Mnt({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return j.createElement($nt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},j.createElement(pt,BTe({className:w(_.root,i)},m),j.createElement(Rnt,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:x})=>h({x:x.scrollLeft,y:x.scrollTop}):void 0},r),j.createElement(Yae,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},j.createElement(Kae,{className:_.thumb})),j.createElement(Yae,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},j.createElement(Kae,{className:_.thumb})),j.createElement(Nnt,{className:_.corner})))}),zTe=P.forwardRef((e,t)=>{const n=Ot("ScrollAreaAutosize",UTe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=jTe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return j.createElement(pt,jnt(BTe({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...c0(m)]}),j.createElement(pt,{sx:{display:"flex",flexDirection:"column",flex:1}},j.createElement(Y6,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});zTe.displayName="@mantine/core/ScrollAreaAutosize";Y6.displayName="@mantine/core/ScrollArea";Y6.Autosize=zTe;const VTe=Y6;var Unt=Object.defineProperty,znt=Object.defineProperties,Vnt=Object.getOwnPropertyDescriptors,ON=Object.getOwnPropertySymbols,HTe=Object.prototype.hasOwnProperty,qTe=Object.prototype.propertyIsEnumerable,Qae=(e,t,n)=>t in e?Unt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jae=(e,t)=>{for(var n in t||(t={}))HTe.call(t,n)&&Qae(e,n,t[n]);if(ON)for(var n of ON(t))qTe.call(t,n)&&Qae(e,n,t[n]);return e},Hnt=(e,t)=>znt(e,Vnt(t)),qnt=(e,t)=>{var n={};for(var r in e)HTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&qTe.call(e,r)&&(n[r]=e[r]);return n};const K6=P.forwardRef((e,t)=>{var n=e,{style:r}=n,i=qnt(n,["style"]);return j.createElement(VTe,Hnt(Jae({},i),{style:Jae({width:"100%"},r),viewportRef:t}),i.children)});K6.displayName="@mantine/core/SelectScrollArea";var Wnt=yt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const Gnt=Wnt;function Vp(e){return e.split("-")[0]}function fI(e){return e.split("-")[1]}function e_(e){return["top","bottom"].includes(Vp(e))?"x":"y"}function xY(e){return e==="y"?"height":"width"}function Zae(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=e_(t),u=xY(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(Vp(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(fI(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const Ynt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Zae(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:x}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=Zae(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function TY(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function DA(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function AY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=TY(h),m=a[d?f==="floating"?"reference":"floating":f],g=DA(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=DA(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const WTe=Math.min,eg=Math.max;function Ez(e,t,n){return eg(e,WTe(t,n))}const eue=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=TY(r),c={x:i,y:s},f=e_(o),d=fI(o),h=xY(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let w=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;w===0&&(w=a.floating[h]);const x=y/2-v/2,E=l[m],b=w-p[h]-l[g],T=w/2-p[h]/2+x,C=Ez(E,T,b),A=(d==="start"?l[m]:l[g])>0&&T!==C&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(A?T<E?E-T:b-T:0),data:{[f]:C,centerOffset:T-C}}}}),Knt={left:"right",right:"left",bottom:"top",top:"bottom"};function PN(e){return e.replace(/left|right|bottom|top/g,t=>Knt[t])}function Xnt(e,t,n){n===void 0&&(n=!1);const r=fI(e),i=e_(e),s=xY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=PN(o)),{main:o,cross:PN(o)}}const Qnt={start:"end",end:"start"};function tue(e){return e.replace(/start|end/g,t=>Qnt[t])}const Jnt=["top","right","bottom","left"];Jnt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const GTe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=Vp(r),g=f||(m===o||!h?[PN(o)]:function(T){const C=PN(T);return[tue(T),C,tue(C)]}(o)),y=[o,...g],v=await AY(t,p),_=[];let w=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:T,cross:C}=Xnt(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[T],v[C])}if(w=[...w,{placement:r,overflows:_}],!_.every(T=>T<=0)){var x,E;const T=((x=(E=i.flip)==null?void 0:E.index)!=null?x:0)+1,C=y[T];if(C)return{data:{index:T,overflows:w},reset:{placement:C}};let A="bottom";switch(d){case"bestFit":{var b;const O=(b=w.map(N=>[N,N.overflows.filter(k=>k>0).reduce((k,L)=>k+L,0)]).sort((N,k)=>N[1]-k[1])[0])==null?void 0:b[0].placement;O&&(A=O);break}case"initialPlacement":A=o}if(r!==A)return{reset:{placement:A}}}return{}}}},YTe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=Vp(a),d=fI(a),h=e_(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function KTe(e){return e==="x"?"y":"x"}const CY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await AY(t,u),f=e_(Vp(i)),d=KTe(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=Ez(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=Ez(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Znt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=e_(i),d=KTe(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=f==="y"?"height":"width",E=s.reference[f]-s.floating[x]+g.mainAxis,b=s.reference[f]+s.reference[x]-g.mainAxis;h<E?h=E:h>b&&(h=b)}if(l){var y,v,_,w;const x=f==="y"?"width":"height",E=["top","left"].includes(Vp(i)),b=s.reference[d]-s.floating[x]+(E&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(E?0:g.crossAxis),T=s.reference[d]+s.reference[x]+(E?0:(_=(w=o.offset)==null?void 0:w[d])!=null?_:0)-(E?g.crossAxis:0);p<b?p=b:p>T&&(p=T)}return{[f]:h,[d]:p}}}},ert=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await AY(t,a),l=Vp(n),c=fI(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=eg(u.left,0),p=eg(u.right,0),m=eg(u.top,0),g=eg(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:eg(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:eg(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},XTe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=DA(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=TY(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(e_(r)==="x"){const E=d[0],b=d[d.length-1],T=Vp(r)==="top",C=E.top,A=b.bottom,O=T?E.left:b.left,N=T?E.right:b.right;return{top:C,bottom:A,left:O,right:N,width:N-O,height:A-C,x:O,y:C}}const g=Vp(r)==="left",y=eg(...d.map(E=>E.right)),v=WTe(...d.map(E=>E.left)),_=d.filter(E=>g?E.left===v:E.right===y),w=_[0].top,x=_[_.length-1].bottom;return{top:w,bottom:x,left:v,right:y,width:y-v,height:x-w,x:v,y:w}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function QTe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function ym(e){if(e==null)return window;if(!QTe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function f0(e){return ym(e).getComputedStyle(e)}function d0(e){return QTe(e)?"":e?(e.nodeName||"").toLowerCase():""}function JTe(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Hp(e){return e instanceof ym(e).HTMLElement}function Tp(e){return e instanceof ym(e).Element}function nue(e){return typeof ShadowRoot>"u"?!1:e instanceof ym(e).ShadowRoot||e instanceof ShadowRoot}function X6(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=f0(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function trt(e){return["table","td","th"].includes(d0(e))}function Sz(e){const t=/firefox/i.test(JTe()),n=f0(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function ZTe(){return!/^((?!chrome|android).)*safari/i.test(JTe())}function IY(e){return["html","body","#document"].includes(d0(e))}const rue=Math.min,w2=Math.max,kN=Math.round;function Ap(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&Hp(e)&&(u=e.offsetWidth>0&&kN(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&kN(a.height)/e.offsetHeight||1);const c=Tp(e)?ym(e):window,f=!ZTe()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function Hg(e){return(t=e,(t instanceof ym(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function Q6(e){return Tp(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function e2e(e){return Ap(Hg(e)).left+Q6(e).scrollLeft}function nrt(e,t,n){const r=Hp(t),i=Hg(t),s=Ap(e,r&&function(u){const l=Ap(u);return kN(l.width)!==u.offsetWidth||kN(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((d0(t)!=="body"||X6(i))&&(o=Q6(t)),Hp(t)){const u=Ap(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=e2e(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function $N(e){if(d0(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(nue(e)?e.host:null)||Hg(e);return nue(t)?t.host:t}function iue(e){return Hp(e)&&f0(e).position!=="fixed"?e.offsetParent:null}function sue(e){const t=ym(e);let n=iue(e);for(;n&&trt(n)&&f0(n).position==="static";)n=iue(n);return n&&(d0(n)==="html"||d0(n)==="body"&&f0(n).position==="static"&&!Sz(n))?t:n||function(r){let i=$N(r);for(;Hp(i)&&!IY(i);){if(Sz(i))return i;i=$N(i)}return null}(e)||t}function oue(e){if(Hp(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=Ap(e);return{width:t.width,height:t.height}}function t2e(e){const t=$N(e);return IY(t)?e.ownerDocument.body:Hp(t)&&X6(t)?t:t2e(t)}function Cp(e,t){var n;t===void 0&&(t=[]);const r=t2e(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=ym(r),o=i?[s].concat(s.visualViewport||[],X6(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(Cp(o))}function aue(e,t,n){return t==="viewport"?DA(function(r,i){const s=ym(r),o=Hg(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=ZTe();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):Tp(t)?function(r,i){const s=Ap(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):DA(function(r){var i;const s=Hg(r),o=Q6(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=w2(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=w2(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+e2e(r);const f=-o.scrollTop;return f0(a||s).direction==="rtl"&&(c+=w2(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(Hg(e)))}const rrt={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=Cp(l).filter(h=>Tp(h)&&d0(h)!=="body"),f=l,d=null;for(;Tp(f)&&!IY(f);){const h=f0(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!Sz(f)?c=c.filter(p=>p!==f):d=h,f=$N(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=aue(t,c,i);return l.top=w2(f.top,l.top),l.right=rue(f.right,l.right),l.bottom=rue(f.bottom,l.bottom),l.left=w2(f.left,l.left),l},aue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Hp(n),s=Hg(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((d0(n)!=="body"||X6(s))&&(o=Q6(n)),Hp(n))){const u=Ap(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:Tp,getDimensions:oue,getOffsetParent:sue,getDocumentElement:Hg,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:nrt(t,sue(n),r),floating:{...oue(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>f0(e).direction==="rtl"};function irt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...Tp(e)?Cp(e):e.contextElement?Cp(e.contextElement):[],...Cp(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),Tp(e)&&!a&&f.observe(e),Tp(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?Ap(e):null;return a&&function h(){const p=Ap(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const srt=(e,t,n)=>Ynt(e,t,{platform:rrt,...n});var xz=typeof document<"u"?P.useLayoutEffect:P.useEffect;function RN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!RN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!RN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ort(e){const t=P.useRef(e);return xz(()=>{t.current=e}),t}function art(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=P.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=P.useState(t);RN(a,t)||u(t);const l=P.useRef(null),c=P.useRef(null),f=P.useRef(null),d=P.useRef(s),h=ort(i),p=P.useCallback(()=>{!l.current||!c.current||srt(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(w=>{m.current&&!RN(d.current,w)&&(d.current=w,Q1.flushSync(()=>{o(w)}))})},[a,n,r]);xz(()=>{m.current&&p()},[p]);const m=P.useRef(!1);xz(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=P.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const w=h.current(l.current,c.current,p);f.current=w}else p()},[p,h]),y=P.useCallback(w=>{l.current=w,g()},[g]),v=P.useCallback(w=>{c.current=w,g()},[g]),_=P.useMemo(()=>({reference:l,floating:c}),[]);return P.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const n2e=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?eue({element:t.current,padding:n}).fn(i):{}:t?eue({element:t,padding:n}).fn(i):{}}}};var Yw=typeof document<"u"?P.useLayoutEffect:P.useEffect;function urt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let U9=!1,lrt=0;const uue=()=>"floating-ui-"+lrt++;function crt(){const[e,t]=P.useState(()=>U9?uue():void 0);return Yw(()=>{e==null&&t(uue())},[]),P.useEffect(()=>{U9||(U9=!0)},[]),e}const lue=o1.useId,cue=lue??crt,frt=P.createContext(null),drt=P.createContext(null),r2e=()=>{var e,t;return(e=(t=P.useContext(frt))==null?void 0:t.id)!=null?e:null},OY=()=>P.useContext(drt);function cg(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function i2e(e){var t;return(t=cg(e).defaultView)!=null?t:window}function wv(e){return e?e instanceof i2e(e).Element:!1}function hrt(e){return e?e instanceof i2e(e).HTMLElement:!1}const fue=o1.useInsertionEffect;function prt(e){const t=P.useRef(()=>{});return fue?fue(()=>{t.current=e}):t.current=e,P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function PY(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=P.useState(null),c=OY(),f=P.useRef(null),d=P.useRef({}),h=P.useState(()=>urt())[0],p=art({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=prt(n),g=P.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=P.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);Yw(()=>{const w=c==null?void 0:c.nodesRef.current.find(x=>x.id===a);w&&(w.context=y)});const{reference:v}=p,_=P.useCallback(w=>{(wv(w)||w===null)&&(y.refs.domReference.current=w,l(w)),v(w)},[v,y.refs]);return P.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function z9(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const mrt=function(e){e===void 0&&(e=[]);const t=e,n=P.useCallback(s=>z9(s,e,"reference"),t),r=P.useCallback(s=>z9(s,e,"floating"),t),i=P.useCallback(s=>z9(s,e,"item"),t);return P.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function V9(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function grt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function due(e){const t=P.useRef(e);return Yw(()=>{t.current=e}),t}function yrt(e){const t=P.useRef();return Yw(()=>{t.current=e},[e]),t.current}function b$(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const vrt=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=OY(),m=r2e(),g=due(i),y=due(r),v=yrt(u),_=P.useRef(),w=P.useRef(),x=P.useRef(),E=P.useRef(),b=P.useRef(!0),T=P.useRef(!1),C=P.useCallback(()=>{var k;const L=(k=c.current.openEvent)==null?void 0:k.type;return(L==null?void 0:L.includes("mouse"))&&L!=="mousedown"},[c]);P.useEffect(()=>{if(!n)return;function k(){clearTimeout(w.current),clearTimeout(E.current),b.current=!0}return f.on("dismiss",k),()=>{f.off("dismiss",k)}},[n,f,d]),P.useEffect(()=>{if(!n||!g.current)return;function k(){C()&&l(!1)}const L=cg(d.floating.current).documentElement;return L.addEventListener("mouseleave",k),()=>{L.removeEventListener("mouseleave",k)}},[d,l,n,g,c,C]);const A=P.useCallback(function(k){k===void 0&&(k=!0);const L=b$(y.current,"close",_.current);L&&!x.current?(clearTimeout(w.current),w.current=setTimeout(()=>l(!1),L)):k&&(clearTimeout(w.current),l(!1))},[y,l]),O=P.useCallback(()=>{x.current&&(cg(d.floating.current).removeEventListener("pointermove",x.current),x.current=void 0)},[d]),N=P.useCallback(()=>{cg(d.floating.current).body.style.pointerEvents="",T.current=!1},[d]);return P.useEffect(()=>{if(!n)return;function k(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function L(Y){if(clearTimeout(w.current),b.current=!1,s&&_.current!=="mouse"||o>0&&b$(y.current,"open")===0)return;c.current.openEvent=Y;const q=b$(y.current,"open",_.current);q?w.current=setTimeout(()=>{l(!0)},q):l(!0)}function B(Y){if(k())return;const q=cg(d.floating.current);if(clearTimeout(E.current),g.current){clearTimeout(w.current),x.current&&q.removeEventListener("pointermove",x.current),x.current=g.current({...e,tree:p,x:Y.clientX,y:Y.clientY,onClose(){N(),O(),A()}}),q.addEventListener("pointermove",x.current);return}A()}function U(Y){k()||g.current==null||g.current({...e,tree:p,x:Y.clientX,y:Y.clientY,leave:!0,onClose(){N(),O(),A()}})(Y)}const G=d.floating.current,H=d.domReference.current;if(wv(H))return u&&H.addEventListener("mouseleave",U),G==null||G.addEventListener("mouseleave",U),a&&H.addEventListener("mousemove",L,{once:!0}),H.addEventListener("mouseenter",L),H.addEventListener("mouseleave",B),()=>{u&&H.removeEventListener("mouseleave",U),G==null||G.removeEventListener("mouseleave",U),a&&H.removeEventListener("mousemove",L),H.removeEventListener("mouseenter",L),H.removeEventListener("mouseleave",B)}},[h.domReference,n,e,s,o,a,A,O,N,l,u,p,d,y,g,c]),Yw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&C()){cg(d.floating.current).body.style.pointerEvents="none",T.current=!0;const B=d.domReference.current,U=d.floating.current;if(wv(B)&&U){var k,L;const G=p==null||(k=p.nodesRef.current.find(H=>H.id===m))==null||(L=k.context)==null?void 0:L.refs.floating.current;return G&&(G.style.pointerEvents=""),B.style.pointerEvents="auto",U.style.pointerEvents="auto",()=>{B.style.pointerEvents="",U.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,C]),Yw(()=>{v&&!u&&(_.current=void 0,O(),N())}),P.useEffect(()=>()=>{O(),clearTimeout(w.current),clearTimeout(E.current),T.current&&N()},[n,O,N]),P.useMemo(()=>{if(!n)return{};function k(L){_.current=L.pointerType}return{reference:{onPointerDown:k,onPointerEnter:k,onMouseMove(){u||o===0||(clearTimeout(E.current),E.current=setTimeout(()=>{b.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(){A(!1)}}}},[n,o,u,l,A])},s2e=P.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),o2e=()=>P.useContext(s2e),_rt=e=>{let{children:t,delay:n}=e;const[r,i]=P.useState({delay:n,initialDelay:n,currentId:null}),s=P.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return P.createElement(s2e.Provider,{value:P.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},brt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=o2e();P.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:b$(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),P.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},wrt=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=cue(),o=cue();return P.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function H9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const Ert={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Srt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xrt=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=OY(),g=r2e()!=null,y=P.useRef(!1);return P.useEffect(()=>{if(!n||!a)return;function v(b){if(b.key==="Escape"){if(!p&&m&&V9(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(b){const T=y.current;if(y.current=!1,T)return;const C=grt(b);if(wv(C)&&i.floating.current){var A;const N=(A=i.floating.current.ownerDocument.defaultView)!=null?A:window,k=C.scrollWidth>C.clientWidth,L=C.scrollHeight>C.clientHeight;let B=L&&b.offsetX>C.clientWidth;if(L&&N.getComputedStyle(C).direction==="rtl"&&(B=b.offsetX<=C.offsetWidth-C.clientWidth),B||k&&b.offsetY>C.clientHeight)return}const O=m&&V9(m.nodesRef.current,o).some(N=>{var k;return H9(b,(k=N.context)==null?void 0:k.refs.floating.current)});H9(b,i.floating.current)||H9(b,i.domReference.current)||O||!p&&m&&V9(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function w(){r(!1)}const x=cg(i.floating.current);u&&x.addEventListener("keydown",v),l&&x.addEventListener(c,_);let E=[];return h&&(wv(i.domReference.current)&&(E=Cp(i.domReference.current)),wv(i.floating.current)&&(E=E.concat(Cp(i.floating.current))),!wv(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(E=E.concat(Cp(i.reference.current.contextElement)))),E=E.filter(b=>{var T;return b!==((T=x.defaultView)==null?void 0:T.visualViewport)}),E.forEach(b=>{b.addEventListener("scroll",w,{passive:!0})}),()=>{u&&x.removeEventListener("keydown",v),l&&x.removeEventListener(c,_),E.forEach(b=>{b.removeEventListener("scroll",w)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),P.useEffect(()=>{y.current=!1},[l,c]),P.useMemo(()=>a?{reference:{[Ert[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[Srt[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},Trt=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=P.useRef(""),c=P.useRef(!1),f=P.useRef();return P.useEffect(()=>{var d;if(!a)return;const p=(d=cg(s.floating.current).defaultView)!=null?d:window;function m(){!n&&hrt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),P.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),P.useEffect(()=>()=>{clearTimeout(f.current)},[]),P.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function a2e({opened:e,floating:t,positionDependencies:n}){const[r,i]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return irt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),Fs(()=>{t.update()},n),Fs(()=>{i(s=>s+1)},[e])}function Art(e){const t=[YTe(e.offset)];return e.middlewares.shift&&t.push(CY({limiter:Znt()})),e.middlewares.flip&&t.push(GTe()),e.middlewares.inline&&t.push(XTe()),t.push(n2e({element:e.arrowRef})),t}function Crt(e){const[t,n]=ya({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=PY({placement:e.position,middleware:[...Art(e),...e.width==="target"?[ert({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return a2e({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),Fs(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const u2e={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Irt,l2e]=rY(u2e.context);var Ort=Object.defineProperty,Prt=Object.defineProperties,krt=Object.getOwnPropertyDescriptors,NN=Object.getOwnPropertySymbols,c2e=Object.prototype.hasOwnProperty,f2e=Object.prototype.propertyIsEnumerable,hue=(e,t,n)=>t in e?Ort(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PP=(e,t)=>{for(var n in t||(t={}))c2e.call(t,n)&&hue(e,n,t[n]);if(NN)for(var n of NN(t))f2e.call(t,n)&&hue(e,n,t[n]);return e},$rt=(e,t)=>Prt(e,krt(t)),Rrt=(e,t)=>{var n={};for(var r in e)c2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&f2e.call(e,r)&&(n[r]=e[r]);return n};const d2e=P.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=Rrt(n,["children","refProp","popupType"]);if(!sI(r))throw new Error(u2e.children);const a=o,u=l2e(),l=Hs(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return P.cloneElement(r,PP($rt(PP(PP(PP({},a),c),u.targetProps),{className:HSe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});d2e.displayName="@mantine/core/PopoverTarget";var Nrt=yt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const Drt=Nrt;var Mrt=Object.defineProperty,pue=Object.getOwnPropertySymbols,Lrt=Object.prototype.hasOwnProperty,Frt=Object.prototype.propertyIsEnumerable,mue=(e,t,n)=>t in e?Mrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B_=(e,t)=>{for(var n in t||(t={}))Lrt.call(t,n)&&mue(e,n,t[n]);if(pue)for(var n of pue(t))Frt.call(t,n)&&mue(e,n,t[n]);return e};const gue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function h2e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in SP?B_(B_(B_({transitionProperty:SP[e].transitionProperty},i),SP[e].common),SP[e][gue[t]]):null:B_(B_(B_({transitionProperty:e.transitionProperty},i),e.common),e[gue[t]])}function p2e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=As(),l=V6(),c=u.respectReducedMotion?l:!1,[f,d]=P.useState(r?"entered":"exited");let h=c?0:e;const p=P.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return Fs(()=>{m(r)},[r]),P.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function dI({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=p2e({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?j.createElement(j.Fragment,null,i({})):null:f==="exited"?null:j.createElement(j.Fragment,null,i(h2e({transition:e,duration:c,state:f,timingFunction:d})))}dI.displayName="@mantine/core/Transition";function m2e({children:e,active:t=!0,refProp:n="ref"}){const r=yY(t),i=Hs(r,e==null?void 0:e.ref);return sI(e)?P.cloneElement(e,{[n]:i}):e}m2e.displayName="@mantine/core/FocusTrap";var Brt=Object.defineProperty,jrt=Object.defineProperties,Urt=Object.getOwnPropertyDescriptors,yue=Object.getOwnPropertySymbols,zrt=Object.prototype.hasOwnProperty,Vrt=Object.prototype.propertyIsEnumerable,vue=(e,t,n)=>t in e?Brt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lm=(e,t)=>{for(var n in t||(t={}))zrt.call(t,n)&&vue(e,n,t[n]);if(yue)for(var n of yue(t))Vrt.call(t,n)&&vue(e,n,t[n]);return e},kP=(e,t)=>jrt(e,Urt(t));function _ue(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function bue(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const Hrt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function qrt({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[Hrt[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?kP(Lm(Lm({},c),_ue(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?kP(Lm(Lm({},c),_ue(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?kP(Lm(Lm({},c),bue(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?kP(Lm(Lm({},c),bue(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var Wrt=Object.defineProperty,Grt=Object.defineProperties,Yrt=Object.getOwnPropertyDescriptors,DN=Object.getOwnPropertySymbols,g2e=Object.prototype.hasOwnProperty,y2e=Object.prototype.propertyIsEnumerable,wue=(e,t,n)=>t in e?Wrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Krt=(e,t)=>{for(var n in t||(t={}))g2e.call(t,n)&&wue(e,n,t[n]);if(DN)for(var n of DN(t))y2e.call(t,n)&&wue(e,n,t[n]);return e},Xrt=(e,t)=>Grt(e,Yrt(t)),Qrt=(e,t)=>{var n={};for(var r in e)g2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&y2e.call(e,r)&&(n[r]=e[r]);return n};const kY=P.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=Qrt(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=As();return u?j.createElement("div",Xrt(Krt({},f),{ref:t,style:qrt({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});kY.displayName="@mantine/core/FloatingArrow";var Jrt=Object.defineProperty,Zrt=Object.defineProperties,eit=Object.getOwnPropertyDescriptors,MN=Object.getOwnPropertySymbols,v2e=Object.prototype.hasOwnProperty,_2e=Object.prototype.propertyIsEnumerable,Eue=(e,t,n)=>t in e?Jrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$P=(e,t)=>{for(var n in t||(t={}))v2e.call(t,n)&&Eue(e,n,t[n]);if(MN)for(var n of MN(t))_2e.call(t,n)&&Eue(e,n,t[n]);return e},Sue=(e,t)=>Zrt(e,eit(t)),tit=(e,t)=>{var n={};for(var r in e)v2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&_2e.call(e,r)&&(n[r]=e[r]);return n};function b2e(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=tit(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=J0(),f=l2e(),{classes:d,cx:h}=Drt({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=gY({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:j.createElement(aS,{withinPortal:f.withinPortal},j.createElement(dI,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return j.createElement(m2e,{active:f.trapFocus},j.createElement(pt,$P(Sue($P({},m),{tabIndex:-1,ref:f.floating,style:Sue($P($P({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:jKe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,j.createElement(kY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}b2e.displayName="@mantine/core/PopoverDropdown";function w2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var xue=Object.getOwnPropertySymbols,nit=Object.prototype.hasOwnProperty,rit=Object.prototype.propertyIsEnumerable,iit=(e,t)=>{var n={};for(var r in e)nit.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xue)for(var r of xue(e))t.indexOf(r)<0&&rit.call(e,r)&&(n[r]=e[r]);return n};const sit={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ta("popover"),__staticSelector:"Popover",width:"max-content"};function Ci(e){var t,n,r,i,s,o;const a=P.useRef(null),u=Ot("Popover",sit,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:w,arrowOffset:x,arrowRadius:E,unstyled:b,classNames:T,styles:C,closeOnClickOutside:A,withinPortal:O,closeOnEscape:N,clickOutsideEvents:k,trapFocus:L,onClose:B,onOpen:U,onChange:G,zIndex:H,radius:Y,shadow:q,id:D,defaultOpened:M,exitTransitionDuration:W,__staticSelector:z,withRoles:V,disabled:te,returnFocus:le}=u,me=iit(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ye,de]=P.useState(null),[we,he]=P.useState(null),Ve=Vu(D),Me=As(),Ye=Crt({middlewares:v,width:y,position:w2e(Me.dir,c),offset:f+(_?w/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:M,onChange:G,onOpen:U,onClose:B});BQe(()=>A&&Ye.onClose(),k,[ye,we]);const Fe=P.useCallback(He=>{de(He),Ye.floating.reference(He)},[Ye.floating.reference]),De=P.useCallback(He=>{he(He),Ye.floating.floating(He)},[Ye.floating.floating]);return j.createElement(pY,{classNames:T,styles:C,unstyled:b,staticSelector:z},j.createElement(Irt,{value:{returnFocus:le,disabled:te,controlled:Ye.controlled,reference:Fe,floating:De,x:Ye.floating.x,y:Ye.floating.y,arrowX:(r=(n=(t=Ye.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ye.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ye.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:W,width:y,withArrow:_,arrowSize:w,arrowOffset:x,arrowRadius:E,placement:Ye.floating.placement,trapFocus:L,withinPortal:O,zIndex:H,radius:Y,shadow:q,closeOnEscape:N,onClose:Ye.onClose,onToggle:Ye.onToggle,getTargetId:()=>`${Ve}-target`,getDropdownId:()=>`${Ve}-dropdown`,withRoles:V,targetProps:me}},l))}Ci.Target=d2e;Ci.Dropdown=b2e;Ci.displayName="@mantine/core/Popover";var oit=Object.defineProperty,LN=Object.getOwnPropertySymbols,E2e=Object.prototype.hasOwnProperty,S2e=Object.prototype.propertyIsEnumerable,Tue=(e,t,n)=>t in e?oit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ait=(e,t)=>{for(var n in t||(t={}))E2e.call(t,n)&&Tue(e,n,t[n]);if(LN)for(var n of LN(t))S2e.call(t,n)&&Tue(e,n,t[n]);return e},uit=(e,t)=>{var n={};for(var r in e)E2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&S2e.call(e,r)&&(n[r]=e[r]);return n};function lit(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=uit(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Gnt(null,{name:u,styles:l,classNames:c,unstyled:f});return j.createElement(Ci.Dropdown,ait({p:0,onMouseDown:p=>p.preventDefault()},d),j.createElement("div",{style:{maxHeight:i,display:"flex"}},j.createElement(pt,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==K6?"auto":void 0},"data-combobox-popover":!0,ref:a},j.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function qg({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return j.createElement(Ci,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}qg.Target=Ci.Target;qg.Dropdown=lit;var cit=Object.defineProperty,fit=Object.defineProperties,dit=Object.getOwnPropertyDescriptors,FN=Object.getOwnPropertySymbols,x2e=Object.prototype.hasOwnProperty,T2e=Object.prototype.propertyIsEnumerable,Aue=(e,t,n)=>t in e?cit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q9=(e,t)=>{for(var n in t||(t={}))x2e.call(t,n)&&Aue(e,n,t[n]);if(FN)for(var n of FN(t))T2e.call(t,n)&&Aue(e,n,t[n]);return e},hit=(e,t)=>fit(e,dit(t)),pit=(e,t)=>{var n={};for(var r in e)x2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&T2e.call(e,r)&&(n[r]=e[r]);return n};function A2e(e,t,n){const r=Ot(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:x,inputWrapperOrder:E,withAsterisk:b}=r,T=pit(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),C=Vu(v),{systemStyles:A,rest:O}=$f(T);return hit(q9({},O),{classNames:u,styles:l,unstyled:f,wrapperProps:q9(q9({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:C,size:_,style:w,inputContainer:x,inputWrapperOrder:E,withAsterisk:b},y),A),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:C,size:_,__staticSelector:d,invalid:!!o}})}var mit=yt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const git=mit;var yit=Object.defineProperty,BN=Object.getOwnPropertySymbols,C2e=Object.prototype.hasOwnProperty,I2e=Object.prototype.propertyIsEnumerable,Cue=(e,t,n)=>t in e?yit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vit=(e,t)=>{for(var n in t||(t={}))C2e.call(t,n)&&Cue(e,n,t[n]);if(BN)for(var n of BN(t))I2e.call(t,n)&&Cue(e,n,t[n]);return e},_it=(e,t)=>{var n={};for(var r in e)C2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&I2e.call(e,r)&&(n[r]=e[r]);return n};const $Y=P.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=_it(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=git({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return j.createElement(pt,vit({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&j.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});$Y.displayName="@mantine/core/InputLabel";var bit=yt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const wit=bit;var Eit=Object.defineProperty,jN=Object.getOwnPropertySymbols,O2e=Object.prototype.hasOwnProperty,P2e=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?Eit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sit=(e,t)=>{for(var n in t||(t={}))O2e.call(t,n)&&Iue(e,n,t[n]);if(jN)for(var n of jN(t))P2e.call(t,n)&&Iue(e,n,t[n]);return e},xit=(e,t)=>{var n={};for(var r in e)O2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&P2e.call(e,r)&&(n[r]=e[r]);return n};const RY=P.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=xit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=wit({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return j.createElement(gt,Sit({className:d(f.error,i),ref:t,role:"alert"},c),r)});RY.displayName="@mantine/core/InputError";var Tit=yt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const Ait=Tit;var Cit=Object.defineProperty,UN=Object.getOwnPropertySymbols,k2e=Object.prototype.hasOwnProperty,$2e=Object.prototype.propertyIsEnumerable,Oue=(e,t,n)=>t in e?Cit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iit=(e,t)=>{for(var n in t||(t={}))k2e.call(t,n)&&Oue(e,n,t[n]);if(UN)for(var n of UN(t))$2e.call(t,n)&&Oue(e,n,t[n]);return e},Oit=(e,t)=>{var n={};for(var r in e)k2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&$2e.call(e,r)&&(n[r]=e[r]);return n};const NY=P.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=Oit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=Ait({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return j.createElement(gt,Iit({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});NY.displayName="@mantine/core/InputDescription";const R2e=P.createContext({offsetBottom:!1,offsetTop:!1}),Pit=R2e.Provider,kit=()=>P.useContext(R2e);function $it(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var Rit=Object.defineProperty,Nit=Object.defineProperties,Dit=Object.getOwnPropertyDescriptors,Pue=Object.getOwnPropertySymbols,Mit=Object.prototype.hasOwnProperty,Lit=Object.prototype.propertyIsEnumerable,kue=(e,t,n)=>t in e?Rit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fit=(e,t)=>{for(var n in t||(t={}))Mit.call(t,n)&&kue(e,n,t[n]);if(Pue)for(var n of Pue(t))Lit.call(t,n)&&kue(e,n,t[n]);return e},Bit=(e,t)=>Nit(e,Dit(t)),jit=yt(e=>({root:Bit(Fit({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const Uit=jit;var zit=Object.defineProperty,Vit=Object.defineProperties,Hit=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,N2e=Object.prototype.hasOwnProperty,D2e=Object.prototype.propertyIsEnumerable,$ue=(e,t,n)=>t in e?zit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Py=(e,t)=>{for(var n in t||(t={}))N2e.call(t,n)&&$ue(e,n,t[n]);if(zN)for(var n of zN(t))D2e.call(t,n)&&$ue(e,n,t[n]);return e},Rue=(e,t)=>Vit(e,Hit(t)),qit=(e,t)=>{var n={};for(var r in e)N2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&D2e.call(e,r)&&(n[r]=e[r]);return n};const Wit={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},M2e=P.forwardRef((e,t)=>{const n=Ot("InputWrapper",Wit,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:w,withAsterisk:x}=n,E=qit(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:b,cx:T}=Uit(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),C={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},A=typeof x=="boolean"?x:o,O=i&&j.createElement($Y,Py(Py({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:A},C),f),i),N=l&&j.createElement(NY,Rue(Py(Py({key:"description"},d),C),{size:(d==null?void 0:d.size)||C.size}),l),k=j.createElement(P.Fragment,{key:"input"},y(s)),L=typeof u!="boolean"&&u&&j.createElement(RY,Rue(Py(Py({},h),C),{size:(h==null?void 0:h.size)||C.size,key:"error"}),u),B=w.map(U=>{switch(U){case"label":return O;case"input":return k;case"description":return N;case"error":return L;default:return null}});return j.createElement(Pit,{value:$it(w,{hasDescription:!!N,hasError:!!L})},j.createElement(pt,Py({className:T(b.root,r),ref:t},E),B))});M2e.displayName="@mantine/core/InputWrapper";var Git=Object.defineProperty,Yit=Object.defineProperties,Kit=Object.getOwnPropertyDescriptors,Nue=Object.getOwnPropertySymbols,Xit=Object.prototype.hasOwnProperty,Qit=Object.prototype.propertyIsEnumerable,Due=(e,t,n)=>t in e?Git(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W9=(e,t)=>{for(var n in t||(t={}))Xit.call(t,n)&&Due(e,n,t[n]);if(Nue)for(var n of Nue(t))Qit.call(t,n)&&Due(e,n,t[n]);return e},Mue=(e,t)=>Yit(e,Kit(t));const na={xs:30,sm:36,md:42,lg:50,xl:60};function Jit({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Zit=yt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:na}),paddingLeft:e.fn.size({size:t,sizes:na})/3,paddingRight:a?o:e.fn.size({size:t,sizes:na})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:W9(Mue(W9(Mue(W9({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:na}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:na})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Jit({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:na})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:na}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}});const est=Zit;var tst=Object.defineProperty,nst=Object.defineProperties,rst=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertySymbols,L2e=Object.prototype.hasOwnProperty,F2e=Object.prototype.propertyIsEnumerable,Lue=(e,t,n)=>t in e?tst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RP=(e,t)=>{for(var n in t||(t={}))L2e.call(t,n)&&Lue(e,n,t[n]);if(VN)for(var n of VN(t))F2e.call(t,n)&&Lue(e,n,t[n]);return e},Fue=(e,t)=>nst(e,rst(t)),ist=(e,t)=>{var n={};for(var r in e)L2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&F2e.call(e,r)&&(n[r]=e[r]);return n};const sst={rightSectionWidth:36,size:"sm",variant:"default"},uS=P.forwardRef((e,t)=>{const n=Ot("Input",sst,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:w,sx:x,unstyled:E,pointer:b}=n,T=ist(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:C,offsetTop:A}=kit(),{classes:O,cx:N}=est({radius:p,size:m,multiline:w,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:C,offsetTop:A,pointer:b},{classNames:y,styles:v,name:["Input",_],unstyled:E}),{systemStyles:k,rest:L}=$f(T);return j.createElement(pt,RP(RP({className:N(O.wrapper,r),sx:x,style:l},k),g),u&&j.createElement("div",{className:O.icon},u),j.createElement(pt,Fue(RP({component:"input"},L),{ref:t,required:s,"aria-invalid":i,disabled:o,className:N(O[`${a}Variant`],O.input,{[O.withIcon]:u,[O.invalid]:i,[O.disabled]:o})})),d&&j.createElement("div",Fue(RP({},h),{className:O.rightSection}),d))});uS.displayName="@mantine/core/Input";uS.Wrapper=M2e;uS.Label=$Y;uS.Description=NY;uS.Error=RY;const Ss=uS;var ost=Object.defineProperty,ast=Object.defineProperties,ust=Object.getOwnPropertyDescriptors,Bue=Object.getOwnPropertySymbols,lst=Object.prototype.hasOwnProperty,cst=Object.prototype.propertyIsEnumerable,jue=(e,t,n)=>t in e?ost(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G9=(e,t)=>{for(var n in t||(t={}))lst.call(t,n)&&jue(e,n,t[n]);if(Bue)for(var n of Bue(t))cst.call(t,n)&&jue(e,n,t[n]);return e},fst=(e,t)=>ast(e,ust(t));const Y9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},dst={xs:4,sm:4,md:6,lg:8,xl:10};function hst({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:dst});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var pst=yt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in Y9?Y9[n]:Y9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:G9(fst(G9(G9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),hst({theme:e,variant:o,color:t,size:n,gradient:i}))}});const mst=pst;var gst=Object.defineProperty,HN=Object.getOwnPropertySymbols,B2e=Object.prototype.hasOwnProperty,j2e=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?gst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yst=(e,t)=>{for(var n in t||(t={}))B2e.call(t,n)&&Uue(e,n,t[n]);if(HN)for(var n of HN(t))j2e.call(t,n)&&Uue(e,n,t[n]);return e},vst=(e,t)=>{var n={};for(var r in e)B2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&j2e.call(e,r)&&(n[r]=e[r]);return n};const _st={variant:"light",size:"md",radius:"xl"},U2e=P.forwardRef((e,t)=>{const n=Ot("Badge",_st,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=vst(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=mst({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return j.createElement(pt,yst({className:v(y.root,r),ref:t},g),l&&j.createElement("span",{className:y.leftSection},l),j.createElement("span",{className:y.inner},a),c&&j.createElement("span",{className:y.rightSection},c))});U2e.displayName="@mantine/core/Badge";const ow=U2e,bst={xs:12,sm:18,md:24,lg:34,xl:42};var wst=yt((e,{size:t,color:n,transitionDuration:r})=>{const i=e.fn.size({size:t,sizes:bst}),s=n||(e.colorScheme==="dark"?e.white:e.black);return{root:{borderRadius:e.radius.sm,width:`calc(${i}px + ${e.spacing.xs}px)`,height:`calc(${i}px + ${e.spacing.xs}px)`,padding:`calc(${e.spacing.xs}px / 2)`,cursor:"pointer"},burger:{position:"relative",userSelect:"none",boxSizing:"border-box","&, &::before, &::after":{display:"block",width:i,height:Math.ceil(i/12),backgroundColor:s,outline:"1px solid transparent",transitionProperty:"background-color, transform",transitionDuration:`${r}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},"&::before, &::after":{position:"absolute",content:'""',left:0},"&::before":{top:i/3*-1},"&::after":{top:i/3},"&[data-opened]":{backgroundColor:"transparent","&::before":{transform:`translateY(${i/3}px) rotate(45deg)`},"&::after":{transform:`translateY(-${i/3}px) rotate(-45deg)`}}}}});const Est=wst;var Sst=Object.defineProperty,qN=Object.getOwnPropertySymbols,z2e=Object.prototype.hasOwnProperty,V2e=Object.prototype.propertyIsEnumerable,zue=(e,t,n)=>t in e?Sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xst=(e,t)=>{for(var n in t||(t={}))z2e.call(t,n)&&zue(e,n,t[n]);if(qN)for(var n of qN(t))V2e.call(t,n)&&zue(e,n,t[n]);return e},Tst=(e,t)=>{var n={};for(var r in e)z2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&V2e.call(e,r)&&(n[r]=e[r]);return n};const Ast={size:"md",transitionDuration:300},H2e=P.forwardRef((e,t)=>{const n=Ot("Burger",Ast,e),{className:r,opened:i,color:s,size:o,classNames:a,styles:u,transitionDuration:l}=n,c=Tst(n,["className","opened","color","size","classNames","styles","transitionDuration"]),{classes:f,cx:d}=Est({color:s,size:o,transitionDuration:l},{classNames:a,styles:u,name:"Burger"});return j.createElement(pm,xst({className:d(f.root,r),ref:t},c),j.createElement("div",{"data-opened":i||void 0,className:f.burger}))});H2e.displayName="@mantine/core/Burger";var Cst=yt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const Ist=Cst;var Ost=Object.defineProperty,WN=Object.getOwnPropertySymbols,q2e=Object.prototype.hasOwnProperty,W2e=Object.prototype.propertyIsEnumerable,Vue=(e,t,n)=>t in e?Ost(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pst=(e,t)=>{for(var n in t||(t={}))q2e.call(t,n)&&Vue(e,n,t[n]);if(WN)for(var n of WN(t))W2e.call(t,n)&&Vue(e,n,t[n]);return e},kst=(e,t)=>{var n={};for(var r in e)q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&W2e.call(e,r)&&(n[r]=e[r]);return n};const $st={orientation:"horizontal",buttonBorderWidth:1},G2e=P.forwardRef((e,t)=>{const n=Ot("ButtonGroup",$st,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=kst(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=Ist({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return j.createElement(pt,Pst({className:l(u.root,r),ref:t},a))});G2e.displayName="@mantine/core/ButtonGroup";var Rst=Object.defineProperty,Nst=Object.defineProperties,Dst=Object.getOwnPropertyDescriptors,Hue=Object.getOwnPropertySymbols,Mst=Object.prototype.hasOwnProperty,Lst=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?Rst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sv=(e,t)=>{for(var n in t||(t={}))Mst.call(t,n)&&que(e,n,t[n]);if(Hue)for(var n of Hue(t))Lst.call(t,n)&&que(e,n,t[n]);return e},Tz=(e,t)=>Nst(e,Dst(t));const Az={xs:{height:na.xs,paddingLeft:14,paddingRight:14},sm:{height:na.sm,paddingLeft:18,paddingRight:18},md:{height:na.md,paddingLeft:22,paddingRight:22},lg:{height:na.lg,paddingLeft:26,paddingRight:26},xl:{height:na.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function Fst({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return Az[`compact-${t}`];const i=Az[t];return Tz(sv({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const Bst=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function jst({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:sv({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var Ust=yt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:Tz(sv(Tz(sv(sv(sv(sv({},Fst({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),Bst(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),jst({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const zst=Ust;var Vst=Object.defineProperty,GN=Object.getOwnPropertySymbols,Y2e=Object.prototype.hasOwnProperty,K2e=Object.prototype.propertyIsEnumerable,Wue=(e,t,n)=>t in e?Vst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gue=(e,t)=>{for(var n in t||(t={}))Y2e.call(t,n)&&Wue(e,n,t[n]);if(GN)for(var n of GN(t))K2e.call(t,n)&&Wue(e,n,t[n]);return e},Hst=(e,t)=>{var n={};for(var r in e)Y2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&K2e.call(e,r)&&(n[r]=e[r]);return n};const qst={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},DY=P.forwardRef((e,t)=>{const n=Ot("Button",qst,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:w,styles:x,unstyled:E}=n,b=Hst(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:T,cx:C,theme:A}=zst({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:E,classNames:w,styles:x}),O=A.fn.variant({color:s,variant:d}),N=j.createElement(J1,Gue({color:O.color,size:A.fn.size({size:i,sizes:Az}).height/2},v));return j.createElement(pm,Gue({className:C(T.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:E},b),j.createElement("div",{className:T.inner},(l||g&&y==="left")&&j.createElement("span",{className:C(T.icon,T.leftIcon)},g&&y==="left"?N:l),g&&y==="center"&&j.createElement("span",{className:T.centerLoader},N),j.createElement("span",{className:T.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&j.createElement("span",{className:C(T.icon,T.rightIcon)},g&&y==="right"?N:c)))});DY.displayName="@mantine/core/Button";DY.Group=G2e;const Hr=DY;var Wst=yt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}}));const Gst=Wst;var Yst=Object.defineProperty,YN=Object.getOwnPropertySymbols,X2e=Object.prototype.hasOwnProperty,Q2e=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?Yst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kst=(e,t)=>{for(var n in t||(t={}))X2e.call(t,n)&&Yue(e,n,t[n]);if(YN)for(var n of YN(t))Q2e.call(t,n)&&Yue(e,n,t[n]);return e},Xst=(e,t)=>{var n={};for(var r in e)X2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&Q2e.call(e,r)&&(n[r]=e[r]);return n};const Qst={},J2e=P.forwardRef((e,t)=>{const n=Ot("Paper",Qst,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=Xst(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=Gst({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return j.createElement(pt,Kst({className:f(c.root,r),ref:t},l),i)});J2e.displayName="@mantine/core/Paper";const MY=J2e,Z2e=P.createContext({padding:0}),Jst=Z2e.Provider,Zst=()=>P.useContext(Z2e).padding;var eot=yt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const tot=eot;var not=Object.defineProperty,KN=Object.getOwnPropertySymbols,eAe=Object.prototype.hasOwnProperty,tAe=Object.prototype.propertyIsEnumerable,Kue=(e,t,n)=>t in e?not(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rot=(e,t)=>{for(var n in t||(t={}))eAe.call(t,n)&&Kue(e,n,t[n]);if(KN)for(var n of KN(t))tAe.call(t,n)&&Kue(e,n,t[n]);return e},iot=(e,t)=>{var n={};for(var r in e)eAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&tAe.call(e,r)&&(n[r]=e[r]);return n};const nAe=P.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=iot(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=tot({padding:Zst(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return j.createElement(pt,rot({className:l(u.cardSection,r),ref:t},a))});nAe.displayName="@mantine/core/CardSection";const rAe=nAe;var sot=yt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}}));const oot=sot;var aot=Object.defineProperty,XN=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,Xue=(e,t,n)=>t in e?aot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uot=(e,t)=>{for(var n in t||(t={}))iAe.call(t,n)&&Xue(e,n,t[n]);if(XN)for(var n of XN(t))sAe.call(t,n)&&Xue(e,n,t[n]);return e},lot=(e,t)=>{var n={};for(var r in e)iAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&sAe.call(e,r)&&(n[r]=e[r]);return n};const cot={p:"md"},LY=P.forwardRef((e,t)=>{const n=Ot("Card",cot,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=lot(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=oot(null,{name:"Card",unstyled:a}),f=P.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===rAe?P.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return j.createElement(Jst,{value:{padding:i}},j.createElement(MY,uot({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});LY.Section=rAe;LY.displayName="@mantine/core/Card";const J6=LY;var fot=Object.defineProperty,QN=Object.getOwnPropertySymbols,oAe=Object.prototype.hasOwnProperty,aAe=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?fot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dot=(e,t)=>{for(var n in t||(t={}))oAe.call(t,n)&&Que(e,n,t[n]);if(QN)for(var n of QN(t))aAe.call(t,n)&&Que(e,n,t[n]);return e},hot=(e,t)=>{var n={};for(var r in e)oAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&aAe.call(e,r)&&(n[r]=e[r]);return n};const uAe=P.forwardRef((e,t)=>{const n=Ot("Center",{},e),{inline:r,sx:i}=n,s=hot(n,["inline","sx"]);return j.createElement(pt,dot({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...c0(i)]},s))});uAe.displayName="@mantine/core/Center";const qp=uAe,lAe=P.createContext(null),pot=lAe.Provider,mot=()=>P.useContext(lAe);function got(e){return P.Children.toArray(e).filter(Boolean)}const cAe={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var yot=yt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:cAe[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const vot=yot;var _ot=Object.defineProperty,JN=Object.getOwnPropertySymbols,fAe=Object.prototype.hasOwnProperty,dAe=Object.prototype.propertyIsEnumerable,Jue=(e,t,n)=>t in e?_ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bot=(e,t)=>{for(var n in t||(t={}))fAe.call(t,n)&&Jue(e,n,t[n]);if(JN)for(var n of JN(t))dAe.call(t,n)&&Jue(e,n,t[n]);return e},wot=(e,t)=>{var n={};for(var r in e)fAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&dAe.call(e,r)&&(n[r]=e[r]);return n};const Eot={position:"left",spacing:"md"},va=P.forwardRef((e,t)=>{const n=Ot("Group",Eot,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=wot(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=got(o),{classes:h,cx:p}=vot({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return j.createElement(pt,bot({className:p(h.root,r),ref:t},f),d)});va.displayName="@mantine/core/Group";var Sot=yt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}}));const xot=Sot;var Tot=Object.defineProperty,ZN=Object.getOwnPropertySymbols,hAe=Object.prototype.hasOwnProperty,pAe=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?Tot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aot=(e,t)=>{for(var n in t||(t={}))hAe.call(t,n)&&Zue(e,n,t[n]);if(ZN)for(var n of ZN(t))pAe.call(t,n)&&Zue(e,n,t[n]);return e},Cot=(e,t)=>{var n={};for(var r in e)hAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&pAe.call(e,r)&&(n[r]=e[r]);return n};const Iot={spacing:"md",align:"stretch",justify:"top"},Td=P.forwardRef((e,t)=>{const n=Ot("Stack",Iot,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=Cot(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=xot({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return j.createElement(pt,Aot({className:c(l.root,i),ref:t},u))});Td.displayName="@mantine/core/Stack";function mAe({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?j.createElement(va,{pt:t,spacing:e,role:i,unstyled:s},r):j.createElement(Td,{pt:t,spacing:e,role:i,unstyled:s},r)}var Oot=Object.defineProperty,eD=Object.getOwnPropertySymbols,gAe=Object.prototype.hasOwnProperty,yAe=Object.prototype.propertyIsEnumerable,ele=(e,t,n)=>t in e?Oot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tle=(e,t)=>{for(var n in t||(t={}))gAe.call(t,n)&&ele(e,n,t[n]);if(eD)for(var n of eD(t))yAe.call(t,n)&&ele(e,n,t[n]);return e},Pot=(e,t)=>{var n={};for(var r in e)gAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&yAe.call(e,r)&&(n[r]=e[r]);return n};const kot={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},vAe=P.forwardRef((e,t)=>{const n=Ot("CheckboxGroup",kot,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=Pot(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=ya({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return j.createElement(pot,{value:{value:h,onChange:m,size:l}},j.createElement(Ss.Wrapper,tle(tle({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),j.createElement(mAe,{spacing:u,orientation:a,offset:f},r)))});vAe.displayName="@mantine/core/CheckboxGroup";var $ot=Object.defineProperty,tD=Object.getOwnPropertySymbols,_Ae=Object.prototype.hasOwnProperty,bAe=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?$ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cz=(e,t)=>{for(var n in t||(t={}))_Ae.call(t,n)&&nle(e,n,t[n]);if(tD)for(var n of tD(t))bAe.call(t,n)&&nle(e,n,t[n]);return e},Rot=(e,t)=>{var n={};for(var r in e)_Ae.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&bAe.call(e,r)&&(n[r]=e[r]);return n};function Not(e){return j.createElement("svg",Cz({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Dot(e){var t=e,{indeterminate:n}=t,r=Rot(t,["indeterminate"]);return n?j.createElement("svg",Cz({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),j.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):j.createElement(Not,Cz({},r))}var Mot=Object.defineProperty,Lot=Object.defineProperties,Fot=Object.getOwnPropertyDescriptors,rle=Object.getOwnPropertySymbols,Bot=Object.prototype.hasOwnProperty,jot=Object.prototype.propertyIsEnumerable,ile=(e,t,n)=>t in e?Mot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uot=(e,t)=>{for(var n in t||(t={}))Bot.call(t,n)&&ile(e,n,t[n]);if(rle)for(var n of rle(t))jot.call(t,n)&&ile(e,n,t[n]);return e},zot=(e,t)=>Lot(e,Fot(t));const Vot={xs:16,sm:20,md:24,lg:30,xl:36},Hot={xs:8,sm:10,md:14,lg:16,xl:20};var qot=yt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:Vot}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:Hot}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:zot(Uot({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const Wot=qot;var Got=Object.defineProperty,Yot=Object.defineProperties,Kot=Object.getOwnPropertyDescriptors,sle=Object.getOwnPropertySymbols,Xot=Object.prototype.hasOwnProperty,Qot=Object.prototype.propertyIsEnumerable,ole=(e,t,n)=>t in e?Got(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jot=(e,t)=>{for(var n in t||(t={}))Xot.call(t,n)&&ole(e,n,t[n]);if(sle)for(var n of sle(t))Qot.call(t,n)&&ole(e,n,t[n]);return e},Zot=(e,t)=>Yot(e,Kot(t));const eat={xs:16,sm:20,md:24,lg:30,xl:36};var tat=yt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:Zot(Jot({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:eat})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const nat=tat;var rat=Object.defineProperty,nD=Object.getOwnPropertySymbols,wAe=Object.prototype.hasOwnProperty,EAe=Object.prototype.propertyIsEnumerable,ale=(e,t,n)=>t in e?rat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iat=(e,t)=>{for(var n in t||(t={}))wAe.call(t,n)&&ale(e,n,t[n]);if(nD)for(var n of nD(t))EAe.call(t,n)&&ale(e,n,t[n]);return e},sat=(e,t)=>{var n={};for(var r in e)wAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&EAe.call(e,r)&&(n[r]=e[r]);return n};function FY(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=sat(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=nat({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return j.createElement(pt,iat({className:y(g.root,r)},m),j.createElement("div",{className:y(g.body)},a,j.createElement("div",{className:g.labelWrapper},u&&j.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&j.createElement(Ss.Description,{className:g.description},l),d&&d!=="boolean"&&j.createElement(Ss.Error,{className:g.error},d))))}FY.displayName="@mantine/core/InlineInput";var oat=Object.defineProperty,rD=Object.getOwnPropertySymbols,SAe=Object.prototype.hasOwnProperty,xAe=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?oat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NP=(e,t)=>{for(var n in t||(t={}))SAe.call(t,n)&&ule(e,n,t[n]);if(rD)for(var n of rD(t))xAe.call(t,n)&&ule(e,n,t[n]);return e},aat=(e,t)=>{var n={};for(var r in e)SAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&xAe.call(e,r)&&(n[r]=e[r]);return n};const uat={size:"sm",transitionDuration:100,icon:Dot,labelPosition:"right"},Kw=P.forwardRef((e,t)=>{const n=Ot("Checkbox",uat,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:w,labelPosition:x,description:E,error:b}=n,T=aat(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),C=mot(),A=Vu(f),{systemStyles:O,rest:N}=$f(T),{classes:k}=Wot({size:(C==null?void 0:C.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:x,error:!!b,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:w}),L=C?{checked:C.value.includes(N.value),onChange:C.onChange}:{};return j.createElement(FY,NP(NP({className:r,sx:s,style:i,id:A,size:(C==null?void 0:C.size)||d,labelPosition:x,label:l,description:E,error:b,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:w,"data-checked":L.checked||void 0},O),p),j.createElement("div",{className:k.inner},j.createElement("input",NP(NP({id:A,ref:t,type:"checkbox",className:k.input,checked:o,disabled:a},N),L)),j.createElement(_,{indeterminate:c,className:k.icon})))});Kw.displayName="@mantine/core/Checkbox";Kw.Group=vAe;var lat=yt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}}));const cat=lat;var fat=Object.defineProperty,iD=Object.getOwnPropertySymbols,TAe=Object.prototype.hasOwnProperty,AAe=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?fat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dat=(e,t)=>{for(var n in t||(t={}))TAe.call(t,n)&&lle(e,n,t[n]);if(iD)for(var n of iD(t))AAe.call(t,n)&&lle(e,n,t[n]);return e},hat=(e,t)=>{var n={};for(var r in e)TAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&AAe.call(e,r)&&(n[r]=e[r]);return n};const pat={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},vm=P.forwardRef((e,t)=>{const n=Ot("Container",pat,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=hat(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=cat({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return j.createElement(pt,dat({className:c(l.root,r),ref:t},u))});vm.displayName="@mantine/core/Container";var mat=Object.defineProperty,gat=Object.defineProperties,yat=Object.getOwnPropertyDescriptors,cle=Object.getOwnPropertySymbols,vat=Object.prototype.hasOwnProperty,_at=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?mat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bat=(e,t)=>{for(var n in t||(t={}))vat.call(t,n)&&fle(e,n,t[n]);if(cle)for(var n of cle(t))_at.call(t,n)&&fle(e,n,t[n]);return e},wat=(e,t)=>gat(e,yat(t));const DP={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function Eat({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:DP})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:DP})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:DP})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:DP})};default:return null}}var Sat=yt((e,{position:t,size:n,zIndex:r,withOverlay:i})=>({closeButton:{},overlay:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:i===!1?"none":void 0},drawer:wat(bat({},Eat({position:t,size:n,theme:e})),{maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:i===!1?"auto":void 0}),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}}));const xat=Sat;function BY({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=p2e({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?j.createElement(j.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=h2e({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return j.createElement(j.Fragment,null,i(h))}BY.displayName="@mantine/core/GroupedTransition";var Tat=yt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}}));const Aat=Tat;var Cat=Object.defineProperty,Iat=Object.defineProperties,Oat=Object.getOwnPropertyDescriptors,sD=Object.getOwnPropertySymbols,CAe=Object.prototype.hasOwnProperty,IAe=Object.prototype.propertyIsEnumerable,dle=(e,t,n)=>t in e?Cat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K9=(e,t)=>{for(var n in t||(t={}))CAe.call(t,n)&&dle(e,n,t[n]);if(sD)for(var n of sD(t))IAe.call(t,n)&&dle(e,n,t[n]);return e},Pat=(e,t)=>Iat(e,Oat(t)),kat=(e,t)=>{var n={};for(var r in e)CAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&IAe.call(e,r)&&(n[r]=e[r]);return n};const $at={opacity:.6,color:"#fff",zIndex:Ta("modal"),radius:0,blur:0},OAe=P.forwardRef((e,t)=>{const n=Ot("Overlay",$at,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=kat(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=Aat({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>j.createElement(pt,K9({ref:t,className:p(h.root,f),sx:[v=>Pat(K9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...c0(l)]},y));return i?j.createElement(pt,K9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...c0(l)]},d),g()):g(d)});OAe.displayName="@mantine/core/Overlay";const jY=OAe;var Rat=Object.defineProperty,oD=Object.getOwnPropertySymbols,PAe=Object.prototype.hasOwnProperty,kAe=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?Rat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nat=(e,t)=>{for(var n in t||(t={}))PAe.call(t,n)&&hle(e,n,t[n]);if(oD)for(var n of oD(t))kAe.call(t,n)&&hle(e,n,t[n]);return e},Dat=(e,t)=>{var n={};for(var r in e)PAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&kAe.call(e,r)&&(n[r]=e[r]);return n};const Mat={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},Lat={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},Fat={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:Ta("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function $Ae(e){const t=Ot("Drawer",Fat,e),{className:n,opened:r,onClose:i,position:s,size:o,trapFocus:a,lockScroll:u,closeOnClickOutside:l,closeOnEscape:c,transition:f,transitionDuration:d,transitionTimingFunction:h,zIndex:p,overlayColor:m,overlayOpacity:g,children:y,withOverlay:v,shadow:_,padding:w,title:x,withCloseButton:E,closeButtonLabel:b,classNames:T,styles:C,target:A,withinPortal:O,overlayBlur:N,unstyled:k,withFocusReturn:L}=t,B=Dat(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),{classes:U,cx:G,theme:H}=xat({size:o,position:s,zIndex:p,withOverlay:v},{classNames:T,styles:C,unstyled:k,name:"Drawer"}),Y=yY(a&&r),[,q]=Sxe(),D=f||(H.dir==="rtl"?Lat:Mat)[s],M=typeof g=="number"?g:H.colorScheme==="dark"?.85:.75,W=z=>{z.key==="Escape"&&c&&i()};return P.useEffect(()=>{if(!a)return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[a]),gY({opened:r,shouldReturnFocus:a&&L}),j.createElement(aS,{withinPortal:O,target:A},j.createElement(BY,{onExited:()=>q(!1),onEntered:()=>q(u&&!0),mounted:r,duration:d,timingFunction:h,transitions:{overlay:{duration:d/2,transition:"fade",timingFunction:"ease"},drawer:{duration:d,transition:D,timingFunction:h}}},z=>j.createElement(pt,Nat({className:G(U.root,n),role:"dialog","aria-modal":!0},B),j.createElement(MY,{className:G(U.drawer,n),ref:Y,style:z.drawer,radius:0,tabIndex:-1,onKeyDownCapture:V=>{var te;((te=V.target)==null?void 0:te.getAttribute("data-mantine-stop-propagation"))!=="true"&&V.key==="Escape"&&c&&i()},shadow:_,p:w,unstyled:k},(x||E)&&j.createElement("div",{className:U.header},j.createElement(gt,{className:U.title,unstyled:k},x),E&&j.createElement(mm,{iconSize:16,onClick:i,"aria-label":b,className:U.closeButton,unstyled:k})),y),v&&j.createElement("div",{style:z.overlay},j.createElement(jY,{unstyled:k,blur:N,onMouseDown:()=>l&&i(),className:U.overlay,opacity:M,zIndex:0,color:m||(H.colorScheme==="dark"?H.colors.dark[9]:H.black)})))))}$Ae.displayName="@mantine/core/Drawer";const Bat={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var jat=Object.defineProperty,Uat=Object.defineProperties,zat=Object.getOwnPropertyDescriptors,aD=Object.getOwnPropertySymbols,RAe=Object.prototype.hasOwnProperty,NAe=Object.prototype.propertyIsEnumerable,ple=(e,t,n)=>t in e?jat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vat=(e,t)=>{for(var n in t||(t={}))RAe.call(t,n)&&ple(e,n,t[n]);if(aD)for(var n of aD(t))NAe.call(t,n)&&ple(e,n,t[n]);return e},Hat=(e,t)=>Uat(e,zat(t)),qat=(e,t)=>{var n={};for(var r in e)RAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aD)for(var r of aD(e))t.indexOf(r)<0&&NAe.call(e,r)&&(n[r]=e[r]);return n};const Wat={},Ii=P.forwardRef((e,t)=>{const n=Ot("Flex",Wat,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=qat(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return j.createElement(pt,Hat(Vat({},f),{sx:[{display:"flex"},d=>vz({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,Bat),...c0(c)],ref:t}))});Ii.displayName="@mantine/core/Flex";const DAe=P.createContext(null),Gat=DAe.Provider,Yat=()=>P.useContext(DAe);var Kat=Object.defineProperty,mle=Object.getOwnPropertySymbols,Xat=Object.prototype.hasOwnProperty,Qat=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?Kat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jat=(e,t)=>{for(var n in t||(t={}))Xat.call(t,n)&&gle(e,n,t[n]);if(mle)for(var n of mle(t))Qat.call(t,n)&&gle(e,n,t[n]);return e};const UY=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,MAe=(e,t,n)=>n||e==="auto"||e==="content"?"unset":UY(e,t),LAe=(e,t)=>{if(e)return e==="auto"||t?1:0},FAe=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function Zat({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return yXe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:UY(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:MAe(e[a],i,s),marginLeft:FAe(t[a],i),flexGrow:LAe(e[a],s)},o),{})}var eut=yt((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:x})=>({root:Jat({boxSizing:"border-box",flexGrow:LAe(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:FAe(r,l),flexBasis:UY(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:MAe(c,l,n)},Zat({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:w,xl:x},theme:e,columns:l,grow:n}))}));const tut=eut;var nut=Object.defineProperty,uD=Object.getOwnPropertySymbols,BAe=Object.prototype.hasOwnProperty,jAe=Object.prototype.propertyIsEnumerable,yle=(e,t,n)=>t in e?nut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rut=(e,t)=>{for(var n in t||(t={}))BAe.call(t,n)&&yle(e,n,t[n]);if(uD)for(var n of uD(t))jAe.call(t,n)&&yle(e,n,t[n]);return e},iut=(e,t)=>{var n={};for(var r in e)BAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uD)for(var r of uD(e))t.indexOf(r)<0&&jAe.call(e,r)&&(n[r]=e[r]);return n};const sut={};function out(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const UAe=P.forwardRef((e,t)=>{const n=Ot("Grid.Col",sut,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:x,className:E,id:b,unstyled:T}=n,C=iut(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),A=Yat();if(!A)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const O=i||A.columns,{classes:N,cx:k}=tut({gutter:A.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:x,grow:A.grow,columns:A.columns,span:O},{unstyled:T,name:"Col"});return!out(O)||O>A.columns?null:j.createElement(pt,rut({className:k(N.root,E),ref:t},C),r)});UAe.displayName="@mantine/core/Col";var aut=yt((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}}));const uut=aut;var lut=Object.defineProperty,lD=Object.getOwnPropertySymbols,zAe=Object.prototype.hasOwnProperty,VAe=Object.prototype.propertyIsEnumerable,vle=(e,t,n)=>t in e?lut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cut=(e,t)=>{for(var n in t||(t={}))zAe.call(t,n)&&vle(e,n,t[n]);if(lD)for(var n of lD(t))VAe.call(t,n)&&vle(e,n,t[n]);return e},fut=(e,t)=>{var n={};for(var r in e)zAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lD)for(var r of lD(e))t.indexOf(r)<0&&VAe.call(e,r)&&(n[r]=e[r]);return n};const dut={gutter:"md",justify:"flex-start",align:"stretch",columns:12},xu=P.forwardRef((e,t)=>{const n=Ot("Grid",dut,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=fut(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=uut({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return j.createElement(Gat,{value:{gutter:r,grow:s,columns:u}},j.createElement(pt,cut({className:p(h.root,l),ref:t},d),i))});xu.Col=UAe;xu.displayName="@mantine/core/Grid";function hut({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),s=P.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return P.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var put=Object.defineProperty,_le=Object.getOwnPropertySymbols,mut=Object.prototype.hasOwnProperty,gut=Object.prototype.propertyIsEnumerable,ble=(e,t,n)=>t in e?put(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yut=(e,t)=>{for(var n in t||(t={}))mut.call(t,n)&&ble(e,n,t[n]);if(_le)for(var n of _le(t))gut.call(t,n)&&ble(e,n,t[n]);return e};function vut(e){return j.createElement("svg",yut({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var _ut=Object.defineProperty,but=Object.defineProperties,wut=Object.getOwnPropertyDescriptors,wle=Object.getOwnPropertySymbols,Eut=Object.prototype.hasOwnProperty,Sut=Object.prototype.propertyIsEnumerable,Ele=(e,t,n)=>t in e?_ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sle=(e,t)=>{for(var n in t||(t={}))Eut.call(t,n)&&Ele(e,n,t[n]);if(wle)for(var n of wle(t))Sut.call(t,n)&&Ele(e,n,t[n]);return e},xle=(e,t)=>but(e,wut(t)),xut=yt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:xle(Sle({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:xle(Sle({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})}));const Tut=xut;var Aut=Object.defineProperty,cD=Object.getOwnPropertySymbols,HAe=Object.prototype.hasOwnProperty,qAe=Object.prototype.propertyIsEnumerable,Tle=(e,t,n)=>t in e?Aut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X9=(e,t)=>{for(var n in t||(t={}))HAe.call(t,n)&&Tle(e,n,t[n]);if(cD)for(var n of cD(t))qAe.call(t,n)&&Tle(e,n,t[n]);return e},Cut=(e,t)=>{var n={};for(var r in e)HAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cD)for(var r of cD(e))t.indexOf(r)<0&&qAe.call(e,r)&&(n[r]=e[r]);return n};const Iut={fit:"cover",width:"100%",height:"auto",radius:0},t_=P.forwardRef((e,t)=>{const n=Ot("Image",Iut,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=Cut(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:w,cx:x}=Tut({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[E,b]=P.useState(!s),T=f&&E;return Fs(()=>{b(!1)},[s]),j.createElement(pt,X9({className:x(w.root,r),ref:t,style:X9({width:a},v)},_),j.createElement("figure",{className:w.figure},j.createElement("div",{className:w.imageWrapper},j.createElement("img",X9({className:w.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:C=>{b(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(C)}},c)),T&&j.createElement("div",{className:w.placeholder,title:i},d||j.createElement("div",null,j.createElement(vut,{style:{width:40,height:40}})))),!!g&&j.createElement(gt,{component:"figcaption",size:"sm",align:"center",className:w.caption},g)))});t_.displayName="@mantine/core/Image";function Out(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Put=P.useLayoutEffect,kut=function(t){var n=P.useRef(t);return Put(function(){n.current=t}),n},Ale=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},$ut=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&Ale(r.current,null),r.current=n,n&&Ale(n,i)},[n])},Cle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ile=function(t){Object.keys(Cle).forEach(function(n){t.style.setProperty(n,Cle[n],"important")})},Xu=null,Rut=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Nut(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Xu||(Xu=document.createElement("textarea"),Xu.setAttribute("tabindex","-1"),Xu.setAttribute("aria-hidden","true"),Ile(Xu)),Xu.parentNode===null&&document.body.appendChild(Xu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Xu.style[h]=o[h]}),Ile(Xu),Xu.value=t;var u=Rut(Xu,e);Xu.value="x";var l=Xu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Ole=function(){},Dut=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Mut=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Lut=!!document.documentElement.currentStyle,Fut=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Dut(Mut,n),i=r.boxSizing;if(i==="")return null;Lut&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},But=function(t){var n=kut(t);P.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},jut=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Ole:o,u=t.onHeightChange,l=u===void 0?Ole:u,c=Out(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=P.useRef(null),h=$ut(d,n),p=P.useRef(0),m=P.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:Fut(_);if(w){m.current=w;var x=Nut(w,_.value||_.placeholder||"x",s,i),E=x[0],b=x[1];p.current!==E&&(p.current=E,_.style.setProperty("height",E+"px","important"),l(E,{rowHeight:b}))}},y=function(_){f||g(),a(_)};return P.useLayoutEffect(g),But(g),P.createElement("textarea",ki({},c,{onChange:y,ref:h}))},Uut=P.forwardRef(jut);const zut=Uut;var Vut=yt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const Hut=Vut;var qut=Object.defineProperty,Wut=Object.defineProperties,Gut=Object.getOwnPropertyDescriptors,fD=Object.getOwnPropertySymbols,WAe=Object.prototype.hasOwnProperty,GAe=Object.prototype.propertyIsEnumerable,Ple=(e,t,n)=>t in e?qut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j_=(e,t)=>{for(var n in t||(t={}))WAe.call(t,n)&&Ple(e,n,t[n]);if(fD)for(var n of fD(t))GAe.call(t,n)&&Ple(e,n,t[n]);return e},Q9=(e,t)=>Wut(e,Gut(t)),Yut=(e,t)=>{var n={};for(var r in e)WAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fD)for(var r of fD(e))t.indexOf(r)<0&&GAe.call(e,r)&&(n[r]=e[r]);return n};const Kut={autosize:!1,size:"sm",__staticSelector:"Textarea"},YAe=P.forwardRef((e,t)=>{const n=Ot("Textarea",Kut,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:w,labelProps:x,inputWrapperOrder:E,inputContainer:b,unstyled:T,withAsterisk:C}=n,A=Yut(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),O=Vu(l),{classes:N,cx:k}=Hut(),{systemStyles:L,rest:B}=$f(A),U=j_({required:f,ref:t,invalid:!!a,id:O,classNames:Q9(j_({},p),{input:k(N.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:T},B);return j.createElement(Ss.Wrapper,j_(j_({label:o,error:a,id:O,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:x,descriptionProps:w,inputContainer:b,inputWrapperOrder:E,unstyled:T,withAsterisk:C},L),h),r?j.createElement(Ss,Q9(j_({},U),{component:zut,maxRows:i,minRows:s})):j.createElement(Ss,Q9(j_({},U),{component:"textarea",rows:s})))});YAe.displayName="@mantine/core/Textarea";const KAe=P.createContext(null);function Xut(){return P.useContext(KAe)||{}}var Qut=yt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}}));const Jut=Qut;var Zut=Object.defineProperty,dD=Object.getOwnPropertySymbols,XAe=Object.prototype.hasOwnProperty,QAe=Object.prototype.propertyIsEnumerable,kle=(e,t,n)=>t in e?Zut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,elt=(e,t)=>{for(var n in t||(t={}))XAe.call(t,n)&&kle(e,n,t[n]);if(dD)for(var n of dD(t))QAe.call(t,n)&&kle(e,n,t[n]);return e},tlt=(e,t)=>{var n={};for(var r in e)XAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dD)for(var r of dD(e))t.indexOf(r)<0&&QAe.call(e,r)&&(n[r]=e[r]);return n};function JAe(e){var t=e,{className:n,children:r,icon:i}=t,s=tlt(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=Xut(),{classNames:d,styles:h,unstyled:p}=J0(),m=i||o,{classes:g,cx:y}=Jut({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return j.createElement(pt,elt({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),j.createElement("div",{className:g.itemWrapper},m&&j.createElement("span",{className:g.itemIcon},m),j.createElement("span",null,r)))}JAe.displayName="@mantine/core/ListItem";var nlt=Object.defineProperty,rlt=Object.defineProperties,ilt=Object.getOwnPropertyDescriptors,$le=Object.getOwnPropertySymbols,slt=Object.prototype.hasOwnProperty,olt=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?nlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,alt=(e,t)=>{for(var n in t||(t={}))slt.call(t,n)&&Rle(e,n,t[n]);if($le)for(var n of $le(t))olt.call(t,n)&&Rle(e,n,t[n]);return e},ult=(e,t)=>rlt(e,ilt(t)),llt=yt((e,{withPadding:t,size:n,listStyleType:r})=>({root:ult(alt({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})}));const clt=llt;var flt=Object.defineProperty,hD=Object.getOwnPropertySymbols,ZAe=Object.prototype.hasOwnProperty,eCe=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?flt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dlt=(e,t)=>{for(var n in t||(t={}))ZAe.call(t,n)&&Nle(e,n,t[n]);if(hD)for(var n of hD(t))eCe.call(t,n)&&Nle(e,n,t[n]);return e},hlt=(e,t)=>{var n={};for(var r in e)ZAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hD)for(var r of hD(e))t.indexOf(r)<0&&eCe.call(e,r)&&(n[r]=e[r]);return n};const plt={type:"unordered",size:"md",spacing:0},zv=P.forwardRef((e,t)=>{const n=Ot("List",plt,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=hlt(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=clt({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return j.createElement(pY,{classNames:h,styles:d,unstyled:p},j.createElement(KAe.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},j.createElement(pt,dlt({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});zv.Item=JAe;zv.displayName="@mantine/core/List";var mlt=yt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}});const glt=mlt;var ylt=Object.defineProperty,vlt=Object.defineProperties,_lt=Object.getOwnPropertyDescriptors,pD=Object.getOwnPropertySymbols,tCe=Object.prototype.hasOwnProperty,nCe=Object.prototype.propertyIsEnumerable,Dle=(e,t,n)=>t in e?ylt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MP=(e,t)=>{for(var n in t||(t={}))tCe.call(t,n)&&Dle(e,n,t[n]);if(pD)for(var n of pD(t))nCe.call(t,n)&&Dle(e,n,t[n]);return e},blt=(e,t)=>vlt(e,_lt(t)),wlt=(e,t)=>{var n={};for(var r in e)tCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pD)for(var r of pD(e))t.indexOf(r)<0&&nCe.call(e,r)&&(n[r]=e[r]);return n};const Elt={overlayOpacity:.75,transitionDuration:0,zIndex:Ta("overlay")},_m=P.forwardRef((e,t)=>{const n=Ot("LoadingOverlay",Elt,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=wlt(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=glt(null,{name:"LoadingOverlay",unstyled:m}),w=`calc(${c} + 1)`;return j.createElement(dI,{duration:u,exitDuration:l,mounted:i,transition:"fade"},x=>j.createElement(pt,MP({className:v(y.root,r),style:blt(MP(MP({},x),f),{zIndex:c}),ref:t},g),d?j.createElement("div",{style:{zIndex:w}},d):j.createElement(J1,MP({style:{zIndex:w}},s)),j.createElement(jY,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});_m.displayName="@mantine/core/LoadingOverlay";var Slt=yt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}}));const xlt=Slt;var Tlt=Object.defineProperty,mD=Object.getOwnPropertySymbols,rCe=Object.prototype.hasOwnProperty,iCe=Object.prototype.propertyIsEnumerable,Mle=(e,t,n)=>t in e?Tlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Alt=(e,t)=>{for(var n in t||(t={}))rCe.call(t,n)&&Mle(e,n,t[n]);if(mD)for(var n of mD(t))iCe.call(t,n)&&Mle(e,n,t[n]);return e},Clt=(e,t)=>{var n={};for(var r in e)rCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mD)for(var r of mD(e))t.indexOf(r)<0&&iCe.call(e,r)&&(n[r]=e[r]);return n};function sCe(e){var t=e,{children:n,className:r}=t,i=Clt(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=J0(),{classes:u,cx:l}=xlt(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return j.createElement(pt,Alt({className:l(u.divider,r)},i))}sCe.displayName="@mantine/core/MenuDivider";const oCe={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Ilt,zY]=rY(oCe.context);var Olt=Object.defineProperty,gD=Object.getOwnPropertySymbols,aCe=Object.prototype.hasOwnProperty,uCe=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?Olt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Plt=(e,t)=>{for(var n in t||(t={}))aCe.call(t,n)&&Lle(e,n,t[n]);if(gD)for(var n of gD(t))uCe.call(t,n)&&Lle(e,n,t[n]);return e},klt=(e,t)=>{var n={};for(var r in e)aCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gD)for(var r of gD(e))t.indexOf(r)<0&&uCe.call(e,r)&&(n[r]=e[r]);return n};function lCe(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=klt(t,["children","onMouseEnter","onMouseLeave"]);const o=P.useRef(),a=zY(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=dp(r,()=>a.trigger==="hover"&&a.openDropdown()),c=dp(i,()=>a.trigger==="hover"&&a.closeDropdown());return j.createElement(Ci.Dropdown,Plt({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),j.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}lCe.displayName="@mantine/core/MenuDropdown";var $lt=Object.defineProperty,Rlt=Object.defineProperties,Nlt=Object.getOwnPropertyDescriptors,Fle=Object.getOwnPropertySymbols,Dlt=Object.prototype.hasOwnProperty,Mlt=Object.prototype.propertyIsEnumerable,Ble=(e,t,n)=>t in e?$lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Llt=(e,t)=>{for(var n in t||(t={}))Dlt.call(t,n)&&Ble(e,n,t[n]);if(Fle)for(var n of Fle(t))Mlt.call(t,n)&&Ble(e,n,t[n]);return e},Flt=(e,t)=>Rlt(e,Nlt(t)),Blt=yt((e,{color:t,radius:n})=>({item:Flt(Llt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const jlt=Blt;var Ult=Object.defineProperty,zlt=Object.defineProperties,Vlt=Object.getOwnPropertyDescriptors,yD=Object.getOwnPropertySymbols,cCe=Object.prototype.hasOwnProperty,fCe=Object.prototype.propertyIsEnumerable,jle=(e,t,n)=>t in e?Ult(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hlt=(e,t)=>{for(var n in t||(t={}))cCe.call(t,n)&&jle(e,n,t[n]);if(yD)for(var n of yD(t))fCe.call(t,n)&&jle(e,n,t[n]);return e},qlt=(e,t)=>zlt(e,Vlt(t)),Wlt=(e,t)=>{var n={};for(var r in e)cCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yD)for(var r of yD(e))t.indexOf(r)<0&&fCe.call(e,r)&&(n[r]=e[r]);return n};const dCe=P.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=Wlt(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=zY(),{classNames:f,styles:d,unstyled:h}=J0(),{classes:p,cx:m,theme:g}=jlt({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=P.useRef(),v=c.getItemIndex(y.current),_=l,w=dp(_.onMouseLeave,()=>c.setHovered(-1)),x=dp(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),E=dp(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),b=dp(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return j.createElement(pt,qlt(Hlt({component:"button",type:"button"},l),{tabIndex:-1,onFocus:b,className:m(p.item,i),ref:Hs(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:x,onMouseLeave:w,onClick:E,onKeyDown:USe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&j.createElement("div",{className:p.itemIcon},a),r&&j.createElement("div",{className:p.itemLabel},r),u&&j.createElement("div",{className:p.itemRightSection},u))});dCe.displayName="@mantine/core/MenuItem";const Glt=dCe;var Ylt=yt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}}));const Klt=Ylt;var Xlt=Object.defineProperty,vD=Object.getOwnPropertySymbols,hCe=Object.prototype.hasOwnProperty,pCe=Object.prototype.propertyIsEnumerable,Ule=(e,t,n)=>t in e?Xlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qlt=(e,t)=>{for(var n in t||(t={}))hCe.call(t,n)&&Ule(e,n,t[n]);if(vD)for(var n of vD(t))pCe.call(t,n)&&Ule(e,n,t[n]);return e},Jlt=(e,t)=>{var n={};for(var r in e)hCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vD)for(var r of vD(e))t.indexOf(r)<0&&pCe.call(e,r)&&(n[r]=e[r]);return n};function mCe(e){var t=e,{children:n,className:r}=t,i=Jlt(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=J0(),{classes:u,cx:l}=Klt(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return j.createElement(gt,Qlt({className:l(u.label,r)},i),n)}mCe.displayName="@mantine/core/MenuLabel";var Zlt=Object.defineProperty,_D=Object.getOwnPropertySymbols,gCe=Object.prototype.hasOwnProperty,yCe=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?Zlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ect=(e,t)=>{for(var n in t||(t={}))gCe.call(t,n)&&zle(e,n,t[n]);if(_D)for(var n of _D(t))yCe.call(t,n)&&zle(e,n,t[n]);return e},tct=(e,t)=>{var n={};for(var r in e)gCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_D)for(var r of _D(e))t.indexOf(r)<0&&yCe.call(e,r)&&(n[r]=e[r]);return n};const vCe=P.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=tct(n,["children","refProp"]);if(!sI(r))throw new Error(oCe.children);const o=zY(),a=dp(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=dp(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=dp(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return j.createElement(Ci.Target,ect({refProp:i,popupType:"menu",ref:t},s),P.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});vCe.displayName="@mantine/core/MenuTarget";var nct=yt({dropdown:{padding:4}});const rct=nct;var ict=Object.defineProperty,sct=Object.defineProperties,oct=Object.getOwnPropertyDescriptors,bD=Object.getOwnPropertySymbols,_Ce=Object.prototype.hasOwnProperty,bCe=Object.prototype.propertyIsEnumerable,Vle=(e,t,n)=>t in e?ict(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hle=(e,t)=>{for(var n in t||(t={}))_Ce.call(t,n)&&Vle(e,n,t[n]);if(bD)for(var n of bD(t))bCe.call(t,n)&&Vle(e,n,t[n]);return e},qle=(e,t)=>sct(e,oct(t)),act=(e,t)=>{var n={};for(var r in e)_Ce.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bD)for(var r of bD(e))t.indexOf(r)<0&&bCe.call(e,r)&&(n[r]=e[r]);return n};const uct={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function Kl(e){const t=Ot("Menu",uct,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=act(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:w}=rct(),[x,{setHovered:E,resetHovered:b}]=UKe(),[T,C]=ya({value:s,defaultValue:o,finalValue:!1,onChange:a}),A=()=>{C(!1),T&&(i==null||i())},O=()=>{C(!0),!T&&(r==null||r())},N=()=>T?A():O(),{openDropdown:k,closeDropdown:L}=hut({open:O,close:A,closeDelay:h,openDelay:d}),B=U=>FKe("[data-menu-item]","[data-menu-dropdown]",U);return Fs(()=>{b()},[T]),j.createElement(Ilt,{value:{opened:T,toggleDropdown:N,getItemIndex:B,hovered:x,setHovered:E,closeOnItemClick:u,closeDropdown:f==="click"?A:L,openDropdown:f==="click"?O:k,closeDropdownImmediately:A,loop:l,trigger:f,radius:y}},j.createElement(Ci,qle(Hle({},v),{radius:y,opened:T,onChange:C,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:qle(Hle({},p),{dropdown:w(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:A,onOpen:O}),n))}Kl.displayName="@mantine/core/Menu";Kl.Item=Glt;Kl.Label=mCe;Kl.Dropdown=lCe;Kl.Target=vCe;Kl.Divider=sCe;var lct=Object.defineProperty,Wle=Object.getOwnPropertySymbols,cct=Object.prototype.hasOwnProperty,fct=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?lct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dct=(e,t)=>{for(var n in t||(t={}))cct.call(t,n)&&Gle(e,n,t[n]);if(Wle)for(var n of Wle(t))fct.call(t,n)&&Gle(e,n,t[n]);return e};const hct={xs:320,sm:380,md:440,lg:620,xl:780};function pct(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var mct=yt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:dct({position:"relative",width:s?"100vw":e.fn.size({sizes:hct,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},pct(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}}));const gct=mct;var yct=Object.defineProperty,wD=Object.getOwnPropertySymbols,wCe=Object.prototype.hasOwnProperty,ECe=Object.prototype.propertyIsEnumerable,Yle=(e,t,n)=>t in e?yct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vct=(e,t)=>{for(var n in t||(t={}))wCe.call(t,n)&&Yle(e,n,t[n]);if(wD)for(var n of wD(t))ECe.call(t,n)&&Yle(e,n,t[n]);return e},_ct=(e,t)=>{var n={};for(var r in e)wCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wD)for(var r of wD(e))t.indexOf(r)<0&&ECe.call(e,r)&&(n[r]=e[r]);return n};const bct={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:Ta("modal"),exitTransitionDuration:0};function Ip(e){const t=Ot("Modal",bct,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:w,styles:x,closeOnClickOutside:E,trapFocus:b,closeOnEscape:T,centered:C,target:A,withinPortal:O,zIndex:N,overlayBlur:k,transitionTimingFunction:L,fullScreen:B,unstyled:U,lockScroll:G,withFocusReturn:H}=t,Y=_ct(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),q=Vu(_),D=`${q}-title`,M=`${q}-body`,{classes:W,cx:z,theme:V}=gct({size:l,overflow:p,centered:C,zIndex:N,fullScreen:B},{unstyled:U,classNames:w,styles:x,name:"Modal"}),te=yY(b&&r),le=P.useRef(null),me=Hs(te,le),ye=typeof u=="number"?u:V.colorScheme==="dark"?.85:.75;Sxe(G&&r);const de=Ve=>{!b&&Ve.key==="Escape"&&T&&s()};P.useEffect(()=>{if(!b)return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[b]),gY({opened:r,shouldReturnFocus:b&&H});const we=P.useRef(null);yz("mousedown",Ve=>{we.current=Ve.target});const he=()=>{we.current===le.current&&E&&s()};return j.createElement(aS,{withinPortal:O,target:A},j.createElement(BY,{mounted:r,duration:c,exitDuration:f,timingFunction:L,transitions:{modal:{duration:c,transition:m||(B?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Ve=>j.createElement(j.Fragment,null,j.createElement(pt,vct({id:q,className:z(W.root,n)},Y),j.createElement("div",{style:Ve.overlay},j.createElement(jY,{className:W.overlay,sx:{position:"fixed"},zIndex:0,blur:k,color:h||(V.colorScheme==="dark"?V.colors.dark[9]:V.black),opacity:ye,unstyled:U})),j.createElement("div",{role:"presentation",className:W.inner,onClick:he,onKeyDown:Me=>{var Ye;((Ye=Me.target)==null?void 0:Ye.getAttribute("data-mantine-stop-propagation"))!=="true"&&Me.key==="Escape"&&T&&s()},ref:me},j.createElement(MY,{className:W.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":D,"aria-describedby":M,"aria-modal":!0,tabIndex:-1,style:Ve.modal,unstyled:U,onClick:Me=>Me.stopPropagation()},(i||a)&&j.createElement("div",{className:W.header},j.createElement(gt,{id:D,className:W.title},i),a&&j.createElement(mm,{iconSize:16,onClick:s,"aria-label":d,className:W.close})),j.createElement("div",{id:M,className:W.body},o)))))))}Ip.displayName="@mantine/core/Modal";const wct={xs:16,sm:22,md:26,lg:30,xl:36},Ect={xs:10,sm:12,md:14,lg:16,xl:18};var Sct=yt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:wct}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:Ect}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const xct=Sct;var Tct=Object.defineProperty,ED=Object.getOwnPropertySymbols,SCe=Object.prototype.hasOwnProperty,xCe=Object.prototype.propertyIsEnumerable,Kle=(e,t,n)=>t in e?Tct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Act=(e,t)=>{for(var n in t||(t={}))SCe.call(t,n)&&Kle(e,n,t[n]);if(ED)for(var n of ED(t))xCe.call(t,n)&&Kle(e,n,t[n]);return e},Cct=(e,t)=>{var n={};for(var r in e)SCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ED)for(var r of ED(e))t.indexOf(r)<0&&xCe.call(e,r)&&(n[r]=e[r]);return n};const Xle={xs:16,sm:22,md:24,lg:26,xl:30};function TCe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=Cct(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=xct({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return j.createElement("div",Act({className:p(h.defaultValue,s)},d),j.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&j.createElement(mm,{"aria-hidden":!0,onMouseDown:o,size:Xle[l],radius:2,color:"blue",variant:"transparent",iconSize:Xle[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}TCe.displayName="@mantine/core/MultiSelect/DefaultValue";function Ict({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var Oct=Object.defineProperty,SD=Object.getOwnPropertySymbols,ACe=Object.prototype.hasOwnProperty,CCe=Object.prototype.propertyIsEnumerable,Qle=(e,t,n)=>t in e?Oct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jle=(e,t)=>{for(var n in t||(t={}))ACe.call(t,n)&&Qle(e,n,t[n]);if(SD)for(var n of SD(t))CCe.call(t,n)&&Qle(e,n,t[n]);return e},Pct=(e,t)=>{var n={};for(var r in e)ACe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SD)for(var r of SD(e))t.indexOf(r)<0&&CCe.call(e,r)&&(n[r]=e[r]);return n};const kct={xs:14,sm:18,md:20,lg:24,xl:28};function ICe(e){var t=e,{size:n,error:r,style:i}=t,s=Pct(t,["size","error","style"]);const o=As(),a=o.fn.size({size:n,sizes:kct});return j.createElement("svg",Jle({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Jle({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),j.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function OCe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?j.createElement(mm,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):j.createElement(ICe,{error:i,size:r})}OCe.displayName="@mantine/core/SelectRightSection";var $ct=Object.defineProperty,Rct=Object.defineProperties,Nct=Object.getOwnPropertyDescriptors,xD=Object.getOwnPropertySymbols,PCe=Object.prototype.hasOwnProperty,kCe=Object.prototype.propertyIsEnumerable,Zle=(e,t,n)=>t in e?$ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J9=(e,t)=>{for(var n in t||(t={}))PCe.call(t,n)&&Zle(e,n,t[n]);if(xD)for(var n of xD(t))kCe.call(t,n)&&Zle(e,n,t[n]);return e},ece=(e,t)=>Rct(e,Nct(t)),Dct=(e,t)=>{var n={};for(var r in e)PCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xD)for(var r of xD(e))t.indexOf(r)<0&&kCe.call(e,r)&&(n[r]=e[r]);return n};const Mct={xs:24,sm:30,md:34,lg:44,xl:54};function $Ce(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=Dct(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:Mct}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&j.createElement(OCe,J9({},o)),styles:ece(J9({},a),{rightSection:ece(J9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var Lct=Object.defineProperty,Fct=Object.defineProperties,Bct=Object.getOwnPropertyDescriptors,tce=Object.getOwnPropertySymbols,jct=Object.prototype.hasOwnProperty,Uct=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?Lct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zct=(e,t)=>{for(var n in t||(t={}))jct.call(t,n)&&nce(e,n,t[n]);if(tce)for(var n of tce(t))Uct.call(t,n)&&nce(e,n,t[n]);return e},Vct=(e,t)=>Fct(e,Bct(t)),Hct=yt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:na})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:Vct(zct({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:na})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const qct=Hct;var Wct=Object.defineProperty,Gct=Object.defineProperties,Yct=Object.getOwnPropertyDescriptors,TD=Object.getOwnPropertySymbols,RCe=Object.prototype.hasOwnProperty,NCe=Object.prototype.propertyIsEnumerable,rce=(e,t,n)=>t in e?Wct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U_=(e,t)=>{for(var n in t||(t={}))RCe.call(t,n)&&rce(e,n,t[n]);if(TD)for(var n of TD(t))NCe.call(t,n)&&rce(e,n,t[n]);return e},ice=(e,t)=>Gct(e,Yct(t)),Kct=(e,t)=>{var n={};for(var r in e)RCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TD)for(var r of TD(e))t.indexOf(r)<0&&NCe.call(e,r)&&(n[r]=e[r]);return n};function Xct(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Qct(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function sce(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const Jct={size:"sm",valueComponent:TCe,itemComponent:EY,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:Xct,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:Qct,switchDirectionOnFlip:!1,zIndex:Ta("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},DCe=P.forwardRef((e,t)=>{const n=Ot("MultiSelect",Jct,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:w,transitionDuration:x,transitionTimingFunction:E,maxDropdownHeight:b,shadow:T,nothingFound:C,onFocus:A,onBlur:O,searchable:N,placeholder:k,filter:L,limit:B,clearSearchOnChange:U,clearable:G,clearSearchOnBlur:H,clearButtonLabel:Y,variant:q,onSearchChange:D,searchValue:M,disabled:W,initiallyOpened:z,radius:V,icon:te,rightSection:le,rightSectionWidth:me,creatable:ye,getCreateLabel:de,shouldCreate:we,onCreate:he,sx:Ve,dropdownComponent:Me,onDropdownClose:Ye,onDropdownOpen:Fe,maxSelectedValues:De,withinPortal:He,switchDirectionOnFlip:Qt,zIndex:nt,selectOnBlur:qe,name:Pt,dropdownPosition:at,errorProps:ht,labelProps:vt,descriptionProps:Ht,clearButtonTabIndex:Xt,form:fe,positionDependencies:xe,onKeyDown:Le,unstyled:ct,inputContainer:Je,inputWrapperOrder:lt,readOnly:st,withAsterisk:At}=n,Tn=Kct(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Zt,cx:Jt,theme:nr}=qct({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:ct,name:"MultiSelect"}),{systemStyles:Bn,rest:Bo}=$f(Tn),hr=P.useRef(),Ni=P.useRef(),jr=P.useRef({}),Ir=Vu(_),[Ur,rr]=P.useState(z),[Et,pr]=P.useState(-1),[fi,jn]=P.useState("column"),[fs,ds]=ya({value:M,defaultValue:"",finalValue:void 0,onChange:D}),[oe,ne]=P.useState(!1),{scrollIntoView:ue,targetRef:Ee,scrollableRef:Se}=Exe({duration:0,offset:5,cancelable:!1,isList:!0}),St=ye&&typeof de=="function";let ke=null;const _t=m.map(wt=>typeof wt=="string"?{label:wt,value:wt}:wt),Ft=zSe({data:_t}),[Ct,Bt]=ya({value:sce(h,m),defaultValue:sce(p,m),finalValue:[],onChange:g}),un=P.useRef(!!De&&De<Ct.length),Er=wt=>{if(!st){const An=Ct.filter(Rr=>Rr!==wt);Bt(An),De&&An.length<De&&(un.current=!1)}},qt=wt=>{ds(wt.currentTarget.value),!W&&!un.current&&N&&rr(!0)},ir=wt=>{typeof A=="function"&&A(wt),!W&&!un.current&&N&&rr(!0)},en=Ict({data:Ft,searchable:N,searchValue:fs,limit:B,filter:L,value:Ct}),Gn=(wt,An,Rr)=>{let ns=wt;for(;Rr(ns);)if(ns=An(ns),!en[ns].disabled)return ns;return wt};Fs(()=>{pr(-1)},[fs]),Fs(()=>{!W&&Ct.length>m.length&&rr(!1),De&&Ct.length<De&&(un.current=!1),De&&Ct.length>=De&&(un.current=!0,rr(!1))},[Ct]);const si=wt=>{if(!st)if(U&&ds(""),Ct.includes(wt.value))Er(wt.value);else{if(wt.creatable&&typeof he=="function"){const An=he(wt.value);typeof An<"u"&&An!==null&&Bt(typeof An=="string"?[...Ct,An]:[...Ct,An.value])}else Bt([...Ct,wt.value]);Ct.length===De-1&&(un.current=!0,rr(!1)),Et===en.length-1&&pr(en.length-2),en.length===1&&rr(!1)}},wi=wt=>{typeof O=="function"&&O(wt),qe&&en[Et]&&Ur&&si(en[Et]),H&&ds(""),rr(!1)},Ei=wt=>{if(oe||(Le==null||Le(wt),st)||wt.key!=="Backspace"&&De&&un.current)return;const An=fi==="column",Rr=()=>{pr(po=>{var K;const se=Gn(po,Z=>Z+1,Z=>Z<en.length-1);return Ur&&(Ee.current=jr.current[(K=en[se])==null?void 0:K.value],ue({alignment:An?"end":"start"})),se})},ns=()=>{pr(po=>{var K;const se=Gn(po,Z=>Z-1,Z=>Z>0);return Ur&&(Ee.current=jr.current[(K=en[se])==null?void 0:K.value],ue({alignment:An?"start":"end"})),se})};switch(wt.key){case"ArrowUp":{wt.preventDefault(),rr(!0),An?ns():Rr();break}case"ArrowDown":{wt.preventDefault(),rr(!0),An?Rr():ns();break}case"Enter":{wt.preventDefault(),en[Et]&&Ur?si(en[Et]):rr(!0);break}case" ":{N||(wt.preventDefault(),en[Et]&&Ur?si(en[Et]):rr(!0));break}case"Backspace":{Ct.length>0&&fs.length===0&&(Bt(Ct.slice(0,-1)),rr(!0),De&&(un.current=!1));break}case"Home":{if(!N){wt.preventDefault(),Ur||rr(!0);const po=en.findIndex(K=>!K.disabled);pr(po),ue({alignment:An?"end":"start"})}break}case"End":{if(!N){wt.preventDefault(),Ur||rr(!0);const po=en.map(K=>!!K.disabled).lastIndexOf(!1);pr(po),ue({alignment:An?"end":"start"})}break}case"Escape":rr(!1)}},Cs=Ct.map(wt=>{let An=Ft.find(Rr=>Rr.value===wt&&!Rr.disabled);return!An&&St&&(An={value:wt,label:wt}),An}).filter(wt=>!!wt).map(wt=>j.createElement(y,ice(U_({},wt),{variant:q,disabled:W,className:Zt.value,readOnly:st,onRemove:An=>{An.preventDefault(),An.stopPropagation(),Er(wt.value)},key:wt.value,size:u,styles:f,classNames:c,radius:V}))),Di=()=>{var wt;ds(""),Bt([]),(wt=hr.current)==null||wt.focus(),De&&(un.current=!1)};St&&we(fs,Ft)&&(ke=de(fs),en.push({label:fs,value:fs,creatable:!0}));const Sr=!st&&(en.length>0?Ur:Ur&&!!C);return Fs(()=>{const wt=Sr?Fe:Ye;typeof wt=="function"&&wt()},[Sr]),j.createElement(Ss.Wrapper,U_(U_({required:s,id:Ir,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Ve,errorProps:ht,descriptionProps:Ht,labelProps:vt,inputContainer:Je,inputWrapperOrder:lt,unstyled:ct,withAsterisk:At},Bn),d),j.createElement(qg,{opened:Sr,transition:w,transitionDuration:x,shadow:"sm",withinPortal:He,__staticSelector:"MultiSelect",onDirectionChange:jn,switchDirectionOnFlip:Qt,zIndex:nt,dropdownPosition:at,positionDependencies:xe,classNames:c,styles:f,unstyled:ct},j.createElement(qg.Target,null,j.createElement("div",{className:Zt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":Ur&&Sr?`${Ir}-items`:null,"aria-controls":Ir,"aria-expanded":Ur,onMouseLeave:()=>pr(-1),tabIndex:-1,ref:Ni},j.createElement("input",{type:"hidden",name:Pt,value:Ct.join(","),form:fe,disabled:W}),j.createElement(Ss,U_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:q,disabled:W,invalid:!!l,required:s,radius:V,icon:te,unstyled:ct,onMouseDown:wt=>{var An;wt.preventDefault(),!W&&!un.current&&rr(!Ur),(An=hr.current)==null||An.focus()},classNames:ice(U_({},c),{input:Jt({[Zt.input]:!N},c==null?void 0:c.input)})},$Ce({theme:nr,rightSection:le,rightSectionWidth:me,styles:f,size:u,shouldClear:G&&Ct.length>0,clearButtonLabel:Y,onClear:Di,error:l,disabled:W,clearButtonTabIndex:Xt,readOnly:st})),j.createElement("div",{className:Zt.values},Cs,j.createElement("input",U_({ref:Hs(t,hr),type:"search",id:Ir,className:Jt(Zt.searchInput,{[Zt.searchInputPointer]:!N,[Zt.searchInputInputHidden]:!Ur&&Ct.length>0||!N&&Ct.length>0,[Zt.searchInputEmpty]:Ct.length===0}),onKeyDown:Ei,value:fs,onChange:qt,onFocus:ir,onBlur:wi,readOnly:!N||un.current||st,placeholder:Ct.length===0?k:void 0,disabled:W,"data-mantine-stop-propagation":Ur,autoComplete:"off",onCompositionStart:()=>ne(!0),onCompositionEnd:()=>ne(!1)},Bo)))))),j.createElement(qg.Dropdown,{component:Me||K6,maxHeight:b,direction:fi,id:Ir,innerRef:Se,__staticSelector:"MultiSelect",classNames:c,styles:f},j.createElement(wY,{data:en,hovered:Et,classNames:c,styles:f,uuid:Ir,__staticSelector:"MultiSelect",onItemHover:pr,onItemSelect:si,itemsRefs:jr,itemComponent:v,size:u,nothingFound:C,creatable:ye&&!!ke,createLabel:ke,unstyled:ct}))))});DCe.displayName="@mantine/core/MultiSelect";var Zct=Object.defineProperty,eft=Object.defineProperties,tft=Object.getOwnPropertyDescriptors,oce=Object.getOwnPropertySymbols,nft=Object.prototype.hasOwnProperty,rft=Object.prototype.propertyIsEnumerable,ace=(e,t,n)=>t in e?Zct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uce=(e,t)=>{for(var n in t||(t={}))nft.call(t,n)&&ace(e,n,t[n]);if(oce)for(var n of oce(t))rft.call(t,n)&&ace(e,n,t[n]);return e},ift=(e,t)=>eft(e,tft(t)),sft=yt((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:ift(uce({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":uce({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}});const oft=sft;var aft=Object.defineProperty,AD=Object.getOwnPropertySymbols,MCe=Object.prototype.hasOwnProperty,LCe=Object.prototype.propertyIsEnumerable,lce=(e,t,n)=>t in e?aft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uft=(e,t)=>{for(var n in t||(t={}))MCe.call(t,n)&&lce(e,n,t[n]);if(AD)for(var n of AD(t))LCe.call(t,n)&&lce(e,n,t[n]);return e},lft=(e,t)=>{var n={};for(var r in e)MCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AD)for(var r of AD(e))t.indexOf(r)<0&&LCe.call(e,r)&&(n[r]=e[r]);return n};const cft={variant:"light",childrenOffset:"lg"},FCe=P.forwardRef((e,t)=>{const n=Ot("NavLink",cft,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:w,disabled:x,onClick:E}=n,b=lft(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:T,cx:C}=oft({color:d,variant:h,noWrap:p,childrenOffset:w,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[A,O]=ya({value:g,defaultValue:y,finalValue:!1,onChange:v}),N=!!m,k=L=>{N?(L.preventDefault(),E==null||E(L),O(!A)):E==null||E(L)};return j.createElement(j.Fragment,null,j.createElement(pm,uft({ref:t,className:C(T.root,a),"data-active":f||void 0,onClick:k,unstyled:c,"data-expanded":A||void 0,"data-disabled":x||void 0,disabled:x},b),s&&j.createElement("span",{className:T.icon},s),j.createElement("span",{className:T.body},j.createElement(gt,{component:"span",size:"sm",className:T.label},r),j.createElement(gt,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:T.description},i)),(N||o)&&j.createElement("span",{className:T.rightSection,"data-rotate":A&&!_||void 0},N?o||j.createElement(mZe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),j.createElement(Nxe,{in:A},j.createElement("div",{className:T.children},m)))});FCe.displayName="@mantine/core/NavLink";const BCe=FCe,fft=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function cce({direction:e,size:t}){return j.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const jCe={xs:20,sm:24,md:30,lg:34,xl:36};var dft=yt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:jCe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const hft=dft;var pft=Object.defineProperty,mft=Object.defineProperties,gft=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,UCe=Object.prototype.hasOwnProperty,zCe=Object.prototype.propertyIsEnumerable,fce=(e,t,n)=>t in e?pft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z9=(e,t)=>{for(var n in t||(t={}))UCe.call(t,n)&&fce(e,n,t[n]);if(CD)for(var n of CD(t))zCe.call(t,n)&&fce(e,n,t[n]);return e},yft=(e,t)=>mft(e,gft(t)),vft=(e,t)=>{var n={};for(var r in e)UCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CD)for(var r of CD(e))t.indexOf(r)<0&&zCe.call(e,r)&&(n[r]=e[r]);return n};const _ft={type:"text",size:"sm",__staticSelector:"TextInput"},Z6=P.forwardRef((e,t)=>{const n=A2e("TextInput",_ft,e),{inputProps:r,wrapperProps:i}=n,s=vft(n,["inputProps","wrapperProps"]);return j.createElement(Ss.Wrapper,Z9({},i),j.createElement(Ss,yft(Z9(Z9({},r),s),{ref:t})))});Z6.displayName="@mantine/core/TextInput";var bft=Object.defineProperty,wft=Object.defineProperties,Eft=Object.getOwnPropertyDescriptors,ID=Object.getOwnPropertySymbols,VCe=Object.prototype.hasOwnProperty,HCe=Object.prototype.propertyIsEnumerable,dce=(e,t,n)=>t in e?bft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sft=(e,t)=>{for(var n in t||(t={}))VCe.call(t,n)&&dce(e,n,t[n]);if(ID)for(var n of ID(t))HCe.call(t,n)&&dce(e,n,t[n]);return e},xft=(e,t)=>wft(e,Eft(t)),Tft=(e,t)=>{var n={};for(var r in e)VCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ID)for(var r of ID(e))t.indexOf(r)<0&&HCe.call(e,r)&&(n[r]=e[r]);return n};const Aft=e=>e||"",Cft=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},hce={xs:10,sm:14,md:16,lg:18,xl:20},Ift={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:Aft,parser:Cft,type:"text"},qCe=P.forwardRef((e,t)=>{const n=Ot("NumberInput",Ift,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:w,removeTrailingZeros:x,defaultValue:E,noClampOnBlur:b,handlersRef:T,classNames:C,styles:A,size:O,rightSection:N,rightSectionWidth:k,formatter:L,parser:B,inputMode:U,unstyled:G,type:H}=n,Y=Tft(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:q,cx:D,theme:M}=hft({radius:v,size:O},{classNames:C,styles:A,unstyled:G,name:"NumberInput"}),W=Je=>{if(Je===void 0)return;let lt=Je.toFixed(w);return x&&w>0&&(lt=lt.replace(new RegExp(`[0]{0,${w}}$`),""),(lt.endsWith(".")||lt.endsWith(o))&&(lt=lt.slice(0,-1))),lt},[z,V]=P.useState(!1),[te,le]=P.useState(typeof i=="number"?i:typeof E=="number"?E:void 0),me=typeof i=="number"?i:te,[ye,de]=P.useState(typeof me=="number"?W(me):""),we=P.useRef(),he=Je=>{Je!==te&&!Number.isNaN(Je)&&(typeof s=="function"&&s(Je),le(Je))},Ve=(Je="")=>{let lt=typeof Je=="number"?String(Je):Je;return o&&(lt=lt.replace(/\./g,o)),L(lt)},Me=Je=>{let lt=Je;return o&&(lt=lt.replace(new RegExp(`\\${o}`,"g"),".")),B(lt)},Ye=typeof a=="number"?a:-1/0,Fe=typeof u=="number"?u:1/0,De=P.useRef();De.current=()=>{var Je,lt,st;if(te===void 0)he((Je=l??a)!=null?Je:0),de((st=(lt=W(l))!=null?lt:W(a))!=null?st:"0");else{const At=W(gf(te+c,Ye,Fe));he(parseFloat(At)),de(At)}};const He=P.useRef();He.current=()=>{var Je,lt,st;if(te===void 0)he((Je=l??a)!=null?Je:0),de((st=(lt=W(l))!=null?lt:W(a))!=null?st:"0");else{const At=W(gf(te-c,Ye,Fe));he(parseFloat(At)),de(At)}},_xe(T,{increment:De.current,decrement:He.current}),P.useEffect(()=>{typeof i=="number"&&!z&&(le(i),de(W(i))),E===void 0&&i===void 0&&!z&&(le(i),de(""))},[i]);const Qt=d!==void 0&&f!==void 0,nt=P.useRef(null),qe=P.useRef(0),Pt=()=>{nt.current&&window.clearTimeout(nt.current),nt.current=null,qe.current=0},at=Je=>{Je?De.current():He.current(),qe.current+=1},ht=Je=>{if(at(Je),Qt){const lt=typeof f=="number"?f:f(qe.current);nt.current=window.setTimeout(()=>ht(Je),lt)}},vt=(Je,lt)=>{Je.preventDefault(),we.current.focus(),at(lt),Qt&&(nt.current=window.setTimeout(()=>ht(lt),d))};P.useEffect(()=>(Pt(),Pt),[]);const Ht=j.createElement("div",{className:q.rightSection},j.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:me>=u,className:D(q.control,q.controlUp),onPointerDown:Je=>{vt(Je,!0)},onPointerUp:Pt,onPointerLeave:Pt},j.createElement(cce,{size:M.fn.size({size:O,sizes:hce}),direction:"up"})),j.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:me<=a,className:D(q.control,q.controlDown),onPointerDown:Je=>{vt(Je,!1)},onPointerUp:Pt,onPointerLeave:Pt},j.createElement(cce,{size:M.fn.size({size:O,sizes:hce}),direction:"down"}))),Xt=Je=>{if(Je.nativeEvent.isComposing)return;const st=Je.target.value,At=Me(st);de(At),st===""||st==="-"?he(void 0):st.trim()!==""&&!Number.isNaN(At)&&he(parseFloat(At))},fe=Je=>{var lt;if(Je.target.value==="")de(""),he(void 0);else{let st=Je.target.value;(st[0]===`${o}`||st[0]===".")&&(st=`0${st}`);const At=Me(st),Tn=gf(parseFloat(At),Ye,Fe);Number.isNaN(Tn)?de((lt=W(me))!=null?lt:""):b||(de(W(Tn)),he(parseFloat(W(Tn))))}V(!1),typeof h=="function"&&h(Je)},xe=Je=>{V(!0),typeof p=="function"&&p(Je)},Le=Je=>{if(typeof m=="function"&&m(Je),Je.repeat&&Qt&&(Je.key==="ArrowUp"||Je.key==="ArrowDown")){Je.preventDefault();return}Je.key==="ArrowUp"?vt(Je,!0):Je.key==="ArrowDown"&&vt(Je,!1)},ct=Je=>{typeof g=="function"&&g(Je),(Je.key==="ArrowUp"||Je.key==="ArrowDown")&&Pt()};return j.createElement(Z6,xft(Sft({},Y),{type:H,variant:_,value:Ve(ye),disabled:r,ref:Hs(we,t),onChange:Xt,onBlur:fe,onFocus:xe,onKeyDown:Le,onKeyUp:ct,rightSection:N||(r||y||_==="unstyled"?null:Ht),rightSectionWidth:k||M.fn.size({size:O,sizes:jCe})+1,radius:v,max:u,min:a,step:c,size:O,styles:A,classNames:C,inputMode:U||fft(c,w,EJe()),__staticSelector:"NumberInput",unstyled:G}))});qCe.displayName="@mantine/core/NumberInput";const pce={xs:3,sm:5,md:8,lg:12,xl:16},Oft=pQe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var Pft=yt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:pce}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${Oft} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:pce})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const kft=Pft,WCe=P.createContext(!1),$ft=WCe.Provider,Rft=()=>P.useContext(WCe);function GCe({children:e,openDelay:t=0,closeDelay:n=0}){return j.createElement($ft,{value:!0},j.createElement(_rt,{delay:{open:t,close:n}},e))}GCe.displayName="@mantine/core/TooltipGroup";var Nft=Object.defineProperty,Dft=Object.defineProperties,Mft=Object.getOwnPropertyDescriptors,mce=Object.getOwnPropertySymbols,Lft=Object.prototype.hasOwnProperty,Fft=Object.prototype.propertyIsEnumerable,gce=(e,t,n)=>t in e?Nft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yce=(e,t)=>{for(var n in t||(t={}))Lft.call(t,n)&&gce(e,n,t[n]);if(mce)for(var n of mce(t))Fft.call(t,n)&&gce(e,n,t[n]);return e},Bft=(e,t)=>Dft(e,Mft(t));function jft(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var Uft=yt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:Bft(yce(yce({},e.fn.fontStyles()),jft(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const YCe=Uft,KCe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function zft({offset:e,position:t}){const[n,r]=P.useState(!1),i=P.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=PY({placement:t,middleware:[CY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=P.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return P.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=Cp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var Vft=Object.defineProperty,Hft=Object.defineProperties,qft=Object.getOwnPropertyDescriptors,OD=Object.getOwnPropertySymbols,XCe=Object.prototype.hasOwnProperty,QCe=Object.prototype.propertyIsEnumerable,vce=(e,t,n)=>t in e?Vft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eB=(e,t)=>{for(var n in t||(t={}))XCe.call(t,n)&&vce(e,n,t[n]);if(OD)for(var n of OD(t))QCe.call(t,n)&&vce(e,n,t[n]);return e},tB=(e,t)=>Hft(e,qft(t)),Wft=(e,t)=>{var n={};for(var r in e)XCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OD)for(var r of OD(e))t.indexOf(r)<0&&QCe.call(e,r)&&(n[r]=e[r]);return n};const Gft={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Ta("popover")};function JCe(e){var t;const n=Ot("TooltipFloating",Gft,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,w=Wft(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:x,x:E,y:b,opened:T,boundaryRef:C,floating:A,setOpened:O}=zft({offset:p,position:m}),{classes:N,cx:k}=YCe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!sI(r))throw new Error(KCe.children);const L=Hs(C,r.ref),B=G=>{var H,Y;(Y=(H=r.props).onMouseEnter)==null||Y.call(H,G),x(G),O(!0)},U=G=>{var H,Y;(Y=(H=r.props).onMouseLeave)==null||Y.call(H,G),O(!1)};return _?j.createElement(j.Fragment,null,r):j.createElement(j.Fragment,null,j.createElement(aS,{withinPortal:s},j.createElement(pt,tB(eB({},w),{ref:A,className:k(N.tooltip,a),style:tB(eB({},o),{zIndex:v,display:T?"block":"none",top:b??"",left:(t=Math.round(E))!=null?t:""})}),h)),P.cloneElement(r,tB(eB({},r.props),{[i]:L,onMouseEnter:B,onMouseLeave:U})))}JCe.displayName="@mantine/core/TooltipFloating";function Yft(e){const[t,n]=P.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Rft(),o=Vu(),{delay:a,currentId:u,setCurrentId:l}=o2e(),c=P.useCallback(T=>{n(T),T&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:w}={}}}=PY({placement:e.position,open:i,onOpenChange:c,middleware:[YTe(e.offset),CY({padding:8}),GTe(),n2e({element:e.arrowRef}),...e.inline?[XTe()]:[]]}),{getReferenceProps:x,getFloatingProps:E}=mrt([vrt(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),Trt(m,{enabled:e.events.focus,keyboardOnly:!0}),wrt(m,{role:"tooltip"}),xrt(m,{enabled:typeof e.opened===void 0}),brt(m,{id:o})]);return a2e({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),Fs(()=>{var T;(T=e.onPositionChange)==null||T.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:w,reference:h,floating:p,getFloatingProps:E,getReferenceProps:x,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var Kft=Object.defineProperty,Xft=Object.defineProperties,Qft=Object.getOwnPropertyDescriptors,PD=Object.getOwnPropertySymbols,ZCe=Object.prototype.hasOwnProperty,eIe=Object.prototype.propertyIsEnumerable,_ce=(e,t,n)=>t in e?Kft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cx=(e,t)=>{for(var n in t||(t={}))ZCe.call(t,n)&&_ce(e,n,t[n]);if(PD)for(var n of PD(t))eIe.call(t,n)&&_ce(e,n,t[n]);return e},Jft=(e,t)=>Xft(e,Qft(t)),Zft=(e,t)=>{var n={};for(var r in e)ZCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PD)for(var r of PD(e))t.indexOf(r)<0&&eIe.call(e,r)&&(n[r]=e[r]);return n};const edt={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Ta("popover"),positionDependencies:[]},e4=P.forwardRef((e,t)=>{const n=P.useRef(null),r=Ot("Tooltip",edt,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:w,arrowSize:x,arrowOffset:E,arrowRadius:b,offset:T,transition:C,transitionDuration:A,multiline:O,width:N,events:k,zIndex:L,disabled:B,positionDependencies:U,onClick:G,onMouseEnter:H,onMouseLeave:Y,inline:q}=r,D=Zft(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:M,cx:W,theme:z}=YCe({radius:h,color:p,width:N,multiline:O},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),V=Yft({position:w2e(z.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:k,arrowRef:n,offset:T+(w?x/2:0),positionDependencies:[...U,i],inline:q});if(!sI(i))throw new Error(KCe.children);const te=Hs(V.reference,i.ref,t);return j.createElement(j.Fragment,null,j.createElement(aS,{withinPortal:d},j.createElement(dI,{mounted:!B&&V.opened,transition:C,duration:V.isGroupPhase?10:A},le=>{var me,ye;return j.createElement(pt,Cx(Cx({},D),V.getFloatingProps({ref:V.floating,className:M.tooltip,style:Jft(Cx(Cx({},v),le),{zIndex:L,top:(me=V.y)!=null?me:0,left:(ye=V.x)!=null?ye:0})})),a,j.createElement(kY,{ref:n,arrowX:V.arrowX,arrowY:V.arrowY,visible:w,withBorder:!1,position:V.placement,arrowSize:x,arrowOffset:E,arrowRadius:b,className:M.arrow}))})),P.cloneElement(i,V.getReferenceProps(Cx({onClick:G,onMouseEnter:H,onMouseLeave:Y,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:te,className:W(_,i.props.className)},i.props))))});e4.Group=GCe;e4.Floating=JCe;e4.displayName="@mantine/core/Tooltip";const aw=e4;var tdt=Object.defineProperty,ndt=Object.defineProperties,rdt=Object.getOwnPropertyDescriptors,kD=Object.getOwnPropertySymbols,tIe=Object.prototype.hasOwnProperty,nIe=Object.prototype.propertyIsEnumerable,bce=(e,t,n)=>t in e?tdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iz=(e,t)=>{for(var n in t||(t={}))tIe.call(t,n)&&bce(e,n,t[n]);if(kD)for(var n of kD(t))nIe.call(t,n)&&bce(e,n,t[n]);return e},rIe=(e,t)=>ndt(e,rdt(t)),wce=(e,t)=>{var n={};for(var r in e)tIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kD)for(var r of kD(e))t.indexOf(r)<0&&nIe.call(e,r)&&(n[r]=e[r]);return n};function idt(e){return e.reduce((t,n)=>(t.sections.push(rIe(Iz({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const sdt={size:"md",radius:"sm",striped:!1,animate:!1,label:""},iIe=P.forwardRef((e,t)=>{const n=Ot("Progress",sdt,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=wce(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=kft({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),w=Array.isArray(p)?idt(p).map((x,E)=>{var b=x,{tooltip:T,accumulated:C,value:A,label:O,color:N}=b,k=wce(b,["tooltip","accumulated","value","label","color"]);return j.createElement(aw.Floating,{label:T,disabled:!T,key:E},j.createElement(pt,rIe(Iz({},k),{className:v(y.bar,k.className),sx:{width:`${A}%`,left:`${C}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:N||_.primaryColor}).background}}),O&&j.createElement(gt,{className:y.label},O)))}):null;return j.createElement(pt,Iz({className:v(y.root,r),ref:t},g),w||j.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?j.createElement(gt,{className:y.label},c):""))});iIe.displayName="@mantine/core/Progress";var odt=Object.defineProperty,Ece=Object.getOwnPropertySymbols,adt=Object.prototype.hasOwnProperty,udt=Object.prototype.propertyIsEnumerable,Sce=(e,t,n)=>t in e?odt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ldt=(e,t)=>{for(var n in t||(t={}))adt.call(t,n)&&Sce(e,n,t[n]);if(Ece)for(var n of Ece(t))udt.call(t,n)&&Sce(e,n,t[n]);return e};function cdt(e){return j.createElement("svg",ldt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),j.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const sIe=P.createContext(null),fdt=sIe.Provider,ddt=()=>P.useContext(sIe);var hdt=Object.defineProperty,$D=Object.getOwnPropertySymbols,oIe=Object.prototype.hasOwnProperty,aIe=Object.prototype.propertyIsEnumerable,xce=(e,t,n)=>t in e?hdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tce=(e,t)=>{for(var n in t||(t={}))oIe.call(t,n)&&xce(e,n,t[n]);if($D)for(var n of $D(t))aIe.call(t,n)&&xce(e,n,t[n]);return e},pdt=(e,t)=>{var n={};for(var r in e)oIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$D)for(var r of $D(e))t.indexOf(r)<0&&aIe.call(e,r)&&(n[r]=e[r]);return n};const mdt={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},uIe=P.forwardRef((e,t)=>{const n=Ot("RadioGroup",mdt,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=pdt(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=ya({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return j.createElement(fdt,{value:{value:m,onChange:y,size:l,name:h}},j.createElement(Ss.Wrapper,Tce(Tce({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),j.createElement(mAe,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});uIe.displayName="@mantine/core/RadioGroup";var gdt=Object.defineProperty,ydt=Object.defineProperties,vdt=Object.getOwnPropertyDescriptors,Ace=Object.getOwnPropertySymbols,_dt=Object.prototype.hasOwnProperty,bdt=Object.prototype.propertyIsEnumerable,Cce=(e,t,n)=>t in e?gdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wdt=(e,t)=>{for(var n in t||(t={}))_dt.call(t,n)&&Cce(e,n,t[n]);if(Ace)for(var n of Ace(t))bdt.call(t,n)&&Cce(e,n,t[n]);return e},Edt=(e,t)=>ydt(e,vdt(t));const nB={xs:16,sm:20,md:24,lg:30,xl:36},LP={xs:6,sm:8,md:10,lg:14,xl:16};var Sdt=yt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:LP,size:t}),height:e.fn.size({sizes:LP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:LP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:LP,size:t})/2}px)`},radio:Edt(wdt({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:nB,size:t}),height:e.fn.size({sizes:nB,size:t}),borderRadius:e.fn.size({sizes:nB,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}});const xdt=Sdt;var Tdt=Object.defineProperty,RD=Object.getOwnPropertySymbols,lIe=Object.prototype.hasOwnProperty,cIe=Object.prototype.propertyIsEnumerable,Ice=(e,t,n)=>t in e?Tdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FP=(e,t)=>{for(var n in t||(t={}))lIe.call(t,n)&&Ice(e,n,t[n]);if(RD)for(var n of RD(t))cIe.call(t,n)&&Ice(e,n,t[n]);return e},Adt=(e,t)=>{var n={};for(var r in e)lIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RD)for(var r of RD(e))t.indexOf(r)<0&&cIe.call(e,r)&&(n[r]=e[r]);return n};const Cdt={icon:cdt,transitionDuration:100,size:"sm",labelPosition:"right"},ND=P.forwardRef((e,t)=>{var n,r;const i=Ot("Radio",Cdt,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:w,description:x,error:E}=i,b=Adt(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),T=ddt(),C=(n=T==null?void 0:T.size)!=null?n:l,A=e.size?l:C,{classes:O}=xdt({color:d,size:A,transitionDuration:y,labelPosition:w,error:!!E},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:N,rest:k}=$f(b),L=Vu(a),B=T?{checked:T.value===k.value,name:(r=k.name)!=null?r:T.name,onChange:T.onChange}:{};return j.createElement(FY,FP(FP({className:s,sx:m,style:o,id:L,size:A,labelPosition:w,label:u,description:x,error:E,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":B.checked||void 0},N),v),j.createElement("div",{className:O.inner},j.createElement("input",FP(FP({ref:t,className:O.radio,type:"radio",id:L,disabled:f},k),B)),j.createElement(g,{className:O.icon,"aria-hidden":!0})))});ND.displayName="@mantine/core/Radio";ND.Group=uIe;var Idt=Object.defineProperty,Odt=Object.defineProperties,Pdt=Object.getOwnPropertyDescriptors,Oce=Object.getOwnPropertySymbols,kdt=Object.prototype.hasOwnProperty,$dt=Object.prototype.propertyIsEnumerable,Pce=(e,t,n)=>t in e?Idt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BP=(e,t)=>{for(var n in t||(t={}))kdt.call(t,n)&&Pce(e,n,t[n]);if(Oce)for(var n of Oce(t))$dt.call(t,n)&&Pce(e,n,t[n]);return e},Rdt=(e,t)=>Odt(e,Pdt(t));const w$=4,kce={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var Ndt=yt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:Rdt(BP(BP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:kce[a in kce?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:BP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:BP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:w$},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const Ddt=Ndt;var Mdt=Object.defineProperty,DD=Object.getOwnPropertySymbols,fIe=Object.prototype.hasOwnProperty,dIe=Object.prototype.propertyIsEnumerable,$ce=(e,t,n)=>t in e?Mdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ldt=(e,t)=>{for(var n in t||(t={}))fIe.call(t,n)&&$ce(e,n,t[n]);if(DD)for(var n of DD(t))dIe.call(t,n)&&$ce(e,n,t[n]);return e},Fdt=(e,t)=>{var n={};for(var r in e)fIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DD)for(var r of DD(e))t.indexOf(r)<0&&dIe.call(e,r)&&(n[r]=e[r]);return n};const Bdt={disabled:!1,size:"sm",transitionDuration:200},hIe=P.forwardRef((e,t)=>{var n,r,i,s;const o=Ot("SegmentedControl",Bdt,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:w,defaultValue:x,orientation:E,unstyled:b}=o,T=Fdt(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),C=As(),A=V6(),O=C.respectReducedMotion?A:!1,N=l.map(me=>typeof me=="string"?{label:me,value:me}:me),k=P.useRef(),[L,B]=P.useState(!1),[U,G]=ya({value:f,defaultValue:x,finalValue:Array.isArray(N)&&(s=(i=(n=N.find(me=>!me.disabled))==null?void 0:n.value)!=null?i:(r=N[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:H,cx:Y}=Ddt({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:O||!L,transitionDuration:y,transitionTimingFunction:v,orientation:E},{classNames:_,styles:w,unstyled:b,name:"SegmentedControl"}),[q,D]=P.useState({width:0,height:0,translate:[0,0]}),M=Vu(c),W=P.useRef({}),[z,V]=jv();mY(()=>{k.current?B(!0):(k.current=!0,B(!1))}),P.useEffect(()=>{if(U in W.current&&z.current){const me=W.current[U],ye=me.getBoundingClientRect(),de=me.offsetWidth/ye.width,we=ye.width*de||0,he=ye.height*de||0,Ve=V.width-me.parentElement.offsetLeft+w$-we,Me=me.parentElement.offsetLeft-w$;D({width:we,height:he,translate:[C.dir==="rtl"?Ve:Me,me.parentElement.offsetTop-w$]})}},[U,V]);const te=N.map(me=>j.createElement("div",{className:Y(H.control,{[H.controlActive]:U===me.value}),key:me.value},j.createElement("input",{className:H.input,disabled:u||me.disabled,type:"radio",name:M,value:me.value,id:`${M}-${me.value}`,checked:U===me.value,onChange:()=>G(me.value)}),j.createElement("label",{className:Y(H.label,{[H.labelActive]:U===me.value,[H.disabled]:u||me.disabled}),htmlFor:`${M}-${me.value}`,ref:ye=>{W.current[me.value]=ye}},me.label))),le=Hs(z,t);return N.length===0?null:j.createElement(pt,Ldt({className:Y(H.root,a),ref:le},T),typeof U=="string"&&L&&j.createElement(pt,{component:"span",className:H.active,sx:{width:q.width,height:q.height,transform:`translate(${q.translate[0]}px, ${q.translate[1]}px )`}}),te)});hIe.displayName="@mantine/core/SegmentedControl";function jdt({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var Udt=yt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const zdt=Udt;var Vdt=Object.defineProperty,Hdt=Object.defineProperties,qdt=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,pIe=Object.prototype.hasOwnProperty,mIe=Object.prototype.propertyIsEnumerable,Rce=(e,t,n)=>t in e?Vdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ix=(e,t)=>{for(var n in t||(t={}))pIe.call(t,n)&&Rce(e,n,t[n]);if(MD)for(var n of MD(t))mIe.call(t,n)&&Rce(e,n,t[n]);return e},rB=(e,t)=>Hdt(e,qdt(t)),Wdt=(e,t)=>{var n={};for(var r in e)pIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MD)for(var r of MD(e))t.indexOf(r)<0&&mIe.call(e,r)&&(n[r]=e[r]);return n};function Gdt(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Ydt(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const Kdt={required:!1,size:"sm",shadow:"sm",itemComponent:EY,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:Gdt,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:Ydt,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Ta("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},t4=P.forwardRef((e,t)=>{const n=A2e("Select",Kdt,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:w,filter:x,maxDropdownHeight:E,searchable:b,clearable:T,nothingFound:C,clearButtonLabel:A,limit:O,disabled:N,onSearchChange:k,searchValue:L,rightSection:B,rightSectionWidth:U,creatable:G,getCreateLabel:H,shouldCreate:Y,selectOnBlur:q,onCreate:D,dropdownComponent:M,onDropdownClose:W,onDropdownOpen:z,withinPortal:V,switchDirectionOnFlip:te,zIndex:le,name:me,dropdownPosition:ye,allowDeselect:de,placeholder:we,filterDataOnExactSearchMatch:he,clearButtonTabIndex:Ve,form:Me,positionDependencies:Ye,readOnly:Fe}=n,De=Wdt(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:He,cx:Qt,theme:nt}=zdt(),[qe,Pt]=P.useState(g),[at,ht]=P.useState(-1),vt=P.useRef(),Ht=P.useRef({}),[Xt,fe]=P.useState("column"),xe=Xt==="column",{scrollIntoView:Le,targetRef:ct,scrollableRef:Je}=Exe({duration:0,offset:5,cancelable:!1,isList:!0}),lt=de===void 0?T:de,st=ke=>{if(qe!==ke){Pt(ke);const _t=ke?z:W;typeof _t=="function"&&_t()}},At=G&&typeof H=="function";let Tn=null;const Zt=o.map(ke=>typeof ke=="string"?{label:ke,value:ke}:ke),Jt=zSe({data:Zt}),[nr,Bn,Bo]=ya({value:a,defaultValue:u,finalValue:null,onChange:l}),hr=Jt.find(ke=>ke.value===nr),[Ni,jr]=ya({value:L,defaultValue:(hr==null?void 0:hr.label)||"",finalValue:void 0,onChange:k}),Ir=ke=>{jr(ke),b&&typeof k=="function"&&k(ke)},Ur=()=>{var ke;Fe||(Bn(null),Bo||Ir(""),(ke=vt.current)==null||ke.focus())};P.useEffect(()=>{const ke=Jt.find(_t=>_t.value===nr);ke?Ir(ke.label):(!At||!nr)&&Ir("")},[nr]),P.useEffect(()=>{hr&&(!b||!qe)&&Ir(hr.label)},[hr==null?void 0:hr.label]);const rr=ke=>{if(!Fe)if(lt&&(hr==null?void 0:hr.value)===ke.value)Bn(null),st(!1);else{if(ke.creatable&&typeof D=="function"){const _t=D(ke.value);typeof _t<"u"&&_t!==null&&Bn(typeof _t=="string"?_t:_t.value)}else Bn(ke.value);Bo||Ir(ke.label),ht(-1),st(!1),vt.current.focus()}},Et=jdt({data:Jt,searchable:b,limit:O,searchValue:Ni,filter:x,filterDataOnExactSearchMatch:he,value:nr});At&&Y(Ni,Et)&&(Tn=H(Ni),Et.push({label:Ni,value:Ni,creatable:!0}));const pr=(ke,_t,Ft)=>{let Ct=ke;for(;Ft(Ct);)if(Ct=_t(Ct),!Et[Ct].disabled)return Ct;return ke};Fs(()=>{ht(-1)},[Ni]);const fi=nr?Et.findIndex(ke=>ke.value===nr):0,jn=!Fe&&(Et.length>0?qe:qe&&!!C),fs=()=>{ht(ke=>{var _t;const Ft=pr(ke,Ct=>Ct-1,Ct=>Ct>0);return ct.current=Ht.current[(_t=Et[Ft])==null?void 0:_t.value],jn&&Le({alignment:xe?"start":"end"}),Ft})},ds=()=>{ht(ke=>{var _t;const Ft=pr(ke,Ct=>Ct+1,Ct=>Ct<Et.length-1);return ct.current=Ht.current[(_t=Et[Ft])==null?void 0:_t.value],jn&&Le({alignment:xe?"end":"start"}),Ft})},oe=()=>window.setTimeout(()=>{var ke;ct.current=Ht.current[(ke=Et[fi])==null?void 0:ke.value],Le({alignment:xe?"end":"start"})},0);Fs(()=>{jn&&oe()},[jn]);const ne=ke=>{switch(typeof f=="function"&&f(ke),ke.key){case"ArrowUp":{ke.preventDefault(),qe?xe?fs():ds():(ht(fi),st(!0),oe());break}case"ArrowDown":{ke.preventDefault(),qe?xe?ds():fs():(ht(fi),st(!0),oe());break}case"Home":{if(!b){ke.preventDefault(),qe||st(!0);const _t=Et.findIndex(Ft=>!Ft.disabled);ht(_t),jn&&Le({alignment:xe?"end":"start"})}break}case"End":{if(!b){ke.preventDefault(),qe||st(!0);const _t=Et.map(Ft=>!!Ft.disabled).lastIndexOf(!1);ht(_t),jn&&Le({alignment:xe?"end":"start"})}break}case"Escape":{ke.preventDefault(),st(!1),ht(-1);break}case" ":{b||(ke.preventDefault(),Et[at]&&qe?rr(Et[at]):(st(!0),ht(fi),oe()));break}case"Enter":b||ke.preventDefault(),Et[at]&&qe&&(ke.preventDefault(),rr(Et[at]))}},ue=ke=>{typeof d=="function"&&d(ke);const _t=Jt.find(Ft=>Ft.value===nr);q&&Et[at]&&qe&&rr(Et[at]),Ir((_t==null?void 0:_t.label)||""),st(!1)},Ee=ke=>{typeof h=="function"&&h(ke),b&&st(!0)},Se=ke=>{Fe||(Ir(ke.currentTarget.value),T&&ke.currentTarget.value===""&&Bn(null),ht(-1),st(!0))},St=()=>{Fe||(st(!qe),nr&&!qe&&ht(fi))};return j.createElement(Ss.Wrapper,rB(Ix({},i),{__staticSelector:"Select"}),j.createElement(qg,{opened:jn,transition:p,transitionDuration:m,shadow:"sm",withinPortal:V,__staticSelector:"Select",onDirectionChange:fe,switchDirectionOnFlip:te,zIndex:le,dropdownPosition:ye,positionDependencies:Ye,classNames:_,styles:w,unstyled:v},j.createElement(qg.Target,null,j.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":jn?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":jn,onMouseLeave:()=>ht(-1),tabIndex:-1},j.createElement("input",{type:"hidden",name:me,value:nr||"",form:Me,disabled:N}),j.createElement(Ss,Ix(rB(Ix(Ix({autoComplete:"off",type:"search"},r),De),{ref:Hs(t,vt),onKeyDown:ne,__staticSelector:"Select",value:Ni,placeholder:we,onChange:Se,"aria-autocomplete":"list","aria-controls":jn?`${r.id}-items`:null,"aria-activedescendant":at>=0?`${r.id}-${at}`:null,onMouseDown:St,onBlur:ue,onFocus:Ee,readOnly:!b||Fe,disabled:N,"data-mantine-stop-propagation":jn,name:null,classNames:rB(Ix({},_),{input:Qt({[He.input]:!b},_==null?void 0:_.input)})}),$Ce({theme:nt,rightSection:B,rightSectionWidth:U,styles:w,size:r.size,shouldClear:T&&!!hr,clearButtonLabel:A,onClear:Ur,error:i.error,clearButtonTabIndex:Ve,disabled:N,readOnly:Fe}))))),j.createElement(qg.Dropdown,{component:M||K6,maxHeight:E,direction:Xt,id:r.id,innerRef:Je,__staticSelector:"Select",classNames:_,styles:w},j.createElement(wY,{data:Et,hovered:at,classNames:_,styles:w,isItemSelected:ke=>ke===nr,uuid:r.id,__staticSelector:"Select",onItemHover:ht,onItemSelect:rr,itemsRefs:Ht,itemComponent:c,size:r.size,nothingFound:C,creatable:At&&!!Tn,createLabel:Tn,"aria-label":i.label,unstyled:v}))))});t4.displayName="@mantine/core/Select";function LD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Oz({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var Xdt=Object.defineProperty,Qdt=Object.defineProperties,Jdt=Object.getOwnPropertyDescriptors,Nce=Object.getOwnPropertySymbols,Zdt=Object.prototype.hasOwnProperty,eht=Object.prototype.propertyIsEnumerable,Dce=(e,t,n)=>t in e?Xdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tht=(e,t)=>{for(var n in t||(t={}))Zdt.call(t,n)&&Dce(e,n,t[n]);if(Nce)for(var n of Nce(t))eht.call(t,n)&&Dce(e,n,t[n]);return e},nht=(e,t)=>Qdt(e,Jdt(t));const vu={xs:4,sm:6,md:8,lg:10,xl:12};var rht=yt((e,{size:t,disabled:n})=>({root:nht(tht({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:vu,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const iht=rht;var sht=Object.defineProperty,oht=Object.defineProperties,aht=Object.getOwnPropertyDescriptors,Mce=Object.getOwnPropertySymbols,uht=Object.prototype.hasOwnProperty,lht=Object.prototype.propertyIsEnumerable,Lce=(e,t,n)=>t in e?sht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cht=(e,t)=>{for(var n in t||(t={}))uht.call(t,n)&&Lce(e,n,t[n]);if(Mce)for(var n of Mce(t))lht.call(t,n)&&Lce(e,n,t[n]);return e},fht=(e,t)=>oht(e,aht(t)),dht=yt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:fht(cht({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:vu,size:n})*2,width:i||e.fn.size({sizes:vu,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const hht=dht,FD=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:w,unstyled:x,thumbSize:E},b)=>{const{classes:T,cx:C,theme:A}=hht({color:a,size:c,disabled:w,thumbSize:E},{classNames:u,styles:l,unstyled:x,name:"Slider"}),[O,N]=P.useState(!1),k=p||s||O||v;return j.createElement(pt,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,className:C(T.thumb,{[T.dragging]:s}),onFocus:()=>{N(!0),typeof g=="function"&&g()},onBlur:()=>{N(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:L=>L.stopPropagation(),style:{[A.dir==="rtl"?"right":"left"]:`${r}%`}},_,j.createElement(dI,{mounted:i!=null&&k,duration:d,transition:f,timingFunction:h||A.transitionTimingFunction},L=>j.createElement("div",{style:L,className:T.label},i)))});FD.displayName="@mantine/core/SliderThumb";function pht({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var mht=yt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:vu})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:vu,size:t}),width:e.fn.size({sizes:vu,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:vu,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));const ght=mht;function gIe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=ght({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>j.createElement(pt,{className:h.markWrapper,sx:{left:`${LD({value:g.value,min:r,max:i})}%`},key:y},j.createElement("div",{className:p(h.mark,{[h.markFilled]:pht({mark:g,value:s,offset:u,inverted:d})})}),g.label&&j.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return j.createElement("div",null,m)}gIe.displayName="@mantine/core/SliderMarks";var yht=yt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:vu,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:vu}),marginLeft:e.fn.size({size:n,sizes:vu}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:vu}),left:-e.fn.size({size:n,sizes:vu}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}}));const vht=yht;var _ht=Object.defineProperty,bht=Object.defineProperties,wht=Object.getOwnPropertyDescriptors,BD=Object.getOwnPropertySymbols,yIe=Object.prototype.hasOwnProperty,vIe=Object.prototype.propertyIsEnumerable,Fce=(e,t,n)=>t in e?_ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eht=(e,t)=>{for(var n in t||(t={}))yIe.call(t,n)&&Fce(e,n,t[n]);if(BD)for(var n of BD(t))vIe.call(t,n)&&Fce(e,n,t[n]);return e},Sht=(e,t)=>bht(e,wht(t)),xht=(e,t)=>{var n={};for(var r in e)yIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BD)for(var r of BD(e))t.indexOf(r)<0&&vIe.call(e,r)&&(n[r]=e[r]);return n};function VY(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=xht(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=vht({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return j.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},j.createElement(pt,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:vu})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:vu})}px)`})}),u,j.createElement(gIe,Sht(Eht({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}VY.displayName="@mantine/core/SliderTrack";var Tht=Object.defineProperty,Aht=Object.defineProperties,Cht=Object.getOwnPropertyDescriptors,jD=Object.getOwnPropertySymbols,_Ie=Object.prototype.hasOwnProperty,bIe=Object.prototype.propertyIsEnumerable,Bce=(e,t,n)=>t in e?Tht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iht=(e,t)=>{for(var n in t||(t={}))_Ie.call(t,n)&&Bce(e,n,t[n]);if(jD)for(var n of jD(t))bIe.call(t,n)&&Bce(e,n,t[n]);return e},Oht=(e,t)=>Aht(e,Cht(t)),Pht=(e,t)=>{var n={};for(var r in e)_Ie.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jD)for(var r of jD(e))t.indexOf(r)<0&&bIe.call(e,r)&&(n[r]=e[r]);return n};const HY=P.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=Pht(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=iht({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return j.createElement(pt,Oht(Iht({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});HY.displayName="@mantine/core/SliderRoot";var kht=Object.defineProperty,$ht=Object.defineProperties,Rht=Object.getOwnPropertyDescriptors,UD=Object.getOwnPropertySymbols,wIe=Object.prototype.hasOwnProperty,EIe=Object.prototype.propertyIsEnumerable,jce=(e,t,n)=>t in e?kht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nht=(e,t)=>{for(var n in t||(t={}))wIe.call(t,n)&&jce(e,n,t[n]);if(UD)for(var n of UD(t))EIe.call(t,n)&&jce(e,n,t[n]);return e},Dht=(e,t)=>$ht(e,Rht(t)),Mht=(e,t)=>{var n={};for(var r in e)wIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UD)for(var r of UD(e))t.indexOf(r)<0&&EIe.call(e,r)&&(n[r]=e[r]);return n};const Lht={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},qY=P.forwardRef((e,t)=>{const n=Ot("Slider",Lht,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:x,labelAlwaysOn:E,thumbLabel:b,showLabelOnHover:T,thumbChildren:C,disabled:A,unstyled:O,thumbSize:N,scale:k,inverted:L}=n,B=Mht(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),U=As(),[G,H]=P.useState(!1),[Y,q]=ya({value:typeof o=="number"?gf(o,f,d):o,defaultValue:typeof m=="number"?gf(m,f,d):m,finalValue:gf(0,f,d),onChange:a}),D=P.useRef(Y),M=P.useRef(),W=LD({value:Y,min:f,max:d}),z=k(Y),V=typeof v=="function"?v(z):v,te=P.useCallback(({x:we})=>{if(!A){const he=Oz({value:we,min:f,max:d,step:h,precision:p});q(he),D.current=he}},[A,f,d,h,p]),{ref:le,active:me}=wxe(te,{onScrubEnd:()=>u==null?void 0:u(D.current)},U.dir),ye=we=>{we.stopPropagation()},de=we=>{if(!A)switch(we.key){case"ArrowUp":{we.preventDefault(),M.current.focus();const he=Math.min(Math.max(Y+h,f),d);u==null||u(he),q(he);break}case"ArrowRight":{we.preventDefault(),M.current.focus();const he=Math.min(Math.max(U.dir==="rtl"?Y-h:Y+h,f),d);u==null||u(he),q(he);break}case"ArrowDown":{we.preventDefault(),M.current.focus();const he=Math.min(Math.max(Y-h,f),d);u==null||u(he),q(he);break}case"ArrowLeft":{we.preventDefault(),M.current.focus();const he=Math.min(Math.max(U.dir==="rtl"?Y+h:Y-h,f),d);u==null||u(he),q(he);break}case"Home":{we.preventDefault(),M.current.focus(),u==null||u(f),q(f);break}case"End":{we.preventDefault(),M.current.focus(),u==null||u(d),q(d);break}}};return j.createElement(HY,Dht(Nht({},B),{size:l,ref:Hs(le,t),onKeyDownCapture:de,onMouseDownCapture:()=>{var we;return(we=le.current)==null?void 0:we.focus()},classNames:r,styles:i,disabled:A,unstyled:O}),j.createElement(VY,{inverted:L,offset:0,filled:W,marks:y,size:l,radius:c,color:s,min:f,max:d,value:z,onChange:q,onMouseEnter:T?()=>H(!0):void 0,onMouseLeave:T?()=>H(!1):void 0,classNames:r,styles:i,disabled:A,unstyled:O},j.createElement(FD,{max:d,min:f,value:z,position:W,dragging:me,color:s,size:l,label:V,ref:M,onMouseDown:ye,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:x,labelAlwaysOn:E,classNames:r,styles:i,thumbLabel:b,showLabelOnHover:T&&G,disabled:A,unstyled:O,thumbSize:N},C)),j.createElement("input",{type:"hidden",name:g,value:z}))});qY.displayName="@mantine/core/Slider";function Fht(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var Bht=Object.defineProperty,jht=Object.defineProperties,Uht=Object.getOwnPropertyDescriptors,zD=Object.getOwnPropertySymbols,SIe=Object.prototype.hasOwnProperty,xIe=Object.prototype.propertyIsEnumerable,Uce=(e,t,n)=>t in e?Bht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iB=(e,t)=>{for(var n in t||(t={}))SIe.call(t,n)&&Uce(e,n,t[n]);if(zD)for(var n of zD(t))xIe.call(t,n)&&Uce(e,n,t[n]);return e},sB=(e,t)=>jht(e,Uht(t)),zht=(e,t)=>{var n={};for(var r in e)SIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zD)for(var r of zD(e))t.indexOf(r)<0&&xIe.call(e,r)&&(n[r]=e[r]);return n};const Vht={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Pz=P.forwardRef((e,t)=>{const n=Ot("RangeSlider",Vht,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:w,labelTransitionDuration:x,labelTransitionTimingFunction:E,labelAlwaysOn:b,thumbFromLabel:T,thumbToLabel:C,showLabelOnHover:A,thumbChildren:O,disabled:N,unstyled:k,thumbSize:L,scale:B,inverted:U}=n,G=zht(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),H=As(),[Y,q]=P.useState(-1),[D,M]=P.useState(!1),[W,z]=ya({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),V=P.useRef(W),te=P.useRef([]),le=P.useRef(void 0),me=[LD({value:W[0],min:f,max:d}),LD({value:W[1],min:f,max:d})],ye=nt=>{z(nt),V.current=nt};P.useEffect(()=>{Array.isArray(o)&&(V.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const de=(nt,qe,Pt)=>{const at=[...V.current];at[qe]=nt,qe===0&&(nt>at[1]-(h-1e-9)&&(at[1]=Math.min(nt+h,d)),nt>(d-(h-1e-9)||f)&&(at[qe]=V.current[qe])),qe===1&&(nt<at[0]+h&&(at[0]=Math.max(nt-h,f)),nt<at[0]+h&&(at[qe]=V.current[qe])),ye(at),Pt&&(u==null||u(V.current))},we=nt=>{if(!N){const qe=Oz({value:nt,min:f,max:d,step:p,precision:m});de(qe,le.current,!1)}},{ref:he,active:Ve}=wxe(({x:nt})=>we(nt),{onScrubEnd:()=>u==null?void 0:u(V.current)},H.dir);function Me(nt,qe){nt.stopPropagation(),le.current=qe}const Ye=nt=>{he.current.focus();const qe=he.current.getBoundingClientRect(),Pt=Fht(nt.nativeEvent),at=Oz({value:Pt-qe.left,max:d,min:f,step:p,containerWidth:qe.width}),ht=Math.abs(W[0]-at)>Math.abs(W[1]-at)?1:0,vt=H.dir==="ltr"?ht:ht===1?0:1;le.current=vt},Fe=()=>Y!==1&&Y!==0?(q(0),0):Y,De=nt=>{if(!N)switch(nt.key){case"ArrowUp":{nt.preventDefault();const qe=Fe();te.current[qe].focus(),de(Math.min(Math.max(V.current[qe]+p,f),d),qe,!0);break}case"ArrowRight":{nt.preventDefault();const qe=Fe();te.current[qe].focus(),de(Math.min(Math.max(H.dir==="rtl"?V.current[qe]-p:V.current[qe]+p,f),d),qe,!0);break}case"ArrowDown":{nt.preventDefault();const qe=Fe();te.current[qe].focus(),de(Math.min(Math.max(V.current[qe]-p,f),d),qe,!0);break}case"ArrowLeft":{nt.preventDefault();const qe=Fe();te.current[qe].focus(),de(Math.min(Math.max(H.dir==="rtl"?V.current[qe]+p:V.current[qe]-p,f),d),qe,!0);break}}},He={max:d,min:f,color:s,size:l,labelTransition:w,labelTransitionDuration:x,labelTransitionTimingFunction:E,labelAlwaysOn:b,onBlur:()=>q(-1),classNames:r,styles:i},Qt=Array.isArray(O);return j.createElement(HY,sB(iB({},G),{size:l,ref:Hs(he,t),onTouchStartCapture:Ye,onTouchEndCapture:()=>{le.current=-1},onMouseDownCapture:Ye,onMouseUpCapture:()=>{le.current=-1},onKeyDownCapture:De,styles:i,classNames:r,disabled:N,unstyled:k}),j.createElement(VY,{offset:me[0],marksOffset:W[0],filled:me[1]-me[0],marks:v,inverted:U,size:l,radius:c,color:s,min:f,max:d,value:W[1],styles:i,classNames:r,onMouseEnter:A?()=>M(!0):void 0,onMouseLeave:A?()=>M(!1):void 0,onChange:nt=>{const qe=Math.abs(W[0]-nt)>Math.abs(W[1]-nt)?1:0,Pt=[...W];Pt[qe]=nt,ye(Pt)},disabled:N,unstyled:k},j.createElement(FD,sB(iB({},He),{value:B(W[0]),position:me[0],dragging:Ve,label:typeof _=="function"?_(B(W[0])):_,ref:nt=>{te.current[0]=nt},thumbLabel:T,onMouseDown:nt=>Me(nt,0),onFocus:()=>q(0),showLabelOnHover:A&&D,disabled:N,unstyled:k,thumbSize:L}),Qt?O[0]:O),j.createElement(FD,sB(iB({},He),{thumbLabel:C,value:B(W[1]),position:me[1],dragging:Ve,label:typeof _=="function"?_(B(W[1])):_,ref:nt=>{te.current[1]=nt},onMouseDown:nt=>Me(nt,1),onFocus:()=>q(1),showLabelOnHover:A&&D,disabled:N,unstyled:k,thumbSize:L}),Qt?O[1]:O)),j.createElement("input",{type:"hidden",name:`${y}_from`,value:W[0]}),j.createElement("input",{type:"hidden",name:`${y}_to`,value:W[1]}))});Pz.displayName="@mantine/core/RangeSlider";var Hht=Object.defineProperty,VD=Object.getOwnPropertySymbols,TIe=Object.prototype.hasOwnProperty,AIe=Object.prototype.propertyIsEnumerable,zce=(e,t,n)=>t in e?Hht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qht=(e,t)=>{for(var n in t||(t={}))TIe.call(t,n)&&zce(e,n,t[n]);if(VD)for(var n of VD(t))AIe.call(t,n)&&zce(e,n,t[n]);return e},Wht=(e,t)=>{var n={};for(var r in e)TIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VD)for(var r of VD(e))t.indexOf(r)<0&&AIe.call(e,r)&&(n[r]=e[r]);return n};const Ght={w:0,h:0},n4=P.forwardRef((e,t)=>{const n=Ot("Space",Ght,e),{w:r,h:i,sx:s}=n,o=Wht(n,["w","h","sx"]);return j.createElement(pt,qht({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...c0(s)]},o))});n4.displayName="@mantine/core/Space";var Yht=yt((e,{transitionDuration:t})=>({control:{},root:{position:"relative"},content:{display:"flex",flexDirection:"column",overflow:"hidden",transitionProperty:"max-height",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${t}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}}));const Kht=Yht;var Xht=Object.defineProperty,HD=Object.getOwnPropertySymbols,CIe=Object.prototype.hasOwnProperty,IIe=Object.prototype.propertyIsEnumerable,Vce=(e,t,n)=>t in e?Xht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qht=(e,t)=>{for(var n in t||(t={}))CIe.call(t,n)&&Vce(e,n,t[n]);if(HD)for(var n of HD(t))IIe.call(t,n)&&Vce(e,n,t[n]);return e},Jht=(e,t)=>{var n={};for(var r in e)CIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HD)for(var r of HD(e))t.indexOf(r)<0&&IIe.call(e,r)&&(n[r]=e[r]);return n};const Zht={maxHeight:100,transitionDuration:200,initialState:!1},OIe=P.forwardRef((e,t)=>{const n=Ot("Spoiler",Zht,e),{className:r,children:i,maxHeight:s,hideLabel:o,showLabel:a,transitionDuration:u,controlRef:l,initialState:c,classNames:f,styles:d,unstyled:h}=n,p=Jht(n,["className","children","maxHeight","hideLabel","showLabel","transitionDuration","controlRef","initialState","classNames","styles","unstyled"]),{classes:m,cx:g}=Kht({transitionDuration:u},{classNames:f,styles:d,unstyled:h,name:"Spoiler"}),[y,v]=P.useState(c),[_,w]=P.useState(c),{ref:x,height:E}=iJe(),b=y?o:a;return P.useEffect(()=>{w(s<E)},[E,s,i]),j.createElement(pt,Qht({className:g(m.root,r),ref:t},p),j.createElement("div",{className:m.content,style:{maxHeight:y?E||void 0:s}},j.createElement("div",{ref:x},i)),_&&j.createElement(H6,{component:"button",ref:l,onClick:()=>v(T=>!T),className:m.control},b))});OIe.displayName="@mantine/core/Spoiler";var ept=Object.defineProperty,tpt=Object.defineProperties,npt=Object.getOwnPropertyDescriptors,Hce=Object.getOwnPropertySymbols,rpt=Object.prototype.hasOwnProperty,ipt=Object.prototype.propertyIsEnumerable,qce=(e,t,n)=>t in e?ept(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,spt=(e,t)=>{for(var n in t||(t={}))rpt.call(t,n)&&qce(e,n,t[n]);if(Hce)for(var n of Hce(t))ipt.call(t,n)&&qce(e,n,t[n]);return e},opt=(e,t)=>tpt(e,npt(t)),apt=yt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:s,withColumnBorders:o})=>{const a=`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:opt(spt({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:s?a:"","& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:e.fn.size({size:i,sizes:e.fontSizes}),padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},"& thead tr th":{borderBottom:a},"& tfoot tr th":{borderTop:a},"& tbody tr td":{padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`,borderBottom:a,fontSize:e.fn.size({size:i,sizes:e.fontSizes})},"& tbody tr:last-of-type td":{borderBottom:"none"},"& th + th, & td + td":{borderLeft:o?a:""},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const upt=apt;var lpt=Object.defineProperty,cpt=Object.defineProperties,fpt=Object.getOwnPropertyDescriptors,qD=Object.getOwnPropertySymbols,PIe=Object.prototype.hasOwnProperty,kIe=Object.prototype.propertyIsEnumerable,Wce=(e,t,n)=>t in e?lpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dpt=(e,t)=>{for(var n in t||(t={}))PIe.call(t,n)&&Wce(e,n,t[n]);if(qD)for(var n of qD(t))kIe.call(t,n)&&Wce(e,n,t[n]);return e},hpt=(e,t)=>cpt(e,fpt(t)),ppt=(e,t)=>{var n={};for(var r in e)PIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qD)for(var r of qD(e))t.indexOf(r)<0&&kIe.call(e,r)&&(n[r]=e[r]);return n};const mpt={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},$Ie=P.forwardRef((e,t)=>{const n=Ot("Table",mpt,e),{className:r,children:i,striped:s,highlightOnHover:o,captionSide:a,horizontalSpacing:u,verticalSpacing:l,fontSize:c,unstyled:f,withBorder:d,withColumnBorders:h}=n,p=ppt(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders"]),{classes:m,cx:g}=upt({captionSide:a,verticalSpacing:l,horizontalSpacing:u,fontSize:c,withBorder:d,withColumnBorders:h},{unstyled:f,name:"Table"});return j.createElement(pt,hpt(dpt({},p),{component:"table",ref:t,className:g(m.root,r),"data-striped":s||void 0,"data-hover":o||void 0}),i)});$Ie.displayName="@mantine/core/Table";const kz={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[gpt,WY]=rY(kz.context);var ypt=Object.defineProperty,Gce=Object.getOwnPropertySymbols,vpt=Object.prototype.hasOwnProperty,_pt=Object.prototype.propertyIsEnumerable,Yce=(e,t,n)=>t in e?ypt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bpt=(e,t)=>{for(var n in t||(t={}))vpt.call(t,n)&&Yce(e,n,t[n]);if(Gce)for(var n of Gce(t))_pt.call(t,n)&&Yce(e,n,t[n]);return e};function wpt({variant:e,orientation:t,inverted:n,placement:r},i){const s=t==="vertical";return e==="default"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`2px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="outline"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`1px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="pills"?{gap:`calc(${i.spacing.sm}px / 2)`}:{}}var Ept=yt((e,t)=>{const n=t.orientation==="vertical";return{tabsList:bpt({display:"flex",flexWrap:"wrap",flexDirection:n?"column":"row",justifyContent:cAe[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},wpt(t,e))}});const Spt=Ept;var xpt=Object.defineProperty,Tpt=Object.defineProperties,Apt=Object.getOwnPropertyDescriptors,WD=Object.getOwnPropertySymbols,RIe=Object.prototype.hasOwnProperty,NIe=Object.prototype.propertyIsEnumerable,Kce=(e,t,n)=>t in e?xpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cpt=(e,t)=>{for(var n in t||(t={}))RIe.call(t,n)&&Kce(e,n,t[n]);if(WD)for(var n of WD(t))NIe.call(t,n)&&Kce(e,n,t[n]);return e},Ipt=(e,t)=>Tpt(e,Apt(t)),Opt=(e,t)=>{var n={};for(var r in e)RIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WD)for(var r of WD(e))t.indexOf(r)<0&&NIe.call(e,r)&&(n[r]=e[r]);return n};const DIe=P.forwardRef((e,t)=>{var n=e,{children:r,className:i,grow:s=!1,position:o="left"}=n,a=Opt(n,["children","className","grow","position"]);const{orientation:u,variant:l,color:c,radius:f,inverted:d,placement:h}=WY(),{classNames:p,styles:m,unstyled:g}=J0(),{classes:y,cx:v}=Spt({orientation:u,grow:s,variant:l,color:c,position:o,radius:f,inverted:d,placement:h},{name:"Tabs",unstyled:g,classNames:p,styles:m});return j.createElement(pt,Ipt(Cpt({},a),{className:v(y.tabsList,i),ref:t,role:"tablist","aria-orientation":u}),r)});DIe.displayName="@mantine/core/TabsList";var Ppt=yt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}}));const kpt=Ppt;var $pt=Object.defineProperty,Rpt=Object.defineProperties,Npt=Object.getOwnPropertyDescriptors,GD=Object.getOwnPropertySymbols,MIe=Object.prototype.hasOwnProperty,LIe=Object.prototype.propertyIsEnumerable,Xce=(e,t,n)=>t in e?$pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dpt=(e,t)=>{for(var n in t||(t={}))MIe.call(t,n)&&Xce(e,n,t[n]);if(GD)for(var n of GD(t))LIe.call(t,n)&&Xce(e,n,t[n]);return e},Mpt=(e,t)=>Rpt(e,Npt(t)),Lpt=(e,t)=>{var n={};for(var r in e)MIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GD)for(var r of GD(e))t.indexOf(r)<0&&LIe.call(e,r)&&(n[r]=e[r]);return n};const FIe=P.forwardRef((e,t)=>{var n=e,{value:r,children:i,sx:s,className:o}=n,a=Lpt(n,["value","children","sx","className"]);const u=WY(),{classNames:l,styles:c,unstyled:f}=J0(),{classes:d,cx:h}=kpt({orientation:u.orientation,variant:u.variant,color:u.color,radius:u.radius,inverted:u.inverted,placement:u.placement},{name:"Tabs",unstyled:f,classNames:l,styles:c}),p=u.value===r,m=u.keepMounted||p?i:null;return j.createElement(pt,Mpt(Dpt({},a),{ref:t,sx:[{display:p?void 0:"none"},...c0(s)],className:h(d.panel,o),role:"tabpanel",id:u.getPanelId(r),"aria-labelledby":u.getTabId(r)}),m)});FIe.displayName="@mantine/core/TabsPanel";var Fpt=Object.defineProperty,Bpt=Object.defineProperties,jpt=Object.getOwnPropertyDescriptors,Qce=Object.getOwnPropertySymbols,Upt=Object.prototype.hasOwnProperty,zpt=Object.prototype.propertyIsEnumerable,Jce=(e,t,n)=>t in e?Fpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lb=(e,t)=>{for(var n in t||(t={}))Upt.call(t,n)&&Jce(e,n,t[n]);if(Qce)for(var n of Qce(t))zpt.call(t,n)&&Jce(e,n,t[n]);return e},Zce=(e,t)=>Bpt(e,jpt(t));function Vpt(e,{variant:t,orientation:n,color:r,radius:i,inverted:s,placement:o}){const a=n==="vertical",u=e.fn.variant({color:r,variant:"filled"}),l=e.fn.radius(i),c=n==="vertical"?o==="left"?`${l}px 0 0 ${l}px`:` 0 ${l}px ${l}px 0`:s?`0 0 ${l}px ${l}px`:`${l}px ${l}px 0 0`;return t==="default"?Zce(Lb({[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"2px solid transparent",[a?o==="left"?"marginRight":"marginLeft":s?"marginTop":"marginBottom"]:-2,borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":Lb({borderColor:u.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:u.background}))}):t==="outline"?{borderRadius:c,border:"1px solid transparent",[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:a?0:s?"unset":-1,top:a?0:s?-1:"unset",[a?"width":"height"]:1,right:a?o==="left"?-1:"unset":0,left:a?o==="left"?"unset":-1:0}}}:t==="pills"?Zce(Lb({borderRadius:e.fn.radius(i)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Lb({backgroundColor:u.background,color:e.white},e.fn.hover({backgroundColor:u.background}))}):{}}var Hpt=yt((e,t)=>({tabLabel:{},tab:Lb({position:"relative",padding:`${e.spacing.xs}px ${e.spacing.md}px`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":Lb({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},Vpt(e,t)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:7}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:7}}}));const qpt=Hpt;var Wpt=Object.defineProperty,Gpt=Object.defineProperties,Ypt=Object.getOwnPropertyDescriptors,YD=Object.getOwnPropertySymbols,BIe=Object.prototype.hasOwnProperty,jIe=Object.prototype.propertyIsEnumerable,efe=(e,t,n)=>t in e?Wpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kpt=(e,t)=>{for(var n in t||(t={}))BIe.call(t,n)&&efe(e,n,t[n]);if(YD)for(var n of YD(t))jIe.call(t,n)&&efe(e,n,t[n]);return e},Xpt=(e,t)=>Gpt(e,Ypt(t)),Qpt=(e,t)=>{var n={};for(var r in e)BIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YD)for(var r of YD(e))t.indexOf(r)<0&&jIe.call(e,r)&&(n[r]=e[r]);return n};const UIe=P.forwardRef((e,t)=>{var n=e,{value:r,children:i,onKeyDown:s,onClick:o,className:a,icon:u,rightSection:l,color:c}=n,f=Qpt(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]);const d=WY(),{classNames:h,styles:p,unstyled:m}=J0(),g=!!u,y=!!l,{theme:v,classes:_,cx:w}=qpt({withIcon:g||y&&!i,withRightSection:y||g&&!i,orientation:d.orientation,color:c||d.color,variant:d.variant,radius:d.radius,inverted:d.inverted,placement:d.placement},{name:"Tabs",unstyled:m,classNames:h,styles:p}),x=r===d.value,E=b=>{d.onTabChange(d.allowTabDeactivation&&r===d.value?null:r),o==null||o(b)};return j.createElement(pm,Xpt(Kpt({},f),{unstyled:m,className:w(_.tab,a),"data-active":x||void 0,ref:t,type:"button",role:"tab",id:d.getTabId(r),"aria-selected":x,tabIndex:x||d.value===null?0:-1,"aria-controls":d.getPanelId(r),onClick:E,onKeyDown:USe({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:d.activateTabWithKeyboard,loop:d.loop,dir:v.dir,orientation:d.orientation,onKeyDown:s})}),u&&j.createElement("div",{className:_.tabIcon},u),i&&j.createElement("div",{className:_.tabLabel},i),l&&j.createElement("div",{className:_.tabRightSection},l))});UIe.displayName="@mantine/core/Tab";function zIe({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:s,id:o,activateTabWithKeyboard:a,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,placement:h,keepMounted:p=!0}){const m=Vu(o),[g,y]=ya({value:t,defaultValue:e,finalValue:null,onChange:n});return j.createElement(gpt,{value:{placement:h,value:g,orientation:r,id:m,loop:s,activateTabWithKeyboard:a,getTabId:hoe(`${m}-tab`,kz.value),getPanelId:hoe(`${m}-panel`,kz.value),onTabChange:y,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,keepMounted:p}},i)}zIe.displayName="@mantine/core/TabsProvider";var Jpt=yt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}}));const Zpt=Jpt;var emt=Object.defineProperty,tmt=Object.defineProperties,nmt=Object.getOwnPropertyDescriptors,KD=Object.getOwnPropertySymbols,VIe=Object.prototype.hasOwnProperty,HIe=Object.prototype.propertyIsEnumerable,tfe=(e,t,n)=>t in e?emt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rmt=(e,t)=>{for(var n in t||(t={}))VIe.call(t,n)&&tfe(e,n,t[n]);if(KD)for(var n of KD(t))HIe.call(t,n)&&tfe(e,n,t[n]);return e},imt=(e,t)=>tmt(e,nmt(t)),smt=(e,t)=>{var n={};for(var r in e)VIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KD)for(var r of KD(e))t.indexOf(r)<0&&HIe.call(e,r)&&(n[r]=e[r]);return n};const omt={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},ql=P.forwardRef((e,t)=>{const n=Ot("Tabs",omt,e),{defaultValue:r,value:i,orientation:s,loop:o,activateTabWithKeyboard:a,allowTabDeactivation:u,children:l,id:c,onTabChange:f,variant:d,color:h,className:p,unstyled:m,classNames:g,styles:y,radius:v,inverted:_,keepMounted:w,placement:x}=n,E=smt(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:b,cx:T}=Zpt({orientation:s,color:h,variant:d,radius:v,inverted:_,placement:x},{unstyled:m,name:"Tabs",classNames:g,styles:y});return j.createElement(pY,{classNames:g,styles:y,unstyled:m},j.createElement(zIe,{activateTabWithKeyboard:a,defaultValue:r,orientation:s,onTabChange:f,value:i,id:c,loop:o,allowTabDeactivation:u,color:h,variant:d,radius:v,inverted:_,keepMounted:w,placement:x},j.createElement(pt,imt(rmt({},E),{className:T(b.root,p),id:c,ref:t}),l)))});ql.List=DIe;ql.Tab=UIe;ql.Panel=FIe;ql.displayName="@mantine/core/Tabs";var amt=Object.defineProperty,umt=Object.defineProperties,lmt=Object.getOwnPropertyDescriptors,nfe=Object.getOwnPropertySymbols,cmt=Object.prototype.hasOwnProperty,fmt=Object.prototype.propertyIsEnumerable,rfe=(e,t,n)=>t in e?amt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dmt=(e,t)=>{for(var n in t||(t={}))cmt.call(t,n)&&rfe(e,n,t[n]);if(nfe)for(var n of nfe(t))fmt.call(t,n)&&rfe(e,n,t[n]);return e},hmt=(e,t)=>umt(e,lmt(t));function pmt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function mmt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var gmt=yt((e,{element:t,weight:n,size:r,inline:i})=>({root:hmt(dmt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:pmt(r,t,e),lineHeight:i?1:mmt(r,t,e),margin:0})}));const ymt=gmt;var vmt=Object.defineProperty,XD=Object.getOwnPropertySymbols,qIe=Object.prototype.hasOwnProperty,WIe=Object.prototype.propertyIsEnumerable,ife=(e,t,n)=>t in e?vmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_mt=(e,t)=>{for(var n in t||(t={}))qIe.call(t,n)&&ife(e,n,t[n]);if(XD)for(var n of XD(t))WIe.call(t,n)&&ife(e,n,t[n]);return e},bmt=(e,t)=>{var n={};for(var r in e)qIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XD)for(var r of XD(e))t.indexOf(r)<0&&WIe.call(e,r)&&(n[r]=e[r]);return n};const wmt={order:1},sa=P.forwardRef((e,t)=>{const n=Ot("Title",wmt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=bmt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=ymt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?j.createElement(gt,_mt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});sa.displayName="@mantine/core/Title";const GY=P.createContext(null);GY.displayName="@mantine/modals/ModalsContext";function Emt(){const e=P.useContext(GY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}var Smt=Object.defineProperty,xmt=Object.defineProperties,Tmt=Object.getOwnPropertyDescriptors,sfe=Object.getOwnPropertySymbols,Amt=Object.prototype.hasOwnProperty,Cmt=Object.prototype.propertyIsEnumerable,ofe=(e,t,n)=>t in e?Smt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oB=(e,t)=>{for(var n in t||(t={}))Amt.call(t,n)&&ofe(e,n,t[n]);if(sfe)for(var n of sfe(t))Cmt.call(t,n)&&ofe(e,n,t[n]);return e},afe=(e,t)=>xmt(e,Tmt(t));function Imt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Emt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return j.createElement(j.Fragment,null,l&&j.createElement(pt,{mb:"md"},l),j.createElement(va,oB({position:"right"},o),j.createElement(Hr,afe(oB({variant:"default"},t),{onClick:h}),(t==null?void 0:t.children)||c),j.createElement(Hr,afe(oB({},n),{onClick:p}),(n==null?void 0:n.children)||f)))}function Omt(e,t){switch(t.type){case"OPEN":return{current:t.payload,modals:[...e.modals,t.payload]};case"CLOSE":{const n=e.modals.filter(r=>r.id!==t.payload);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return{current:e.current,modals:[]};default:return e}}function Pmt(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}const kmt=typeof window<"u"?P.useLayoutEffect:P.useEffect;function $mt(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});kmt(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Pmt(`${e}:${String(r)}`,i[0])}return[t,n]}const[Rmt,hI]=$mt("mantine-modals");hI("openModal");hI("closeModal");hI("closeAllModals");const Nmt=hI("openConfirmModal");hI("openContextModal");var Dmt=Object.defineProperty,Mmt=Object.defineProperties,Lmt=Object.getOwnPropertyDescriptors,QD=Object.getOwnPropertySymbols,GIe=Object.prototype.hasOwnProperty,YIe=Object.prototype.propertyIsEnumerable,ufe=(e,t,n)=>t in e?Dmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E$=(e,t)=>{for(var n in t||(t={}))GIe.call(t,n)&&ufe(e,n,t[n]);if(QD)for(var n of QD(t))YIe.call(t,n)&&ufe(e,n,t[n]);return e},lfe=(e,t)=>Mmt(e,Lmt(t)),Wy=(e,t)=>{var n={};for(var r in e)GIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QD)for(var r of QD(e))t.indexOf(r)<0&&YIe.call(e,r)&&(n[r]=e[r]);return n};function Fmt(e){if(!e)return{confirmProps:{},modalProps:{}};const t=e,{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f}=t,d=Wy(t,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f},modalProps:E$({id:n},d)}}function Bmt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=P.useReducer(Omt,{modals:[],current:null}),o=P.useRef(i);o.current=i;const a=P.useCallback(g=>{o.current.modals.forEach(y=>{var v,_,w,x;y.type==="confirm"&&g&&((_=(v=y.props).onCancel)==null||_.call(v)),(x=(w=y.props).onClose)==null||x.call(w)}),s({type:"CLOSE_ALL"})},[o,s]),u=P.useCallback(g=>{var y=g,{modalId:v}=y,_=Wy(y,["modalId"]);const w=v||_$();return s({type:"OPEN",payload:{id:w,type:"content",props:_}}),w},[s]),l=P.useCallback(g=>{var y=g,{modalId:v}=y,_=Wy(y,["modalId"]);const w=v||_$();return s({type:"OPEN",payload:{id:w,type:"confirm",props:_}}),w},[s]),c=P.useCallback((g,y)=>{var v=y,{modalId:_}=v,w=Wy(v,["modalId"]);const x=_||_$();return s({type:"OPEN",payload:{id:x,type:"context",props:w,ctx:g}}),x},[s]),f=P.useCallback((g,y)=>{var v,_,w,x;const E=o.current.modals.find(b=>b.id===g);E&&(E.type==="confirm"&&y&&((_=(v=E.props).onCancel)==null||_.call(v)),(x=(w=E.props).onClose)==null||x.call(w),s({type:"CLOSE",payload:E.id}))},[o,s]);Rmt({openModal:u,openConfirmModal:l,openContextModal:g=>{var y=g,{modal:v}=y,_=Wy(y,["modal"]);return c(v,_)},closeModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const y=g.props,{innerProps:v}=y,_=Wy(y,["innerProps"]),w=r[g.ctx];return{modalProps:_,content:j.createElement(w,{innerProps:v,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=Fmt(g.props);return{modalProps:y,content:j.createElement(Imt,lfe(E$({},v),{id:g.id,labels:g.props.labels||n}))}}case"content":{const y=g.props,{children:v}=y;return{modalProps:Wy(y,["children"]),content:j.createElement(j.Fragment,null,v)}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return j.createElement(GY.Provider,{value:d},j.createElement(Ip,lfe(E$(E$({zIndex:Ta("modal")+1},t),p),{opened:i.modals.length>0,onClose:()=>f(i.current.id)}),m),e)}var KIe={exports:{}},jmt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Umt=jmt,zmt=Umt;function XIe(){}function QIe(){}QIe.resetWarningCache=XIe;var Vmt=function(){function e(r,i,s,o,a,u){if(u!==zmt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:QIe,resetWarningCache:XIe};return n.PropTypes=n,n};KIe.exports=Vmt();var Hmt=KIe.exports;const Yt=Pl(Hmt);var qmt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Wmt=Object.defineProperty,Gmt=Object.defineProperties,Ymt=Object.getOwnPropertyDescriptors,JD=Object.getOwnPropertySymbols,JIe=Object.prototype.hasOwnProperty,ZIe=Object.prototype.propertyIsEnumerable,cfe=(e,t,n)=>t in e?Wmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ffe=(e,t)=>{for(var n in t||(t={}))JIe.call(t,n)&&cfe(e,n,t[n]);if(JD)for(var n of JD(t))ZIe.call(t,n)&&cfe(e,n,t[n]);return e},Kmt=(e,t)=>Gmt(e,Ymt(t)),Xmt=(e,t)=>{var n={};for(var r in e)JIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JD)for(var r of JD(e))t.indexOf(r)<0&&ZIe.call(e,r)&&(n[r]=e[r]);return n},ri=(e,t,n)=>{const r=P.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=Xmt(o,["color","size","stroke","children"]);return P.createElement("svg",ffe(Kmt(ffe({ref:s},qmt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>P.createElement(d,h)),...c||[]])});return r.propTypes={color:Yt.string,size:Yt.oneOfType([Yt.string,Yt.number]),stroke:Yt.oneOfType([Yt.string,Yt.number])},r.displayName=`${t}`,r},Qmt=ri("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Jmt=ri("alert-triangle","IconAlertTriangle",[["path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 17h.01",key:"svg-2"}]]),Zmt=ri("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),egt=ri("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),tgt=ri("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),ngt=ri("brand-google","IconBrandGoogle",[["path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8",key:"svg-0"}]]),rgt=ri("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),igt=ri("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),sgt=ri("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),ogt=ri("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),dfe=ri("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),agt=ri("code-dots","IconCodeDots",[["path",{d:"M15 12h.01",key:"svg-0"}],["path",{d:"M12 12h.01",key:"svg-1"}],["path",{d:"M9 12h.01",key:"svg-2"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-3"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-4"}]]),ugt=ri("code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]),lgt=ri("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),cgt=ri("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),fgt=ri("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),dgt=ri("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),hgt=ri("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),pgt=ri("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),hfe=ri("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),mgt=ri("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),ggt=ri("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),ygt=ri("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),YY=ri("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),vgt=ri("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),_gt=ri("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),bgt=ri("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function KY(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Ec="/revisit/",pfe=["http","https","mailto","tel"];function wgt(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<pfe.length;){const s=pfe[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Egt=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const XY=Pl(Egt);function uw(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?mfe(e.position):"start"in e||"end"in e?mfe(e):"line"in e||"column"in e?$z(e):""}function $z(e){return gfe(e&&e.line)+":"+gfe(e&&e.column)}function mfe(e){return $z(e&&e.start)+"-"+$z(e&&e.end)}function gfe(e){return e&&typeof e=="number"?e:1}let Sc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=uw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Sc.prototype.file="";Sc.prototype.name="";Sc.prototype.reason="";Sc.prototype.message="";Sc.prototype.stack="";Sc.prototype.fatal=null;Sc.prototype.column=null;Sc.prototype.line=null;Sc.prototype.source=null;Sc.prototype.ruleId=null;Sc.prototype.position=null;const td={basename:Sgt,dirname:xgt,extname:Tgt,join:Agt,sep:"/"};function Sgt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');pI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function xgt(e){if(pI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Tgt(e){pI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Agt(...e){let t=-1,n;for(;++t<e.length;)pI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Cgt(n)}function Cgt(e){pI(e);const t=e.charCodeAt(0)===47;let n=Igt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Igt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function pI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ogt={cwd:Pgt};function Pgt(){return"/"}function Rz(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function kgt(e){if(typeof e=="string")e=new URL(e);else if(!Rz(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return $gt(e)}function $gt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const aB=["history","path","basename","stem","extname","dirname"];let Rgt=class{constructor(t){let n;t?typeof t=="string"||XY(t)?n={value:t}:Rz(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Ogt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<aB.length;){const s=aB[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)aB.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){Rz(t)&&(t=kgt(t)),lB(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?td.dirname(this.path):void 0}set dirname(t){yfe(this.basename,"dirname"),this.path=td.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?td.basename(this.path):void 0}set basename(t){lB(t,"basename"),uB(t,"basename"),this.path=td.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?td.extname(this.path):void 0}set extname(t){if(uB(t,"extname"),yfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=td.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?td.basename(this.path,this.extname):void 0}set stem(t){lB(t,"stem"),uB(t,"stem"),this.path=td.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new Sc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function uB(e,t){if(e&&e.includes(td.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+td.sep+"`")}function lB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function yfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function vfe(e){if(e)throw e}var S$=Object.prototype.hasOwnProperty,eOe=Object.prototype.toString,_fe=Object.defineProperty,bfe=Object.getOwnPropertyDescriptor,wfe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):eOe.call(t)==="[object Array]"},Efe=function(t){if(!t||eOe.call(t)!=="[object Object]")return!1;var n=S$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&S$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||S$.call(t,i)},Sfe=function(t,n){_fe&&n.name==="__proto__"?_fe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},xfe=function(t,n){if(n==="__proto__")if(S$.call(t,n)){if(bfe)return bfe(t,n).value}else return;return t[n]},Ngt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=xfe(a,n),i=xfe(t,n),a!==i&&(c&&i&&(Efe(i)||(s=wfe(i)))?(s?(s=!1,o=r&&wfe(r)?r:[]):o=r&&Efe(r)?r:{},Sfe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Sfe(a,{name:n,newValue:i}));return a};const Tfe=Pl(Ngt);function Nz(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Dgt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Mgt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Mgt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class xc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=uw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}xc.prototype.file="";xc.prototype.name="";xc.prototype.reason="";xc.prototype.message="";xc.prototype.stack="";xc.prototype.fatal=null;xc.prototype.column=null;xc.prototype.line=null;xc.prototype.source=null;xc.prototype.ruleId=null;xc.prototype.position=null;const nd={basename:Lgt,dirname:Fgt,extname:Bgt,join:jgt,sep:"/"};function Lgt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');mI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Fgt(e){if(mI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Bgt(e){mI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function jgt(...e){let t=-1,n;for(;++t<e.length;)mI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ugt(n)}function Ugt(e){mI(e);const t=e.charCodeAt(0)===47;let n=zgt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function zgt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function mI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Vgt={cwd:Hgt};function Hgt(){return"/"}function Dz(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function qgt(e){if(typeof e=="string")e=new URL(e);else if(!Dz(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Wgt(e)}function Wgt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const cB=["history","path","basename","stem","extname","dirname"];class Ggt{constructor(t){let n;t?typeof t=="string"||XY(t)?n={value:t}:Dz(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Vgt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<cB.length;){const s=cB[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)cB.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){Dz(t)&&(t=qgt(t)),dB(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?nd.dirname(this.path):void 0}set dirname(t){Afe(this.basename,"dirname"),this.path=nd.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?nd.basename(this.path):void 0}set basename(t){dB(t,"basename"),fB(t,"basename"),this.path=nd.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?nd.extname(this.path):void 0}set extname(t){if(fB(t,"extname"),Afe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=nd.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?nd.basename(this.path,this.extname):void 0}set stem(t){dB(t,"stem"),fB(t,"stem"),this.path=nd.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new xc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function fB(e,t){if(e&&e.includes(nd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+nd.sep+"`")}function dB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Afe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Ygt=nOe().freeze(),tOe={}.hasOwnProperty;function nOe(){const e=Dgt(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=nOe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Tfe(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(mB("data",r),n[m]=g,s):tOe.call(n,m)&&n[m]||null:m?(mB("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(mB("use",r),m!=null)if(typeof m=="function")x(m,...g);else if(typeof m=="object")Array.isArray(m)?w(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(E){if(typeof E=="function")x(E);else if(typeof E=="object")if(Array.isArray(E)){const[b,...T]=E;x(b,...T)}else _(E);else throw new TypeError("Expected usable value, not `"+E+"`")}function _(E){w(E.plugins),E.settings&&(y=Object.assign(y||{},E.settings))}function w(E){let b=-1;if(E!=null)if(Array.isArray(E))for(;++b<E.length;){const T=E[b];v(T)}else throw new TypeError("Expected a list of plugins, not `"+E+"`")}function x(E,b){let T=-1,C;for(;++T<t.length;)if(t[T][0]===E){C=t[T];break}C?(Nz(C[1])&&Nz(b)&&(b=Tfe(!0,C[1],b)),C[1]=b):t.push([...arguments])}}function l(m){s.freeze();const g=Ox(m),y=s.Parser;return hB("parse",y),Cfe(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=Ox(g),v=s.Compiler;return pB("stringify",v),Ife(m),Cfe(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Ife(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,w){e.run(m,Ox(g),x);function x(E,b,T){b=b||m,E?w(E):_?_(b):y(null,b,T)}}}function d(m,g){let y,v;return s.run(m,g,_),Ofe("runSync","run",v),y;function _(w,x){vfe(w),y=x,v=!0}}function h(m,g){if(s.freeze(),hB("process",s.Parser),pB("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const w=Ox(m);s.run(s.parse(w),w,(E,b,T)=>{if(E||!b||!T)x(E);else{const C=s.stringify(b,T);C==null||(Qgt(C)?T.value=C:T.result=C),x(E,T)}});function x(E,b){E||!b?_(E):v?v(b):g(null,b)}}}function p(m){let g;s.freeze(),hB("processSync",s.Parser),pB("processSync",s.Compiler);const y=Ox(m);return s.process(y,v),Ofe("processSync","process",g),y;function v(_){g=!0,vfe(_)}}}function Cfe(e,t){return typeof e=="function"&&e.prototype&&(Kgt(e.prototype)||t in e.prototype)}function Kgt(e){let t;for(t in e)if(tOe.call(e,t))return!0;return!1}function hB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function pB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function mB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ife(e){if(!Nz(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ofe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ox(e){return Xgt(e)?e:new Ggt(e)}function Xgt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Qgt(e){return typeof e=="string"||XY(e)}function Jgt(e,t){var{includeImageAlt:n=!0}=t||{};return rOe(e,n)}function rOe(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&Pfe(e.children,t)||Array.isArray(e)&&Pfe(e,t))||""}function Pfe(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=rOe(e[r],t);return n.join("")}function Qd(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Xl(e,t){return e.length>0?(Qd(e,e.length,0,t),e):t}const kfe={}.hasOwnProperty;function Zgt(e){const t={};let n=-1;for(;++n<e.length;)e0t(t,e[n]);return t}function e0t(e,t){let n;for(n in t){const i=(kfe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){kfe.call(i,o)||(i[o]=[]);const a=s[o];t0t(i[o],Array.isArray(a)?a:a?[a]:[])}}}function t0t(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qd(e,0,0,r)}const n0t=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,pd=Z0(/[A-Za-z]/),Mz=Z0(/\d/),r0t=Z0(/[\dA-Fa-f]/),ll=Z0(/[\dA-Za-z]/),i0t=Z0(/[!-/:-@[-`{-~]/),$fe=Z0(/[#-'*+\--9=?A-Z^-~]/);function Lz(e){return e!==null&&(e<32||e===127)}function ac(e){return e!==null&&(e<0||e===32)}function cn(e){return e!==null&&e<-2}function _s(e){return e===-2||e===-1||e===32}const s0t=Z0(/\s/),o0t=Z0(n0t);function Z0(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function ti(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return _s(u)?(e.enter(n),a(u)):t(u)}function a(u){return _s(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const a0t={tokenize:u0t};function u0t(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ti(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return cn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const l0t={tokenize:c0t},Rfe={tokenize:f0t};function c0t(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let x=w,E;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){E=t.events[x][1].end;break}y(r);let b=w;for(;b<t.events.length;)t.events[b][1].end=Object.assign({},E),b++;return Qd(t.events,x+1,0,t.events.slice(w)),t.events.length=b,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Rfe,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Rfe,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return cn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const x=t.sliceStream(_);if(w&&x.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(x),t.parser.lazy[_.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<o&&(!i.events[E][1].end||i.events[E][1].end.offset>o))return;const b=t.events.length;let T=b,C,A;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(C){A=t.events[T][1].end;break}C=!0}for(y(r),E=b;E<t.events.length;)t.events[E][1].end=Object.assign({},A),E++;Qd(t.events,T+1,0,t.events.slice(b)),t.events.length=E}}function y(_){let w=n.length;for(;w-- >_;){const x=n[w];t.containerState=x[1],x[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function f0t(e,t,n){return ti(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Nfe(e){if(e===null||ac(e)||s0t(e))return 1;if(o0t(e))return 2}function QY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Fz={name:"attention",tokenize:h0t,resolveAll:d0t};function d0t(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Dfe(f,-u),Dfe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Xl(l,QY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Xl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Qd(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function h0t(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Nfe(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Nfe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Dfe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const p0t={name:"autolink",tokenize:m0t};function m0t(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return pd(p)?(e.consume(p),o):$fe(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||ll(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||ll(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||Lz(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):$fe(p)?(e.consume(p),l):n(p)}function c(p){return ll(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||ll(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const r4={tokenize:g0t,partial:!0};function g0t(e,t,n){return ti(e,r,"linePrefix");function r(i){return i===null||cn(i)?t(i):n(i)}}const iOe={name:"blockQuote",tokenize:y0t,continuation:{tokenize:v0t},exit:_0t};function y0t(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return _s(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function v0t(e,t,n){return ti(e,e.attempt(iOe,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _0t(e){e.exit("blockQuote")}const sOe={name:"characterEscape",tokenize:b0t};function b0t(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return i0t(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Mfe=document.createElement("i");function JY(e){const t="&"+e+";";Mfe.innerHTML=t;const n=Mfe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const oOe={name:"characterReference",tokenize:w0t};function w0t(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=ll,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=r0t,c):(e.enter("characterReferenceValue"),s=7,o=Mz,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===ll&&!JY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const Lfe={name:"codeFenced",tokenize:E0t,concrete:!0};function E0t(e,t,n){const r=this,i={tokenize:x,partial:!0},s={tokenize:w,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(E){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=E,f(E)}function f(E){return E===l?(e.consume(E),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(E):ti(e,d,"whitespace")(E))}function d(E){return E===null||cn(E)?g(E):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(E))}function h(E){return E===null||ac(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ti(e,p,"whitespace")(E)):E===96&&E===l?n(E):(e.consume(E),h)}function p(E){return E===null||cn(E)?g(E):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(E))}function m(E){return E===null||cn(E)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(E)):E===96&&E===l?n(E):(e.consume(E),m)}function g(E){return e.exit("codeFencedFence"),r.interrupt?t(E):y(E)}function y(E){return E===null?_(E):cn(E)?e.attempt(s,e.attempt(i,_,a?ti(e,y,"linePrefix",a+1):y),_)(E):(e.enter("codeFlowValue"),v(E))}function v(E){return E===null||cn(E)?(e.exit("codeFlowValue"),y(E)):(e.consume(E),v)}function _(E){return e.exit("codeFenced"),t(E)}function w(E,b,T){const C=this;return A;function A(N){return E.enter("lineEnding"),E.consume(N),E.exit("lineEnding"),O}function O(N){return C.parser.lazy[C.now().line]?T(N):b(N)}}function x(E,b,T){let C=0;return ti(E,A,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function A(k){return E.enter("codeFencedFence"),E.enter("codeFencedFenceSequence"),O(k)}function O(k){return k===l?(E.consume(k),C++,O):C<u?T(k):(E.exit("codeFencedFenceSequence"),ti(E,N,"whitespace")(k))}function N(k){return k===null||cn(k)?(E.exit("codeFencedFence"),b(k)):T(k)}}}const gB={name:"codeIndented",tokenize:x0t},S0t={tokenize:T0t,partial:!0};function x0t(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ti(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):cn(l)?e.attempt(S0t,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||cn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function T0t(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ti(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):cn(o)?i(o):n(o)}}const A0t={name:"codeText",tokenize:O0t,resolve:C0t,previous:I0t};function C0t(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function I0t(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function O0t(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||cn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function aOe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,P0t(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),Qd(e,i,n-i+1,a))}}return!l}function P0t(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),Qd(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const k0t={tokenize:N0t,resolve:R0t},$0t={tokenize:D0t,partial:!0};function R0t(e){return aOe(e),e}function N0t(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):cn(a)?e.check($0t,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function D0t(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ti(e,s,"linePrefix")}function s(o){if(o===null||cn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function uOe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||Lz(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||cn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||ac(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):Lz(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function lOe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):cn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||cn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!_s(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function cOe(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):cn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ti(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||cn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function E2(e,t){let n;return r;function r(i){return cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):_s(i)?ti(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function lw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const M0t={name:"definition",tokenize:F0t},L0t={tokenize:B0t,partial:!0};function F0t(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),lOe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=lw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),E2(e,uOe(e,e.attempt(L0t,ti(e,a,"whitespace"),ti(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||cn(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function B0t(e,t,n){return r;function r(o){return ac(o)?E2(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?cOe(e,ti(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||cn(o)?t(o):n(o)}}const j0t={name:"hardBreakEscape",tokenize:U0t};function U0t(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return cn(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const z0t={name:"headingAtx",tokenize:H0t,resolve:V0t};function V0t(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qd(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function H0t(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||ac(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||cn(c)?(e.exit("atxHeading"),t(c)):_s(c)?ti(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ac(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const q0t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ffe=["pre","script","style","textarea"],W0t={name:"htmlFlow",tokenize:K0t,resolveTo:Y0t,concrete:!0},G0t={tokenize:X0t,partial:!0};function Y0t(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function K0t(e,t,n){const r=this;let i,s,o,a,u;return l;function l(M){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(M),c}function c(M){return M===33?(e.consume(M),f):M===47?(e.consume(M),p):M===63?(e.consume(M),i=3,r.interrupt?t:Y):pd(M)?(e.consume(M),o=String.fromCharCode(M),s=!0,m):n(M)}function f(M){return M===45?(e.consume(M),i=2,d):M===91?(e.consume(M),i=5,o="CDATA[",a=0,h):pd(M)?(e.consume(M),i=4,r.interrupt?t:Y):n(M)}function d(M){return M===45?(e.consume(M),r.interrupt?t:Y):n(M)}function h(M){return M===o.charCodeAt(a++)?(e.consume(M),a===o.length?r.interrupt?t:O:h):n(M)}function p(M){return pd(M)?(e.consume(M),o=String.fromCharCode(M),m):n(M)}function m(M){return M===null||M===47||M===62||ac(M)?M!==47&&s&&Ffe.includes(o.toLowerCase())?(i=1,r.interrupt?t(M):O(M)):q0t.includes(o.toLowerCase())?(i=6,M===47?(e.consume(M),g):r.interrupt?t(M):O(M)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(M):s?v(M):y(M)):M===45||ll(M)?(e.consume(M),o+=String.fromCharCode(M),m):n(M)}function g(M){return M===62?(e.consume(M),r.interrupt?t:O):n(M)}function y(M){return _s(M)?(e.consume(M),y):C(M)}function v(M){return M===47?(e.consume(M),C):M===58||M===95||pd(M)?(e.consume(M),_):_s(M)?(e.consume(M),v):C(M)}function _(M){return M===45||M===46||M===58||M===95||ll(M)?(e.consume(M),_):w(M)}function w(M){return M===61?(e.consume(M),x):_s(M)?(e.consume(M),w):v(M)}function x(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),u=M,E):_s(M)?(e.consume(M),x):(u=null,b(M))}function E(M){return M===null||cn(M)?n(M):M===u?(e.consume(M),T):(e.consume(M),E)}function b(M){return M===null||M===34||M===39||M===60||M===61||M===62||M===96||ac(M)?w(M):(e.consume(M),b)}function T(M){return M===47||M===62||_s(M)?v(M):n(M)}function C(M){return M===62?(e.consume(M),A):n(M)}function A(M){return _s(M)?(e.consume(M),A):M===null||cn(M)?O(M):n(M)}function O(M){return M===45&&i===2?(e.consume(M),B):M===60&&i===1?(e.consume(M),U):M===62&&i===4?(e.consume(M),q):M===63&&i===3?(e.consume(M),Y):M===93&&i===5?(e.consume(M),H):cn(M)&&(i===6||i===7)?e.check(G0t,q,N)(M):M===null||cn(M)?N(M):(e.consume(M),O)}function N(M){return e.exit("htmlFlowData"),k(M)}function k(M){return M===null?D(M):cn(M)?e.attempt({tokenize:L,partial:!0},k,D)(M):(e.enter("htmlFlowData"),O(M))}function L(M,W,z){return V;function V(le){return M.enter("lineEnding"),M.consume(le),M.exit("lineEnding"),te}function te(le){return r.parser.lazy[r.now().line]?z(le):W(le)}}function B(M){return M===45?(e.consume(M),Y):O(M)}function U(M){return M===47?(e.consume(M),o="",G):O(M)}function G(M){return M===62&&Ffe.includes(o.toLowerCase())?(e.consume(M),q):pd(M)&&o.length<8?(e.consume(M),o+=String.fromCharCode(M),G):O(M)}function H(M){return M===93?(e.consume(M),Y):O(M)}function Y(M){return M===62?(e.consume(M),q):M===45&&i===2?(e.consume(M),Y):O(M)}function q(M){return M===null||cn(M)?(e.exit("htmlFlowData"),D(M)):(e.consume(M),q)}function D(M){return e.exit("htmlFlow"),t(M)}}function X0t(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(r4,t,n)}}const Q0t={name:"htmlText",tokenize:J0t};function J0t(e,t,n){const r=this;let i,s,o,a;return u;function u(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),l}function l(D){return D===33?(e.consume(D),c):D===47?(e.consume(D),b):D===63?(e.consume(D),x):pd(D)?(e.consume(D),A):n(D)}function c(D){return D===45?(e.consume(D),f):D===91?(e.consume(D),s="CDATA[",o=0,g):pd(D)?(e.consume(D),w):n(D)}function f(D){return D===45?(e.consume(D),d):n(D)}function d(D){return D===null||D===62?n(D):D===45?(e.consume(D),h):p(D)}function h(D){return D===null||D===62?n(D):p(D)}function p(D){return D===null?n(D):D===45?(e.consume(D),m):cn(D)?(a=p,H(D)):(e.consume(D),p)}function m(D){return D===45?(e.consume(D),q):p(D)}function g(D){return D===s.charCodeAt(o++)?(e.consume(D),o===s.length?y:g):n(D)}function y(D){return D===null?n(D):D===93?(e.consume(D),v):cn(D)?(a=y,H(D)):(e.consume(D),y)}function v(D){return D===93?(e.consume(D),_):y(D)}function _(D){return D===62?q(D):D===93?(e.consume(D),_):y(D)}function w(D){return D===null||D===62?q(D):cn(D)?(a=w,H(D)):(e.consume(D),w)}function x(D){return D===null?n(D):D===63?(e.consume(D),E):cn(D)?(a=x,H(D)):(e.consume(D),x)}function E(D){return D===62?q(D):x(D)}function b(D){return pd(D)?(e.consume(D),T):n(D)}function T(D){return D===45||ll(D)?(e.consume(D),T):C(D)}function C(D){return cn(D)?(a=C,H(D)):_s(D)?(e.consume(D),C):q(D)}function A(D){return D===45||ll(D)?(e.consume(D),A):D===47||D===62||ac(D)?O(D):n(D)}function O(D){return D===47?(e.consume(D),q):D===58||D===95||pd(D)?(e.consume(D),N):cn(D)?(a=O,H(D)):_s(D)?(e.consume(D),O):q(D)}function N(D){return D===45||D===46||D===58||D===95||ll(D)?(e.consume(D),N):k(D)}function k(D){return D===61?(e.consume(D),L):cn(D)?(a=k,H(D)):_s(D)?(e.consume(D),k):O(D)}function L(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,B):cn(D)?(a=L,H(D)):_s(D)?(e.consume(D),L):(e.consume(D),i=void 0,G)}function B(D){return D===i?(e.consume(D),U):D===null?n(D):cn(D)?(a=B,H(D)):(e.consume(D),B)}function U(D){return D===62||D===47||ac(D)?O(D):n(D)}function G(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===62||ac(D)?O(D):(e.consume(D),G)}function H(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),ti(e,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Y(D){return e.enter("htmlTextData"),a(D)}function q(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}}const ZY={name:"labelEnd",tokenize:iyt,resolveTo:ryt,resolveAll:nyt},Z0t={tokenize:syt},eyt={tokenize:oyt},tyt={tokenize:ayt};function nyt(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function ryt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Xl(a,e.slice(s+1,s+r+3)),a=Xl(a,[["enter",c,t]]),a=Xl(a,QY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Xl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Xl(a,e.slice(o+1)),a=Xl(a,[["exit",u,t]]),Qd(e,s,e.length,a),e}function iyt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(lw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(Z0t,t,o?t:l)(c):c===91?e.attempt(eyt,t,o?e.attempt(tyt,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function syt(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),E2(e,i)}function i(u){return u===41?a(u):uOe(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return ac(u)?E2(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?cOe(e,E2(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function oyt(e,t,n){const r=this;return i;function i(o){return lOe.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(lw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function ayt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const uyt={name:"labelStartImage",tokenize:lyt,resolveAll:ZY.resolveAll};function lyt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const cyt={name:"labelStartLink",tokenize:fyt,resolveAll:ZY.resolveAll};function fyt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const yB={name:"lineEnding",tokenize:dyt};function dyt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ti(e,t,"linePrefix")}}const x$={name:"thematicBreak",tokenize:hyt};function hyt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):_s(u)?ti(e,o,"whitespace")(u):r<3||u!==null&&!cn(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const au={name:"list",tokenize:gyt,continuation:{tokenize:yyt},exit:_yt},pyt={tokenize:byt,partial:!0},myt={tokenize:vyt,partial:!0};function gyt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Mz(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(x$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Mz(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(r4,r.interrupt?n:c,e.attempt(pyt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return _s(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function yyt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(r4,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ti(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!_s(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(myt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ti(e,e.attempt(au,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function vyt(e,t,n){const r=this;return ti(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function _yt(e){e.exit(this.containerState.type)}function byt(e,t,n){const r=this;return ti(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!_s(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Bfe={name:"setextUnderline",tokenize:Eyt,resolveTo:wyt};function wyt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Eyt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),ti(e,l,"lineSuffix")(c))}function l(c){return c===null||cn(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const Syt={tokenize:xyt};function xyt(e){const t=this,n=e.attempt(r4,r,e.attempt(this.parser.constructs.flowInitial,i,ti(e,e.attempt(this.parser.constructs.flow,i,e.attempt(k0t,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Tyt={resolveAll:dOe()},Ayt=fOe("string"),Cyt=fOe("text");function fOe(e){return{tokenize:t,resolveAll:dOe(e==="text"?Iyt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function dOe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Iyt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Oyt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:w,attempt:b(x),check:b(E),interrupt:b(E,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(O){return o=Xl(o,O),g(),o[o.length-1]!==null?[]:(T(t,0),l.events=QY(s,l.events,l),l.events)}function d(O,N){return kyt(h(O),N)}function h(O){return Pyt(o,O)}function p(){return Object.assign({},r)}function m(O){i[O.line]=O.column,A()}function g(){let O;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<N.length;)y(N.charCodeAt(r._bufferIndex));else y(N)}}function y(O){c=c(O)}function v(O){cn(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,A()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function _(O,N){const k=N||{};return k.type=O,k.start=p(),l.events.push(["enter",k,l]),a.push(k),k}function w(O){const N=a.pop();return N.end=p(),l.events.push(["exit",N,l]),N}function x(O,N){T(O,N.from)}function E(O,N){N.restore()}function b(O,N){return k;function k(L,B,U){let G,H,Y,q;return Array.isArray(L)?M(L):"tokenize"in L?M([L]):D(L);function D(te){return le;function le(me){const ye=me!==null&&te[me],de=me!==null&&te.null,we=[...Array.isArray(ye)?ye:ye?[ye]:[],...Array.isArray(de)?de:de?[de]:[]];return M(we)(me)}}function M(te){return G=te,H=0,te.length===0?U:W(te[H])}function W(te){return le;function le(me){return q=C(),Y=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?V():te.tokenize.call(N?Object.assign(Object.create(l),N):l,u,z,V)(me)}}function z(te){return O(Y,q),B}function V(te){return q.restore(),++H<G.length?W(G[H]):U}}}function T(O,N){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Qd(l.events,N,l.events.length-N,O.resolve(l.events.slice(N),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function C(){const O=p(),N=l.previous,k=l.currentConstruct,L=l.events.length,B=Array.from(a);return{restore:U,from:L};function U(){r=O,l.previous=N,l.currentConstruct=k,l.events.length=L,a=B,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Pyt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function kyt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const $yt={42:au,43:au,45:au,48:au,49:au,50:au,51:au,52:au,53:au,54:au,55:au,56:au,57:au,62:iOe},Ryt={91:M0t},Nyt={[-2]:gB,[-1]:gB,32:gB},Dyt={35:z0t,42:x$,45:[Bfe,x$],60:W0t,61:Bfe,95:x$,96:Lfe,126:Lfe},Myt={38:oOe,92:sOe},Lyt={[-5]:yB,[-4]:yB,[-3]:yB,33:uyt,38:oOe,42:Fz,60:[p0t,Q0t],91:cyt,92:[j0t,sOe],93:ZY,95:Fz,96:A0t},Fyt={null:[Fz,Tyt]},Byt={null:[42,95]},jyt={null:[]},Uyt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Byt,contentInitial:Ryt,disable:jyt,document:$yt,flow:Dyt,flowInitial:Nyt,insideSpan:Fyt,string:Myt,text:Lyt},Symbol.toStringTag,{value:"Module"}));function zyt(e={}){const t=Zgt([Uyt].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(a0t),document:r(l0t),flow:r(Syt),string:r(Ayt),text:r(Cyt)};return n;function r(i){return s;function s(o){return Oyt(n,i,o)}}}const jfe=/[\0\t\n\r]/g;function Vyt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(jfe.lastIndex=f,l=jfe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Hyt(e){for(;!aOe(e););return e}function hOe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const qyt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Wyt(e){return e.replace(qyt,Gyt)}function Gyt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return hOe(n.slice(s?2:1),s?16:10)}return JY(n)||e}const Bz={}.hasOwnProperty,Yyt=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Kyt(n)(Hyt(zyt(n).document().write(Vyt()(e,t,!0))))};function Kyt(e={}){const t=pOe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(qe),autolinkProtocol:N,autolinkEmail:N,atxHeading:u(De),blockQuote:u(he),characterEscape:N,characterReference:N,codeFenced:u(Ve),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Ve,l),codeText:u(Me,l),codeTextData:N,data:N,codeFlowValue:N,definition:u(Ye),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(Fe),hardBreakEscape:u(He),hardBreakTrailing:u(He),htmlFlow:u(Qt,l),htmlFlowData:N,htmlText:u(Qt,l),htmlTextData:N,image:u(nt),label:l,link:u(qe),listItem:u(at),listItemValue:m,listOrdered:u(Pt,p),listUnordered:u(Pt),paragraph:u(ht),reference:te,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(De),strong:u(vt),thematicBreak:u(Xt)},exit:{atxHeading:f(),atxHeadingSequence:T,autolink:f(),autolinkEmail:we,autolinkProtocol:de,blockQuote:f(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:ye,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:k,codeIndented:f(w),codeText:f(H),codeTextData:k,data:k,definition:f(),definitionDestinationString:b,definitionLabelString:x,definitionTitleString:E,emphasis:f(),hardBreakEscape:f(B),hardBreakTrailing:f(B),htmlFlow:f(U),htmlFlowData:k,htmlText:f(G),htmlTextData:k,image:f(q),label:M,labelText:D,lineEnding:L,link:f(Y),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:le,resourceDestinationString:W,resourceTitleString:z,resource:V,setextHeading:f(O),setextHeadingLineSequence:A,setextHeadingText:C,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(fe){let xe={type:"root",children:[]};const Le=[xe],ct=[],Je=[],lt={stack:Le,tokenStack:ct,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let st=-1;for(;++st<fe.length;)if(fe[st][1].type==="listOrdered"||fe[st][1].type==="listUnordered")if(fe[st][0]==="enter")Je.push(st);else{const At=Je.pop();st=i(fe,At,st)}for(st=-1;++st<fe.length;){const At=t[fe[st][0]];Bz.call(At,fe[st][1].type)&&At[fe[st][1].type].call(Object.assign({sliceSerialize:fe[st][2].sliceSerialize},lt),fe[st][1])}if(ct.length>0){const At=ct[ct.length-1];(At[1]||Ufe).call(lt,void 0,At[0])}for(xe.position={start:a(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:a(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},st=-1;++st<t.transforms.length;)xe=t.transforms[st](xe)||xe;return xe}function i(fe,xe,Le){let ct=xe-1,Je=-1,lt=!1,st,At,Tn,Zt;for(;++ct<=Le;){const Jt=fe[ct];if(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered"||Jt[1].type==="blockQuote"?(Jt[0]==="enter"?Je++:Je--,Zt=void 0):Jt[1].type==="lineEndingBlank"?Jt[0]==="enter"&&(st&&!Zt&&!Je&&!Tn&&(Tn=ct),Zt=void 0):Jt[1].type==="linePrefix"||Jt[1].type==="listItemValue"||Jt[1].type==="listItemMarker"||Jt[1].type==="listItemPrefix"||Jt[1].type==="listItemPrefixWhitespace"||(Zt=void 0),!Je&&Jt[0]==="enter"&&Jt[1].type==="listItemPrefix"||Je===-1&&Jt[0]==="exit"&&(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered")){if(st){let nr=ct;for(At=void 0;nr--;){const Bn=fe[nr];if(Bn[1].type==="lineEnding"||Bn[1].type==="lineEndingBlank"){if(Bn[0]==="exit")continue;At&&(fe[At][1].type="lineEndingBlank",lt=!0),Bn[1].type="lineEnding",At=nr}else if(!(Bn[1].type==="linePrefix"||Bn[1].type==="blockQuotePrefix"||Bn[1].type==="blockQuotePrefixWhitespace"||Bn[1].type==="blockQuoteMarker"||Bn[1].type==="listItemIndent"))break}Tn&&(!At||Tn<At)&&(st._spread=!0),st.end=Object.assign({},At?fe[At][1].start:Jt[1].end),fe.splice(At||ct,0,["exit",st,Jt[2]]),ct++,Le++}Jt[1].type==="listItemPrefix"&&(st={type:"listItem",_spread:!1,start:Object.assign({},Jt[1].start)},fe.splice(ct,0,["enter",st,Jt[2]]),ct++,Le++,Tn=void 0,Zt=!0)}}return fe[xe][1]._spread=lt,Le}function s(fe,xe){n[fe]=xe}function o(fe){return n[fe]}function a(fe){return{line:fe.line,column:fe.column,offset:fe.offset}}function u(fe,xe){return Le;function Le(ct){c.call(this,fe(ct),ct),xe&&xe.call(this,ct)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(fe,xe,Le){return this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([xe,Le]),fe.position={start:a(xe.start)},fe}function f(fe){return xe;function xe(Le){fe&&fe.call(this,Le),d.call(this,Le)}}function d(fe,xe){const Le=this.stack.pop(),ct=this.tokenStack.pop();if(ct)ct[0].type!==fe.type&&(xe?xe.call(this,fe,ct[0]):(ct[1]||Ufe).call(this,fe,ct[0]));else throw new Error("Cannot close `"+fe.type+"` ("+uw({start:fe.start,end:fe.end})+"): its not open");return Le.position.end=a(fe.end),Le}function h(){return Jgt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(fe){if(o("expectingFirstListItemValue")){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(fe),10),s("expectingFirstListItemValue")}}function g(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=fe}function y(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=fe}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function w(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/(\r?\n|\r)$/g,"")}function x(fe){const xe=this.resume(),Le=this.stack[this.stack.length-1];Le.label=xe,Le.identifier=lw(this.sliceSerialize(fe)).toLowerCase()}function E(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function b(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function T(fe){const xe=this.stack[this.stack.length-1];if(!xe.depth){const Le=this.sliceSerialize(fe).length;xe.depth=Le}}function C(){s("setextHeadingSlurpLineEnding",!0)}function A(fe){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(fe).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function N(fe){const xe=this.stack[this.stack.length-1];let Le=xe.children[xe.children.length-1];(!Le||Le.type!=="text")&&(Le=Ht(),Le.position={start:a(fe.start)},xe.children.push(Le)),this.stack.push(Le)}function k(fe){const xe=this.stack.pop();xe.value+=this.sliceSerialize(fe),xe.position.end=a(fe.end)}function L(fe){const xe=this.stack[this.stack.length-1];if(o("atHardBreak")){const Le=xe.children[xe.children.length-1];Le.position.end=a(fe.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(xe.type)&&(N.call(this,fe),k.call(this,fe))}function B(){s("atHardBreak",!0)}function U(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function G(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function H(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function Y(){const fe=this.stack[this.stack.length-1];o("inReference")?(fe.type+="Reference",fe.referenceType=o("referenceType")||"shortcut",delete fe.url,delete fe.title):(delete fe.identifier,delete fe.label),s("referenceType")}function q(){const fe=this.stack[this.stack.length-1];o("inReference")?(fe.type+="Reference",fe.referenceType=o("referenceType")||"shortcut",delete fe.url,delete fe.title):(delete fe.identifier,delete fe.label),s("referenceType")}function D(fe){const xe=this.stack[this.stack.length-2],Le=this.sliceSerialize(fe);xe.label=Wyt(Le),xe.identifier=lw(Le).toLowerCase()}function M(){const fe=this.stack[this.stack.length-1],xe=this.resume(),Le=this.stack[this.stack.length-1];s("inReference",!0),Le.type==="link"?Le.children=fe.children:Le.alt=xe}function W(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function z(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function V(){s("inReference")}function te(){s("referenceType","collapsed")}function le(fe){const xe=this.resume(),Le=this.stack[this.stack.length-1];Le.label=xe,Le.identifier=lw(this.sliceSerialize(fe)).toLowerCase(),s("referenceType","full")}function me(fe){s("characterReferenceType",fe.type)}function ye(fe){const xe=this.sliceSerialize(fe),Le=o("characterReferenceType");let ct;Le?(ct=hOe(xe,Le==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):ct=JY(xe);const Je=this.stack.pop();Je.value+=ct,Je.position.end=a(fe.end)}function de(fe){k.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(fe)}function we(fe){k.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(fe)}function he(){return{type:"blockquote",children:[]}}function Ve(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function Ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Fe(){return{type:"emphasis",children:[]}}function De(){return{type:"heading",depth:void 0,children:[]}}function He(){return{type:"break"}}function Qt(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function qe(){return{type:"link",title:null,url:"",children:[]}}function Pt(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function at(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function ht(){return{type:"paragraph",children:[]}}function vt(){return{type:"strong",children:[]}}function Ht(){return{type:"text",value:""}}function Xt(){return{type:"thematicBreak"}}}function pOe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?pOe(e,r):Xyt(e,r)}return e}function Xyt(e,t){let n;for(n in t)if(Bz.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(Bz.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function Ufe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+uw({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+uw({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+uw({start:t.start,end:t.end})+") is still open")}function Qyt(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return Yyt(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var Bs=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const T$={}.hasOwnProperty;function Jyt(e,t){const n=t.data||{};return"value"in t&&!(T$.call(n,"hName")||T$.call(n,"hProperties")||T$.call(n,"hChildren"))?e.augment(t,Bs("text",t.value)):e(t,"div",Aa(e,t))}function mOe(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return T$.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=Zyt:i=e.unknownHandler,(typeof i=="function"?i:Jyt)(e,t,n)}function Zyt(e,t){return"children"in t?{...t,children:Aa(e,t)}:t}function Aa(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=mOe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const gOe=function(e){if(e==null)return rvt;if(typeof e=="string")return nvt(e);if(typeof e=="object")return Array.isArray(e)?evt(e):tvt(e);if(typeof e=="function")return i4(e);throw new Error("Expected function, string, or object as test")};function evt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=gOe(e[n]);return i4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function tvt(e){return i4(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function nvt(e){return i4(t);function t(n){return n&&n.type===e}}function i4(e){return t;function t(...n){return!!e.call(this,...n)}}function rvt(){return!0}const ivt=!0,svt="skip",zfe=!1,ovt=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=gOe(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=avt(n(a,l)),h[0]===zfe))return h;if(a.children&&h[0]!==svt)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===zfe)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function avt(e){return Array.isArray(e)?e:typeof e=="number"?[ivt,e]:[e]}const eK=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),ovt(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},yOe=_Oe("start"),vOe=_Oe("end");function _Oe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function uvt(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const Vfe={}.hasOwnProperty;function lvt(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return eK(e,"definition",r=>{const i=Hfe(r.identifier);i&&!Vfe.call(t,i)&&(t[i]=r)}),n;function n(r){const i=Hfe(r);return i&&Vfe.call(t,i)?t[i]:null}}function Hfe(e){return String(e||"").toUpperCase()}function lS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&ll(e.charCodeAt(n+1))&&ll(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function hp(e,t){const n=[];let r=-1;for(t&&n.push(Bs("text",`
`));++r<e.length;)r&&n.push(Bs("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(Bs("text",`
`)),n}function cvt(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=Aa(e,r),s=String(r.identifier),o=lS(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:hp(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[Bs("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:hp(n,!0)},{type:"text",value:`
`}]}}function fvt(e,t){return e(t,"blockquote",hp(Aa(e,t),!0))}function dvt(e,t){return[e(t,"br"),Bs("text",`
`)]}function hvt(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[Bs("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function pvt(e,t){return e(t,"del",Aa(e,t))}function mvt(e,t){return e(t,"em",Aa(e,t))}function bOe(e,t){const n=String(t.identifier),r=lS(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[Bs("text",String(s))])])}function gvt(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},bOe(e,{type:"footnoteReference",identifier:i,position:t.position})}function yvt(e,t){return e(t,"h"+t.depth,Aa(e,t))}function vvt(e,t){return e.dangerous?e.augment(t,Bs("raw",t.value)):null}function wOe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return Bs("text","!["+t.alt+r);const i=Aa(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(Bs("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(Bs("text",r)),i}function _vt(e,t){const n=e.definition(t.identifier);if(!n)return wOe(e,t);const r={src:lS(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function bvt(e,t){const n={src:lS(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function wvt(e,t){return e(t,"code",[Bs("text",t.value.replace(/\r?\n|\r/g," "))])}function Evt(e,t){const n=e.definition(t.identifier);if(!n)return wOe(e,t);const r={href:lS(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,Aa(e,t))}function Svt(e,t){const n={href:lS(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Aa(e,t))}function xvt(e,t,n){const r=Aa(e,t),i=n?Tvt(n):EOe(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(Bs("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(Bs("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(Bs("text",`
`)),e(t,"li",s,o)}function Tvt(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=EOe(n[r]);return!!t}function EOe(e){const t=e.spread;return t??e.children.length>1}function Avt(e,t){const n={},r=t.ordered?"ol":"ul",i=Aa(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,hp(i,!0))}function Cvt(e,t){return e(t,"p",Aa(e,t))}function Ivt(e,t){return e.augment(t,Bs("root",hp(Aa(e,t))))}function Ovt(e,t){return e(t,"strong",Aa(e,t))}function Pvt(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?Aa(e,f):[]))}s[r]=e(n[r],"tr",hp(u,!0))}return e(t,"table",hp([e(s[0].position,"thead",hp([s[0]],!0))].concat(s[1]?e({start:yOe(s[1]),end:vOe(s[s.length-1])},"tbody",hp(s.slice(1),!0)):[]),!0))}const qfe=9,Wfe=32;function kvt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Gfe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Gfe(t.slice(i),i>0,!1)),s.join("")}function Gfe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===qfe||s===Wfe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===qfe||s===Wfe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function $vt(e,t){return e.augment(t,Bs("text",kvt(String(t.value))))}function Rvt(e,t){return e(t,"hr")}const Nvt={blockquote:fvt,break:dvt,code:hvt,delete:pvt,emphasis:mvt,footnoteReference:bOe,footnote:gvt,heading:yvt,html:vvt,imageReference:_vt,image:bvt,inlineCode:wvt,linkReference:Evt,link:Svt,listItem:xvt,list:Avt,paragraph:Cvt,root:Ivt,strong:Ovt,table:Pvt,text:$vt,thematicBreak:Rvt,toml:jP,yaml:jP,definition:jP,footnoteDefinition:jP};function jP(){return null}const Dvt={}.hasOwnProperty;function Mvt(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=lvt(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...Nvt,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,eK(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();Dvt.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};uvt(l)||(u.position={start:yOe(l),end:vOe(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function SOe(e,t){const n=Mvt(e,t),r=mOe(n,e,null),i=cvt(n);return i&&r.children.push(Bs("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const Lvt=function(e,t){return e&&"run"in e?Bvt(e,t):jvt(e||t)},Fvt=Lvt;function Bvt(e,t){return(n,r,i)=>{e.run(SOe(n,t),r,s=>{i(s)})}}function jvt(e){return t=>SOe(t,e)}let gI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};gI.prototype.property={};gI.prototype.normal={};gI.prototype.space=null;function xOe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new gI(n,r,t)}function MA(e){return e.toLowerCase()}let Tc=class{constructor(t,n){this.property=t,this.attribute=n}};Tc.prototype.space=null;Tc.prototype.boolean=!1;Tc.prototype.booleanish=!1;Tc.prototype.overloadedBoolean=!1;Tc.prototype.number=!1;Tc.prototype.commaSeparated=!1;Tc.prototype.spaceSeparated=!1;Tc.prototype.commaOrSpaceSeparated=!1;Tc.prototype.mustUseProperty=!1;Tc.prototype.defined=!1;let Uvt=0;const Pn=n_(),ms=n_(),TOe=n_(),rt=n_(),hi=n_(),cw=n_(),Qu=n_();function n_(){return 2**++Uvt}const jz=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pn,booleanish:ms,commaOrSpaceSeparated:Qu,commaSeparated:cw,number:rt,overloadedBoolean:TOe,spaceSeparated:hi},Symbol.toStringTag,{value:"Module"})),vB=Object.keys(jz);class tK extends Tc{constructor(t,n,r,i){let s=-1;if(super(t,n),Yfe(this,"space",i),typeof r=="number")for(;++s<vB.length;){const o=vB[s];Yfe(this,vB[s],(r&jz[o])===jz[o])}}}tK.prototype.defined=!0;function Yfe(e,t,n){n&&(e[t]=n)}const zvt={}.hasOwnProperty;function cS(e){const t={},n={};let r;for(r in e.properties)if(zvt.call(e.properties,r)){const i=e.properties[r],s=new tK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[MA(r)]=r,n[MA(s.attribute)]=r}return new gI(t,n,e.space)}const AOe=cS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),COe=cS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function IOe(e,t){return t in e?e[t]:t}function OOe(e,t){return IOe(e,t.toLowerCase())}const POe=cS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:OOe,properties:{xmlns:null,xmlnsXLink:null}}),kOe=cS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ms,ariaAutoComplete:null,ariaBusy:ms,ariaChecked:ms,ariaColCount:rt,ariaColIndex:rt,ariaColSpan:rt,ariaControls:hi,ariaCurrent:null,ariaDescribedBy:hi,ariaDetails:null,ariaDisabled:ms,ariaDropEffect:hi,ariaErrorMessage:null,ariaExpanded:ms,ariaFlowTo:hi,ariaGrabbed:ms,ariaHasPopup:null,ariaHidden:ms,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hi,ariaLevel:rt,ariaLive:null,ariaModal:ms,ariaMultiLine:ms,ariaMultiSelectable:ms,ariaOrientation:null,ariaOwns:hi,ariaPlaceholder:null,ariaPosInSet:rt,ariaPressed:ms,ariaReadOnly:ms,ariaRelevant:null,ariaRequired:ms,ariaRoleDescription:hi,ariaRowCount:rt,ariaRowIndex:rt,ariaRowSpan:rt,ariaSelected:ms,ariaSetSize:rt,ariaSort:null,ariaValueMax:rt,ariaValueMin:rt,ariaValueNow:rt,ariaValueText:null,role:null}}),Vvt=cS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:OOe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cw,acceptCharset:hi,accessKey:hi,action:null,allow:null,allowFullScreen:Pn,allowPaymentRequest:Pn,allowUserMedia:Pn,alt:null,as:null,async:Pn,autoCapitalize:null,autoComplete:hi,autoFocus:Pn,autoPlay:Pn,capture:Pn,charSet:null,checked:Pn,cite:null,className:hi,cols:rt,colSpan:null,content:null,contentEditable:ms,controls:Pn,controlsList:hi,coords:rt|cw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pn,defer:Pn,dir:null,dirName:null,disabled:Pn,download:TOe,draggable:ms,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pn,formTarget:null,headers:hi,height:rt,hidden:Pn,high:rt,href:null,hrefLang:null,htmlFor:hi,httpEquiv:hi,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:Pn,itemId:null,itemProp:hi,itemRef:hi,itemScope:Pn,itemType:hi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pn,low:rt,manifest:null,max:null,maxLength:rt,media:null,method:null,min:null,minLength:rt,multiple:Pn,muted:Pn,name:null,nonce:null,noModule:Pn,noValidate:Pn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pn,optimum:rt,pattern:null,ping:hi,placeholder:null,playsInline:Pn,poster:null,preload:null,readOnly:Pn,referrerPolicy:null,rel:hi,required:Pn,reversed:Pn,rows:rt,rowSpan:rt,sandbox:hi,scope:null,scoped:Pn,seamless:Pn,selected:Pn,shape:null,size:rt,sizes:null,slot:null,span:rt,spellCheck:ms,src:null,srcDoc:null,srcLang:null,srcSet:null,start:rt,step:null,style:null,tabIndex:rt,target:null,title:null,translate:null,type:null,typeMustMatch:Pn,useMap:null,value:ms,width:rt,wrap:null,align:null,aLink:null,archive:hi,axis:null,background:null,bgColor:null,border:rt,borderColor:null,bottomMargin:rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pn,declare:Pn,event:null,face:null,frame:null,frameBorder:null,hSpace:rt,leftMargin:rt,link:null,longDesc:null,lowSrc:null,marginHeight:rt,marginWidth:rt,noResize:Pn,noHref:Pn,noShade:Pn,noWrap:Pn,object:null,profile:null,prompt:null,rev:null,rightMargin:rt,rules:null,scheme:null,scrolling:ms,standby:null,summary:null,text:null,topMargin:rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pn,disableRemotePlayback:Pn,prefix:null,property:null,results:rt,security:null,unselectable:null}}),Hvt=cS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:IOe,properties:{about:Qu,accentHeight:rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:rt,amplitude:rt,arabicForm:null,ascent:rt,attributeName:null,attributeType:null,azimuth:rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:rt,by:null,calcMode:null,capHeight:rt,className:hi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:rt,diffuseConstant:rt,direction:null,display:null,dur:null,divisor:rt,dominantBaseline:null,download:Pn,dx:null,dy:null,edgeMode:null,editable:null,elevation:rt,enableBackground:null,end:null,event:null,exponent:rt,externalResourcesRequired:null,fill:null,fillOpacity:rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cw,g2:cw,glyphName:cw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:rt,horizOriginX:rt,horizOriginY:rt,id:null,ideographic:rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:rt,k:rt,k1:rt,k2:rt,k3:rt,k4:rt,kernelMatrix:Qu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:rt,overlineThickness:rt,paintOrder:null,panose1:null,path:null,pathLength:rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:rt,pointsAtY:rt,pointsAtZ:rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Qu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Qu,rev:Qu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Qu,requiredFeatures:Qu,requiredFonts:Qu,requiredFormats:Qu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:rt,specularExponent:rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:rt,strikethroughThickness:rt,string:null,stroke:null,strokeDashArray:Qu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:rt,strokeOpacity:rt,strokeWidth:null,style:null,surfaceScale:rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Qu,tabIndex:rt,tableValues:null,target:null,targetX:rt,targetY:rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Qu,to:null,transform:null,u1:null,u2:null,underlinePosition:rt,underlineThickness:rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:rt,values:null,vAlphabetic:rt,vMathematical:rt,vectorEffect:null,vHanging:rt,vIdeographic:rt,version:null,vertAdvY:rt,vertOriginX:rt,vertOriginY:rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),qvt=/^data[-\w.:]+$/i,Kfe=/-[a-z]/g,Wvt=/[A-Z]/g;function s4(e,t){const n=MA(t);let r=t,i=Tc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&qvt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Kfe,Yvt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Kfe.test(s)){let o=s.replace(Wvt,Gvt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=tK}return new i(r,t)}function Gvt(e){return"-"+e.toLowerCase()}function Yvt(e){return e.charAt(1).toUpperCase()}const Xfe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},yI=xOe([COe,AOe,POe,kOe,Vvt],"html"),fS=xOe([COe,AOe,POe,kOe,Hvt],"svg");function Kvt(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{eK(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var $Oe={exports:{}},Fr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nK=Symbol.for("react.element"),rK=Symbol.for("react.portal"),o4=Symbol.for("react.fragment"),a4=Symbol.for("react.strict_mode"),u4=Symbol.for("react.profiler"),l4=Symbol.for("react.provider"),c4=Symbol.for("react.context"),Xvt=Symbol.for("react.server_context"),f4=Symbol.for("react.forward_ref"),d4=Symbol.for("react.suspense"),h4=Symbol.for("react.suspense_list"),p4=Symbol.for("react.memo"),m4=Symbol.for("react.lazy"),Qvt=Symbol.for("react.offscreen"),ROe;ROe=Symbol.for("react.module.reference");function Ac(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nK:switch(e=e.type,e){case o4:case u4:case a4:case d4:case h4:return e;default:switch(e=e&&e.$$typeof,e){case Xvt:case c4:case f4:case m4:case p4:case l4:return e;default:return t}}case rK:return t}}}Fr.ContextConsumer=c4;Fr.ContextProvider=l4;Fr.Element=nK;Fr.ForwardRef=f4;Fr.Fragment=o4;Fr.Lazy=m4;Fr.Memo=p4;Fr.Portal=rK;Fr.Profiler=u4;Fr.StrictMode=a4;Fr.Suspense=d4;Fr.SuspenseList=h4;Fr.isAsyncMode=function(){return!1};Fr.isConcurrentMode=function(){return!1};Fr.isContextConsumer=function(e){return Ac(e)===c4};Fr.isContextProvider=function(e){return Ac(e)===l4};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nK};Fr.isForwardRef=function(e){return Ac(e)===f4};Fr.isFragment=function(e){return Ac(e)===o4};Fr.isLazy=function(e){return Ac(e)===m4};Fr.isMemo=function(e){return Ac(e)===p4};Fr.isPortal=function(e){return Ac(e)===rK};Fr.isProfiler=function(e){return Ac(e)===u4};Fr.isStrictMode=function(e){return Ac(e)===a4};Fr.isSuspense=function(e){return Ac(e)===d4};Fr.isSuspenseList=function(e){return Ac(e)===h4};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===o4||e===u4||e===a4||e===d4||e===h4||e===Qvt||typeof e=="object"&&e!==null&&(e.$$typeof===m4||e.$$typeof===p4||e.$$typeof===l4||e.$$typeof===c4||e.$$typeof===f4||e.$$typeof===ROe||e.getModuleId!==void 0)};Fr.typeOf=Ac;$Oe.exports=Fr;var Jvt=$Oe.exports;const Zvt=Pl(Jvt);function e1t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function Qfe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function NOe(e){return e.join(" ").trim()}function Jfe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function DOe(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var iK={exports:{}},Zfe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t1t=/\n/g,n1t=/^\s*/,r1t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i1t=/^:\s*/,s1t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o1t=/^[;\s]*/,a1t=/^\s+|\s+$/g,u1t=`
`,ede="/",tde="*",ov="",l1t="comment",c1t="declaration",f1t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(t1t);m&&(n+=m.length);var g=p.lastIndexOf(u1t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(n1t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(ede!=e.charAt(0)||tde!=e.charAt(1))){for(var m=2;ov!=e.charAt(m)&&(tde!=e.charAt(m)||ede!=e.charAt(m+1));)++m;if(m+=2,ov===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:l1t,comment:g})}}function d(){var p=s(),m=u(r1t);if(m){if(f(),!u(i1t))return a("property missing ':'");var g=u(s1t),y=p({type:c1t,property:nde(m[0].replace(Zfe,ov)),value:g?nde(g[0].replace(Zfe,ov)):ov});return u(o1t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function nde(e){return e?e.replace(a1t,ov):ov}var d1t=f1t;function MOe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=d1t(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}iK.exports=MOe;iK.exports.default=MOe;var h1t=iK.exports;const p1t=Pl(h1t),Uz={}.hasOwnProperty,m1t=new Set(["table","thead","tbody","tfoot","tr"]);function LOe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(g1t(e,i,r,t)):i.type==="text"?(t.type!=="element"||!m1t.has(t.tagName)||!e1t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function g1t(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?wgt:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=fS,e.schema=l),t.properties)for(c in t.properties)Uz.call(t.properties,c)&&v1t(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=LOe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&Uz.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===j.Fragment;if(!Zvt.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=y1t(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=_B(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=w1t(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=_B(r,t),u.siblingCount=_B(r)),p||(u.node=t),f.length>0?j.createElement(h,u,f):j.createElement(h,u)}function y1t(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function _B(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function v1t(e,t,n,r){const i=s4(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?DOe(s):NOe(s)),i.property==="style"&&typeof s=="string"&&(s=_1t(s)),i.space&&i.property?e[Uz.call(Xfe,i.property)?Xfe[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function _1t(e){const t={};try{p1t(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,b1t)]=i}}function b1t(e,t){return t.toUpperCase()}function w1t(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const rde={}.hasOwnProperty,E1t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",UP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function FOe(e){for(const s in UP)if(rde.call(UP,s)&&rde.call(e,s)){const o=UP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${E1t}#${o.id}> for more info)`),delete UP[s]}const t=Ygt().use(Qyt).use(e.remarkPlugins||[]).use(Fvt,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(Kvt,e),n=new Rgt;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=j.createElement(j.Fragment,{},LOe({options:e,schema:yI,listDepth:0},r));return e.className&&(i=j.createElement("div",{className:e.className},i)),i}FOe.propTypes={children:Yt.string,className:Yt.string,allowElement:Yt.func,allowedElements:Yt.arrayOf(Yt.string),disallowedElements:Yt.arrayOf(Yt.string),unwrapDisallowed:Yt.bool,remarkPlugins:Yt.arrayOf(Yt.oneOfType([Yt.object,Yt.func,Yt.arrayOf(Yt.oneOfType([Yt.bool,Yt.string,Yt.object,Yt.func,Yt.arrayOf(Yt.any)]))])),rehypePlugins:Yt.arrayOf(Yt.oneOfType([Yt.object,Yt.func,Yt.arrayOf(Yt.oneOfType([Yt.bool,Yt.string,Yt.object,Yt.func,Yt.arrayOf(Yt.any)]))])),sourcePos:Yt.bool,rawSourcePos:Yt.bool,skipHtml:Yt.bool,includeElementIndex:Yt.bool,transformLinkUri:Yt.oneOfType([Yt.func,Yt.bool]),linkTarget:Yt.oneOfType([Yt.func,Yt.string]),transformImageUri:Yt.func,components:Yt.object};const BOe=-1,g4=0,ZD=1,e3=2,sK=3,oK=4,aK=5,uK=6,jOe=7,UOe=8,ide=typeof self=="object"?self:globalThis,S1t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case g4:case BOe:return n(o,i);case ZD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case e3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case sK:return n(new Date(o),i);case oK:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case aK:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case uK:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case jOe:{const{name:a,message:u}=o;return n(new ide[a](u),i)}case UOe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new ide[s](o),i)};return r},sde=e=>S1t(new Map,e)(0),z_="",{toString:x1t}={},{keys:T1t}=Object,Px=e=>{const t=typeof e;if(t!=="object"||!e)return[g4,t];const n=x1t.call(e).slice(8,-1);switch(n){case"Array":return[ZD,z_];case"Object":return[e3,z_];case"Date":return[sK,z_];case"RegExp":return[oK,z_];case"Map":return[aK,z_];case"Set":return[uK,z_]}return n.includes("Array")?[ZD,n]:n.includes("Error")?[jOe,n]:[e3,n]},zP=([e,t])=>e===g4&&(t==="function"||t==="symbol"),A1t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Px(o);switch(a){case g4:{let c=o;switch(u){case"bigint":a=UOe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([BOe],o)}return i([a,c],o)}case ZD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case e3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of T1t(o))(e||!zP(Px(o[d])))&&c.push([s(d),s(o[d])]);return f}case sK:return i([a,o.toISOString()],o);case oK:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case aK:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(zP(Px(d))||zP(Px(h))))&&c.push([s(d),s(h)]);return f}case uK:{const c=[],f=i([a,c],o);for(const d of o)(e||!zP(Px(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},ode=(e,{json:t,lossy:n}={})=>{const r=[];return A1t(!(t||n),!!t,new Map,r)(e),r},ade=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?sde(ode(e,t)):structuredClone(e):(e,t)=>sde(ode(e,t)),ude=/[#.]/g;function C1t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){ude.lastIndex=i;const a=ude.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const I1t=new Set(["button","menu","reset","submit"]),zz={}.hasOwnProperty;function zOe(e,t,n){const r=n&&$1t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=C1t(s,t),l.tagName=l.tagName.toLowerCase(),r&&zz.call(r,l.tagName)&&(l.tagName=r[l.tagName]),O1t(o,l.tagName)){let c;for(c in o)zz.call(o,c)&&P1t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)Vz(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function O1t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?I1t.has(e.type.toLowerCase()):!("value"in e)}function P1t(e,t,n,r){const i=s4(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Qfe(r):i.commaSeparated?o=Jfe(r):i.commaOrSpaceSeparated?o=Qfe(Jfe(r).join(" ")):o=lde(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?k1t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=lde(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function Vz(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)Vz(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?Vz(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function lde(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||MA(n)===MA(t)))return!0}return n}function k1t(e){const t=[];let n;for(n in e)zz.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function $1t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const R1t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],N1t=zOe(yI,"div"),D1t=zOe(fS,"g",R1t),bB=/\r?\n|\r/g;function M1t(e){const t=String(e),n=[];for(bB.lastIndex=0;bB.test(t);)n.push(bB.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Ev={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},VOe={}.hasOwnProperty,L1t=Object.prototype;function F1t(e,t){const n=t||{};return lK({file:n.file||void 0,location:!1,schema:n.space==="svg"?fS:yI,verbose:n.verbose||!1},e)}function lK(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},A$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:HOe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=M1t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},A$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},A$(e,r,n),n}default:return n=B1t(e,t),n}}function HOe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=lK(e,t[n]);r.push(i)}return r}function B1t(e,t){const n=e.schema;e.schema=t.namespaceURI===Ev.svg?fS:yI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;VOe.call(L1t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?D1t:N1t)(t.tagName,i,HOe(e,t.childNodes));if(A$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Fb(u.startTag),c=u&&u.endTag&&Fb(u.endTag),f=lK(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function A$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=j1t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function j1t(e,t,n){const r=Fb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)VOe.call(n.attrs,o)&&(s[s4(e.schema,o).property]=Fb(n.attrs[o]));n.startTag;const a=Fb(n.startTag),u=n.endTag?Fb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Fb(e){const t=cde({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=cde({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function cde(e){return e.line&&e.column?e:void 0}const fde={}.hasOwnProperty;function qOe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&fde.call(i,e)){const u=String(i[e]);o=fde.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const U1t={},z1t={}.hasOwnProperty,WOe=qOe("type",{handlers:{root:H1t,element:K1t,text:G1t,comment:Y1t,doctype:W1t}});function V1t(e,t){const r=(t||U1t).space;return WOe(e,r==="svg"?fS:yI)}function H1t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=cK(e.children,n,t),dS(e,n),n}function q1t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=cK(e.children,n,t),dS(e,n),n}function W1t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return dS(e,t),t}function G1t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return dS(e,t),t}function Y1t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return dS(e,t),t}function K1t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=fS);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&z1t.call(e.properties,s)){const u=X1t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Ev[o],childNodes:[],parentNode:null};return a.childNodes=cK(e.children,a,r),dS(e,a),e.tagName==="template"&&e.content&&(a.content=q1t(e.content,r)),a}function X1t(e,t,n){const r=s4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?DOe(n):NOe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Ev[r.space]}return i}function cK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=WOe(e[r],n);s.parentNode=t,i.push(s)}return i}function dS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Q1t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],J1t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),xi="";var J;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(J=J||(J={}));const su={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function GOe(e){return e>=55296&&e<=57343}function Z1t(e){return e>=56320&&e<=57343}function e_t(e,t){return(e-55296)*1024+9216+t}function YOe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function KOe(e){return e>=64976&&e<=65007||J1t.has(e)}var Ce;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ce=Ce||(Ce={}));const t_t=65536;class n_t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=t_t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Z1t(n))return this.pos++,this._addGap(),e_t(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,J.EOF;return this._err(Ce.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,J.EOF;const r=this.html.charCodeAt(n);return r===J.CARRIAGE_RETURN?J.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,J.EOF;let t=this.html.charCodeAt(this.pos);return t===J.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,J.LINE_FEED):t===J.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,GOe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===J.LINE_FEED||t===J.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){YOe(t)?this._err(Ce.controlCharacterInInputStream):KOe(t)&&this._err(Ce.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var $n;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})($n=$n||($n={}));function XOe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Wm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),r_t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var wB;const i_t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),s_t=(wB=String.fromCodePoint)!==null&&wB!==void 0?wB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function o_t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=i_t.get(e))!==null&&t!==void 0?t:e}var eo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(eo||(eo={}));const a_t=32;var Ad;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ad||(Ad={}));function Hz(e){return e>=eo.ZERO&&e<=eo.NINE}function u_t(e){return e>=eo.UPPER_A&&e<=eo.UPPER_F||e>=eo.LOWER_A&&e<=eo.LOWER_F}function l_t(e){return e>=eo.UPPER_A&&e<=eo.UPPER_Z||e>=eo.LOWER_A&&e<=eo.LOWER_Z||Hz(e)}function c_t(e){return e===eo.EQUALS||l_t(e)}var Ys;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ys||(Ys={}));var av;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(av||(av={}));class f_t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ys.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=av.Strict}startEntity(t){this.decodeMode=t,this.state=Ys.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ys.EntityStart:return t.charCodeAt(n)===eo.NUM?(this.state=Ys.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ys.NamedEntity,this.stateNamedEntity(t,n));case Ys.NumericStart:return this.stateNumericStart(t,n);case Ys.NumericDecimal:return this.stateNumericDecimal(t,n);case Ys.NumericHex:return this.stateNumericHex(t,n);case Ys.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|a_t)===eo.LOWER_X?(this.state=Ys.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ys.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Hz(i)||u_t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Hz(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===eo.SEMI)this.consumed+=1;else if(this.decodeMode===av.Strict)return 0;return this.emitCodePoint(o_t(this.result),this.consumed),this.errors&&(t!==eo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Ad.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=JOe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===av.Attribute&&(s===0||c_t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Ad.VALUE_LENGTH)>>14,s!==0){if(o===eo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==av.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Ad.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Ad.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ys.NamedEntity:return this.result!==0&&(this.decodeMode!==av.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ys.NumericDecimal:return this.emitNumericEntity(0,2);case Ys.NumericHex:return this.emitNumericEntity(0,3);case Ys.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ys.EntityStart:return 0}}}function QOe(e){let t="";const n=new f_t(e,r=>t+=s_t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function JOe(e,t,n,r){const i=(t&Ad.BRANCH_LENGTH)>>7,s=t&Ad.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}QOe(Wm);QOe(r_t);var Re;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Re=Re||(Re={}));var Wg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Wg=Wg||(Wg={}));var nl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(nl=nl||(nl={}));var be;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(be=be||(be={}));var I;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(I=I||(I={}));const d_t=new Map([[be.A,I.A],[be.ADDRESS,I.ADDRESS],[be.ANNOTATION_XML,I.ANNOTATION_XML],[be.APPLET,I.APPLET],[be.AREA,I.AREA],[be.ARTICLE,I.ARTICLE],[be.ASIDE,I.ASIDE],[be.B,I.B],[be.BASE,I.BASE],[be.BASEFONT,I.BASEFONT],[be.BGSOUND,I.BGSOUND],[be.BIG,I.BIG],[be.BLOCKQUOTE,I.BLOCKQUOTE],[be.BODY,I.BODY],[be.BR,I.BR],[be.BUTTON,I.BUTTON],[be.CAPTION,I.CAPTION],[be.CENTER,I.CENTER],[be.CODE,I.CODE],[be.COL,I.COL],[be.COLGROUP,I.COLGROUP],[be.DD,I.DD],[be.DESC,I.DESC],[be.DETAILS,I.DETAILS],[be.DIALOG,I.DIALOG],[be.DIR,I.DIR],[be.DIV,I.DIV],[be.DL,I.DL],[be.DT,I.DT],[be.EM,I.EM],[be.EMBED,I.EMBED],[be.FIELDSET,I.FIELDSET],[be.FIGCAPTION,I.FIGCAPTION],[be.FIGURE,I.FIGURE],[be.FONT,I.FONT],[be.FOOTER,I.FOOTER],[be.FOREIGN_OBJECT,I.FOREIGN_OBJECT],[be.FORM,I.FORM],[be.FRAME,I.FRAME],[be.FRAMESET,I.FRAMESET],[be.H1,I.H1],[be.H2,I.H2],[be.H3,I.H3],[be.H4,I.H4],[be.H5,I.H5],[be.H6,I.H6],[be.HEAD,I.HEAD],[be.HEADER,I.HEADER],[be.HGROUP,I.HGROUP],[be.HR,I.HR],[be.HTML,I.HTML],[be.I,I.I],[be.IMG,I.IMG],[be.IMAGE,I.IMAGE],[be.INPUT,I.INPUT],[be.IFRAME,I.IFRAME],[be.KEYGEN,I.KEYGEN],[be.LABEL,I.LABEL],[be.LI,I.LI],[be.LINK,I.LINK],[be.LISTING,I.LISTING],[be.MAIN,I.MAIN],[be.MALIGNMARK,I.MALIGNMARK],[be.MARQUEE,I.MARQUEE],[be.MATH,I.MATH],[be.MENU,I.MENU],[be.META,I.META],[be.MGLYPH,I.MGLYPH],[be.MI,I.MI],[be.MO,I.MO],[be.MN,I.MN],[be.MS,I.MS],[be.MTEXT,I.MTEXT],[be.NAV,I.NAV],[be.NOBR,I.NOBR],[be.NOFRAMES,I.NOFRAMES],[be.NOEMBED,I.NOEMBED],[be.NOSCRIPT,I.NOSCRIPT],[be.OBJECT,I.OBJECT],[be.OL,I.OL],[be.OPTGROUP,I.OPTGROUP],[be.OPTION,I.OPTION],[be.P,I.P],[be.PARAM,I.PARAM],[be.PLAINTEXT,I.PLAINTEXT],[be.PRE,I.PRE],[be.RB,I.RB],[be.RP,I.RP],[be.RT,I.RT],[be.RTC,I.RTC],[be.RUBY,I.RUBY],[be.S,I.S],[be.SCRIPT,I.SCRIPT],[be.SECTION,I.SECTION],[be.SELECT,I.SELECT],[be.SOURCE,I.SOURCE],[be.SMALL,I.SMALL],[be.SPAN,I.SPAN],[be.STRIKE,I.STRIKE],[be.STRONG,I.STRONG],[be.STYLE,I.STYLE],[be.SUB,I.SUB],[be.SUMMARY,I.SUMMARY],[be.SUP,I.SUP],[be.TABLE,I.TABLE],[be.TBODY,I.TBODY],[be.TEMPLATE,I.TEMPLATE],[be.TEXTAREA,I.TEXTAREA],[be.TFOOT,I.TFOOT],[be.TD,I.TD],[be.TH,I.TH],[be.THEAD,I.THEAD],[be.TITLE,I.TITLE],[be.TR,I.TR],[be.TRACK,I.TRACK],[be.TT,I.TT],[be.U,I.U],[be.UL,I.UL],[be.SVG,I.SVG],[be.VAR,I.VAR],[be.WBR,I.WBR],[be.XMP,I.XMP]]);function hS(e){var t;return(t=d_t.get(e))!==null&&t!==void 0?t:I.UNKNOWN}const Ke=I,h_t={[Re.HTML]:new Set([Ke.ADDRESS,Ke.APPLET,Ke.AREA,Ke.ARTICLE,Ke.ASIDE,Ke.BASE,Ke.BASEFONT,Ke.BGSOUND,Ke.BLOCKQUOTE,Ke.BODY,Ke.BR,Ke.BUTTON,Ke.CAPTION,Ke.CENTER,Ke.COL,Ke.COLGROUP,Ke.DD,Ke.DETAILS,Ke.DIR,Ke.DIV,Ke.DL,Ke.DT,Ke.EMBED,Ke.FIELDSET,Ke.FIGCAPTION,Ke.FIGURE,Ke.FOOTER,Ke.FORM,Ke.FRAME,Ke.FRAMESET,Ke.H1,Ke.H2,Ke.H3,Ke.H4,Ke.H5,Ke.H6,Ke.HEAD,Ke.HEADER,Ke.HGROUP,Ke.HR,Ke.HTML,Ke.IFRAME,Ke.IMG,Ke.INPUT,Ke.LI,Ke.LINK,Ke.LISTING,Ke.MAIN,Ke.MARQUEE,Ke.MENU,Ke.META,Ke.NAV,Ke.NOEMBED,Ke.NOFRAMES,Ke.NOSCRIPT,Ke.OBJECT,Ke.OL,Ke.P,Ke.PARAM,Ke.PLAINTEXT,Ke.PRE,Ke.SCRIPT,Ke.SECTION,Ke.SELECT,Ke.SOURCE,Ke.STYLE,Ke.SUMMARY,Ke.TABLE,Ke.TBODY,Ke.TD,Ke.TEMPLATE,Ke.TEXTAREA,Ke.TFOOT,Ke.TH,Ke.THEAD,Ke.TITLE,Ke.TR,Ke.TRACK,Ke.UL,Ke.WBR,Ke.XMP]),[Re.MATHML]:new Set([Ke.MI,Ke.MO,Ke.MN,Ke.MS,Ke.MTEXT,Ke.ANNOTATION_XML]),[Re.SVG]:new Set([Ke.TITLE,Ke.FOREIGN_OBJECT,Ke.DESC]),[Re.XLINK]:new Set,[Re.XML]:new Set,[Re.XMLNS]:new Set};function ZOe(e){return e===Ke.H1||e===Ke.H2||e===Ke.H3||e===Ke.H4||e===Ke.H5||e===Ke.H6}be.STYLE,be.SCRIPT,be.XMP,be.IFRAME,be.NOEMBED,be.NOFRAMES,be.PLAINTEXT;const p_t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ee;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ee||(ee={}));const as={DATA:ee.DATA,RCDATA:ee.RCDATA,RAWTEXT:ee.RAWTEXT,SCRIPT_DATA:ee.SCRIPT_DATA,PLAINTEXT:ee.PLAINTEXT,CDATA_SECTION:ee.CDATA_SECTION};function S2(e){return e>=J.DIGIT_0&&e<=J.DIGIT_9}function xT(e){return e>=J.LATIN_CAPITAL_A&&e<=J.LATIN_CAPITAL_Z}function m_t(e){return e>=J.LATIN_SMALL_A&&e<=J.LATIN_SMALL_Z}function Gm(e){return m_t(e)||xT(e)}function qz(e){return Gm(e)||S2(e)}function ePe(e){return e>=J.LATIN_CAPITAL_A&&e<=J.LATIN_CAPITAL_F}function tPe(e){return e>=J.LATIN_SMALL_A&&e<=J.LATIN_SMALL_F}function g_t(e){return S2(e)||ePe(e)||tPe(e)}function VP(e){return e+32}function nPe(e){return e===J.SPACE||e===J.LINE_FEED||e===J.TABULATION||e===J.FORM_FEED}function y_t(e){return e===J.EQUALS_SIGN||qz(e)}function dde(e){return nPe(e)||e===J.SOLIDUS||e===J.GREATER_THAN_SIGN}class v_t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ee.DATA,this.returnState=ee.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new n_t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:$n.START_TAG,tagName:"",tagID:I.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:$n.END_TAG,tagName:"",tagID:I.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:$n.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:$n.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(XOe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ce.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=hS(t.tagName),t.type===$n.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ce.endTagWithAttributes),t.selfClosing&&this._err(Ce.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case $n.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case $n.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case $n.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:$n.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=nPe(t)?$n.WHITESPACE_CHARACTER:t===J.NULL?$n.NULL_CHARACTER:$n.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken($n.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Wm[0];s>=0&&(s=JOe(Wm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Wm[s];const a=o&Ad.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==J.SEMICOLON&&this._isCharacterReferenceInAttribute()&&y_t(this.preprocessor.peek(1))?(n=[J.AMPERSAND],s+=u):(n=u===0?[Wm[s]&~Ad.VALUE_LENGTH]:u===1?[Wm[++s]]:[Wm[++s],Wm[++s]],r=0,i=t!==J.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ce.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ee.DATA:{this._stateData(t);break}case ee.RCDATA:{this._stateRcdata(t);break}case ee.RAWTEXT:{this._stateRawtext(t);break}case ee.SCRIPT_DATA:{this._stateScriptData(t);break}case ee.PLAINTEXT:{this._statePlaintext(t);break}case ee.TAG_OPEN:{this._stateTagOpen(t);break}case ee.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ee.TAG_NAME:{this._stateTagName(t);break}case ee.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ee.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ee.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ee.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ee.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ee.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ee.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ee.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ee.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ee.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ee.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ee.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ee.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ee.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ee.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ee.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ee.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ee.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ee.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ee.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ee.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ee.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ee.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ee.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ee.COMMENT_START:{this._stateCommentStart(t);break}case ee.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ee.COMMENT:{this._stateComment(t);break}case ee.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ee.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ee.COMMENT_END:{this._stateCommentEnd(t);break}case ee.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ee.DOCTYPE:{this._stateDoctype(t);break}case ee.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ee.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ee.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ee.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ee.CDATA_SECTION:{this._stateCdataSection(t);break}case ee.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ee.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ee.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ee.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ee.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ee.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ee.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ee.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case J.LESS_THAN_SIGN:{this.state=ee.TAG_OPEN;break}case J.AMPERSAND:{this.returnState=ee.DATA,this.state=ee.CHARACTER_REFERENCE;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitCodePoint(t);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case J.AMPERSAND:{this.returnState=ee.RCDATA,this.state=ee.CHARACTER_REFERENCE;break}case J.LESS_THAN_SIGN:{this.state=ee.RCDATA_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(xi);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case J.LESS_THAN_SIGN:{this.state=ee.RAWTEXT_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(xi);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(xi);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(xi);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Gm(t))this._createStartTagToken(),this.state=ee.TAG_NAME,this._stateTagName(t);else switch(t){case J.EXCLAMATION_MARK:{this.state=ee.MARKUP_DECLARATION_OPEN;break}case J.SOLIDUS:{this.state=ee.END_TAG_OPEN;break}case J.QUESTION_MARK:{this._err(Ce.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t);break}case J.EOF:{this._err(Ce.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ce.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ee.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Gm(t))this._createEndTagToken(),this.state=ee.TAG_NAME,this._stateTagName(t);else switch(t){case J.GREATER_THAN_SIGN:{this._err(Ce.missingEndTagName),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ce.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case J.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.tagName+=xi;break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(xT(t)?VP(t):t)}}_stateRcdataLessThanSign(t){t===J.SOLIDUS?this.state=ee.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Gm(t)?(this.state=ee.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ee.BEFORE_ATTRIBUTE_NAME,!1;case J.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ee.SELF_CLOSING_START_TAG,!1;case J.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ee.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===J.SOLIDUS?this.state=ee.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Gm(t)?(this.state=ee.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case J.SOLIDUS:{this.state=ee.SCRIPT_DATA_END_TAG_OPEN;break}case J.EXCLAMATION_MARK:{this.state=ee.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Gm(t)?(this.state=ee.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===J.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===J.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(xi);break}case J.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(xi);break}case J.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case J.HYPHEN_MINUS:{this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(xi);break}case J.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===J.SOLIDUS?this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Gm(t)?(this._emitChars("<"),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Gm(t)?(this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(su.SCRIPT,!1)&&dde(this.preprocessor.peek(su.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<su.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(xi);break}case J.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(xi);break}case J.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case J.HYPHEN_MINUS:{this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(xi);break}case J.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===J.SOLIDUS?(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(su.SCRIPT,!1)&&dde(this.preprocessor.peek(su.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<su.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.SOLIDUS:case J.GREATER_THAN_SIGN:case J.EOF:{this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case J.EQUALS_SIGN:{this._err(Ce.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ee.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:case J.SOLIDUS:case J.GREATER_THAN_SIGN:case J.EOF:{this._leaveAttrName(),this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case J.EQUALS_SIGN:{this._leaveAttrName(),this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case J.QUOTATION_MARK:case J.APOSTROPHE:case J.LESS_THAN_SIGN:{this._err(Ce.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.name+=xi;break}default:this.currentAttr.name+=String.fromCodePoint(xT(t)?VP(t):t)}}_stateAfterAttributeName(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case J.EQUALS_SIGN:{this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{this.state=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this.state=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ce.missingAttributeValue),this.state=ee.DATA,this.emitCurrentTagToken();break}default:this.state=ee.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case J.QUOTATION_MARK:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case J.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=xi;break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case J.APOSTROPHE:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case J.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=xi;break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case J.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_UNQUOTED,this.state=ee.CHARACTER_REFERENCE;break}case J.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=xi;break}case J.QUOTATION_MARK:case J.APOSTROPHE:case J.LESS_THAN_SIGN:case J.EQUALS_SIGN:case J.GRAVE_ACCENT:{this._err(Ce.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case J.SOLIDUS:{this._leaveAttrValue(),this.state=ee.SELF_CLOSING_START_TAG;break}case J.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._err(Ce.missingWhitespaceBetweenAttributes),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case J.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ee.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._err(Ce.unexpectedSolidusInTag),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.data+=xi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(su.DASH_DASH,!0)?(this._createCommentToken(su.DASH_DASH.length+1),this.state=ee.COMMENT_START):this._consumeSequenceIfMatch(su.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(su.DOCTYPE.length+1),this.state=ee.DOCTYPE):this._consumeSequenceIfMatch(su.CDATA_START,!0)?this.inForeignNode?this.state=ee.CDATA_SECTION:(this._err(Ce.cdataInHtmlContent),this._createCommentToken(su.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ee.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ce.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_START_DASH;break}case J.GREATER_THAN_SIGN:{this._err(Ce.abruptClosingOfEmptyComment),this.state=ee.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case J.GREATER_THAN_SIGN:{this._err(Ce.abruptClosingOfEmptyComment),this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ee.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_END_DASH;break}case J.LESS_THAN_SIGN:{n.data+="<",this.state=ee.COMMENT_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.data+=xi;break}case J.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case J.EXCLAMATION_MARK:{n.data+="!",this.state=ee.COMMENT_LESS_THAN_SIGN_BANG;break}case J.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===J.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ee.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===J.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ee.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==J.GREATER_THAN_SIGN&&t!==J.EOF&&this._err(Ce.nestedComment),this.state=ee.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case J.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EXCLAMATION_MARK:{this.state=ee.COMMENT_END_BANG;break}case J.HYPHEN_MINUS:{n.data+="-";break}case J.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{n.data+="--!",this.state=ee.COMMENT_END_DASH;break}case J.GREATER_THAN_SIGN:{this._err(Ce.incorrectlyClosedComment),this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ee.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case J.EOF:{this._err(Ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingWhitespaceBeforeDoctypeName),this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(xT(t))this._createDoctypeToken(String.fromCharCode(VP(t))),this.state=ee.DOCTYPE_NAME;else switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.NULL:{this._err(Ce.unexpectedNullCharacter),this._createDoctypeToken(xi),this.state=ee.DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ee.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.AFTER_DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.name+=xi;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(xT(t)?VP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(su.PUBLIC,!1)?this.state=ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(su.SYSTEM,!1)?this.state=ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ce.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.QUOTATION_MARK:{this._err(Ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(Ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case J.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.publicId+=xi;break}case J.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case J.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.publicId+=xi;break}case J.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.QUOTATION_MARK:{this._err(Ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(Ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.QUOTATION_MARK:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.QUOTATION_MARK:{this._err(Ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(Ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case J.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.systemId+=xi;break}case J.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case J.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter),n.systemId+=xi;break}case J.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.NULL:{this._err(Ce.unexpectedNullCharacter);break}case J.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case J.RIGHT_SQUARE_BRACKET:{this.state=ee.CDATA_SECTION_BRACKET;break}case J.EOF:{this._err(Ce.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===J.RIGHT_SQUARE_BRACKET?this.state=ee.CDATA_SECTION_END:(this._emitChars("]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case J.GREATER_THAN_SIGN:{this.state=ee.DATA;break}case J.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===J.NUMBER_SIGN?this.state=ee.NUMERIC_CHARACTER_REFERENCE:qz(t)?(this.state=ee.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this.state=ee.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){qz(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===J.SEMICOLON&&this._err(Ce.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===J.LATIN_SMALL_X||t===J.LATIN_CAPITAL_X?this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE_START:S2(t)?(this.state=ee.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(J.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){g_t(t)?(this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(J.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){ePe(t)?this.charRefCode=this.charRefCode*16+t-55:tPe(t)?this.charRefCode=this.charRefCode*16+t-87:S2(t)?this.charRefCode=this.charRefCode*16+t-48:t===J.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ce.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){S2(t)?this.charRefCode=this.charRefCode*10+t-48:t===J.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ce.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===J.NULL)this._err(Ce.nullCharacterReference),this.charRefCode=J.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ce.characterReferenceOutsideUnicodeRange),this.charRefCode=J.REPLACEMENT_CHARACTER;else if(GOe(this.charRefCode))this._err(Ce.surrogateCharacterReference),this.charRefCode=J.REPLACEMENT_CHARACTER;else if(KOe(this.charRefCode))this._err(Ce.noncharacterCharacterReference);else if(YOe(this.charRefCode)||this.charRefCode===J.CARRIAGE_RETURN){this._err(Ce.controlCharacterReference);const n=p_t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const rPe=new Set([I.DD,I.DT,I.LI,I.OPTGROUP,I.OPTION,I.P,I.RB,I.RP,I.RT,I.RTC]),hde=new Set([...rPe,I.CAPTION,I.COLGROUP,I.TBODY,I.TD,I.TFOOT,I.TH,I.THEAD,I.TR]),HP=new Map([[I.APPLET,Re.HTML],[I.CAPTION,Re.HTML],[I.HTML,Re.HTML],[I.MARQUEE,Re.HTML],[I.OBJECT,Re.HTML],[I.TABLE,Re.HTML],[I.TD,Re.HTML],[I.TEMPLATE,Re.HTML],[I.TH,Re.HTML],[I.ANNOTATION_XML,Re.MATHML],[I.MI,Re.MATHML],[I.MN,Re.MATHML],[I.MO,Re.MATHML],[I.MS,Re.MATHML],[I.MTEXT,Re.MATHML],[I.DESC,Re.SVG],[I.FOREIGN_OBJECT,Re.SVG],[I.TITLE,Re.SVG]]),__t=[I.H1,I.H2,I.H3,I.H4,I.H5,I.H6],b_t=[I.TR,I.TEMPLATE,I.HTML],w_t=[I.TBODY,I.TFOOT,I.THEAD,I.TEMPLATE,I.HTML],E_t=[I.TABLE,I.TEMPLATE,I.HTML],S_t=[I.TD,I.TH];class x_t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=I.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===I.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Re.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Re.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(__t,Re.HTML)}popUntilTableCellPopped(){this.popUntilPopped(S_t,Re.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(E_t,Re.HTML)}clearBackToTableBodyContext(){this.clearBackTo(w_t,Re.HTML)}clearBackToTableRowContext(){this.clearBackTo(b_t,Re.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===I.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===I.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Re.HTML)return!0;if(HP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(ZOe(n)&&r===Re.HTML)return!0;if(HP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Re.HTML)return!0;if((r===I.UL||r===I.OL)&&i===Re.HTML||HP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Re.HTML)return!0;if(r===I.BUTTON&&i===Re.HTML||HP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Re.HTML){if(r===t)return!0;if(r===I.TABLE||r===I.TEMPLATE||r===I.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Re.HTML){if(n===I.TBODY||n===I.THEAD||n===I.TFOOT)return!0;if(n===I.TABLE||n===I.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Re.HTML){if(r===t)return!0;if(r!==I.OPTION&&r!==I.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;rPe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;hde.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&hde.has(this.currentTagId);)this.pop()}}const EB=3;var Zc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Zc=Zc||(Zc={}));const pde={type:Zc.Marker};class T_t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Zc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<EB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<EB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=EB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(pde)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Zc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Zc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(pde);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Zc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Zc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Zc.Element&&n.element===t)}}function mde(e){return{nodeName:"#text",value:e,parentNode:null}}const lb={createDocument(){return{nodeName:"#document",mode:nl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};lb.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(lb.isTextNode(n)){n.value+=t;return}}lb.appendChild(e,mde(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&lb.isTextNode(r)?r.value+=t:lb.insertBefore(e,mde(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},iPe="html",A_t="about:legacy-compat",C_t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",sPe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],I_t=[...sPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],O_t=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),oPe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],P_t=[...oPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function gde(e,t){return t.some(n=>e.startsWith(n))}function k_t(e){return e.name===iPe&&e.publicId===null&&(e.systemId===null||e.systemId===A_t)}function $_t(e){if(e.name!==iPe)return nl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===C_t)return nl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),O_t.has(n))return nl.QUIRKS;let r=t===null?I_t:sPe;if(gde(n,r))return nl.QUIRKS;if(r=t===null?oPe:P_t,gde(n,r))return nl.LIMITED_QUIRKS}return nl.NO_QUIRKS}const yde={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},R_t="definitionurl",N_t="definitionURL",D_t=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),M_t=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Re.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Re.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Re.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Re.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Re.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Re.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Re.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Re.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Re.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Re.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Re.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Re.XMLNS}]]),L_t=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),F_t=new Set([I.B,I.BIG,I.BLOCKQUOTE,I.BODY,I.BR,I.CENTER,I.CODE,I.DD,I.DIV,I.DL,I.DT,I.EM,I.EMBED,I.H1,I.H2,I.H3,I.H4,I.H5,I.H6,I.HEAD,I.HR,I.I,I.IMG,I.LI,I.LISTING,I.MENU,I.META,I.NOBR,I.OL,I.P,I.PRE,I.RUBY,I.S,I.SMALL,I.SPAN,I.STRONG,I.STRIKE,I.SUB,I.SUP,I.TABLE,I.TT,I.U,I.UL,I.VAR]);function B_t(e){const t=e.tagID;return t===I.FONT&&e.attrs.some(({name:r})=>r===Wg.COLOR||r===Wg.SIZE||r===Wg.FACE)||F_t.has(t)}function aPe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===R_t){e.attrs[t].name=N_t;break}}function uPe(e){for(let t=0;t<e.attrs.length;t++){const n=D_t.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function fK(e){for(let t=0;t<e.attrs.length;t++){const n=M_t.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function j_t(e){const t=L_t.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=hS(e.tagName))}function U_t(e,t){return t===Re.MATHML&&(e===I.MI||e===I.MO||e===I.MN||e===I.MS||e===I.MTEXT)}function z_t(e,t,n){if(t===Re.MATHML&&e===I.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Wg.ENCODING){const i=n[r].value.toLowerCase();return i===yde.TEXT_HTML||i===yde.APPLICATION_XML}}return t===Re.SVG&&(e===I.FOREIGN_OBJECT||e===I.DESC||e===I.TITLE)}function V_t(e,t,n,r){return(!r||r===Re.HTML)&&z_t(e,t,n)||(!r||r===Re.MATHML)&&U_t(e,t)}const H_t="hidden",q_t=8,W_t=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const G_t={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},lPe=new Set([I.TABLE,I.TBODY,I.TFOOT,I.THEAD,I.TR]),vde={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:lb,onParseError:null};let _de=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...vde,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new v_t(this.options,this),this.activeFormattingElements=new T_t(this.treeAdapter),this.fragmentContextID=r?hS(this.treeAdapter.getTagName(r)):I.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new x_t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...vde,...n};t??(t=r.treeAdapter.createElement(be.TEMPLATE,Re.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Re.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===I.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:G_t,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Re.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Re.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=as.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===be.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Re.HTML))switch(this.fragmentContextID){case I.TITLE:case I.TEXTAREA:{this.tokenizer.state=as.RCDATA;break}case I.STYLE:case I.XMP:case I.IFRAME:case I.NOEMBED:case I.NOFRAMES:case I.NOSCRIPT:{this.tokenizer.state=as.RAWTEXT;break}case I.SCRIPT:{this.tokenizer.state=as.SCRIPT_DATA;break}case I.PLAINTEXT:{this.tokenizer.state=as.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Re.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Re.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(be.HTML,Re.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,I.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===$n.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===I.SVG&&this.treeAdapter.getTagName(n)===be.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Re.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===I.MGLYPH||t.tagID===I.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Re.HTML)}_processToken(t){switch(t.type){case $n.CHARACTER:{this.onCharacter(t);break}case $n.NULL_CHARACTER:{this.onNullCharacter(t);break}case $n.COMMENT:{this.onComment(t);break}case $n.DOCTYPE:{this.onDoctype(t);break}case $n.START_TAG:{this._processStartTag(t);break}case $n.END_TAG:{this.onEndTag(t);break}case $n.EOF:{this.onEof(t);break}case $n.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return V_t(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Zc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(I.P),this.openElements.popUntilTagNamePopped(I.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case I.TR:{this.insertionMode=ie.IN_ROW;return}case I.TBODY:case I.THEAD:case I.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case I.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case I.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case I.TABLE:{this.insertionMode=ie.IN_TABLE;return}case I.BODY:{this.insertionMode=ie.IN_BODY;return}case I.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case I.SELECT:{this._resetInsertionModeForSelect(t);return}case I.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case I.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case I.TD:case I.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case I.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===I.TEMPLATE)break;if(r===I.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return lPe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case I.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Re.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case I.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return h_t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Swt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{kx(this,t);break}case ie.BEFORE_HTML:{x2(this,t);break}case ie.BEFORE_HEAD:{T2(this,t);break}case ie.IN_HEAD:{A2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{C2(this,t);break}case ie.AFTER_HEAD:{I2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{fPe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{SB(this,t);break}case ie.IN_TABLE_TEXT:{yPe(this,t);break}case ie.IN_COLUMN_GROUP:{t3(this,t);break}case ie.AFTER_BODY:{n3(this,t);break}case ie.AFTER_AFTER_BODY:{C$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ewt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{kx(this,t);break}case ie.BEFORE_HTML:{x2(this,t);break}case ie.BEFORE_HEAD:{T2(this,t);break}case ie.IN_HEAD:{A2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{C2(this,t);break}case ie.AFTER_HEAD:{I2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{SB(this,t);break}case ie.IN_COLUMN_GROUP:{t3(this,t);break}case ie.AFTER_BODY:{n3(this,t);break}case ie.AFTER_AFTER_BODY:{C$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Wz(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{Wz(this,t);break}case ie.IN_TABLE_TEXT:{$x(this,t);break}case ie.AFTER_BODY:{ebt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{tbt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{nbt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ce.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{$x(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ce.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?xwt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{kx(this,t);break}case ie.BEFORE_HTML:{rbt(this,t);break}case ie.BEFORE_HEAD:{sbt(this,t);break}case ie.IN_HEAD:{Rf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{ubt(this,t);break}case ie.AFTER_HEAD:{cbt(this,t);break}case ie.IN_BODY:{Ca(this,t);break}case ie.IN_TABLE:{Xw(this,t);break}case ie.IN_TABLE_TEXT:{$x(this,t);break}case ie.IN_CAPTION:{owt(this,t);break}case ie.IN_COLUMN_GROUP:{pK(this,t);break}case ie.IN_TABLE_BODY:{_4(this,t);break}case ie.IN_ROW:{b4(this,t);break}case ie.IN_CELL:{lwt(this,t);break}case ie.IN_SELECT:{bPe(this,t);break}case ie.IN_SELECT_IN_TABLE:{fwt(this,t);break}case ie.IN_TEMPLATE:{hwt(this,t);break}case ie.AFTER_BODY:{mwt(this,t);break}case ie.IN_FRAMESET:{gwt(this,t);break}case ie.AFTER_FRAMESET:{vwt(this,t);break}case ie.AFTER_AFTER_BODY:{bwt(this,t);break}case ie.AFTER_AFTER_FRAMESET:{wwt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Twt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{kx(this,t);break}case ie.BEFORE_HTML:{ibt(this,t);break}case ie.BEFORE_HEAD:{obt(this,t);break}case ie.IN_HEAD:{abt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{lbt(this,t);break}case ie.AFTER_HEAD:{fbt(this,t);break}case ie.IN_BODY:{v4(this,t);break}case ie.TEXT:{Xbt(this,t);break}case ie.IN_TABLE:{LA(this,t);break}case ie.IN_TABLE_TEXT:{$x(this,t);break}case ie.IN_CAPTION:{awt(this,t);break}case ie.IN_COLUMN_GROUP:{uwt(this,t);break}case ie.IN_TABLE_BODY:{Gz(this,t);break}case ie.IN_ROW:{_Pe(this,t);break}case ie.IN_CELL:{cwt(this,t);break}case ie.IN_SELECT:{wPe(this,t);break}case ie.IN_SELECT_IN_TABLE:{dwt(this,t);break}case ie.IN_TEMPLATE:{pwt(this,t);break}case ie.AFTER_BODY:{SPe(this,t);break}case ie.IN_FRAMESET:{ywt(this,t);break}case ie.AFTER_FRAMESET:{_wt(this,t);break}case ie.AFTER_AFTER_BODY:{C$(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{kx(this,t);break}case ie.BEFORE_HTML:{x2(this,t);break}case ie.BEFORE_HEAD:{T2(this,t);break}case ie.IN_HEAD:{A2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{C2(this,t);break}case ie.AFTER_HEAD:{I2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{mPe(this,t);break}case ie.TEXT:{Qbt(this,t);break}case ie.IN_TABLE_TEXT:{$x(this,t);break}case ie.IN_TEMPLATE:{EPe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{hK(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===J.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{cPe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{SB(this,t);break}case ie.IN_TABLE_TEXT:{gPe(this,t);break}}}};function Y_t(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):pPe(e,t),n}function K_t(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function X_t(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=W_t;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Q_t(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Q_t(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function J_t(e,t,n){const r=e.treeAdapter.getTagName(t),i=hS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===I.TEMPLATE&&s===Re.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Z_t(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function dK(e,t){for(let n=0;n<q_t;n++){const r=Y_t(e,t);if(!r)break;const i=K_t(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=X_t(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&J_t(e,o,s),Z_t(e,i,r)}}function Wz(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ebt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function tbt(e,t){e._appendCommentNode(t,e.document)}function hK(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function nbt(e,t){e._setDocumentType(t);const n=t.forceQuirks?nl.QUIRKS:$_t(t);k_t(t)||e._err(t,Ce.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function kx(e,t){e._err(t,Ce.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,nl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function rbt(e,t){t.tagID===I.HTML?(e._insertElement(t,Re.HTML),e.insertionMode=ie.BEFORE_HEAD):x2(e,t)}function ibt(e,t){const n=t.tagID;(n===I.HTML||n===I.HEAD||n===I.BODY||n===I.BR)&&x2(e,t)}function x2(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function sbt(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.HEAD:{e._insertElement(t,Re.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:T2(e,t)}}function obt(e,t){const n=t.tagID;n===I.HEAD||n===I.BODY||n===I.HTML||n===I.BR?T2(e,t):e._err(t,Ce.endTagWithoutMatchingOpenElement)}function T2(e,t){e._insertFakeElement(be.HEAD,I.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Rf(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:{e._appendElement(t,Re.HTML),t.ackSelfClosing=!0;break}case I.TITLE:{e._switchToTextParsing(t,as.RCDATA);break}case I.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,as.RAWTEXT):(e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case I.NOFRAMES:case I.STYLE:{e._switchToTextParsing(t,as.RAWTEXT);break}case I.SCRIPT:{e._switchToTextParsing(t,as.SCRIPT_DATA);break}case I.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case I.HEAD:{e._err(t,Ce.misplacedStartTagForHeadElement);break}default:A2(e,t)}}function abt(e,t){switch(t.tagID){case I.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case I.BODY:case I.BR:case I.HTML:{A2(e,t);break}case I.TEMPLATE:{r_(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function r_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==I.TEMPLATE&&e._err(t,Ce.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(I.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ce.endTagWithoutMatchingOpenElement)}function A2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function ubt(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.BASEFONT:case I.BGSOUND:case I.HEAD:case I.LINK:case I.META:case I.NOFRAMES:case I.STYLE:{Rf(e,t);break}case I.NOSCRIPT:{e._err(t,Ce.nestedNoscriptInHead);break}default:C2(e,t)}}function lbt(e,t){switch(t.tagID){case I.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case I.BR:{C2(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function C2(e,t){const n=t.type===$n.EOF?Ce.openElementsLeftAfterEof:Ce.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function cbt(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.BODY:{e._insertElement(t,Re.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case I.FRAMESET:{e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_FRAMESET;break}case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:case I.NOFRAMES:case I.SCRIPT:case I.STYLE:case I.TEMPLATE:case I.TITLE:{e._err(t,Ce.abandonedHeadElementChild),e.openElements.push(e.headElement,I.HEAD),Rf(e,t),e.openElements.remove(e.headElement);break}case I.HEAD:{e._err(t,Ce.misplacedStartTagForHeadElement);break}default:I2(e,t)}}function fbt(e,t){switch(t.tagID){case I.BODY:case I.HTML:case I.BR:{I2(e,t);break}case I.TEMPLATE:{r_(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function I2(e,t){e._insertFakeElement(be.BODY,I.BODY),e.insertionMode=ie.IN_BODY,y4(e,t)}function y4(e,t){switch(t.type){case $n.CHARACTER:{fPe(e,t);break}case $n.WHITESPACE_CHARACTER:{cPe(e,t);break}case $n.COMMENT:{Wz(e,t);break}case $n.START_TAG:{Ca(e,t);break}case $n.END_TAG:{v4(e,t);break}case $n.EOF:{mPe(e,t);break}}}function cPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function fPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function dbt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function hbt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function pbt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_FRAMESET)}function mbt(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Re.HTML)}function gbt(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),ZOe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Re.HTML)}function ybt(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Re.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function vbt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Re.HTML),n||(e.formElement=e.openElements.current))}function _bt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===I.LI&&i===I.LI||(n===I.DD||n===I.DT)&&(i===I.DD||i===I.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==I.ADDRESS&&i!==I.DIV&&i!==I.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Re.HTML)}function bbt(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Re.HTML),e.tokenizer.state=as.PLAINTEXT}function wbt(e,t){e.openElements.hasInScope(I.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.framesetOk=!1}function Ebt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(be.A);n&&(dK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Sbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function xbt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(I.NOBR)&&(dK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Re.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Tbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Abt(e,t){e.treeAdapter.getDocumentMode(e.document)!==nl.QUIRKS&&e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Re.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function dPe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Re.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function hPe(e){const t=XOe(e,Wg.TYPE);return t!=null&&t.toLowerCase()===H_t}function Cbt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Re.HTML),hPe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Ibt(e,t){e._appendElement(t,Re.HTML),t.ackSelfClosing=!0}function Obt(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._appendElement(t,Re.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Pbt(e,t){t.tagName=be.IMG,t.tagID=I.IMG,dPe(e,t)}function kbt(e,t){e._insertElement(t,Re.HTML),e.skipNextNewLine=!0,e.tokenizer.state=as.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function $bt(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,as.RAWTEXT)}function Rbt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,as.RAWTEXT)}function bde(e,t){e._switchToTextParsing(t,as.RAWTEXT)}function Nbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Dbt(e,t){e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML)}function Mbt(e,t){e.openElements.hasInScope(I.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Re.HTML)}function Lbt(e,t){e.openElements.hasInScope(I.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(I.RTC),e._insertElement(t,Re.HTML)}function Fbt(e,t){e._reconstructActiveFormattingElements(),aPe(t),fK(t),t.selfClosing?e._appendElement(t,Re.MATHML):e._insertElement(t,Re.MATHML),t.ackSelfClosing=!0}function Bbt(e,t){e._reconstructActiveFormattingElements(),uPe(t),fK(t),t.selfClosing?e._appendElement(t,Re.SVG):e._insertElement(t,Re.SVG),t.ackSelfClosing=!0}function wde(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML)}function Ca(e,t){switch(t.tagID){case I.I:case I.S:case I.B:case I.U:case I.EM:case I.TT:case I.BIG:case I.CODE:case I.FONT:case I.SMALL:case I.STRIKE:case I.STRONG:{Sbt(e,t);break}case I.A:{Ebt(e,t);break}case I.H1:case I.H2:case I.H3:case I.H4:case I.H5:case I.H6:{gbt(e,t);break}case I.P:case I.DL:case I.OL:case I.UL:case I.DIV:case I.DIR:case I.NAV:case I.MAIN:case I.MENU:case I.ASIDE:case I.CENTER:case I.FIGURE:case I.FOOTER:case I.HEADER:case I.HGROUP:case I.DIALOG:case I.DETAILS:case I.ADDRESS:case I.ARTICLE:case I.SECTION:case I.SUMMARY:case I.FIELDSET:case I.BLOCKQUOTE:case I.FIGCAPTION:{mbt(e,t);break}case I.LI:case I.DD:case I.DT:{_bt(e,t);break}case I.BR:case I.IMG:case I.WBR:case I.AREA:case I.EMBED:case I.KEYGEN:{dPe(e,t);break}case I.HR:{Obt(e,t);break}case I.RB:case I.RTC:{Mbt(e,t);break}case I.RT:case I.RP:{Lbt(e,t);break}case I.PRE:case I.LISTING:{ybt(e,t);break}case I.XMP:{$bt(e,t);break}case I.SVG:{Bbt(e,t);break}case I.HTML:{dbt(e,t);break}case I.BASE:case I.LINK:case I.META:case I.STYLE:case I.TITLE:case I.SCRIPT:case I.BGSOUND:case I.BASEFONT:case I.TEMPLATE:{Rf(e,t);break}case I.BODY:{hbt(e,t);break}case I.FORM:{vbt(e,t);break}case I.NOBR:{xbt(e,t);break}case I.MATH:{Fbt(e,t);break}case I.TABLE:{Abt(e,t);break}case I.INPUT:{Cbt(e,t);break}case I.PARAM:case I.TRACK:case I.SOURCE:{Ibt(e,t);break}case I.IMAGE:{Pbt(e,t);break}case I.BUTTON:{wbt(e,t);break}case I.APPLET:case I.OBJECT:case I.MARQUEE:{Tbt(e,t);break}case I.IFRAME:{Rbt(e,t);break}case I.SELECT:{Nbt(e,t);break}case I.OPTION:case I.OPTGROUP:{Dbt(e,t);break}case I.NOEMBED:{bde(e,t);break}case I.FRAMESET:{pbt(e,t);break}case I.TEXTAREA:{kbt(e,t);break}case I.NOSCRIPT:{e.options.scriptingEnabled?bde(e,t):wde(e,t);break}case I.PLAINTEXT:{bbt(e,t);break}case I.COL:case I.TH:case I.TD:case I.TR:case I.HEAD:case I.FRAME:case I.TBODY:case I.TFOOT:case I.THEAD:case I.CAPTION:case I.COLGROUP:break;default:wde(e,t)}}function jbt(e,t){if(e.openElements.hasInScope(I.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Ubt(e,t){e.openElements.hasInScope(I.BODY)&&(e.insertionMode=ie.AFTER_BODY,SPe(e,t))}function zbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Vbt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(I.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(I.FORM):n&&e.openElements.remove(n))}function Hbt(e){e.openElements.hasInButtonScope(I.P)||e._insertFakeElement(be.P,I.P),e._closePElement()}function qbt(e){e.openElements.hasInListItemScope(I.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(I.LI),e.openElements.popUntilTagNamePopped(I.LI))}function Wbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Gbt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Ybt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Kbt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(be.BR,I.BR),e.openElements.pop(),e.framesetOk=!1}function pPe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==I.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function v4(e,t){switch(t.tagID){case I.A:case I.B:case I.I:case I.S:case I.U:case I.EM:case I.TT:case I.BIG:case I.CODE:case I.FONT:case I.NOBR:case I.SMALL:case I.STRIKE:case I.STRONG:{dK(e,t);break}case I.P:{Hbt(e);break}case I.DL:case I.UL:case I.OL:case I.DIR:case I.DIV:case I.NAV:case I.PRE:case I.MAIN:case I.MENU:case I.ASIDE:case I.BUTTON:case I.CENTER:case I.FIGURE:case I.FOOTER:case I.HEADER:case I.HGROUP:case I.DIALOG:case I.ADDRESS:case I.ARTICLE:case I.DETAILS:case I.SECTION:case I.SUMMARY:case I.LISTING:case I.FIELDSET:case I.BLOCKQUOTE:case I.FIGCAPTION:{zbt(e,t);break}case I.LI:{qbt(e);break}case I.DD:case I.DT:{Wbt(e,t);break}case I.H1:case I.H2:case I.H3:case I.H4:case I.H5:case I.H6:{Gbt(e);break}case I.BR:{Kbt(e);break}case I.BODY:{jbt(e,t);break}case I.HTML:{Ubt(e,t);break}case I.FORM:{Vbt(e);break}case I.APPLET:case I.OBJECT:case I.MARQUEE:{Ybt(e,t);break}case I.TEMPLATE:{r_(e,t);break}default:pPe(e,t)}}function mPe(e,t){e.tmplInsertionModeStack.length>0?EPe(e,t):hK(e,t)}function Xbt(e,t){var n;t.tagID===I.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Qbt(e,t){e._err(t,Ce.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function SB(e,t){if(lPe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case $n.CHARACTER:{yPe(e,t);break}case $n.WHITESPACE_CHARACTER:{gPe(e,t);break}}else vI(e,t)}function Jbt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_CAPTION}function Zbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function ewt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(be.COLGROUP,I.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,pK(e,t)}function twt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_TABLE_BODY}function nwt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(be.TBODY,I.TBODY),e.insertionMode=ie.IN_TABLE_BODY,_4(e,t)}function rwt(e,t){e.openElements.hasInTableScope(I.TABLE)&&(e.openElements.popUntilTagNamePopped(I.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function iwt(e,t){hPe(t)?e._appendElement(t,Re.HTML):vI(e,t),t.ackSelfClosing=!0}function swt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Re.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Xw(e,t){switch(t.tagID){case I.TD:case I.TH:case I.TR:{nwt(e,t);break}case I.STYLE:case I.SCRIPT:case I.TEMPLATE:{Rf(e,t);break}case I.COL:{ewt(e,t);break}case I.FORM:{swt(e,t);break}case I.TABLE:{rwt(e,t);break}case I.TBODY:case I.TFOOT:case I.THEAD:{twt(e,t);break}case I.INPUT:{iwt(e,t);break}case I.CAPTION:{Jbt(e,t);break}case I.COLGROUP:{Zbt(e,t);break}default:vI(e,t)}}function LA(e,t){switch(t.tagID){case I.TABLE:{e.openElements.hasInTableScope(I.TABLE)&&(e.openElements.popUntilTagNamePopped(I.TABLE),e._resetInsertionMode());break}case I.TEMPLATE:{r_(e,t);break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TBODY:case I.TD:case I.TFOOT:case I.TH:case I.THEAD:case I.TR:break;default:vI(e,t)}}function vI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,y4(e,t),e.fosterParentingEnabled=n}function gPe(e,t){e.pendingCharacterTokens.push(t)}function yPe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function $x(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)vI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const vPe=new Set([I.CAPTION,I.COL,I.COLGROUP,I.TBODY,I.TD,I.TFOOT,I.TH,I.THEAD,I.TR]);function owt(e,t){const n=t.tagID;vPe.has(n)?e.openElements.hasInTableScope(I.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,Xw(e,t)):Ca(e,t)}function awt(e,t){const n=t.tagID;switch(n){case I.CAPTION:case I.TABLE:{e.openElements.hasInTableScope(I.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===I.TABLE&&LA(e,t));break}case I.BODY:case I.COL:case I.COLGROUP:case I.HTML:case I.TBODY:case I.TD:case I.TFOOT:case I.TH:case I.THEAD:case I.TR:break;default:v4(e,t)}}function pK(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.COL:{e._appendElement(t,Re.HTML),t.ackSelfClosing=!0;break}case I.TEMPLATE:{Rf(e,t);break}default:t3(e,t)}}function uwt(e,t){switch(t.tagID){case I.COLGROUP:{e.openElements.currentTagId===I.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case I.TEMPLATE:{r_(e,t);break}case I.COL:break;default:t3(e,t)}}function t3(e,t){e.openElements.currentTagId===I.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function _4(e,t){switch(t.tagID){case I.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_ROW;break}case I.TH:case I.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(be.TR,I.TR),e.insertionMode=ie.IN_ROW,b4(e,t);break}case I.CAPTION:case I.COL:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,Xw(e,t));break}default:Xw(e,t)}}function Gz(e,t){const n=t.tagID;switch(t.tagID){case I.TBODY:case I.TFOOT:case I.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case I.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,LA(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TD:case I.TH:case I.TR:break;default:LA(e,t)}}function b4(e,t){switch(t.tagID){case I.TH:case I.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case I.CAPTION:case I.COL:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:case I.TR:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,_4(e,t));break}default:Xw(e,t)}}function _Pe(e,t){switch(t.tagID){case I.TR:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case I.TABLE:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,Gz(e,t));break}case I.TBODY:case I.TFOOT:case I.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(I.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,Gz(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TD:case I.TH:break;default:LA(e,t)}}function lwt(e,t){const n=t.tagID;vPe.has(n)?(e.openElements.hasInTableScope(I.TD)||e.openElements.hasInTableScope(I.TH))&&(e._closeTableCell(),b4(e,t)):Ca(e,t)}function cwt(e,t){const n=t.tagID;switch(n){case I.TD:case I.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case I.TABLE:case I.TBODY:case I.TFOOT:case I.THEAD:case I.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),_Pe(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:break;default:v4(e,t)}}function bPe(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.OPTION:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e._insertElement(t,Re.HTML);break}case I.OPTGROUP:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e.openElements.currentTagId===I.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Re.HTML);break}case I.INPUT:case I.KEYGEN:case I.TEXTAREA:case I.SELECT:{e.openElements.hasInSelectScope(I.SELECT)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),t.tagID!==I.SELECT&&e._processStartTag(t));break}case I.SCRIPT:case I.TEMPLATE:{Rf(e,t);break}}}function wPe(e,t){switch(t.tagID){case I.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===I.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===I.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===I.OPTGROUP&&e.openElements.pop();break}case I.OPTION:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop();break}case I.SELECT:{e.openElements.hasInSelectScope(I.SELECT)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode());break}case I.TEMPLATE:{r_(e,t);break}}}function fwt(e,t){const n=t.tagID;n===I.CAPTION||n===I.TABLE||n===I.TBODY||n===I.TFOOT||n===I.THEAD||n===I.TR||n===I.TD||n===I.TH?(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),e._processStartTag(t)):bPe(e,t)}function dwt(e,t){const n=t.tagID;n===I.CAPTION||n===I.TABLE||n===I.TBODY||n===I.TFOOT||n===I.THEAD||n===I.TR||n===I.TD||n===I.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),e.onEndTag(t)):wPe(e,t)}function hwt(e,t){switch(t.tagID){case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:case I.NOFRAMES:case I.SCRIPT:case I.STYLE:case I.TEMPLATE:case I.TITLE:{Rf(e,t);break}case I.CAPTION:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,Xw(e,t);break}case I.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,pK(e,t);break}case I.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,_4(e,t);break}case I.TD:case I.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,b4(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ca(e,t)}}function pwt(e,t){t.tagID===I.TEMPLATE&&r_(e,t)}function EPe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(I.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):hK(e,t)}function mwt(e,t){t.tagID===I.HTML?Ca(e,t):n3(e,t)}function SPe(e,t){var n;if(t.tagID===I.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===I.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else n3(e,t)}function n3(e,t){e.insertionMode=ie.IN_BODY,y4(e,t)}function gwt(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.FRAMESET:{e._insertElement(t,Re.HTML);break}case I.FRAME:{e._appendElement(t,Re.HTML),t.ackSelfClosing=!0;break}case I.NOFRAMES:{Rf(e,t);break}}}function ywt(e,t){t.tagID===I.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==I.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function vwt(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.NOFRAMES:{Rf(e,t);break}}}function _wt(e,t){t.tagID===I.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function bwt(e,t){t.tagID===I.HTML?Ca(e,t):C$(e,t)}function C$(e,t){e.insertionMode=ie.IN_BODY,y4(e,t)}function wwt(e,t){switch(t.tagID){case I.HTML:{Ca(e,t);break}case I.NOFRAMES:{Rf(e,t);break}}}function Ewt(e,t){t.chars=xi,e._insertCharacters(t)}function Swt(e,t){e._insertCharacters(t),e.framesetOk=!1}function xPe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Re.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function xwt(e,t){if(B_t(t))xPe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Re.MATHML?aPe(t):r===Re.SVG&&(j_t(t),uPe(t)),fK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Twt(e,t){if(t.tagID===I.P||t.tagID===I.BR){xPe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Re.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}be.AREA,be.BASE,be.BASEFONT,be.BGSOUND,be.BR,be.COL,be.EMBED,be.FRAME,be.HR,be.IMG,be.INPUT,be.KEYGEN,be.LINK,be.META,be.PARAM,be.SOURCE,be.TRACK,be.WBR;const TPe=APe("end"),i_=APe("start");function APe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const CPe=function(e){if(e==null)return Owt;if(typeof e=="function")return w4(e);if(typeof e=="object")return Array.isArray(e)?Awt(e):Cwt(e);if(typeof e=="string")return Iwt(e);throw new Error("Expected function, string, or object as test")};function Awt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=CPe(e[n]);return w4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Cwt(e){const t=e;return w4(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Iwt(e){return w4(t);function t(n){return n&&n.type===e}}function w4(e){return t;function t(n,r,i){return!!(Pwt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Owt(){return!0}function Pwt(e){return e!==null&&typeof e=="object"&&"type"in e}const IPe=[],kwt=!0,Ede=!1,$wt="skip";function Rwt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=CPe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=IPe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Nwt(n(u,c)),h[0]===Ede))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==$wt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Ede)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Nwt(e){return Array.isArray(e)?e:typeof e=="number"?[kwt,e]:e==null?IPe:[e]}function Dwt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Rwt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Mwt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Sde={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function OPe(e,t){const n=Wwt(e),r=qOe("type",{handlers:{root:Lwt,element:Fwt,text:Bwt,comment:kPe,doctype:jwt,raw:zwt},unknown:Vwt}),i={parser:n?new _de(Sde):_de.getFragmentParser(void 0,Sde),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),pS(i,i_());const s=n?i.parser.document:i.parser.getFragment(),o=F1t(s,{file:i.options.file});return i.stitches&&Dwt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function PPe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Lwt(e,t){PPe(e.children,t)}function Fwt(e,t){Hwt(e,t),PPe(e.children,t),qwt(e,t)}function Bwt(e,t){const n={type:$n.CHARACTER,chars:e.value,location:_I(e)};pS(t,i_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function jwt(e,t){const n={type:$n.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:_I(e)};pS(t,i_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Uwt(e,t){t.stitches=!0;const n=Gwt(e);if("children"in e&&"children"in n){const r=OPe({type:"root",children:e.children},t.options);n.children=r.children}kPe({type:"comment",value:{stitch:n}},t)}function kPe(e,t){const n=e.value,r={type:$n.COMMENT,data:n,location:_I(e)};pS(t,i_(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function zwt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,$Pe(t,i_(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Vwt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Uwt(n,t);else{let r="";throw Mwt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function pS(e,t){$Pe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=as.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function $Pe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Hwt(e,t){if(t.parser.tokenizer.state===as.PLAINTEXT)return;pS(t,i_(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:Ev.html;r===Ev.html&&e.tagName==="svg"&&(r=Ev.svg);const i=V1t({...e,children:[]},{space:r===Ev.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:$n.START_TAG,tagName:e.tagName,tagID:hS(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:_I(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function qwt(e,t){if(!t.parser.tokenizer.inForeignNode&&Q1t.includes(e.tagName)||t.parser.tokenizer.state===as.PLAINTEXT)return;pS(t,TPe(e));const n={type:$n.END_TAG,tagName:e.tagName,tagID:hS(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:_I(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===as.RCDATA||t.parser.tokenizer.state===as.RAWTEXT||t.parser.tokenizer.state===as.SCRIPT_DATA)&&(t.parser.tokenizer.state=as.DATA)}function Wwt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function _I(e){const t=i_(e)||{line:void 0,column:void 0,offset:void 0},n=TPe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Gwt(e){return"children"in e?ade({...e,children:[]}):ade(e)}function Ywt(e){return function(t,n){return OPe(t,{...e,file:n})}}function Wa({text:e,required:t}){const n={img:({node:i,...s})=>$.jsx(t_,{...s}),p:({node:i,...s})=>$.jsx(gt,{...s,pb:8}),h1:({node:i,...s})=>$.jsx(sa,{order:1,...s,pb:12}),h2:({node:i,...s})=>$.jsx(sa,{order:2,...s,pb:12}),h3:({node:i,...s})=>$.jsx(sa,{order:3,...s,pb:12}),h4:({node:i,...s})=>$.jsx(sa,{order:4,...s,pb:12}),h5:({node:i,...s})=>$.jsx(sa,{order:5,...s,pb:12}),h6:({node:i,...s})=>$.jsx(sa,{order:6,...s,pb:12}),a:({node:i,...s})=>$.jsx(H6,{...s}),ul:({node:i,...s})=>$.jsx(zv,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>$.jsx(zv,{type:"ordered",withPadding:!0,...s,pb:8})},r='<span style="color: #fa5252">*</span>';return $.jsx(FOe,{components:n,rehypePlugins:[Ywt],children:e+(t?` ${r}`:"")})}function RPe({errors:e}){const t=`
      There was an issue loading the study config. Please check the following errors:  

      ${e.map(n=>`- You have an error at ${n.instancePath||"root"}: ${n.message} - ${JSON.stringify(n.params)}  `).join(`
`)}
    `.replace(/\n\s+/g,`
`);return $.jsx(Wa,{text:t})}const Kwt="https://github.com/revisit-studies/study/tree/main/public/";function Xwt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=hm();return $.jsxs(vm,{size:"xs",px:"xs",style:{marginTop:60,marginBottom:60},children:[$.jsx(t_,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Ec}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),$.jsx(gt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=KY(i);return $.jsx(pm,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:$.jsx(J6,{shadow:"sm",radius:"md",withBorder:!0,children:s.errors?$.jsxs($.Fragment,{children:[$.jsxs(Ii,{align:"center",direction:"row",children:[$.jsx(Jmt,{color:"red"}),$.jsx(gt,{fw:"bold",ml:8,color:"red",children:i})]}),$.jsx(RPe,{errors:s.errors})]}):$.jsxs($.Fragment,{children:[$.jsx(gt,{fw:"bold",children:s.studyMetadata.title}),$.jsx(gt,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),$.jsx(gt,{c:"dimmed",children:s.studyMetadata.description}),$.jsx(gt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:$.jsxs(H6,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Kwt}${o}`,children:["View source:"," ",o]})})]})})},i)})]})}var NPe={exports:{}},DPe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw=P;function Qwt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jwt=typeof Object.is=="function"?Object.is:Qwt,Zwt=Qw.useState,eEt=Qw.useEffect,tEt=Qw.useLayoutEffect,nEt=Qw.useDebugValue;function rEt(e,t){var n=t(),r=Zwt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return tEt(function(){i.value=n,i.getSnapshot=t,xB(i)&&s({inst:i})},[e,n,t]),eEt(function(){return xB(i)&&s({inst:i}),e(function(){xB(i)&&s({inst:i})})},[e]),nEt(n),n}function xB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jwt(e,n)}catch{return!0}}function iEt(e,t){return t()}var sEt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iEt:rEt;DPe.useSyncExternalStore=Qw.useSyncExternalStore!==void 0?Qw.useSyncExternalStore:sEt;NPe.exports=DPe;var oEt=NPe.exports,MPe={exports:{}},LPe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E4=P,aEt=oEt;function uEt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lEt=typeof Object.is=="function"?Object.is:uEt,cEt=aEt.useSyncExternalStore,fEt=E4.useRef,dEt=E4.useEffect,hEt=E4.useMemo,pEt=E4.useDebugValue;LPe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=fEt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=hEt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,lEt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=cEt(e,s[0],s[1]);return dEt(function(){o.hasValue=!0,o.value=a},[a]),pEt(a),a};MPe.exports=LPe;var mEt=MPe.exports;function gEt(e){e()}let FPe=gEt;const yEt=e=>FPe=e,vEt=()=>FPe,h0=P.createContext(null);function BPe(){return P.useContext(h0)}const _Et=()=>{throw new Error("uSES not initialized!")};let jPe=_Et;const bEt=e=>{jPe=e},wEt=(e,t)=>e===t;function EEt(e=h0){const t=e===h0?BPe:()=>P.useContext(e);return function(r,i=wEt){const{store:s,subscription:o,getServerState:a}=t(),u=jPe(o.addNestedSub,s.getState,a||s.getState,r,i);return P.useDebugValue(u),u}}const SEt=EEt();var Yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mK=Symbol.for("react.element"),gK=Symbol.for("react.portal"),S4=Symbol.for("react.fragment"),x4=Symbol.for("react.strict_mode"),T4=Symbol.for("react.profiler"),A4=Symbol.for("react.provider"),C4=Symbol.for("react.context"),xEt=Symbol.for("react.server_context"),I4=Symbol.for("react.forward_ref"),O4=Symbol.for("react.suspense"),P4=Symbol.for("react.suspense_list"),k4=Symbol.for("react.memo"),$4=Symbol.for("react.lazy"),TEt=Symbol.for("react.offscreen"),UPe;UPe=Symbol.for("react.module.reference");function Cc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mK:switch(e=e.type,e){case S4:case T4:case x4:case O4:case P4:return e;default:switch(e=e&&e.$$typeof,e){case xEt:case C4:case I4:case $4:case k4:case A4:return e;default:return t}}case gK:return t}}}Yr.ContextConsumer=C4;Yr.ContextProvider=A4;Yr.Element=mK;Yr.ForwardRef=I4;Yr.Fragment=S4;Yr.Lazy=$4;Yr.Memo=k4;Yr.Portal=gK;Yr.Profiler=T4;Yr.StrictMode=x4;Yr.Suspense=O4;Yr.SuspenseList=P4;Yr.isAsyncMode=function(){return!1};Yr.isConcurrentMode=function(){return!1};Yr.isContextConsumer=function(e){return Cc(e)===C4};Yr.isContextProvider=function(e){return Cc(e)===A4};Yr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mK};Yr.isForwardRef=function(e){return Cc(e)===I4};Yr.isFragment=function(e){return Cc(e)===S4};Yr.isLazy=function(e){return Cc(e)===$4};Yr.isMemo=function(e){return Cc(e)===k4};Yr.isPortal=function(e){return Cc(e)===gK};Yr.isProfiler=function(e){return Cc(e)===T4};Yr.isStrictMode=function(e){return Cc(e)===x4};Yr.isSuspense=function(e){return Cc(e)===O4};Yr.isSuspenseList=function(e){return Cc(e)===P4};Yr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===S4||e===T4||e===x4||e===O4||e===P4||e===TEt||typeof e=="object"&&e!==null&&(e.$$typeof===$4||e.$$typeof===k4||e.$$typeof===A4||e.$$typeof===C4||e.$$typeof===I4||e.$$typeof===UPe||e.getModuleId!==void 0)};Yr.typeOf=Cc;function AEt(){const e=vEt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const xde={notify(){},get:()=>[]};function CEt(e,t){let n,r=xde;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=AEt())}function l(){n&&(n(),n=void 0,r.clear(),r=xde)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const IEt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OEt=IEt?P.useLayoutEffect:P.useEffect;function PEt({store:e,context:t,children:n,serverState:r}){const i=P.useMemo(()=>{const a=CEt(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=P.useMemo(()=>e.getState(),[e]);OEt(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||h0;return j.createElement(o.Provider,{value:i},n)}function zPe(e=h0){const t=e===h0?BPe:()=>P.useContext(e);return function(){const{store:r}=t();return r}}const kEt=zPe();function $Et(e=h0){const t=e===h0?kEt:zPe(e);return function(){return t().dispatch}}const VPe=$Et();bEt(mEt.useSyncExternalStoreWithSelector);yEt(Q1.unstable_batchedUpdates);function R4(){const{studyId:e}=qw();return`${e}`}function Ic(){const{index:e}=qw();return parseInt(e||"0",10)}function tf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function p0(e){return!!e&&!!e[Ai]}function Wp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===UEt}(e)||Array.isArray(e)||!!e[kde]||!!(!((t=e.constructor)===null||t===void 0)&&t[kde])||yK(e)||vK(e))}function d1(e,t,n){n===void 0&&(n=!1),mS(e)===0?(n?Object.keys:dw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function mS(e){var t=e[Ai];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:yK(e)?2:vK(e)?3:0}function fw(e,t){return mS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function REt(e,t){return mS(e)===2?e.get(t):e[t]}function HPe(e,t,n){var r=mS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qPe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function yK(e){return BEt&&e instanceof Map}function vK(e){return jEt&&e instanceof Set}function Gy(e){return e.o||e.t}function _K(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=GPe(e);delete t[Ai];for(var n=dw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function bK(e,t){return t===void 0&&(t=!1),wK(e)||p0(e)||!Wp(e)||(mS(e)>1&&(e.set=e.add=e.clear=e.delete=NEt),Object.freeze(e),t&&d1(e,function(n,r){return bK(r,!0)},!0)),e}function NEt(){tf(2)}function wK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Nd(e){var t=Qz[e];return t||tf(18,e),t}function DEt(e,t){Qz[e]||(Qz[e]=t)}function Yz(){return FA}function TB(e,t){t&&(Nd("Patches"),e.u=[],e.s=[],e.v=t)}function r3(e){Kz(e),e.p.forEach(MEt),e.p=null}function Kz(e){e===FA&&(FA=e.l)}function Tde(e){return FA={p:[],l:FA,h:e,m:!0,_:0}}function MEt(e){var t=e[Ai];t.i===0||t.i===1?t.j():t.O=!0}function AB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Nd("ES5").S(t,e,r),r?(n[Ai].P&&(r3(t),tf(4)),Wp(e)&&(e=i3(t,e),t.l||s3(t,e)),t.u&&Nd("Patches").M(n[Ai].t,e,t.u,t.s)):e=i3(t,n,[]),r3(t),t.u&&t.v(t.u,t.s),e!==WPe?e:void 0}function i3(e,t,n){if(wK(t))return t;var r=t[Ai];if(!r)return d1(t,function(a,u){return Ade(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return s3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=_K(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),d1(s,function(a,u){return Ade(e,r,i,a,u,n,o)}),s3(e,i,!1),n&&e.u&&Nd("Patches").N(r,n,e.u,e.s)}return r.o}function Ade(e,t,n,r,i,s,o){if(p0(i)){var a=i3(e,i,s&&t&&t.i!==3&&!fw(t.R,r)?s.concat(r):void 0);if(HPe(n,r,a),!p0(a))return;e.m=!1}else o&&n.add(i);if(Wp(i)&&!wK(i)){if(!e.h.D&&e._<1)return;i3(e,i),t&&t.A.l||s3(e,i)}}function s3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&bK(t,n)}function CB(e,t){var n=e[Ai];return(n?Gy(n):e)[t]}function Cde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function fg(e){e.P||(e.P=!0,e.l&&fg(e.l))}function IB(e){e.o||(e.o=_K(e.t))}function Xz(e,t,n){var r=yK(t)?Nd("MapSet").F(t,n):vK(t)?Nd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Yz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=BA;o&&(u=[a],l=TT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Nd("ES5").J(t,n);return(n?n.A:Yz()).p.push(r),r}function LEt(e){return p0(e)||tf(22,e),function t(n){if(!Wp(n))return n;var r,i=n[Ai],s=mS(n);if(i){if(!i.P&&(i.i<4||!Nd("ES5").K(i)))return i.t;i.I=!0,r=Ide(n,s),i.I=!1}else r=Ide(n,s);return d1(r,function(o,a){i&&REt(i.t,o)===a||HPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ide(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _K(e)}function FEt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ai];return BA.get(u,s)},set:function(u){var l=this[Ai];BA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ai];if(!a.P)switch(a.i){case 5:r(a)&&fg(a);break;case 4:n(a)&&fg(a)}}}function n(s){for(var o=s.t,a=s.k,u=dw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ai){var f=o[c];if(f===void 0&&!fw(o,c))return!0;var d=a[c],h=d&&d[Ai];if(h?h.t!==f:!qPe(d,f))return!0}}var p=!!o[Ai];return u.length!==dw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};DEt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=GPe(f);delete p[Ai];for(var m=dw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Yz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,Ai,{value:l,writable:!0}),u},S:function(s,o,a){a?p0(o)&&o[Ai].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ai];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)d1(d,function(_){_!==Ai&&(f[_]!==void 0||fw(f,_)?h[_]||u(d[_]):(h[_]=!0,fg(c)))}),d1(f,function(_){d[_]!==void 0||fw(d,_)||(h[_]=!1,fg(c))});else if(p===5){if(r(c)&&(fg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Ode,FA,EK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",BEt=typeof Map<"u",jEt=typeof Set<"u",Pde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",WPe=EK?Symbol.for("immer-nothing"):((Ode={})["immer-nothing"]=!0,Ode),kde=EK?Symbol.for("immer-draftable"):"__$immer_draftable",Ai=EK?Symbol.for("immer-state"):"__$immer_state",UEt=""+Object.prototype.constructor,dw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,GPe=Object.getOwnPropertyDescriptors||function(e){var t={};return dw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Qz={},BA={get:function(e,t){if(t===Ai)return e;var n=Gy(e);if(!fw(n,t))return function(i,s,o){var a,u=Cde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Wp(r)?r:r===CB(e.t,t)?(IB(e),e.o[t]=Xz(e.A.h,r,e)):r},has:function(e,t){return t in Gy(e)},ownKeys:function(e){return Reflect.ownKeys(Gy(e))},set:function(e,t,n){var r=Cde(Gy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=CB(Gy(e),t),s=i==null?void 0:i[Ai];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(qPe(n,i)&&(n!==void 0||fw(e.t,t)))return!0;IB(e),fg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return CB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,IB(e),fg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Gy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){tf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){tf(12)}},TT={};d1(BA,function(e,t){TT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),TT.deleteProperty=function(e,t){return TT.set.call(this,e,t,void 0)},TT.set=function(e,t,n){return BA.set.call(this,e[0],t,n,e[0])};var zEt=function(){function e(n){var r=this;this.g=Pde,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&tf(6),o!==void 0&&typeof o!="function"&&tf(7),Wp(i)){var c=Tde(r),f=Xz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?r3(c):Kz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return TB(c,o),AB(m,c)},function(m){throw r3(c),m}):(TB(c,o),AB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===WPe&&(l=void 0),r.D&&bK(l,!0),o){var h=[],p=[];Nd("Patches").M(i,l,h,p),o(h,p)}return l}tf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Wp(n)||tf(8),p0(n)&&(n=LEt(n));var r=Tde(this),i=Xz(this,n,void 0);return i[Ai].C=!0,Kz(r),i},t.finishDraft=function(n,r){var i=n&&n[Ai],s=i.A;return TB(s,r),AB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Pde&&tf(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Nd("Patches").$;return p0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),wl=new zEt,YPe=wl.produce;wl.produceWithPatches.bind(wl);wl.setAutoFreeze.bind(wl);wl.setUseProxies.bind(wl);wl.applyPatches.bind(wl);wl.createDraft.bind(wl);wl.finishDraft.bind(wl);function jA(e){"@babel/helpers - typeof";return jA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jA(e)}function VEt(e,t){if(jA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HEt(e){var t=VEt(e,"string");return jA(t)=="symbol"?t:String(t)}function qEt(e,t,n){return t=HEt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$de(Object(n),!0).forEach(function(r){qEt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$de(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ea(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Nde=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),OB=function(){return Math.random().toString(36).substring(7).split("").join(".")},o3={INIT:"@@redux/INIT"+OB(),REPLACE:"@@redux/REPLACE"+OB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+OB()}};function WEt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function KPe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ea(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ea(1));return n(KPe)(e,t)}if(typeof e!="function")throw new Error(ea(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ea(3));return s}function f(m){if(typeof m!="function")throw new Error(ea(4));if(u)throw new Error(ea(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ea(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!WEt(m))throw new Error(ea(7));if(typeof m.type>"u")throw new Error(ea(8));if(u)throw new Error(ea(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ea(10));i=m,d({type:o3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ea(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[Nde]=function(){return this},m}return d({type:o3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Nde]=p,r}function GEt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:o3.INIT});if(typeof r>"u")throw new Error(ea(12));if(typeof n(void 0,{type:o3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ea(13))})}function YEt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{GEt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ea(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function a3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function KEt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ea(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=a3.apply(void 0,a)(i.dispatch),Rde(Rde({},i),{},{dispatch:s})}}}function XPe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var QPe=XPe();QPe.withExtraArgument=XPe;const Dde=QPe;var XEt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},UA=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},QEt=Object.defineProperty,JEt=Object.defineProperties,ZEt=Object.getOwnPropertyDescriptors,Mde=Object.getOwnPropertySymbols,eSt=Object.prototype.hasOwnProperty,tSt=Object.prototype.propertyIsEnumerable,Lde=function(e,t,n){return t in e?QEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Gg=function(e,t){for(var n in t||(t={}))eSt.call(t,n)&&Lde(e,n,t[n]);if(Mde)for(var r=0,i=Mde(t);r<i.length;r++){var n=i[r];tSt.call(t,n)&&Lde(e,n,t[n])}return e},PB=function(e,t){return JEt(e,ZEt(t))},wI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},nSt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?a3:a3.apply(null,arguments)};function rSt(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var iSt=function(e){XEt(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,UA([void 0],n[0].concat(this)))):new(t.bind.apply(t,UA([void 0],n.concat(this))))},t}(Array);function Jz(e){return Wp(e)?YPe(e,function(){}):e}function sSt(e){return typeof e=="boolean"}function oSt(){return function(t){return aSt(t)}}function aSt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new iSt;return n&&(sSt(n)?r.push(Dde):r.push(Dde.withExtraArgument(n.extraArgument))),r}var uSt=!0;function JPe(e){var t=oSt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(rSt(i))h=YEt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=KEt.apply(void 0,p),g=a3;u&&(g=nSt(Gg({trace:!uSt},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=UA([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return KPe(h,c,v)}function Dd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Gg(Gg({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function ZPe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function lSt(e){return typeof e=="function"}function cSt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?ZPe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(lSt(e))u=function(){return Jz(e())};else{var l=Jz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=UA([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(p0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Wp(p))return YPe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function fSt(e,t){return e+"/"+t}function eke(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Jz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=fSt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Dd(d,p):Dd(d)});function u(){var c=typeof e.extraReducers=="function"?ZPe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Gg(Gg({},d),o);return cSt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,x=p;w<x.length;w++){var E=x[w];v.addMatcher(E.matcher,E.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var dSt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=dSt[Math.random()*64|0];return t},hSt=["name","message","stack","code"],kB=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Fde=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),pSt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=hSt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Dd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:PB(Gg({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Dd(t+"/pending",function(l,c,f){return{payload:void 0,meta:PB(Gg({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Dd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||pSt)(l||"Rejected"),meta:PB(Gg({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):tke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return wI(this,null,function(){var v,_,w,x,E,b,T;return bI(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),gSt(x)?[4,x]:[3,2];case 1:x=C.sent(),C.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(A,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([E,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(A,O){return new kB(A,O)},fulfillWithValue:function(A,O){return new Fde(A,O)}})).then(function(A){if(A instanceof kB)throw A;return A instanceof Fde?i(A.payload,h,l,A.meta):i(A,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return b=C.sent(),w=b instanceof kB?o(null,h,l,b.payload,b.meta):o(b,h,l),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,T||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(mSt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function mSt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function gSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ySt=function(e){return e&&typeof e.match=="function"},vSt=function(e,t){return ySt(e)?e.match(t):e(t)};function Bde(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return vSt(r,n)})}}var SK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Zz=function(){},nke=function(e,t){return t===void 0&&(t=Zz),e.catch(t),e},rke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},hw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},_St="task",ike="listener",ske="completed",xK="cancelled",bSt="task-"+xK,wSt="task-"+ske,oke=ike+"-"+xK,ESt=ike+"-"+ske,N4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=_St+" "+xK+" (reason: "+t+")"}return e}(),pw=function(e){if(e.aborted)throw new N4(e.reason)};function ake(e,t){var n=Zz;return new Promise(function(r,i){var s=function(){return i(new N4(e.reason))};if(e.aborted){s();return}n=rke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Zz})}var SSt=function(e,t){return wI(void 0,null,function(){var n,r;return bI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof N4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},u3=function(e){return function(t){return nke(ake(e,t).then(function(n){return pw(e),n}))}},uke=function(e){var t=u3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},xSt=Object.assign,jde={},EI="listenerMiddleware",TSt=function(e){var t=function(n){return rke(e,function(){return hw(n,e.reason)})};return function(n){SK(n,"taskExecutor");var r=new AbortController;t(r);var i=SSt(function(){return wI(void 0,null,function(){var s;return bI(this,function(o){switch(o.label){case 0:return pw(e),pw(r.signal),[4,n({pause:u3(r.signal),delay:uke(r.signal),signal:r.signal})];case 1:return s=o.sent(),pw(r.signal),[2,s]}})})},function(){return hw(r,wSt)});return{result:u3(e)(i),cancel:function(){hw(r,bSt)}}}},ASt=function(e,t){var n=function(r,i){return wI(void 0,null,function(){var s,o,a,u;return bI(this,function(l){switch(l.label){case 0:pw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,ake(t,Promise.race(a))];case 2:return u=l.sent(),pw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return nke(n(r,i))}},lke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Dd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return SK(s,"options.listener"),{predicate:i,type:t,effect:s}},CSt=function(e){var t=lke(e),n=t.type,r=t.predicate,i=t.effect,s=tke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},eV=function(e){e.pending.forEach(function(t){hw(t,oke)})},ISt=function(e){return function(){e.forEach(eV),e.clear()}},Ude=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},OSt=Dd(EI+"/add"),PSt=Dd(EI+"/removeAll"),kSt=Dd(EI+"/remove"),$St=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,UA([EI+"/error"],e))};function RSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?$St:i;SK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&eV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=CSt(h)),o(p)},l=function(h){var p=lke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&eV(v)),!!v},c=function(h,p,m,g){return wI(t,null,function(){var y,v,_;return bI(this,function(w){switch(w.label){case 0:y=new AbortController,v=ASt(u,y.signal),w.label=1;case 1:return w.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,xSt({},m,{getOriginalState:g,condition:function(x,E){return v(x,E).then(Boolean)},take:v,delay:uke(y.signal),pause:u3(y.signal),extra:r,signal:y.signal,fork:TSt(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,E,b){x!==y&&(hw(x,oke),b.delete(x))})}})))];case 2:return w.sent(),[3,5];case 3:return _=w.sent(),_ instanceof N4||Ude(s,_,{raisedBy:"effect"}),[3,5];case 4:return hw(y,ESt),h.pending.delete(y),[7];case 5:return[2]}})})},f=ISt(n),d=function(h){return function(p){return function(m){if(OSt.match(m))return u(m.payload);if(PSt.match(m)){f();return}if(kSt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===jde)throw new Error(EI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),x=0,E=w;x<E.length;x++){var b=E[x],T=!1;try{T=b.predicate(m,_,g)}catch(C){T=!1,Ude(s,C,{raisedBy:"predicate"})}T&&c(b,m,h,y)}}finally{g=jde}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var zde;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);FEt();function h1(e){return e.components.flatMap(t=>typeof t=="string"?t:h1(t))}function cke(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+h1(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+h1(e).length-1}];r+=1}else{const o=cke(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function fke(e,t){const n=cke(e,t,0);return typeof n=="number"?null:n}function dke(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=dke(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function NSt(e,t){const n=dke(e,t,0);return n.found?n.distance:-1}function hke(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...hke(i,`${t}-${s}`))}),n}async function DSt(e,t,n,r,i,s){const o=h1(n),a={...o.map(h=>({[h]:{}}))},u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:i||a,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=eke({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}}}});return{store:JPe({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const pke=P.createContext(null);function gh(){return P.useContext(pke).actions}const yh=VPe,Nf=SEt;function MSt(e){return Nf(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function vh(){return Nf(e=>h1(e.sequence))}var l3={exports:{}};l3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",x="[object Set]",E="[object String]",b="[object Undefined]",T="[object WeakMap]",C="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",N="[object Float64Array]",k="[object Int8Array]",L="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",G="[object Uint8ClampedArray]",H="[object Uint16Array]",Y="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,W={};W[O]=W[N]=W[k]=W[L]=W[B]=W[U]=W[G]=W[H]=W[Y]=!0,W[a]=W[u]=W[C]=W[c]=W[A]=W[f]=W[d]=W[h]=W[m]=W[g]=W[v]=W[w]=W[x]=W[E]=W[T]=!1;var z=typeof Eu=="object"&&Eu&&Eu.Object===Object&&Eu,V=typeof self=="object"&&self&&self.Object===Object&&self,te=z||V||Function("return this")(),le=t&&!t.nodeType&&t,me=le&&!0&&e&&!e.nodeType&&e,ye=me&&me.exports===le,de=ye&&z.process,we=function(){try{var re=me&&me.require&&me.require("util").types;return re||de&&de.binding&&de.binding("util")}catch{}}(),he=we&&we.isTypedArray;function Ve(re,ce,Te){switch(Te.length){case 0:return re.call(ce);case 1:return re.call(ce,Te[0]);case 2:return re.call(ce,Te[0],Te[1]);case 3:return re.call(ce,Te[0],Te[1],Te[2])}return re.apply(ce,Te)}function Me(re,ce){for(var Te=-1,Tt=Array(re);++Te<re;)Tt[Te]=ce(Te);return Tt}function Ye(re){return function(ce){return re(ce)}}function Fe(re,ce){return re==null?void 0:re[ce]}function De(re,ce){return function(Te){return re(ce(Te))}}var He=Array.prototype,Qt=Function.prototype,nt=Object.prototype,qe=te["__core-js_shared__"],Pt=Qt.toString,at=nt.hasOwnProperty,ht=function(){var re=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}(),vt=nt.toString,Ht=Pt.call(Object),Xt=RegExp("^"+Pt.call(at).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=ye?te.Buffer:void 0,xe=te.Symbol,Le=te.Uint8Array,ct=fe?fe.allocUnsafe:void 0,Je=De(Object.getPrototypeOf,Object),lt=Object.create,st=nt.propertyIsEnumerable,At=He.splice,Tn=xe?xe.toStringTag:void 0,Zt=function(){try{var re=Ue(Object,"defineProperty");return re({},"",{}),re}catch{}}(),Jt=fe?fe.isBuffer:void 0,nr=Math.max,Bn=Date.now,Bo=Ue(te,"Map"),hr=Ue(Object,"create"),Ni=function(){function re(){}return function(ce){if(!Mh(ce))return{};if(lt)return lt(ce);re.prototype=ce;var Te=new re;return re.prototype=void 0,Te}}();function jr(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var Tt=re[ce];this.set(Tt[0],Tt[1])}}function Ir(){this.__data__=hr?hr(null):{},this.size=0}function Ur(re){var ce=this.has(re)&&delete this.__data__[re];return this.size-=ce?1:0,ce}function rr(re){var ce=this.__data__;if(hr){var Te=ce[re];return Te===r?void 0:Te}return at.call(ce,re)?ce[re]:void 0}function Et(re){var ce=this.__data__;return hr?ce[re]!==void 0:at.call(ce,re)}function pr(re,ce){var Te=this.__data__;return this.size+=this.has(re)?0:1,Te[re]=hr&&ce===void 0?r:ce,this}jr.prototype.clear=Ir,jr.prototype.delete=Ur,jr.prototype.get=rr,jr.prototype.has=Et,jr.prototype.set=pr;function fi(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var Tt=re[ce];this.set(Tt[0],Tt[1])}}function jn(){this.__data__=[],this.size=0}function fs(re){var ce=this.__data__,Te=si(ce,re);if(Te<0)return!1;var Tt=ce.length-1;return Te==Tt?ce.pop():At.call(ce,Te,1),--this.size,!0}function ds(re){var ce=this.__data__,Te=si(ce,re);return Te<0?void 0:ce[Te][1]}function oe(re){return si(this.__data__,re)>-1}function ne(re,ce){var Te=this.__data__,Tt=si(Te,re);return Tt<0?(++this.size,Te.push([re,ce])):Te[Tt][1]=ce,this}fi.prototype.clear=jn,fi.prototype.delete=fs,fi.prototype.get=ds,fi.prototype.has=oe,fi.prototype.set=ne;function ue(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var Tt=re[ce];this.set(Tt[0],Tt[1])}}function Ee(){this.size=0,this.__data__={hash:new jr,map:new(Bo||fi),string:new jr}}function Se(re){var ce=We(this,re).delete(re);return this.size-=ce?1:0,ce}function St(re){return We(this,re).get(re)}function ke(re){return We(this,re).has(re)}function _t(re,ce){var Te=We(this,re),Tt=Te.size;return Te.set(re,ce),this.size+=Te.size==Tt?0:1,this}ue.prototype.clear=Ee,ue.prototype.delete=Se,ue.prototype.get=St,ue.prototype.has=ke,ue.prototype.set=_t;function Ft(re){var ce=this.__data__=new fi(re);this.size=ce.size}function Ct(){this.__data__=new fi,this.size=0}function Bt(re){var ce=this.__data__,Te=ce.delete(re);return this.size=ce.size,Te}function un(re){return this.__data__.get(re)}function Er(re){return this.__data__.has(re)}function qt(re,ce){var Te=this.__data__;if(Te instanceof fi){var Tt=Te.__data__;if(!Bo||Tt.length<n-1)return Tt.push([re,ce]),this.size=++Te.size,this;Te=this.__data__=new ue(Tt)}return Te.set(re,ce),this.size=Te.size,this}Ft.prototype.clear=Ct,Ft.prototype.delete=Bt,Ft.prototype.get=un,Ft.prototype.has=Er,Ft.prototype.set=qt;function ir(re,ce){var Te=$_(re),Tt=!Te&&Ia(re),Fn=!Te&&!Tt&&Dh(re),Pr=!Te&&!Tt&&!Fn&&QO(re),Qr=Te||Tt||Fn||Pr,On=Qr?Me(re.length,String):[],Jr=On.length;for(var zi in re)(ce||at.call(re,zi))&&!(Qr&&(zi=="length"||Fn&&(zi=="offset"||zi=="parent")||Pr&&(zi=="buffer"||zi=="byteLength"||zi=="byteOffset")||nn(zi,Jr)))&&On.push(zi);return On}function en(re,ce,Te){(Te!==void 0&&!Ml(re[ce],Te)||Te===void 0&&!(ce in re))&&wi(re,ce,Te)}function Gn(re,ce,Te){var Tt=re[ce];(!(at.call(re,ce)&&Ml(Tt,Te))||Te===void 0&&!(ce in re))&&wi(re,ce,Te)}function si(re,ce){for(var Te=re.length;Te--;)if(Ml(re[Te][0],ce))return Te;return-1}function wi(re,ce,Te){ce=="__proto__"&&Zt?Zt(re,ce,{configurable:!0,enumerable:!0,value:Te,writable:!0}):re[ce]=Te}var Ei=je();function Cs(re){return re==null?re===void 0?b:y:Tn&&Tn in Object(re)?Xe(re):Nh(re)}function Di(re){return iu(re)&&Cs(re)==a}function Sr(re){if(!Mh(re)||Xr(re))return!1;var ce=dx(re)?Xt:D;return ce.test(fx(re))}function wt(re){return iu(re)&&XO(re.length)&&!!W[Cs(re)]}function An(re){if(!Mh(re))return hs(re);var ce=Or(re),Te=[];for(var Tt in re)Tt=="constructor"&&(ce||!at.call(re,Tt))||Te.push(Tt);return Te}function Rr(re,ce,Te,Tt,Fn){re!==ce&&Ei(ce,function(Pr,Qr){if(Fn||(Fn=new Ft),Mh(Pr))ns(re,ce,Qr,Te,Rr,Tt,Fn);else{var On=Tt?Tt(Sy(re,Qr),Pr,Qr+"",re,ce,Fn):void 0;On===void 0&&(On=Pr),en(re,Qr,On)}},Ay)}function ns(re,ce,Te,Tt,Fn,Pr,Qr){var On=Sy(re,Te),Jr=Sy(ce,Te),zi=Qr.get(Jr);if(zi){en(re,Te,zi);return}var jo=Pr?Pr(On,Jr,Te+"",re,ce,Qr):void 0,Iy=jo===void 0;if(Iy){var Lh=$_(Jr),N_=!Lh&&Dh(Jr),D_=!Lh&&!N_&&QO(Jr);jo=Jr,Lh||N_||D_?$_(On)?jo=On:KO(On)?jo=ve(On):N_?(Iy=!1,jo=se(Jr,!0)):D_?(Iy=!1,jo=ge(Jr,!0)):jo=[]:t9(Jr)||Ia(Jr)?(jo=On,Ia(On)?jo=Ty(On):(!Mh(On)||dx(On))&&(jo=xt(Jr))):Iy=!1}Iy&&(Qr.set(Jr,jo),Fn(jo,Jr,Tt,Pr,Qr),Qr.delete(Jr)),en(re,Te,jo)}function po(re,ce){return xy(Nm(re,ce,Dm),re+"")}var K=Zt?function(re,ce){return Zt(re,"toString",{configurable:!0,enumerable:!1,value:Cy(ce),writable:!0})}:Dm;function se(re,ce){if(ce)return re.slice();var Te=re.length,Tt=ct?ct(Te):new re.constructor(Te);return re.copy(Tt),Tt}function Z(re){var ce=new re.constructor(re.byteLength);return new Le(ce).set(new Le(re)),ce}function ge(re,ce){var Te=ce?Z(re.buffer):re.buffer;return new re.constructor(Te,re.byteOffset,re.length)}function ve(re,ce){var Te=-1,Tt=re.length;for(ce||(ce=Array(Tt));++Te<Tt;)ce[Te]=re[Te];return ce}function pe(re,ce,Te,Tt){var Fn=!Te;Te||(Te={});for(var Pr=-1,Qr=ce.length;++Pr<Qr;){var On=ce[Pr],Jr=Tt?Tt(Te[On],re[On],On,Te,re):void 0;Jr===void 0&&(Jr=re[On]),Fn?wi(Te,On,Jr):Gn(Te,On,Jr)}return Te}function Oe(re){return po(function(ce,Te){var Tt=-1,Fn=Te.length,Pr=Fn>1?Te[Fn-1]:void 0,Qr=Fn>2?Te[2]:void 0;for(Pr=re.length>3&&typeof Pr=="function"?(Fn--,Pr):void 0,Qr&&Yn(Te[0],Te[1],Qr)&&(Pr=Fn<3?void 0:Pr,Fn=1),ce=Object(ce);++Tt<Fn;){var On=Te[Tt];On&&re(ce,On,Tt,Pr)}return ce})}function je(re){return function(ce,Te,Tt){for(var Fn=-1,Pr=Object(ce),Qr=Tt(ce),On=Qr.length;On--;){var Jr=Qr[re?On:++Fn];if(Te(Pr[Jr],Jr,Pr)===!1)break}return ce}}function We(re,ce){var Te=re.__data__;return Mt(ce)?Te[typeof ce=="string"?"string":"hash"]:Te.map}function Ue(re,ce){var Te=Fe(re,ce);return Sr(Te)?Te:void 0}function Xe(re){var ce=at.call(re,Tn),Te=re[Tn];try{re[Tn]=void 0;var Tt=!0}catch{}var Fn=vt.call(re);return Tt&&(ce?re[Tn]=Te:delete re[Tn]),Fn}function xt(re){return typeof re.constructor=="function"&&!Or(re)?Ni(Je(re)):{}}function nn(re,ce){var Te=typeof re;return ce=ce??o,!!ce&&(Te=="number"||Te!="symbol"&&M.test(re))&&re>-1&&re%1==0&&re<ce}function Yn(re,ce,Te){if(!Mh(Te))return!1;var Tt=typeof ce;return(Tt=="number"?R_(Te)&&nn(ce,Te.length):Tt=="string"&&ce in Te)?Ml(Te[ce],re):!1}function Mt(re){var ce=typeof re;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?re!=="__proto__":re===null}function Xr(re){return!!ht&&ht in re}function Or(re){var ce=re&&re.constructor,Te=typeof ce=="function"&&ce.prototype||nt;return re===Te}function hs(re){var ce=[];if(re!=null)for(var Te in Object(re))ce.push(Te);return ce}function Nh(re){return vt.call(re)}function Nm(re,ce,Te){return ce=nr(ce===void 0?re.length-1:ce,0),function(){for(var Tt=arguments,Fn=-1,Pr=nr(Tt.length-ce,0),Qr=Array(Pr);++Fn<Pr;)Qr[Fn]=Tt[ce+Fn];Fn=-1;for(var On=Array(ce+1);++Fn<ce;)On[Fn]=Tt[Fn];return On[ce]=Te(Qr),Ve(re,this,On)}}function Sy(re,ce){if(!(ce==="constructor"&&typeof re[ce]=="function")&&ce!="__proto__")return re[ce]}var xy=YO(K);function YO(re){var ce=0,Te=0;return function(){var Tt=Bn(),Fn=s-(Tt-Te);if(Te=Tt,Fn>0){if(++ce>=i)return arguments[0]}else ce=0;return re.apply(void 0,arguments)}}function fx(re){if(re!=null){try{return Pt.call(re)}catch{}try{return re+""}catch{}}return""}function Ml(re,ce){return re===ce||re!==re&&ce!==ce}var Ia=Di(function(){return arguments}())?Di:function(re){return iu(re)&&at.call(re,"callee")&&!st.call(re,"callee")},$_=Array.isArray;function R_(re){return re!=null&&XO(re.length)&&!dx(re)}function KO(re){return iu(re)&&R_(re)}var Dh=Jt||ZO;function dx(re){if(!Mh(re))return!1;var ce=Cs(re);return ce==h||ce==p||ce==l||ce==_}function XO(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=o}function Mh(re){var ce=typeof re;return re!=null&&(ce=="object"||ce=="function")}function iu(re){return re!=null&&typeof re=="object"}function t9(re){if(!iu(re)||Cs(re)!=v)return!1;var ce=Je(re);if(ce===null)return!0;var Te=at.call(ce,"constructor")&&ce.constructor;return typeof Te=="function"&&Te instanceof Te&&Pt.call(Te)==Ht}var QO=he?Ye(he):wt;function Ty(re){return pe(re,Ay(re))}function Ay(re){return R_(re)?ir(re,!0):An(re)}var JO=Oe(function(re,ce,Te){Rr(re,ce,Te)});function Cy(re){return function(){return re}}function Dm(re){return re}function ZO(){return!1}e.exports=JO})(l3,l3.exports);var LSt=l3.exports;const TK=Pl(LSt);function Vv(e){return structuredClone(e)}function AK(){const{answers:e}=Nf(i=>i),t=Ic(),r=`${vh()[t]}_${t}`;return e[r]}const mke=P.createContext(null);function FSt(){const e=P.useContext(mke);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function m0(){return Nf(e=>e.config)}function Vde(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function gke(){const e=Ic(),t=vh(),r=`${t[e]}_${e}`,{trialValidation:i,sequence:s,answers:o}=Nf(x=>x),a=AK(),u=yh(),{saveTrialAnswer:l,setIframeAnswers:c}=gh(),{storageEngine:f}=xa(),h=!MSt(r),p=a==null?void 0:a.answer,m=hm(),g=m0(),y=R4(),v=P.useMemo(()=>Date.now(),[]),_=FSt(),w=P.useCallback(()=>{const x=Vv(i[r]),E=Object.values(x).reduce((L,B)=>Object.hasOwn(B,"values")?{...L,...B.values}:L,{}),{provenanceGraph:b}=x,T=Date.now(),C=_&&"current"in _&&_.current?_.current.splice(0,_.current.length):[];Object.keys(p||{}).length===0&&(u(l({identifier:r,answer:E,startTime:v,endTime:T,provenanceGraph:b,windowEvents:C})),f&&f.saveAnswer(r,{answer:E,startTime:v,endTime:T,provenanceGraph:b,windowEvents:C}),u(c({})));let A=e+1;const O=fke(s,e),N=O!==null&&O.some(L=>Object.hasOwn(L.currentBlock,"skip")&&L.currentBlock.skip!==void 0),k={...o,[r]:{answer:E,startTime:v,endTime:T,provenanceGraph:b,windowEvents:C}};N&&[...O.flatMap(B=>B.currentBlock.skip?B.currentBlock.skip.map(U=>({...U,firstIndex:B.firstIndex,lastIndex:B.lastIndex})):[])].some(B=>{let U=!1;const G=Object.fromEntries(Object.entries(k).filter(([Y])=>{const q=parseInt(Y.slice(Y.lastIndexOf("_")+1),10);return q>=B.firstIndex&&q<=e})),H=B.check!=="block"?Object.entries(G).filter(([Y])=>Y.slice(0,Y.lastIndexOf("_"))===B.name):Object.entries(G);if(H.length===0)return!1;if(H.some(([Y,q])=>!q))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(B,null,2)}`);if(B.check==="response"||B.check==="responses"){const[Y,q]=H[0];B.check==="response"?U=B.value!==q.answer[B.responseId]:U=!Vde(q.answer,Y,g.components[Y.slice(0,Y.lastIndexOf("_"))],g)}else if(B.check==="block"||B.check==="repeatedComponent"){if(H.length<B.value)return!1;const Y=H.map(([M,W])=>Vde(W.answer,M,g.components[M.slice(0,M.lastIndexOf("_"))],g)),q=Y.filter(M=>M).length,D=Y.length-q;U=B.condition==="numCorrect"&&q===B.value||B.condition==="numIncorrect"&&D===B.value}if(U){const Y=t.indexOf(B.to),q=Y===-1?NSt(s,B.to):-1;return A=Y===-1?q:Y,!0}return!1}),m(`/${y}/${A}${window.location.search}`)},[i,r,_,p,e,s,o,v,m,y,u,l,f,c,g,t]);return{isNextDisabled:h,goToNextStep:w}}function BSt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=gke(),o=P.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return $.jsx(Hr,{type:"submit",disabled:t||i,onClick:o,children:e})}var CK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const tV=Pl(CK);function nV(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var jSt=Object.defineProperty,Hde=Object.getOwnPropertySymbols,USt=Object.prototype.hasOwnProperty,zSt=Object.prototype.propertyIsEnumerable,qde=(e,t,n)=>t in e?jSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VSt=(e,t)=>{for(var n in t||(t={}))USt.call(t,n)&&qde(e,n,t[n]);if(Hde)for(var n of Hde(t))zSt.call(t,n)&&qde(e,n,t[n]);return e};function yke(e,t){if(t===null||typeof t!="object")return{};const n=VSt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const HSt="__MANTINE_FORM_INDEX__";function Wde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${HSt}`)):!1:!1}function Gde(e,t,n){typeof n.value=="object"&&(n.value=Bb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Bb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Bb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Bb(a),Bb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Bb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Gde(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Gde(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function vke(e){return typeof e!="string"?[]:e.split(".")}function D4(e,t,n){const r=vke(e);if(r.length===0)return n;const i=Bb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function rp(e,t){const n=vke(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function Yde(e){const t=nV(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function rV(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=rp(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>rV(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||rV(o,t,a,i)),i},r)}function iV(e,t){return Yde(typeof e=="function"?e(t):rV(e,t))}function qP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=iV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function qSt(e,{from:t,to:n},r){const i=rp(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),D4(e,s,r)}var WSt=Object.defineProperty,Kde=Object.getOwnPropertySymbols,GSt=Object.prototype.hasOwnProperty,YSt=Object.prototype.propertyIsEnumerable,Xde=(e,t,n)=>t in e?WSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KSt=(e,t)=>{for(var n in t||(t={}))GSt.call(t,n)&&Xde(e,n,t[n]);if(Kde)for(var n of Kde(t))YSt.call(t,n)&&Xde(e,n,t[n]);return e};function XSt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=KSt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function QSt(e,t,n){const r=rp(e,n);return Array.isArray(r)?D4(e,r.filter((i,s)=>s!==t),n):n}var JSt=Object.defineProperty,Qde=Object.getOwnPropertySymbols,ZSt=Object.prototype.hasOwnProperty,ext=Object.prototype.propertyIsEnumerable,Jde=(e,t,n)=>t in e?JSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,txt=(e,t)=>{for(var n in t||(t={}))ZSt.call(t,n)&&Jde(e,n,t[n]);if(Qde)for(var n of Qde(t))ext.call(t,n)&&Jde(e,n,t[n]);return e};function Zde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function ehe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=yke(`${i}.${t}`,s));const o=txt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Zde(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Zde(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function nxt(e,t,n,r){const i=rp(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),D4(e,s,r)}function the(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function rxt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var ixt=Object.defineProperty,sxt=Object.defineProperties,oxt=Object.getOwnPropertyDescriptors,nhe=Object.getOwnPropertySymbols,axt=Object.prototype.hasOwnProperty,uxt=Object.prototype.propertyIsEnumerable,rhe=(e,t,n)=>t in e?ixt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fm=(e,t)=>{for(var n in t||(t={}))axt.call(t,n)&&rhe(e,n,t[n]);if(nhe)for(var n of nhe(t))uxt.call(t,n)&&rhe(e,n,t[n]);return e},$B=(e,t)=>sxt(e,oxt(t));function _ke({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=P.useState(r),[f,d]=P.useState(n),[h,p]=P.useState(e),[m,g]=P.useState(nV(t)),y=P.useRef(e),v=V=>{y.current=V},_=P.useCallback(()=>c({}),[]),w=V=>{const te=V?Fm(Fm({},h),V):h;v(te),d({})},x=P.useCallback(V=>g(te=>nV(typeof V=="function"?V(te):V)),[]),E=P.useCallback(()=>g({}),[]),b=P.useCallback(()=>{p(e),E(),v(e),d({}),_()},[]),T=P.useCallback((V,te)=>x(le=>$B(Fm({},le),{[V]:te})),[]),C=P.useCallback(V=>x(te=>{if(typeof V!="string")return te;const le=Fm({},te);return delete le[V],le}),[]),A=P.useCallback(V=>d(te=>{if(typeof V!="string")return te;const le=yke(V,te);return delete le[V],le}),[]),O=P.useCallback((V,te)=>{const le=Wde(V,s);A(V),c(me=>$B(Fm({},me),{[V]:!0})),p(me=>{const ye=D4(V,te,me);if(le){const de=qP(V,u,ye);de.hasError?T(V,de.error):C(V)}return ye}),!le&&i&&T(V,null)},[]),N=P.useCallback(V=>{p(te=>{const le=typeof V=="function"?V(te):V;return Fm(Fm({},te),le)}),i&&E()},[]),k=P.useCallback((V,te)=>{A(V),p(le=>qSt(V,te,le)),g(le=>XSt(V,te,le))},[]),L=P.useCallback((V,te)=>{A(V),p(le=>QSt(V,te,le)),g(le=>ehe(V,te,le,-1))},[]),B=P.useCallback((V,te,le)=>{A(V),p(me=>nxt(V,te,le,me)),g(me=>ehe(V,le,me,1))},[]),U=P.useCallback(()=>{const V=iV(u,h);return g(V.errors),V},[h,u]),G=P.useCallback(V=>{const te=qP(V,u,h);return te.hasError?T(V,te.error):C(V),te},[h,u]),H=(V,{type:te="input",withError:le=!0,withFocus:me=!0}={})=>{const de={onChange:rxt(we=>O(V,we))};return le&&(de.error=m[V]),te==="checkbox"?de.checked=rp(V,h):de.value=rp(V,h),me&&(de.onFocus=()=>c(we=>$B(Fm({},we),{[V]:!0})),de.onBlur=()=>{if(Wde(V,o)){const we=qP(V,u,h);we.hasError?T(V,we.error):C(V)}}),de},Y=(V,te)=>le=>{le==null||le.preventDefault();const me=U();me.hasErrors?te==null||te(me.errors,h,le):V==null||V(a(h),le)},q=V=>a(V||h),D=P.useCallback(V=>{V.preventDefault(),b()},[]),M=V=>{if(V){const le=rp(V,f);if(typeof le=="boolean")return le;const me=rp(V,h),ye=rp(V,y.current);return!tV(me,ye)}return Object.keys(f).length>0?the(f):!tV(h,y.current)},W=P.useCallback(V=>the(l,V),[l]),z=P.useCallback(V=>V?!qP(V,u,h).hasError:!iV(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:N,setErrors:x,setFieldValue:O,setFieldError:T,clearFieldError:C,clearErrors:E,reset:b,validate:U,validateField:G,reorderListItem:k,removeListItem:L,insertListItem:B,getInputProps:H,onSubmit:Y,onReset:D,isDirty:M,isTouched:W,setTouched:c,setDirty:d,resetTouched:_,resetDirty:w,isValid:z,getTransformedValues:q}}function lxt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function cxt(e){return lxt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const fxt=new URLSearchParams(window.location.search),dxt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?fxt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},hxt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function pxt(e,t,n){const[r,i]=P.useState(null),s=_ke({initialValues:dxt(e,n),validate:hxt(e)});return P.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function s_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function mxt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return $.jsx(Kw.Group,{label:$.jsx(Wa,{text:r,required:i}),...n,error:s_(e,n,s),size:"md",children:$.jsx(va,{mt:"md",children:s.map(o=>$.jsx(Kw,{disabled:t,value:o.value,label:o.label},o.value))})})}function gxt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return $.jsx(t4,{disabled:t,label:$.jsx(Wa,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:s_(e,n,o)})}function yxt({response:e,answer:t}){const{prompt:n}=e;return $.jsxs($.Fragment,{children:[$.jsx(gt,{fz:"md",fw:500,children:$.jsx(Wa,{text:n})}),$.jsx(zv,{children:Array.isArray(t.value)?t.value.map(r=>$.jsx(zv.Item,{children:r},r)):$.jsx(zv.Item,{children:t.value})})]})}function bke({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return $.jsxs(ND.Group,{name:`radioInput${e.id}`,label:$.jsx(Wa,{text:r,required:i}),size:"md",...n,error:s_(e,n,s),children:[o?$.jsx(gt,{children:o}):null,$.jsx(va,{mt:"xs",children:s.map(u=>$.jsx(ND,{disabled:t,value:u.value,label:u.label},u.label))}),$.jsx(gt,{children:a})]},e.id)}function vxt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return $.jsx(bke,{disabled:t,response:s,answer:n})}function _xt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return $.jsx(qCe,{disabled:t,placeholder:a,label:$.jsx(Wa,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:s_(e,n)})}function bxt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=s_(e,n);return $.jsx(Ss.Wrapper,{label:$.jsx(Wa,{text:r,required:i}),error:o,size:"md",children:$.jsx(qY,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function wxt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return $.jsx(Z6,{disabled:t,placeholder:r,label:$.jsx(Wa,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:s_(e,n)})}function Ext({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return $.jsx(YAe,{disabled:t,placeholder:r,label:$.jsx(Wa,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:s_(e,n)})}function Sxt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=nY(),o=P.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return $.jsxs(pt,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&$.jsx(_xt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&$.jsx(wxt,{response:e,disabled:o,answer:r}),e.type==="longText"&&$.jsx(Ext,{response:e,disabled:o,answer:r}),e.type==="likert"&&$.jsx(vxt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&$.jsx(gxt,{response:e,disabled:o,answer:r}),e.type==="slider"&&$.jsx(bxt,{response:e,disabled:o,answer:r}),e.type==="radio"&&$.jsx(bke,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&$.jsx(mxt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&$.jsx(yxt,{response:e,answer:r})]})}function c3({config:e,location:t,status:n,style:r}){var w;const i=Ic(),s=vh()[i],o=n==null?void 0:n.answer,a=e,u=P.useMemo(()=>{var x;return((x=a==null?void 0:a.response)==null?void 0:x.filter(E=>E.location?E.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=yh(),{updateResponseBlockValidation:c}=gh(),f=pxt(u,i,o||{}),[d,h]=P.useState(void 0),[p,m]=P.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Nf(x=>x),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return P.useEffect(()=>{const x=u.find(E=>E.type==="iframe");if(g&&x){const E=x.id;f.setValues({...f.values,[E]:g[E]})}},[g]),P.useEffect(()=>{y&&h(y)},[y]),P.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:Vv(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),$.jsxs("div",{style:r,children:[u.map(x=>{var E,b;return $.jsx(j.Fragment,{children:x.hidden?"":$.jsxs($.Fragment,{children:[$.jsx(Sxt,{storedAnswer:o?o[x.id]:void 0,answer:{...f.getInputProps(x.id,{type:x.type==="checkbox"?"checkbox":"input"})},response:x}),v&&p&&$.jsx(gt,{children:`The correct answer is: ${(b=(E=a.correctAnswer)==null?void 0:E.find(T=>T.id===x.id))==null?void 0:b.answer}`})]})},`${x.id}-${i}`)}),$.jsxs(va,{position:"right",spacing:"xs",mt:"xl",children:[v&&_&&$.jsx(Hr,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),_&&$.jsx(BSt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const Rx="@REVISIT_COMMS",xxt={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function Txt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=gh(),r=yh(),i=VPe(),s=P.useRef(null),o=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ic(),u=vh()[a],l=hm(),c=P.useCallback((f,d)=>{var h,p;(p=(h=s.current)==null?void 0:h.contentWindow)==null||p.postMessage({error:!1,type:`${Rx}/${f}`,iframeId:o,message:d},"*")},[s,o]);return P.useEffect(()=>{const f=d=>{const{data:h}=d;if(typeof h=="object"&&o===h.iframeId)switch(h.type){case`${Rx}/WINDOW_READY`:e.parameters&&c("STUDY_DATA",e.parameters);break;case`${Rx}/READY`:s.current&&(s.current.style.height=`${h.message.documentHeight}px`);break;case`${Rx}/ANSWERS`:r(t(h.message));break;case`${Rx}/PROVENANCE`:r(n(h.message));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[r,a,i,o,l,e,c,t,n]),$.jsx("div",{children:$.jsx("iframe",{ref:s,src:`${Ec}${e.path}?trialid=${u}&id=${o}`,style:xxt})})}const Axt={maxWidth:"100%"};function Cxt({currentConfig:e}){const t={...Axt,...e.style};return $.jsx(t_,{mx:"auto",src:`${Ec}${e.path}`,style:t})}function ihe(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class she extends Map{constructor(t,n=Ske){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(sV(this,t))}has(t){return super.has(sV(this,t))}set(t,n){return super.set(wke(this,t),n)}delete(t){return super.delete(Eke(this,t))}}class f3 extends Set{constructor(t,n=Ske){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(sV(this,t))}add(t){return super.add(wke(this,t))}delete(t){return super.delete(Eke(this,t))}}function sV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function wke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Eke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ske(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ixt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var Oxt={value:()=>{}};function M4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new I$(n)}function I$(e){this._=e}function Pxt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}I$.prototype=M4.prototype={constructor:I$,on:function(e,t){var n=this._,r=Pxt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=kxt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=ohe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ohe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new I$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function kxt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ohe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Oxt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var oV="http://www.w3.org/1999/xhtml";const ahe={svg:"http://www.w3.org/2000/svg",xhtml:oV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ahe.hasOwnProperty(t)?{space:ahe[t],local:e}:e}function $xt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===oV&&t.documentElement.namespaceURI===oV?t.createElement(e):t.createElementNS(n,e)}}function Rxt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xke(e){var t=L4(e);return(t.local?Rxt:$xt)(t)}function Nxt(){}function IK(e){return e==null?Nxt:function(){return this.querySelector(e)}}function Dxt(e){typeof e!="function"&&(e=IK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ga(r,this._parents)}function Tke(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Mxt(){return[]}function Ake(e){return e==null?Mxt:function(){return this.querySelectorAll(e)}}function Lxt(e){return function(){return Tke(e.apply(this,arguments))}}function Fxt(e){typeof e=="function"?e=Lxt(e):e=Ake(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ga(r,i)}function Cke(e){return function(){return this.matches(e)}}function Ike(e){return function(t){return t.matches(e)}}var Bxt=Array.prototype.find;function jxt(e){return function(){return Bxt.call(this.children,e)}}function Uxt(){return this.firstElementChild}function zxt(e){return this.select(e==null?Uxt:jxt(typeof e=="function"?e:Ike(e)))}var Vxt=Array.prototype.filter;function Hxt(){return Array.from(this.children)}function qxt(e){return function(){return Vxt.call(this.children,e)}}function Wxt(e){return this.selectAll(e==null?Hxt:qxt(typeof e=="function"?e:Ike(e)))}function Gxt(e){typeof e!="function"&&(e=Cke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ga(r,this._parents)}function Oke(e){return new Array(e.length)}function Yxt(){return new Ga(this._enter||this._groups.map(Oke),this._parents)}function d3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}d3.prototype={constructor:d3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kxt(e){return function(){return e}}function Xxt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new d3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Qxt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new d3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Jxt(e){return e.__data__}function Zxt(e,t){if(!arguments.length)return Array.from(this,Jxt);var n=t?Qxt:Xxt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Kxt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=eTt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,x;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(x=g[_])&&++_<p;);w._next=x||null}}return o=new Ga(o,r),o._enter=a,o._exit=u,o}function eTt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tTt(){return new Ga(this._exit||this._groups.map(Oke),this._parents)}function nTt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function rTt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ga(a,this._parents)}function iTt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function sTt(e){e||(e=oTt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ga(i,this._parents).order()}function oTt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aTt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function uTt(){return Array.from(this)}function lTt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function cTt(){let e=0;for(const t of this)++e;return e}function fTt(){return!this.node()}function dTt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function hTt(e){return function(){this.removeAttribute(e)}}function pTt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mTt(e,t){return function(){this.setAttribute(e,t)}}function gTt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yTt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vTt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _Tt(e,t){var n=L4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pTt:hTt:typeof t=="function"?n.local?vTt:yTt:n.local?gTt:mTt)(n,t))}function Pke(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bTt(e){return function(){this.style.removeProperty(e)}}function wTt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ETt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function STt(e,t,n){return arguments.length>1?this.each((t==null?bTt:typeof t=="function"?ETt:wTt)(e,t,n??"")):Jw(this.node(),e)}function Jw(e,t){return e.style.getPropertyValue(t)||Pke(e).getComputedStyle(e,null).getPropertyValue(t)}function xTt(e){return function(){delete this[e]}}function TTt(e,t){return function(){this[e]=t}}function ATt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function CTt(e,t){return arguments.length>1?this.each((t==null?xTt:typeof t=="function"?ATt:TTt)(e,t)):this.node()[e]}function kke(e){return e.trim().split(/^|\s+/)}function OK(e){return e.classList||new $ke(e)}function $ke(e){this._node=e,this._names=kke(e.getAttribute("class")||"")}$ke.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Rke(e,t){for(var n=OK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Nke(e,t){for(var n=OK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ITt(e){return function(){Rke(this,e)}}function OTt(e){return function(){Nke(this,e)}}function PTt(e,t){return function(){(t.apply(this,arguments)?Rke:Nke)(this,e)}}function kTt(e,t){var n=kke(e+"");if(arguments.length<2){for(var r=OK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?PTt:t?ITt:OTt)(n,t))}function $Tt(){this.textContent=""}function RTt(e){return function(){this.textContent=e}}function NTt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function DTt(e){return arguments.length?this.each(e==null?$Tt:(typeof e=="function"?NTt:RTt)(e)):this.node().textContent}function MTt(){this.innerHTML=""}function LTt(e){return function(){this.innerHTML=e}}function FTt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function BTt(e){return arguments.length?this.each(e==null?MTt:(typeof e=="function"?FTt:LTt)(e)):this.node().innerHTML}function jTt(){this.nextSibling&&this.parentNode.appendChild(this)}function UTt(){return this.each(jTt)}function zTt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VTt(){return this.each(zTt)}function HTt(e){var t=typeof e=="function"?e:xke(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qTt(){return null}function WTt(e,t){var n=typeof e=="function"?e:xke(e),r=t==null?qTt:typeof t=="function"?t:IK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function GTt(){var e=this.parentNode;e&&e.removeChild(this)}function YTt(){return this.each(GTt)}function KTt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XTt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QTt(e){return this.select(e?XTt:KTt)}function JTt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ZTt(e){return function(t){e.call(this,t,this.__data__)}}function e2t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function t2t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function n2t(e,t,n){return function(){var r=this.__on,i,s=ZTt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function r2t(e,t,n){var r=e2t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?n2t:t2t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Dke(e,t,n){var r=Pke(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function i2t(e,t){return function(){return Dke(this,e,t)}}function s2t(e,t){return function(){return Dke(this,e,t.apply(this,arguments))}}function o2t(e,t){return this.each((typeof t=="function"?s2t:i2t)(e,t))}function*a2t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var PK=[null];function Ga(e,t){this._groups=e,this._parents=t}function SI(){return new Ga([[document.documentElement]],PK)}function u2t(){return this}Ga.prototype=SI.prototype={constructor:Ga,select:Dxt,selectAll:Fxt,selectChild:zxt,selectChildren:Wxt,filter:Gxt,data:Zxt,enter:Yxt,exit:tTt,join:nTt,merge:rTt,selection:u2t,order:iTt,sort:sTt,call:aTt,nodes:uTt,node:lTt,size:cTt,empty:fTt,each:dTt,attr:_Tt,style:STt,property:CTt,classed:kTt,text:DTt,html:BTt,raise:UTt,lower:VTt,append:HTt,insert:WTt,remove:YTt,clone:QTt,datum:JTt,on:r2t,dispatch:o2t,[Symbol.iterator]:a2t};function gs(e){return typeof e=="string"?new Ga([[document.querySelector(e)]],[document.documentElement]):new Ga([[e]],PK)}function l2t(e){let t;for(;t=e.sourceEvent;)e=t;return e}function aV(e,t){if(e=l2t(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function c2t(e){return typeof e=="string"?new Ga([document.querySelectorAll(e)],[document.documentElement]):new Ga([Tke(e)],PK)}const uV={capture:!0,passive:!1};function lV(e){e.preventDefault(),e.stopImmediatePropagation()}function f2t(e){var t=e.document.documentElement,n=gs(e).on("dragstart.drag",lV,uV);"onselectstart"in t?n.on("selectstart.drag",lV,uV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function d2t(e,t){var n=e.document.documentElement,r=gs(e).on("dragstart.drag",null);t&&(r.on("click.drag",lV,uV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function gS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ey(){}var p1=.7,Zw=1/p1,mw="\\s*([+-]?\\d+)\\s*",zA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h2t=/^#([0-9a-f]{3,8})$/,p2t=new RegExp(`^rgb\\(${mw},${mw},${mw}\\)$`),m2t=new RegExp(`^rgb\\(${Md},${Md},${Md}\\)$`),g2t=new RegExp(`^rgba\\(${mw},${mw},${mw},${zA}\\)$`),y2t=new RegExp(`^rgba\\(${Md},${Md},${Md},${zA}\\)$`),v2t=new RegExp(`^hsl\\(${zA},${Md},${Md}\\)$`),_2t=new RegExp(`^hsla\\(${zA},${Md},${Md},${zA}\\)$`),uhe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gS(ey,m1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lhe,formatHex:lhe,formatHex8:b2t,formatHsl:w2t,formatRgb:che,toString:che});function lhe(){return this.rgb().formatHex()}function b2t(){return this.rgb().formatHex8()}function w2t(){return Mke(this).formatHsl()}function che(){return this.rgb().formatRgb()}function m1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=h2t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fhe(t):n===3?new no(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?WP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?WP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=p2t.exec(e))?new no(t[1],t[2],t[3],1):(t=m2t.exec(e))?new no(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=g2t.exec(e))?WP(t[1],t[2],t[3],t[4]):(t=y2t.exec(e))?WP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v2t.exec(e))?phe(t[1],t[2]/100,t[3]/100,1):(t=_2t.exec(e))?phe(t[1],t[2]/100,t[3]/100,t[4]):uhe.hasOwnProperty(e)?fhe(uhe[e]):e==="transparent"?new no(NaN,NaN,NaN,0):null}function fhe(e){return new no(e>>16&255,e>>8&255,e&255,1)}function WP(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function kK(e){return e instanceof ey||(e=m1(e)),e?(e=e.rgb(),new no(e.r,e.g,e.b,e.opacity)):new no}function g0(e,t,n,r){return arguments.length===1?kK(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gS(no,g0,xI(ey,{brighter(e){return e=e==null?Zw:Math.pow(Zw,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?p1:Math.pow(p1,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(Hv(this.r),Hv(this.g),Hv(this.b),h3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dhe,formatHex:dhe,formatHex8:E2t,formatRgb:hhe,toString:hhe}));function dhe(){return`#${Sv(this.r)}${Sv(this.g)}${Sv(this.b)}`}function E2t(){return`#${Sv(this.r)}${Sv(this.g)}${Sv(this.b)}${Sv((isNaN(this.opacity)?1:this.opacity)*255)}`}function hhe(){const e=h3(this.opacity);return`${e===1?"rgb(":"rgba("}${Hv(this.r)}, ${Hv(this.g)}, ${Hv(this.b)}${e===1?")":`, ${e})`}`}function h3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sv(e){return e=Hv(e),(e<16?"0":"")+e.toString(16)}function phe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nf(e,t,n,r)}function Mke(e){if(e instanceof nf)return new nf(e.h,e.s,e.l,e.opacity);if(e instanceof ey||(e=m1(e)),!e)return new nf;if(e instanceof nf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new nf(o,a,u,e.opacity)}function p3(e,t,n,r){return arguments.length===1?Mke(e):new nf(e,t,n,r??1)}function nf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gS(nf,p3,xI(ey,{brighter(e){return e=e==null?Zw:Math.pow(Zw,e),new nf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?p1:Math.pow(p1,e),new nf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new no(RB(e>=240?e-240:e+120,i,r),RB(e,i,r),RB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new nf(mhe(this.h),GP(this.s),GP(this.l),h3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=h3(this.opacity);return`${e===1?"hsl(":"hsla("}${mhe(this.h)}, ${GP(this.s)*100}%, ${GP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mhe(e){return e=(e||0)%360,e<0?e+360:e}function GP(e){return Math.max(0,Math.min(1,e||0))}function RB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lke=Math.PI/180,Fke=180/Math.PI,m3=18,Bke=.96422,jke=1,Uke=.82521,zke=4/29,gw=6/29,Vke=3*gw*gw,S2t=gw*gw*gw;function Hke(e){if(e instanceof Ld)return new Ld(e.l,e.a,e.b,e.opacity);if(e instanceof pp)return qke(e);e instanceof no||(e=kK(e));var t=LB(e.r),n=LB(e.g),r=LB(e.b),i=NB((.2225045*t+.7168786*n+.0606169*r)/jke),s,o;return t===n&&n===r?s=o=i:(s=NB((.4360747*t+.3850649*n+.1430804*r)/Bke),o=NB((.0139322*t+.0971045*n+.7141733*r)/Uke)),new Ld(116*i-16,500*(s-i),200*(i-o),e.opacity)}function g3(e,t,n,r){return arguments.length===1?Hke(e):new Ld(e,t,n,r??1)}function Ld(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}gS(Ld,g3,xI(ey,{brighter(e){return new Ld(this.l+m3*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ld(this.l-m3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Bke*DB(t),e=jke*DB(e),n=Uke*DB(n),new no(MB(3.1338561*t-1.6168667*e-.4906146*n),MB(-.9787684*t+1.9161415*e+.033454*n),MB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function NB(e){return e>S2t?Math.pow(e,1/3):e/Vke+zke}function DB(e){return e>gw?e*e*e:Vke*(e-zke)}function MB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function LB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x2t(e){if(e instanceof pp)return new pp(e.h,e.c,e.l,e.opacity);if(e instanceof Ld||(e=Hke(e)),e.a===0&&e.b===0)return new pp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Fke;return new pp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function y3(e,t,n,r){return arguments.length===1?x2t(e):new pp(e,t,n,r??1)}function pp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function qke(e){if(isNaN(e.h))return new Ld(e.l,0,0,e.opacity);var t=e.h*Lke;return new Ld(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}gS(pp,y3,xI(ey,{brighter(e){return new pp(this.h,this.c,this.l+m3*(e??1),this.opacity)},darker(e){return new pp(this.h,this.c,this.l-m3*(e??1),this.opacity)},rgb(){return qke(this).rgb()}}));var Wke=-.14861,$K=1.78277,RK=-.29227,F4=-.90649,VA=1.97294,ghe=VA*F4,yhe=VA*$K,vhe=$K*RK-F4*Wke;function T2t(e){if(e instanceof qv)return new qv(e.h,e.s,e.l,e.opacity);e instanceof no||(e=kK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(vhe*r+ghe*t-yhe*n)/(vhe+ghe-yhe),s=r-i,o=(VA*(n-i)-RK*s)/F4,a=Math.sqrt(o*o+s*s)/(VA*i*(1-i)),u=a?Math.atan2(o,s)*Fke-120:NaN;return new qv(u<0?u+360:u,a,i,e.opacity)}function cV(e,t,n,r){return arguments.length===1?T2t(e):new qv(e,t,n,r??1)}function qv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gS(qv,cV,xI(ey,{brighter(e){return e=e==null?Zw:Math.pow(Zw,e),new qv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?p1:Math.pow(p1,e),new qv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Lke,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new no(255*(t+n*(Wke*r+$K*i)),255*(t+n*(RK*r+F4*i)),255*(t+n*(VA*r)),this.opacity)}}));function Gke(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Yke(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Gke((n-r/t)*t,o,i,s,a)}}function Kke(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Gke((n-r/t)*t,i,s,o,a)}}const B4=e=>()=>e;function Xke(e,t){return function(n){return e+n*t}}function A2t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function j4(e,t){var n=t-e;return n?Xke(e,n>180||n<-180?n-360*Math.round(n/360):n):B4(isNaN(e)?t:e)}function C2t(e){return(e=+e)==1?ro:function(t,n){return n-t?A2t(t,n,e):B4(isNaN(t)?n:t)}}function ro(e,t){var n=t-e;return n?Xke(e,n):B4(isNaN(e)?t:e)}const HA=function e(t){var n=C2t(t);function r(i,s){var o=n((i=g0(i)).r,(s=g0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ro(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Qke(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=g0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var I2t=Qke(Yke),O2t=Qke(Kke);function NK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Jke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function P2t(e,t){return(Jke(t)?NK:Zke)(e,t)}function Zke(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=bm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function e$e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ql(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function t$e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var fV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FB=new RegExp(fV.source,"g");function k2t(e){return function(){return e}}function $2t(e){return function(t){return e(t)+""}}function DK(e,t){var n=fV.lastIndex=FB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=fV.exec(e))&&(i=FB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Ql(r,i)})),n=FB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?$2t(u[0].x):k2t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function bm(e,t){var n=typeof t,r;return t==null||n==="boolean"?B4(t):(n==="number"?Ql:n==="string"?(r=m1(t))?(t=r,HA):DK:t instanceof m1?HA:t instanceof Date?e$e:Jke(t)?NK:Array.isArray(t)?Zke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?t$e:Ql)(e,t)}function R2t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function N2t(e,t){var n=j4(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function TI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var _he=180/Math.PI,dV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function n$e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*_he,skewX:Math.atan(u)*_he,scaleX:o,scaleY:a}}var YP;function D2t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dV:n$e(t.a,t.b,t.c,t.d,t.e,t.f)}function M2t(e){return e==null||(YP||(YP=document.createElementNS("http://www.w3.org/2000/svg","g")),YP.setAttribute("transform",e),!(e=YP.transform.baseVal.consolidate()))?dV:(e=e.matrix,n$e(e.a,e.b,e.c,e.d,e.e,e.f))}function r$e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Ql(l,f)},{i:m-2,x:Ql(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ql(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ql(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Ql(l,f)},{i:m-2,x:Ql(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var i$e=r$e(D2t,"px, ","px)","deg)"),s$e=r$e(M2t,", ",")",")"),L2t=1e-12;function bhe(e){return((e=Math.exp(e))+1/e)/2}function F2t(e){return((e=Math.exp(e))-1/e)/2}function B2t(e){return((e=Math.exp(2*e))-1)/(e+1)}const j2t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<L2t)y=Math.log(d/l)/t,g=function(b){return[a+b*h,u+b*p,l*Math.exp(t*b*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),x=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);y=(E-x)/t,g=function(b){var T=b*y,C=bhe(x),A=l/(n*v)*(C*B2t(t*T+x)-F2t(x));return[a+A*h,u+A*p,l*C/bhe(t*T+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function o$e(e){return function(t,n){var r=e((t=p3(t)).h,(n=p3(n)).h),i=ro(t.s,n.s),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const U2t=o$e(j4);var z2t=o$e(ro);function V2t(e,t){var n=ro((e=g3(e)).l,(t=g3(t)).l),r=ro(e.a,t.a),i=ro(e.b,t.b),s=ro(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function a$e(e){return function(t,n){var r=e((t=y3(t)).h,(n=y3(n)).h),i=ro(t.c,n.c),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const H2t=a$e(j4);var q2t=a$e(ro);function u$e(e){return function t(n){n=+n;function r(i,s){var o=e((i=cV(i)).h,(s=cV(s)).h),a=ro(i.s,s.s),u=ro(i.l,s.l),l=ro(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const W2t=u$e(j4);var G2t=u$e(ro);function MK(e,t){t===void 0&&(t=e,e=bm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Y2t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const K2t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:bm,interpolateArray:P2t,interpolateBasis:Yke,interpolateBasisClosed:Kke,interpolateCubehelix:W2t,interpolateCubehelixLong:G2t,interpolateDate:e$e,interpolateDiscrete:R2t,interpolateHcl:H2t,interpolateHclLong:q2t,interpolateHsl:U2t,interpolateHslLong:z2t,interpolateHue:N2t,interpolateLab:V2t,interpolateNumber:Ql,interpolateNumberArray:NK,interpolateObject:t$e,interpolateRgb:HA,interpolateRgbBasis:I2t,interpolateRgbBasisClosed:O2t,interpolateRound:TI,interpolateString:DK,interpolateTransformCss:i$e,interpolateTransformSvg:s$e,interpolateZoom:j2t,piecewise:MK,quantize:Y2t},Symbol.toStringTag,{value:"Module"}));var eE=0,AT=0,Nx=0,l$e=1e3,v3,CT,_3=0,g1=0,U4=0,qA=typeof performance=="object"&&performance.now?performance:Date,c$e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function z4(){return g1||(c$e(X2t),g1=qA.now()+U4)}function X2t(){g1=0}function WA(){this._call=this._time=this._next=null}WA.prototype=LK.prototype={constructor:WA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?z4():+n)+(t==null?0:+t),!this._next&&CT!==this&&(CT?CT._next=this:v3=this,CT=this),this._call=e,this._time=n,hV()},stop:function(){this._call&&(this._call=null,this._time=1/0,hV())}};function LK(e,t,n){var r=new WA;return r.restart(e,t,n),r}function Q2t(){z4(),++eE;for(var e=v3,t;e;)(t=g1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--eE}function whe(){g1=(_3=qA.now())+U4,eE=AT=0;try{Q2t()}finally{eE=0,Z2t(),g1=0}}function J2t(){var e=qA.now(),t=e-_3;t>l$e&&(U4-=t,_3=e)}function Z2t(){for(var e,t=v3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:v3=n);CT=e,hV(r)}function hV(e){if(!eE){AT&&(AT=clearTimeout(AT));var t=e-g1;t>24?(e<1/0&&(AT=setTimeout(whe,e-qA.now()-U4)),Nx&&(Nx=clearInterval(Nx))):(Nx||(_3=qA.now(),Nx=setInterval(J2t,l$e)),eE=1,c$e(whe))}}function Ehe(e,t,n){var r=new WA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function eAt(e,t,n){var r=new WA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?z4():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var tAt=M4("start","end","cancel","interrupt"),nAt=[],f$e=0,She=1,pV=2,O$=3,xhe=4,mV=5,P$=6;function V4(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;rAt(e,n,{name:t,index:r,group:i,on:tAt,tween:nAt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:f$e})}function FK(e,t){var n=Df(e,t);if(n.state>f$e)throw new Error("too late; already scheduled");return n}function _h(e,t){var n=Df(e,t);if(n.state>O$)throw new Error("too late; already running");return n}function Df(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rAt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=LK(s,0,n.time);function s(l){n.state=She,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==She)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===O$)return Ehe(o);h.state===xhe?(h.state=P$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=P$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ehe(function(){n.state===O$&&(n.state=xhe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=pV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pV){for(n.state=O$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=mV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===mV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=P$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function gV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>pV&&r.state<mV,r.state=P$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function iAt(e){return this.each(function(){gV(this,e)})}function sAt(e,t){var n,r;return function(){var i=_h(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function oAt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=_h(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function aAt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Df(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?sAt:oAt)(n,e,t))}function BK(e,t,n){var r=e._id;return e.each(function(){var i=_h(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Df(i,r).value[t]}}function d$e(e,t){var n;return(typeof t=="number"?Ql:t instanceof m1?HA:(n=m1(t))?(t=n,HA):DK)(e,t)}function uAt(e){return function(){this.removeAttribute(e)}}function lAt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cAt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function fAt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function dAt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function hAt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function pAt(e,t){var n=L4(e),r=n==="transform"?s$e:d$e;return this.attrTween(e,typeof t=="function"?(n.local?hAt:dAt)(n,r,BK(this,"attr."+e,t)):t==null?(n.local?lAt:uAt)(n):(n.local?fAt:cAt)(n,r,t))}function mAt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gAt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yAt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&gAt(e,s)),n}return i._value=t,i}function vAt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mAt(e,s)),n}return i._value=t,i}function _At(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=L4(e);return this.tween(n,(r.local?yAt:vAt)(r,t))}function bAt(e,t){return function(){FK(this,e).delay=+t.apply(this,arguments)}}function wAt(e,t){return t=+t,function(){FK(this,e).delay=t}}function EAt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bAt:wAt)(t,e)):Df(this.node(),t).delay}function SAt(e,t){return function(){_h(this,e).duration=+t.apply(this,arguments)}}function xAt(e,t){return t=+t,function(){_h(this,e).duration=t}}function TAt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SAt:xAt)(t,e)):Df(this.node(),t).duration}function AAt(e,t){if(typeof t!="function")throw new Error;return function(){_h(this,e).ease=t}}function CAt(e){var t=this._id;return arguments.length?this.each(AAt(t,e)):Df(this.node(),t).ease}function IAt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_h(this,e).ease=n}}function OAt(e){if(typeof e!="function")throw new Error;return this.each(IAt(this._id,e))}function PAt(e){typeof e!="function"&&(e=Cke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Gp(r,this._parents,this._name,this._id)}function kAt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Gp(o,this._parents,this._name,this._id)}function $At(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function RAt(e,t,n){var r,i,s=$At(t)?FK:_h;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function NAt(e,t){var n=this._id;return arguments.length<2?Df(this.node(),n).on.on(e):this.each(RAt(n,e,t))}function DAt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function MAt(){return this.on("end.remove",DAt(this._id))}function LAt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=IK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,V4(l[d],t,n,d,l,Df(c,n)));return new Gp(s,this._parents,t,n)}function FAt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ake(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Df(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&V4(h,t,n,m,d,p);s.push(d),o.push(c)}return new Gp(s,o,t,n)}var BAt=SI.prototype.constructor;function jAt(){return new BAt(this._groups,this._parents)}function UAt(e,t){var n,r,i;return function(){var s=Jw(this,e),o=(this.style.removeProperty(e),Jw(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function h$e(e){return function(){this.style.removeProperty(e)}}function zAt(e,t,n){var r,i=n+"",s;return function(){var o=Jw(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function VAt(e,t,n){var r,i,s;return function(){var o=Jw(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Jw(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function HAt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=_h(this,e),l=u.on,c=u.value[s]==null?a||(a=h$e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function qAt(e,t,n){var r=(e+="")=="transform"?i$e:d$e;return t==null?this.styleTween(e,UAt(e,r)).on("end.style."+e,h$e(e)):typeof t=="function"?this.styleTween(e,VAt(e,r,BK(this,"style."+e,t))).each(HAt(this._id,e)):this.styleTween(e,zAt(e,r,t),n).on("end.style."+e,null)}function WAt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function GAt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&WAt(e,o,n)),r}return s._value=t,s}function YAt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,GAt(e,t,n??""))}function KAt(e){return function(){this.textContent=e}}function XAt(e){return function(){var t=e(this);this.textContent=t??""}}function QAt(e){return this.tween("text",typeof e=="function"?XAt(BK(this,"text",e)):KAt(e==null?"":e+""))}function JAt(e){return function(t){this.textContent=e.call(this,t)}}function ZAt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&JAt(i)),t}return r._value=e,r}function eCt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ZAt(e))}function tCt(){for(var e=this._name,t=this._id,n=p$e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Df(u,t);V4(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Gp(r,this._parents,e,n)}function nCt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=_h(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var rCt=0;function Gp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function p$e(){return++rCt}var Bh=SI.prototype;Gp.prototype={constructor:Gp,select:LAt,selectAll:FAt,selectChild:Bh.selectChild,selectChildren:Bh.selectChildren,filter:PAt,merge:kAt,selection:jAt,transition:tCt,call:Bh.call,nodes:Bh.nodes,node:Bh.node,size:Bh.size,empty:Bh.empty,each:Bh.each,on:NAt,attr:pAt,attrTween:_At,style:qAt,styleTween:YAt,text:QAt,textTween:eCt,remove:MAt,tween:aAt,delay:EAt,duration:TAt,ease:CAt,easeVarying:OAt,end:nCt,[Symbol.iterator]:Bh[Symbol.iterator]};const iCt=e=>+e;function sCt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oCt={time:null,delay:0,duration:250,ease:sCt};function aCt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uCt(e){var t,n;e instanceof Gp?(t=e._id,e=e._name):(t=p$e(),(n=oCt).time=z4(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&V4(u,e,t,l,o,n||aCt(u,t));return new Gp(r,this._parents,e,t)}SI.prototype.interrupt=iAt;SI.prototype.transition=uCt;const BB=e=>()=>e;function lCt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function cCt(e){e.stopImmediatePropagation()}function jB(e){e.preventDefault(),e.stopImmediatePropagation()}var The={name:"drag"},UB={name:"space"},V_={name:"handle"},H_={name:"center"};const{abs:Ahe,max:qo,min:Wo}=Math;function Che(e){return[+e[0],+e[1]]}function yV(e){return[Che(e[0]),Che(e[1])]}var k$={name:"x",handles:["w","e"].map(GA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},$$={name:"y",handles:["n","s"].map(GA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},fCt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(GA),input:function(e){return e==null?null:yV(e)},output:function(e){return e}},jh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ihe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ohe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},dCt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},hCt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function GA(e){return{type:e}}function pCt(e){return!e.ctrlKey&&!e.button}function mCt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function gCt(){return navigator.maxTouchPoints||"ontouchstart"in this}function zB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function yCt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function vCt(){return jK(k$)}function _Ct(){return jK($$)}function bCt(){return jK(fCt)}function jK(e){var t=mCt,n=pCt,r=gCt,i=!0,s=M4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([GA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",jh.overlay).merge(y).each(function(){var _=zB(this).extent;gs(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([GA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",jh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return jh[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,x=c(_,arguments),E=w.selection,b=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=bm(E,b);function C(A){w.selection=A===1&&b===null?null:T(A),l.call(_),x.brush()}return E!==null&&b!==null?C:C(1)}):g.each(function(){var _=this,w=arguments,x=_.__brush,E=e.input(typeof y=="function"?y.apply(_,w):y,x.extent),b=c(_,w).beforestart();gV(_),x.selection=E===null?null:E,l.call(_),b.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=gs(this),y=zB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=gs(this.that).datum();s.call(g,this.that,new lCt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?The:i&&g.altKey?H_:V_,w=e===$$?null:dCt[v],x=e===k$?null:hCt[v],E=zB(y),b=E.extent,T=E.selection,C=b[0][0],A,O,N=b[0][1],k,L,B=b[1][0],U,G,H=b[1][1],Y,q,D=0,M=0,W,z=w&&x&&i&&g.shiftKey,V,te,le=Array.from(g.touches||[g],De=>{const He=De.identifier;return De=aV(De,y),De.point0=De.slice(),De.identifier=He,De});gV(y);var me=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(W=!0);const De=[le[0],le[1]||le[0]];E.selection=T=[[A=e===$$?C:Wo(De[0][0],De[1][0]),k=e===k$?N:Wo(De[0][1],De[1][1])],[U=e===$$?B:qo(De[0][0],De[1][0]),Y=e===k$?H:qo(De[0][1],De[1][1])]],le.length>1&&Ve(g)}else A=T[0][0],k=T[0][1],U=T[1][0],Y=T[1][1];O=A,L=k,G=U,q=Y;var ye=gs(y).attr("pointer-events","none"),de=ye.selectAll(".overlay").attr("cursor",jh[v]);if(g.touches)me.moved=he,me.ended=Me;else{var we=gs(g.view).on("mousemove.brush",he,!0).on("mouseup.brush",Me,!0);i&&we.on("keydown.brush",Ye,!0).on("keyup.brush",Fe,!0),f2t(g.view)}l.call(y),me.start(g,_.name);function he(De){for(const He of De.changedTouches||[De])for(const Qt of le)Qt.identifier===He.identifier&&(Qt.cur=aV(He,y));if(z&&!V&&!te&&le.length===1){const He=le[0];Ahe(He.cur[0]-He[0])>Ahe(He.cur[1]-He[1])?te=!0:V=!0}for(const He of le)He.cur&&(He[0]=He.cur[0],He[1]=He.cur[1]);W=!0,jB(De),Ve(De)}function Ve(De){const He=le[0],Qt=He.point0;var nt;switch(D=He[0]-Qt[0],M=He[1]-Qt[1],_){case UB:case The:{w&&(D=qo(C-A,Wo(B-U,D)),O=A+D,G=U+D),x&&(M=qo(N-k,Wo(H-Y,M)),L=k+M,q=Y+M);break}case V_:{le[1]?(w&&(O=qo(C,Wo(B,le[0][0])),G=qo(C,Wo(B,le[1][0])),w=1),x&&(L=qo(N,Wo(H,le[0][1])),q=qo(N,Wo(H,le[1][1])),x=1)):(w<0?(D=qo(C-A,Wo(B-A,D)),O=A+D,G=U):w>0&&(D=qo(C-U,Wo(B-U,D)),O=A,G=U+D),x<0?(M=qo(N-k,Wo(H-k,M)),L=k+M,q=Y):x>0&&(M=qo(N-Y,Wo(H-Y,M)),L=k,q=Y+M));break}case H_:{w&&(O=qo(C,Wo(B,A-D*w)),G=qo(C,Wo(B,U+D*w))),x&&(L=qo(N,Wo(H,k-M*x)),q=qo(N,Wo(H,Y+M*x)));break}}G<O&&(w*=-1,nt=A,A=U,U=nt,nt=O,O=G,G=nt,v in Ihe&&de.attr("cursor",jh[v=Ihe[v]])),q<L&&(x*=-1,nt=k,k=Y,Y=nt,nt=L,L=q,q=nt,v in Ohe&&de.attr("cursor",jh[v=Ohe[v]])),E.selection&&(T=E.selection),V&&(O=T[0][0],G=T[1][0]),te&&(L=T[0][1],q=T[1][1]),(T[0][0]!==O||T[0][1]!==L||T[1][0]!==G||T[1][1]!==q)&&(E.selection=[[O,L],[G,q]],l.call(y),me.brush(De,_.name))}function Me(De){if(cCt(De),De.touches){if(De.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else d2t(De.view,W),we.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ye.attr("pointer-events","all"),de.attr("cursor",jh.overlay),E.selection&&(T=E.selection),yCt(T)&&(E.selection=null,l.call(y)),me.end(De,_.name)}function Ye(De){switch(De.keyCode){case 16:{z=w&&x;break}case 18:{_===V_&&(w&&(U=G-D*w,A=O+D*w),x&&(Y=q-M*x,k=L+M*x),_=H_,Ve(De));break}case 32:{(_===V_||_===H_)&&(w<0?U=G-D:w>0&&(A=O-D),x<0?Y=q-M:x>0&&(k=L-M),_=UB,de.attr("cursor",jh.selection),Ve(De));break}default:return}jB(De)}function Fe(De){switch(De.keyCode){case 16:{z&&(V=te=z=!1,Ve(De));break}case 18:{_===H_&&(w<0?U=G:w>0&&(A=O),x<0?Y=q:x>0&&(k=L),_=V_,Ve(De));break}case 32:{_===UB&&(De.altKey?(w&&(U=G-D*w,A=O+D*w),x&&(Y=q-M*x,k=L+M*x),_=H_):(w<0?U=G:w>0&&(A=O),x<0?Y=q:x>0&&(k=L),_=V_),de.attr("cursor",jh[v]),Ve(De));break}default:return}jB(De)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=yV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:BB(yV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:BB(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:BB(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const vV=Math.PI,_V=2*vV,Yy=1e-6,wCt=_V-Yy;function m$e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ECt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return m$e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let UK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m$e:ECt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Yy)if(!(Math.abs(f*u-l*c)>Yy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((vV-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,x=_/y;Math.abs(w-1)>Yy&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Yy||Math.abs(this._y1-c)>Yy)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%_V+_V),d>wCt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Yy&&this._append`A${r},${r},0,${+(d>=vV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function H4(){return new UK}H4.prototype=UK.prototype;const Op=11102230246251565e-32,Go=134217729,SCt=(3+8*Op)*Op;function VB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function xCt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function AI(e){return new Float64Array(e)}const TCt=(3+16*Op)*Op,ACt=(2+12*Op)*Op,CCt=(9+64*Op)*Op*Op,q_=AI(4),Phe=AI(8),khe=AI(12),$he=AI(16),Oa=AI(4);function ICt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,x,E,b,T;const C=e-i,A=n-i,O=t-s,N=r-s;w=C*N,d=Go*C,h=d-(d-C),p=C-h,d=Go*N,m=d-(d-N),g=N-m,x=p*g-(w-h*m-p*m-h*g),E=O*A,d=Go*O,h=d-(d-O),p=O-h,d=Go*A,m=d-(d-A),g=A-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,q_[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,q_[1]=_-(y+f)+(f-E),T=v+y,f=T-v,q_[2]=v-(T-f)+(y-f),q_[3]=T;let k=xCt(4,q_),L=ACt*o;if(k>=L||-k>=L||(f=e-C,a=e-(C+f)+(f-i),f=n-A,l=n-(A+f)+(f-i),f=t-O,u=t-(O+f)+(f-s),f=r-N,c=r-(N+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(L=CCt*o+SCt*Math.abs(k),k+=C*c+N*a-(O*l+A*u),k>=L||-k>=L))return k;w=a*N,d=Go*a,h=d-(d-a),p=a-h,d=Go*N,m=d-(d-N),g=N-m,x=p*g-(w-h*m-p*m-h*g),E=u*A,d=Go*u,h=d-(d-u),p=u-h,d=Go*A,m=d-(d-A),g=A-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,Oa[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,Oa[1]=_-(y+f)+(f-E),T=v+y,f=T-v,Oa[2]=v-(T-f)+(y-f),Oa[3]=T;const B=VB(4,q_,4,Oa,Phe);w=C*c,d=Go*C,h=d-(d-C),p=C-h,d=Go*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),E=O*l,d=Go*O,h=d-(d-O),p=O-h,d=Go*l,m=d-(d-l),g=l-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,Oa[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,Oa[1]=_-(y+f)+(f-E),T=v+y,f=T-v,Oa[2]=v-(T-f)+(y-f),Oa[3]=T;const U=VB(B,Phe,4,Oa,khe);w=a*c,d=Go*a,h=d-(d-a),p=a-h,d=Go*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),E=u*l,d=Go*u,h=d-(d-u),p=u-h,d=Go*l,m=d-(d-l),g=l-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,Oa[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,Oa[1]=_-(y+f)+(f-E),T=v+y,f=T-v,Oa[2]=v-(T-f)+(y-f),Oa[3]=T;const G=VB(U,khe,4,Oa,$he);return $he[G-1]}function KP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=TCt*l?u:-ICt(e,t,n,r,i,s,l)}const Rhe=Math.pow(2,-52),XP=new Uint32Array(512);class b3{static from(t,n=RCt,r=NCt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new b3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const O=t[2*A],N=t[2*A+1];O<a&&(a=O),N<u&&(u=N),O>l&&(l=O),N>c&&(c=N),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let A=0;A<o;A++){const O=HB(f,d,t[2*A],t[2*A+1]);O<h&&(p=A,h=O)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let A=0;A<o;A++){if(A===p)continue;const O=HB(y,v,t[2*A],t[2*A+1]);O<h&&O>0&&(m=A,h=O)}let _=t[2*m],w=t[2*m+1],x=1/0;for(let A=0;A<o;A++){if(A===p||A===m)continue;const O=kCt(y,v,_,w,t[2*A],t[2*A+1]);O<x&&(g=A,x=O)}let E=t[2*g],b=t[2*g+1];if(x===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];jb(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let O=0;for(let N=0,k=-1/0;N<o;N++){const L=this._ids[N];this._dists[L]>k&&(A[O++]=L,k=this._dists[L])}this.hull=A.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(KP(y,v,_,w,E,b)<0){const A=m,O=_,N=w;m=g,_=E,w=b,g=A,E=O,b=N}const T=$Ct(y,v,_,w,E,b);this._cx=T.x,this._cy=T.y;for(let A=0;A<o;A++)this._dists[A]=HB(t[2*A],t[2*A+1],T.x,T.y);jb(this._ids,this._dists,0,o-1),this._hullStart=p;let C=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,w)]=m,s[this._hashKey(E,b)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let A=0,O,N;A<this._ids.length;A++){const k=this._ids[A],L=t[2*k],B=t[2*k+1];if(A>0&&Math.abs(L-O)<=Rhe&&Math.abs(B-N)<=Rhe||(O=L,N=B,k===p||k===m||k===g))continue;let U=0;for(let D=0,M=this._hashKey(L,B);D<this._hashSize&&(U=s[(M+D)%this._hashSize],!(U!==-1&&U!==r[U]));D++);U=n[U];let G=U,H;for(;H=r[G],KP(L,B,t[2*G],t[2*G+1],t[2*H],t[2*H+1])>=0;)if(G=H,G===U){G=-1;break}if(G===-1)continue;let Y=this._addTriangle(G,k,r[G],-1,-1,i[G]);i[k]=this._legalize(Y+2),i[G]=Y,C++;let q=r[G];for(;H=r[q],KP(L,B,t[2*q],t[2*q+1],t[2*H],t[2*H+1])<0;)Y=this._addTriangle(q,k,H,i[k],-1,i[q]),i[k]=this._legalize(Y+2),r[q]=q,C--,q=H;if(G===U)for(;H=n[G],KP(L,B,t[2*H],t[2*H+1],t[2*G],t[2*G+1])<0;)Y=this._addTriangle(H,k,G,-1,i[G],i[H]),this._legalize(Y+2),i[H]=Y,r[G]=G,C--,G=H;this._hullStart=n[k]=G,r[G]=n[q]=k,r[k]=q,s[this._hashKey(L,B)]=k,s[this._hashKey(t[2*G],t[2*G+1])]=G}this.hull=new Uint32Array(C);for(let A=0,O=this._hullStart;A<C;A++)this.hull[A]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(OCt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=XP[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(PCt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<XP.length&&(XP[s++]=v)}else{if(s===0)break;t=XP[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function OCt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function HB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function PCt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function kCt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function $Ct(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function jb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Dx(e,i,s),t[e[n]]>t[e[r]]&&Dx(e,n,r),t[e[s]]>t[e[r]]&&Dx(e,s,r),t[e[n]]>t[e[s]]&&Dx(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;Dx(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(jb(e,t,s,r),jb(e,t,n,o-1)):(jb(e,t,n,o-1),jb(e,t,s,r))}}function Dx(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function RCt(e){return e[0]}function NCt(e){return e[1]}var Nhe={},qB={},WB=34,Mx=10,GB=13;function g$e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function DCt(e,t){var n=g$e(e);return function(r,i){return t(n(r),i,e)}}function Dhe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function uu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function MCt(e){return e<0?"-"+uu(-e,6):e>9999?"+"+uu(e,6):uu(e,4)}function LCt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":MCt(e.getUTCFullYear())+"-"+uu(e.getUTCMonth()+1,2)+"-"+uu(e.getUTCDate(),2)+(i?"T"+uu(t,2)+":"+uu(n,2)+":"+uu(r,2)+"."+uu(i,3)+"Z":r?"T"+uu(t,2)+":"+uu(n,2)+":"+uu(r,2)+"Z":n||t?"T"+uu(t,2)+":"+uu(n,2)+"Z":"")}function y$e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?DCt(g,d):g$e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===Mx&&--p,f.charCodeAt(p-1)===GB&&--p;function w(){if(v)return qB;if(_)return _=!1,Nhe;var E,b=m,T;if(f.charCodeAt(b)===WB){for(;m++<p&&f.charCodeAt(m)!==WB||f.charCodeAt(++m)===WB;);return(E=m)>=p?v=!0:(T=f.charCodeAt(m++))===Mx?_=!0:T===GB&&(_=!0,f.charCodeAt(m)===Mx&&++m),f.slice(b+1,E-1).replace(/""/g,'"')}for(;m<p;){if((T=f.charCodeAt(E=m++))===Mx)_=!0;else if(T===GB)_=!0,f.charCodeAt(m)===Mx&&++m;else if(T!==n)continue;return f.slice(b,E)}return v=!0,f.slice(b,p)}for(;(y=w())!==qB;){for(var x=[];y!==Nhe&&y!==qB;)x.push(y),y=w();d&&(x=d(x,g++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Dhe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Dhe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?LCt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var FCt=y$e(","),BCt=FCt.parse;function jCt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function UCt(e,t){return fetch(e,t).then(jCt)}function zCt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),UCt(t,n).then(function(i){return e(i,r)})}}var VCt=zCt(BCt);function HCt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function qCt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return v$e(this.cover(t,n),t,n,e)}function v$e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function WCt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)v$e(this,o[n],a[n],e[n]);return this}function GCt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function YCt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function KCt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ba(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function XCt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ba(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ba(h[3],g,y,u,l),new Ba(h[2],o,y,g,l),new Ba(h[1],g,a,u,y),new Ba(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var x=Math.sqrt(n=w);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function QCt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function JCt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ZCt(){return this._root}function eIt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function tIt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ba(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ba(i,l,c,a,u)),(i=r[2])&&t.push(new Ba(i,s,c,l,u)),(i=r[1])&&t.push(new Ba(i,l,o,a,c)),(i=r[0])&&t.push(new Ba(i,s,o,l,c))}return this}function nIt(e){var t=[],n=[],r;for(this._root&&t.push(new Ba(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ba(s,o,a,c,f)),(s=i[1])&&t.push(new Ba(s,c,a,u,f)),(s=i[2])&&t.push(new Ba(s,o,f,c,l)),(s=i[3])&&t.push(new Ba(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function rIt(e){return e[0]}function iIt(e){return arguments.length?(this._x=e,this):this._x}function sIt(e){return e[1]}function oIt(e){return arguments.length?(this._y=e,this):this._y}function zK(e,t,n){var r=new VK(t??rIt,n??sIt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function VK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Mhe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var tu=zK.prototype=VK.prototype;tu.copy=function(){var e=new VK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Mhe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Mhe(r));return e};tu.add=qCt;tu.addAll=WCt;tu.cover=GCt;tu.data=YCt;tu.extent=KCt;tu.find=XCt;tu.remove=QCt;tu.removeAll=JCt;tu.root=ZCt;tu.size=eIt;tu.visit=tIt;tu.visitAfter=nIt;tu.x=iIt;tu.y=oIt;function ja(e){return function(){return e}}function Eg(e){return(e()-.5)*1e-6}function aIt(e){return e.x+e.vx}function uIt(e){return e.y+e.vy}function lIt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ja(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=zK(t,aIt,uIt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,x,E,b){var T=_.data,C=_.r,A=m+C;if(T){if(T.index>d.index){var O=h-T.x-T.vx,N=p-T.y-T.vy,k=O*O+N*N;k<A*A&&(O===0&&(O=Eg(r),k+=O*O),N===0&&(N=Eg(r),k+=N*N),k=(A-(k=Math.sqrt(k)))/k*i,d.vx+=(O*=k)*(A=(C*=C)/(g+C)),d.vy+=(N*=k)*A,T.vx-=O*(A=1-A),T.vy-=N*A)}return}return w>h+A||E<h-A||x>p+A||b<p-A}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ja(+l),u(),o):e},o}function cIt(e){return e.index}function Lhe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function fIt(e){var t=cIt,n=f,r,i=ja(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,x,E,b,T,C,A;_<v;++_)w=e[_],x=w.source,E=w.target,b=E.x+E.vx-x.x-x.vx||Eg(l),T=E.y+E.vy-x.y-x.vy||Eg(l),C=Math.sqrt(b*b+T*T),C=(C-s[_])/C*g*r[_],b*=C,T*=C,E.vx-=b*(A=u[_]),E.vy-=T*A,x.vx+=b*(A=1-A),x.vy+=T*A}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((x,E)=>[t(x,E,o),x])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Lhe(_,w.source)),typeof w.target!="object"&&(w.target=Lhe(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ja(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ja(+g),m(),d):i},d}const dIt=1664525,hIt=1013904223,Fhe=4294967296;function pIt(){let e=1;return()=>(e=(dIt*e+hIt)%Fhe)/Fhe}function mIt(e){return e.x}function gIt(e){return e.y}var yIt=10,vIt=Math.PI*(3-Math.sqrt(5));function _It(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=LK(f),l=M4("tick","end"),c=pIt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=yIt*Math.sqrt(.5+m),_=m*vIt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,x,E,b,T;for(y==null?y=1/0:y*=y,v=0;v<_;++v)b=e[v],w=m-b.x,x=g-b.y,E=w*w+x*x,E<y&&(T=b,y=E);return T},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function bIt(){var e,t,n,r,i=ja(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=zK(e,mIt,gIt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=Eg(n),w+=y*y),v===0&&(v=Eg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Eg(n),w+=y*y),v===0&&(v=Eg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ja(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function wIt(e){var t=ja(.1),n,r,i;typeof e!="function"&&(e=ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ja(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ja(+a),o(),s):e},s}function EIt(e){var t=ja(.1),n,r,i;typeof e!="function"&&(e=ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ja(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ja(+a),o(),s):e},s}function SIt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function w3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tE(e){return e=w3(Math.abs(e)),e?e[1]:NaN}function xIt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function TIt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var AIt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function y1(e){if(!(t=AIt.exec(e)))throw new Error("invalid format: "+e);var t;return new HK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}y1.prototype=HK.prototype;function HK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}HK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CIt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _$e;function IIt(e,t){var n=w3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_$e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+w3(e,Math.max(0,t+s-1))[0]}function Bhe(e,t){var n=w3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const jhe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:SIt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bhe(e*100,t),r:Bhe,s:IIt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Uhe(e){return e}var zhe=Array.prototype.map,Vhe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function b$e(e){var t=e.grouping===void 0||e.thousands===void 0?Uhe:xIt(zhe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Uhe:TIt(zhe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=y1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,x=f.type;x==="n"?(v=!0,x="g"):jhe[x]||(_===void 0&&(_=12),w=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b=m==="$"?r:/[%p]/.test(x)?o:"",T=jhe[x],C=/[defgprs%]/.test(x);_=_===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function A(O){var N=E,k=b,L,B,U;if(x==="c")k=T(O)+k,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?u:T(Math.abs(O),_),w&&(O=CIt(O)),G&&+O==0&&p!=="+"&&(G=!1),N=(G?p==="("?p:a:p==="-"||p==="("?"":p)+N,k=(x==="s"?Vhe[8+_$e/3]:"")+k+(G&&p==="("?")":""),C){for(L=-1,B=O.length;++L<B;)if(U=O.charCodeAt(L),48>U||U>57){k=(U===46?i+O.slice(L+1):O.slice(L))+k,O=O.slice(0,L);break}}}v&&!g&&(O=t(O,1/0));var H=N.length+O.length+k.length,Y=H<y?new Array(y-H+1).join(d):"";switch(v&&g&&(O=t(Y+O,Y.length?y-k.length:1/0),Y=""),h){case"<":O=N+O+k+Y;break;case"=":O=N+Y+O+k;break;case"^":O=Y.slice(0,H=Y.length>>1)+N+O+k+Y.slice(H);break;default:O=Y+N+O+k;break}return s(O)}return A.toString=function(){return f+""},A}function c(f,d){var h=l((f=y1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(tE(d)/3)))*3,m=Math.pow(10,-p),g=Vhe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var QP,yS,qK;OIt({thousands:",",grouping:[3],currency:["$",""]});function OIt(e){return QP=b$e(e),yS=QP.format,qK=QP.formatPrefix,QP}function w$e(e){return Math.max(0,-tE(Math.abs(e)))}function E$e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tE(t)/3)))*3-tE(Math.abs(e)))}function S$e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tE(t)-tE(e))+1}function PIt(e,t){return e.parent===t.parent?1:2}function kIt(e){return e.reduce($It,0)/e.length}function $It(e,t){return e+t.x}function RIt(e){return 1+e.reduce(NIt,0)}function NIt(e,t){return Math.max(e,t.y)}function DIt(e){for(var t;t=e.children;)e=t[0];return e}function MIt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function LIt(){var e=PIt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=kIt(h),d.y=RIt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=DIt(s),l=MIt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function FIt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function BIt(){return this.eachAfter(FIt)}function jIt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function UIt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function zIt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function VIt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function HIt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function qIt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function WIt(e){for(var t=this,n=GIt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function GIt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function YIt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function KIt(){return Array.from(this)}function XIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function QIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*JIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function q4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tOt)):t===void 0&&(t=eOt);for(var n=new nE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new nE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(x$e)}function ZIt(){return q4(this).eachBefore(nOt)}function eOt(e){return e.children}function tOt(e){return Array.isArray(e)?e[1]:null}function nOt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function x$e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nE(e){this.data=e,this.depth=this.height=0,this.parent=null}nE.prototype=q4.prototype={constructor:nE,count:BIt,each:jIt,eachAfter:zIt,eachBefore:UIt,find:VIt,sum:HIt,sort:qIt,path:WIt,ancestors:YIt,descendants:KIt,leaves:XIt,links:QIt,copy:ZIt,[Symbol.iterator]:JIt};function R$(e){return e==null?null:T$e(e)}function T$e(e){if(typeof e!="function")throw new Error;return e}function uv(){return 0}function cb(e){return function(){return e}}const rOt=1664525,iOt=1013904223,Hhe=4294967296;function sOt(){let e=1;return()=>(e=(rOt*e+iOt)%Hhe)/Hhe}function oOt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aOt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function uOt(e,t){for(var n=0,r=(e=aOt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&A$e(o,s)?++n:(o=cOt(i=lOt(i,s)),n=0);return o}function lOt(e,t){var n,r;if(YB(t,e))return[t];for(n=0;n<e.length;++n)if(JP(t,e[n])&&YB(IT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(JP(IT(e[n],e[r]),t)&&JP(IT(e[n],t),e[r])&&JP(IT(e[r],t),e[n])&&YB(C$e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function JP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function A$e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function YB(e,t){for(var n=0;n<t.length;++n)if(!A$e(e,t[n]))return!1;return!0}function cOt(e){switch(e.length){case 1:return fOt(e[0]);case 2:return IT(e[0],e[1]);case 3:return C$e(e[0],e[1],e[2])}}function fOt(e){return{x:e.x,y:e.y,r:e.r}}function IT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function C$e(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,x=h*p-d*m,E=(p*w-m*_)/(x*2)-r,b=(m*g-p*y)/x,T=(h*_-d*w)/(x*2)-i,C=(d*y-h*g)/x,A=b*b+C*C-1,O=2*(s+E*b+T*C),N=E*E+T*T-s*s,k=-(Math.abs(A)>1e-6?(O+Math.sqrt(O*O-4*A*N))/(2*A):N/O);return{x:r+E+b*k,y:i+T+C*k,r:k}}function qhe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Whe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Ghe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function ZP(e){this._=e,this.next=null,this.previous=null}function dOt(e,t){if(!(s=(e=oOt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;qhe(r,n,i=e[2]),n=new ZP(n),r=new ZP(r),i=new ZP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){qhe(n._,r._,i=e[u]),i=new ZP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Whe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Whe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Ghe(n);(i=i.next)!==r;)(a=Ghe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=uOt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function hOt(e){return Math.sqrt(e.value)}function I$e(){var e=null,t=1,n=1,r=uv;function i(s){const o=sOt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Yhe(e)).eachAfter(KB(r,.5,o)).eachBefore(Khe(1)):s.eachBefore(Yhe(hOt)).eachAfter(KB(uv,1,o)).eachAfter(KB(r,s.r/Math.min(t,n),o)).eachBefore(Khe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=R$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:cb(+s),i):r},i}function Yhe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function KB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=dOt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Khe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function O$e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function CI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function pOt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(O$e),o}function s(o,a){return function(u){u.children&&CI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var mOt={depth:-1},Xhe={},XB={};function gOt(e){return e.id}function yOt(e){return e.parentId}function Qhe(){var e=gOt,t=yOt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,x)=>vOt(n(w,x,i))),v=y.map(Jhe),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(Jhe(w)),s.push(XB));o=(w,x)=>y[x],a=(w,x)=>v[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new nE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Xhe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Xhe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===XB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===XB);--y)h.data=null}if(f.parent=mOt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(x$e),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=R$(i),r):e},r.parentId=function(i){return arguments.length?(t=R$(i),r):t},r.path=function(i){return arguments.length?(n=R$(i),r):n},r}function vOt(e){e=`${e}`;let t=e.length;return bV(e,t-1)&&!bV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Jhe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!bV(e,t););return e.slice(0,t)}function bV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function _Ot(e,t){return e.parent===t.parent?1:2}function QB(e){var t=e.children;return t?t[0]:e.t}function JB(e){var t=e.children;return t?t[t.length-1]:e.t}function bOt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function wOt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function EOt(e,t,n){return e.a.parent===t.parent?e.a:n}function N$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}N$.prototype=Object.create(nE.prototype);function SOt(e){for(var t=new N$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new N$(s[o],o)),i.parent=n;return(t.parent=new N$(null,0)).children=[t],t}function xOt(){var e=_Ot,t=1,n=1,r=null;function i(l){var c=SOt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){wOt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=JB(p),d=QB(d),p&&d;)m=QB(m),h=JB(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(bOt(EOt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!JB(h)&&(h.t=p,h.m+=v-y),d&&!QB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function W4(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var P$e=(1+Math.sqrt(5))/2;function k$e(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,x,E;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),E=g*g*x,w=Math.max(v/E,E/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),E=g*g*x,_=Math.max(v/E,E/y),_>w){g-=l;break}w=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?CI(u,n,r,i,m?r+=p*g/m:s):W4(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const $$e=function e(t){function n(r,i,s,o,a){k$e(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(P$e);function TOt(){var e=$$e,t=!1,n=1,r=1,i=[0],s=uv,o=uv,a=uv,u=uv,l=uv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(O$e),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=T$e(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:cb(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:cb(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:cb(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:cb(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:cb(+d),c):l},c}function AOt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,x=f+1,E=d-1;x<E;){var b=x+E>>>1;l[b]<w?x=b+1:E=b}w-l[x-1]<l[x]-w&&f+1<x&&--x;var T=l[x]-_,C=h-T;if(g-p>y-m){var A=h?(p*C+g*T)/h:g;c(f,x,T,p,m,A,y),c(x,d,C,A,m,g,y)}else{var O=h?(m*C+y*T)/h:y;c(f,x,T,p,m,g,O),c(x,d,C,p,O,g,y)}}}function COt(e,t,n,r,i){(e.depth&1?W4:CI)(e,t,n,r,i)}const IOt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?CI(l,i,s,o,m?s+=(a-s)*l.value/m:a):W4(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=k$e(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(P$e);function O2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function OOt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function R$e(e){let t,n,r;e.length!==2?(t=O2,n=(a,u)=>O2(e(a),u),r=(a,u)=>e(a)-u):(t=e===O2||e===OOt?e:POt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function POt(){return 0}function N$e(e){return e===null?NaN:+e}const kOt=R$e(O2),$Ot=kOt.right;R$e(N$e).center;const G4=$Ot,ROt=Math.sqrt(50),NOt=Math.sqrt(10),DOt=Math.sqrt(2);function E3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=ROt?10:s>=NOt?5:s>=DOt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?E3(e,t,n*2):[a,u,l]}function wV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?E3(t,e,n):E3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function EV(e,t,n){return t=+t,e=+e,n=+n,E3(e,t,n)[2]}function MOt(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?EV(t,e,n):EV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function LOt(e,t,n=N$e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function FOt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Mf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ty(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const SV=Symbol("implicit");function vS(){var e=new she,t=[],n=[],r=SV;function i(s){let o=e.get(s);if(o===void 0){if(r!==SV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new she;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return vS(t,n).unknown(r)},Mf.apply(i,arguments),i}function II(){var e=vS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=FOt(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return II(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Mf.apply(f(),arguments)}function BOt(e){return function(){return e}}function xV(e){return+e}var Zhe=[0,1];function Tu(e){return e}function TV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:BOt(isNaN(t)?NaN:.5)}function jOt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function UOt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=TV(i,r),s=n(o,s)):(r=TV(r,i),s=n(s,o)),function(a){return s(r(a))}}function zOt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=TV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=G4(e,a,1,r)-1;return s[u](i[u](a))}}function OI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Y4(){var e=Zhe,t=Zhe,n=bm,r,i,s,o=Tu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Tu&&(o=jOt(e[0],e[d-1])),a=d>2?zOt:UOt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Ql)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,xV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=TI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Tu,c()):o!==Tu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function D$e(){return Y4()(Tu,Tu)}function M$e(e,t,n,r){var i=MOt(e,t,n),s;switch(r=y1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=E$e(i,o))&&(r.precision=s),qK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=S$e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=w$e(i))&&(r.precision=s-(r.type==="%")*2);break}}return yS(r)}function o_(e){var t=e.domain;return e.ticks=function(n){var r=t();return wV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return M$e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=EV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Yp(){var e=D$e();return e.copy=function(){return OI(e,Yp())},Mf.apply(e,arguments),o_(e)}function L$e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,xV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return L$e(e).unknown(t)},e=arguments.length?Array.from(e,xV):[0,1],o_(n)}function F$e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function epe(e){return Math.log(e)}function tpe(e){return Math.exp(e)}function VOt(e){return-Math.log(-e)}function HOt(e){return-Math.exp(-e)}function qOt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function WOt(e){return e===10?qOt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function GOt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function npe(e){return(t,n)=>-e(-t,n)}function WK(e){const t=e(epe,tpe),n=t.domain;let r=10,i,s;function o(){return i=GOt(r),s=WOt(r),n()[0]<0?(i=npe(i),s=npe(s),e(VOt,HOt)):e(epe,tpe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=wV(l,c,g))}else y=wV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=y1(u)).precision==null&&(u.trim=!0),u=yS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(F$e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function B$e(){const e=WK(Y4()).domain([1,10]);return e.copy=()=>OI(e,B$e()).base(e.base()),Mf.apply(e,arguments),e}function rpe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ipe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GK(e){var t=1,n=e(rpe(t),ipe(t));return n.constant=function(r){return arguments.length?e(rpe(t=+r),ipe(t)):t},o_(n)}function j$e(){var e=GK(Y4());return e.copy=function(){return OI(e,j$e()).constant(e.constant())},Mf.apply(e,arguments)}function spe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YOt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function KOt(e){return e<0?-e*e:e*e}function YK(e){var t=e(Tu,Tu),n=1;function r(){return n===1?e(Tu,Tu):n===.5?e(YOt,KOt):e(spe(n),spe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},o_(t)}function KK(){var e=YK(Y4());return e.copy=function(){return OI(e,KK()).exponent(e.exponent())},Mf.apply(e,arguments),e}function XOt(){return KK.apply(null,arguments).exponent(.5)}function U$e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=LOt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[G4(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(O2),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return U$e().domain(e).range(t).unknown(r)},Mf.apply(s,arguments)}function z$e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[G4(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return z$e().domain([e,t]).range(i).unknown(s)},Mf.apply(o_(o),arguments)}function V$e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[G4(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return V$e().domain(e).range(t).unknown(n)},Mf.apply(i,arguments)}const ZB=new Date,ej=new Date;function qs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>qs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(ZB.setTime(+s),ej.setTime(+o),e(ZB),e(ej),Math.floor(n(ZB,ej))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const rE=qs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):rE);rE.range;const mp=1e3,nc=mp*60,gp=nc*60,Kp=gp*24,XK=Kp*7,ope=Kp*30,tj=Kp*365,yp=qs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mp)},(e,t)=>(t-e)/mp,e=>e.getUTCSeconds());yp.range;const K4=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mp)},(e,t)=>{e.setTime(+e+t*nc)},(e,t)=>(t-e)/nc,e=>e.getMinutes());K4.range;const X4=qs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*nc)},(e,t)=>(t-e)/nc,e=>e.getUTCMinutes());X4.range;const Q4=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mp-e.getMinutes()*nc)},(e,t)=>{e.setTime(+e+t*gp)},(e,t)=>(t-e)/gp,e=>e.getHours());Q4.range;const J4=qs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*gp)},(e,t)=>(t-e)/gp,e=>e.getUTCHours());J4.range;const Pp=qs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nc)/Kp,e=>e.getDate()-1);Pp.range;const Yg=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kp,e=>e.getUTCDate()-1);Yg.range;const H$e=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kp,e=>Math.floor(e/Kp));H$e.range;function a_(e){return qs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*nc)/XK)}const _S=a_(0),S3=a_(1),QOt=a_(2),JOt=a_(3),iE=a_(4),ZOt=a_(5),ePt=a_(6);_S.range;S3.range;QOt.range;JOt.range;iE.range;ZOt.range;ePt.range;function u_(e){return qs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/XK)}const bS=u_(0),x3=u_(1),tPt=u_(2),nPt=u_(3),sE=u_(4),rPt=u_(5),iPt=u_(6);bS.range;x3.range;tPt.range;nPt.range;sE.range;rPt.range;iPt.range;const YA=qs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());YA.range;const KA=qs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());KA.range;const Jd=qs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Jd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Jd.range;const Zd=qs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Zd.range;function nj(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sPt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oPt(e){let t,n,r;e.length!==2?(t=nj,n=(a,u)=>nj(e(a),u),r=(a,u)=>e(a)-u):(t=e===nj||e===sPt?e:aPt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function aPt(){return 0}const uPt=Math.sqrt(50),lPt=Math.sqrt(10),cPt=Math.sqrt(2);function q$e(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=uPt?10:s>=lPt?5:s>=cPt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?q$e(e,t,n*2):[a,u,l]}function ape(e,t,n){return t=+t,e=+e,n=+n,q$e(e,t,n)[2]}function upe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ape(t,e,n):ape(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function W$e(e,t,n,r,i,s){const o=[[yp,1,mp],[yp,5,5*mp],[yp,15,15*mp],[yp,30,30*mp],[s,1,nc],[s,5,5*nc],[s,15,15*nc],[s,30,30*nc],[i,1,gp],[i,3,3*gp],[i,6,6*gp],[i,12,12*gp],[r,1,Kp],[r,2,2*Kp],[n,1,XK],[t,1,ope],[t,3,3*ope],[e,1,tj]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=oPt(([,,g])=>g).right(o,d);if(h===o.length)return e.every(upe(l/tj,c/tj,f));if(h===0)return rE.every(Math.max(upe(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[fPt,dPt]=W$e(Zd,KA,bS,H$e,J4,X4),[hPt,pPt]=W$e(Jd,YA,_S,Pp,Q4,K4);function rj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ij(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Lx(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function G$e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=Fx(i),c=Bx(i),f=Fx(s),d=Bx(s),h=Fx(o),p=Bx(o),m=Fx(a),g=Bx(a),y=Fx(u),v=Bx(u),_={a:G,A:H,b:Y,B:q,c:null,d:ppe,e:ppe,f:LPt,g:GPt,G:KPt,H:NPt,I:DPt,j:MPt,L:Y$e,m:FPt,M:BPt,p:D,q:M,Q:ype,s:vpe,S:jPt,u:UPt,U:zPt,V:VPt,w:HPt,W:qPt,x:null,X:null,y:WPt,Y:YPt,Z:XPt,"%":gpe},w={a:W,A:z,b:V,B:te,c:null,d:mpe,e:mpe,f:ekt,g:ckt,G:dkt,H:QPt,I:JPt,j:ZPt,L:X$e,m:tkt,M:nkt,p:le,q:me,Q:ype,s:vpe,S:rkt,u:ikt,U:skt,V:okt,w:akt,W:ukt,x:null,X:null,y:lkt,Y:fkt,Z:hkt,"%":gpe},x={a:A,A:O,b:N,B:k,c:L,d:dpe,e:dpe,f:PPt,g:fpe,G:cpe,H:hpe,I:hpe,j:APt,L:OPt,m:TPt,M:CPt,p:C,q:xPt,Q:$Pt,s:RPt,S:IPt,u:_Pt,U:bPt,V:wPt,w:vPt,W:EPt,x:B,X:U,y:fpe,Y:cpe,Z:SPt,"%":kPt};_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(ye,de){return function(we){var he=[],Ve=-1,Me=0,Ye=ye.length,Fe,De,He;for(we instanceof Date||(we=new Date(+we));++Ve<Ye;)ye.charCodeAt(Ve)===37&&(he.push(ye.slice(Me,Ve)),(De=lpe[Fe=ye.charAt(++Ve)])!=null?Fe=ye.charAt(++Ve):De=Fe==="e"?" ":"0",(He=de[Fe])&&(Fe=He(we,De)),he.push(Fe),Me=Ve+1);return he.push(ye.slice(Me,Ve)),he.join("")}}function b(ye,de){return function(we){var he=Lx(1900,void 0,1),Ve=T(he,ye,we+="",0),Me,Ye;if(Ve!=we.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(de&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Me=ij(Lx(he.y,0,1)),Ye=Me.getUTCDay(),Me=Ye>4||Ye===0?x3.ceil(Me):x3(Me),Me=Yg.offset(Me,(he.V-1)*7),he.y=Me.getUTCFullYear(),he.m=Me.getUTCMonth(),he.d=Me.getUTCDate()+(he.w+6)%7):(Me=rj(Lx(he.y,0,1)),Ye=Me.getDay(),Me=Ye>4||Ye===0?S3.ceil(Me):S3(Me),Me=Pp.offset(Me,(he.V-1)*7),he.y=Me.getFullYear(),he.m=Me.getMonth(),he.d=Me.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),Ye="Z"in he?ij(Lx(he.y,0,1)).getUTCDay():rj(Lx(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(Ye+5)%7:he.w+he.U*7-(Ye+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,ij(he)):rj(he)}}function T(ye,de,we,he){for(var Ve=0,Me=de.length,Ye=we.length,Fe,De;Ve<Me;){if(he>=Ye)return-1;if(Fe=de.charCodeAt(Ve++),Fe===37){if(Fe=de.charAt(Ve++),De=x[Fe in lpe?de.charAt(Ve++):Fe],!De||(he=De(ye,we,he))<0)return-1}else if(Fe!=we.charCodeAt(he++))return-1}return he}function C(ye,de,we){var he=l.exec(de.slice(we));return he?(ye.p=c.get(he[0].toLowerCase()),we+he[0].length):-1}function A(ye,de,we){var he=h.exec(de.slice(we));return he?(ye.w=p.get(he[0].toLowerCase()),we+he[0].length):-1}function O(ye,de,we){var he=f.exec(de.slice(we));return he?(ye.w=d.get(he[0].toLowerCase()),we+he[0].length):-1}function N(ye,de,we){var he=y.exec(de.slice(we));return he?(ye.m=v.get(he[0].toLowerCase()),we+he[0].length):-1}function k(ye,de,we){var he=m.exec(de.slice(we));return he?(ye.m=g.get(he[0].toLowerCase()),we+he[0].length):-1}function L(ye,de,we){return T(ye,t,de,we)}function B(ye,de,we){return T(ye,n,de,we)}function U(ye,de,we){return T(ye,r,de,we)}function G(ye){return o[ye.getDay()]}function H(ye){return s[ye.getDay()]}function Y(ye){return u[ye.getMonth()]}function q(ye){return a[ye.getMonth()]}function D(ye){return i[+(ye.getHours()>=12)]}function M(ye){return 1+~~(ye.getMonth()/3)}function W(ye){return o[ye.getUTCDay()]}function z(ye){return s[ye.getUTCDay()]}function V(ye){return u[ye.getUTCMonth()]}function te(ye){return a[ye.getUTCMonth()]}function le(ye){return i[+(ye.getUTCHours()>=12)]}function me(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var de=E(ye+="",_);return de.toString=function(){return ye},de},parse:function(ye){var de=b(ye+="",!1);return de.toString=function(){return ye},de},utcFormat:function(ye){var de=E(ye+="",w);return de.toString=function(){return ye},de},utcParse:function(ye){var de=b(ye+="",!0);return de.toString=function(){return ye},de}}}var lpe={"-":"",_:" ",0:"0"},fo=/^\s*\d+/,mPt=/^%/,gPt=/[\\^$*+?|[\]().{}]/g;function _r(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function yPt(e){return e.replace(gPt,"\\$&")}function Fx(e){return new RegExp("^(?:"+e.map(yPt).join("|")+")","i")}function Bx(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function vPt(e,t,n){var r=fo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _Pt(e,t,n){var r=fo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function bPt(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function wPt(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function EPt(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function cpe(e,t,n){var r=fo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function fpe(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function SPt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xPt(e,t,n){var r=fo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function TPt(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dpe(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function APt(e,t,n){var r=fo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hpe(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function CPt(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function IPt(e,t,n){var r=fo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function OPt(e,t,n){var r=fo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function PPt(e,t,n){var r=fo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kPt(e,t,n){var r=mPt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $Pt(e,t,n){var r=fo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function RPt(e,t,n){var r=fo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ppe(e,t){return _r(e.getDate(),t,2)}function NPt(e,t){return _r(e.getHours(),t,2)}function DPt(e,t){return _r(e.getHours()%12||12,t,2)}function MPt(e,t){return _r(1+Pp.count(Jd(e),e),t,3)}function Y$e(e,t){return _r(e.getMilliseconds(),t,3)}function LPt(e,t){return Y$e(e,t)+"000"}function FPt(e,t){return _r(e.getMonth()+1,t,2)}function BPt(e,t){return _r(e.getMinutes(),t,2)}function jPt(e,t){return _r(e.getSeconds(),t,2)}function UPt(e){var t=e.getDay();return t===0?7:t}function zPt(e,t){return _r(_S.count(Jd(e)-1,e),t,2)}function K$e(e){var t=e.getDay();return t>=4||t===0?iE(e):iE.ceil(e)}function VPt(e,t){return e=K$e(e),_r(iE.count(Jd(e),e)+(Jd(e).getDay()===4),t,2)}function HPt(e){return e.getDay()}function qPt(e,t){return _r(S3.count(Jd(e)-1,e),t,2)}function WPt(e,t){return _r(e.getFullYear()%100,t,2)}function GPt(e,t){return e=K$e(e),_r(e.getFullYear()%100,t,2)}function YPt(e,t){return _r(e.getFullYear()%1e4,t,4)}function KPt(e,t){var n=e.getDay();return e=n>=4||n===0?iE(e):iE.ceil(e),_r(e.getFullYear()%1e4,t,4)}function XPt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_r(t/60|0,"0",2)+_r(t%60,"0",2)}function mpe(e,t){return _r(e.getUTCDate(),t,2)}function QPt(e,t){return _r(e.getUTCHours(),t,2)}function JPt(e,t){return _r(e.getUTCHours()%12||12,t,2)}function ZPt(e,t){return _r(1+Yg.count(Zd(e),e),t,3)}function X$e(e,t){return _r(e.getUTCMilliseconds(),t,3)}function ekt(e,t){return X$e(e,t)+"000"}function tkt(e,t){return _r(e.getUTCMonth()+1,t,2)}function nkt(e,t){return _r(e.getUTCMinutes(),t,2)}function rkt(e,t){return _r(e.getUTCSeconds(),t,2)}function ikt(e){var t=e.getUTCDay();return t===0?7:t}function skt(e,t){return _r(bS.count(Zd(e)-1,e),t,2)}function Q$e(e){var t=e.getUTCDay();return t>=4||t===0?sE(e):sE.ceil(e)}function okt(e,t){return e=Q$e(e),_r(sE.count(Zd(e),e)+(Zd(e).getUTCDay()===4),t,2)}function akt(e){return e.getUTCDay()}function ukt(e,t){return _r(x3.count(Zd(e)-1,e),t,2)}function lkt(e,t){return _r(e.getUTCFullYear()%100,t,2)}function ckt(e,t){return e=Q$e(e),_r(e.getUTCFullYear()%100,t,2)}function fkt(e,t){return _r(e.getUTCFullYear()%1e4,t,4)}function dkt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?sE(e):sE.ceil(e),_r(e.getUTCFullYear()%1e4,t,4)}function hkt(){return"+0000"}function gpe(){return"%"}function ype(e){return+e}function vpe(e){return Math.floor(+e/1e3)}var W_,QK,J$e,Z4,Z$e;pkt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pkt(e){return W_=G$e(e),QK=W_.format,J$e=W_.parse,Z4=W_.utcFormat,Z$e=W_.utcParse,W_}function mkt(e){return new Date(e)}function gkt(e){return e instanceof Date?+e:+new Date(+e)}function JK(e,t,n,r,i,s,o,a,u,l){var c=D$e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function x(E){return(u(E)<E?h:a(E)<E?p:o(E)<E?m:s(E)<E?g:r(E)<E?i(E)<E?y:v:n(E)<E?_:w)(E)}return c.invert=function(E){return new Date(f(E))},c.domain=function(E){return arguments.length?d(Array.from(E,gkt)):d().map(mkt)},c.ticks=function(E){var b=d();return e(b[0],b[b.length-1],E??10)},c.tickFormat=function(E,b){return b==null?x:l(b)},c.nice=function(E){var b=d();return(!E||typeof E.range!="function")&&(E=t(b[0],b[b.length-1],E??10)),E?d(F$e(b,E)):c},c.copy=function(){return OI(c,JK(e,t,n,r,i,s,o,a,u,l))},c}function eRe(){return Mf.apply(JK(hPt,pPt,Jd,YA,_S,Pp,Q4,K4,yp,QK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ykt(){return Mf.apply(JK(fPt,dPt,Zd,KA,bS,Yg,J4,X4,yp,Z4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function eF(){var e=0,t=1,n,r,i,s,o=Tu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(bm),l.rangeRound=c(TI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function ny(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZK(){var e=o_(eF()(Tu));return e.copy=function(){return ny(e,ZK())},ty.apply(e,arguments)}function tRe(){var e=WK(eF()).domain([1,10]);return e.copy=function(){return ny(e,tRe()).base(e.base())},ty.apply(e,arguments)}function nRe(){var e=GK(eF());return e.copy=function(){return ny(e,nRe()).constant(e.constant())},ty.apply(e,arguments)}function eX(){var e=YK(eF());return e.copy=function(){return ny(e,eX()).exponent(e.exponent())},ty.apply(e,arguments)}function vkt(){return eX.apply(null,arguments).exponent(.5)}function tF(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Tu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=MK(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(bm),h.rangeRound=p(TI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function rRe(){var e=o_(tF()(Tu));return e.copy=function(){return ny(e,rRe())},ty.apply(e,arguments)}function iRe(){var e=WK(tF()).domain([.1,1,10]);return e.copy=function(){return ny(e,iRe()).base(e.base())},ty.apply(e,arguments)}function sRe(){var e=GK(tF());return e.copy=function(){return ny(e,sRe()).constant(e.constant())},ty.apply(e,arguments)}function tX(){var e=YK(tF());return e.copy=function(){return ny(e,tX()).exponent(e.exponent())},ty.apply(e,arguments)}function _kt(){return tX.apply(null,arguments).exponent(.5)}function bkt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const oRe=bkt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Cn(e){return function(){return e}}const _pe=Math.abs,Yo=Math.atan2,ky=Math.cos,wkt=Math.max,sj=Math.min,Gf=Math.sin,xv=Math.sqrt,Jo=1e-12,oE=Math.PI,T3=oE/2,P2=2*oE;function Ekt(e){return e>1?0:e<-1?oE:Math.acos(e)}function bpe(e){return e>=1?T3:e<=-1?-T3:Math.asin(e)}function nF(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new UK(t)}function Skt(e){return e.innerRadius}function xkt(e){return e.outerRadius}function Tkt(e){return e.startAngle}function Akt(e){return e.endAngle}function Ckt(e){return e&&e.padAngle}function Ikt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Jo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ek(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/xv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,x=i-s,E=d*m-p*h,b=(_<0?-1:1)*xv(wkt(0,x*x*w-E*E)),T=(E*_-v*b)/w,C=(-E*v-_*b)/w,A=(E*_+v*b)/w,O=(-E*v+_*b)/w,N=T-g,k=C-y,L=A-g,B=O-y;return N*N+k*k>L*L+B*B&&(T=A,C=O),{cx:T,cy:C,x01:-c,y01:-f,x11:T*(i/x-1),y11:C*(i/x-1)}}function AV(){var e=Skt,t=xkt,n=Cn(0),r=null,i=Tkt,s=Akt,o=Ckt,a=null,u=nF(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-T3,m=s.apply(this,arguments)-T3,g=_pe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Jo))a.moveTo(0,0);else if(g>P2-Jo)a.moveTo(h*ky(p),h*Gf(p)),a.arc(0,0,h,p,m,!y),d>Jo&&(a.moveTo(d*ky(m),d*Gf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,x=m,E=g,b=g,T=o.apply(this,arguments)/2,C=T>Jo&&(r?+r.apply(this,arguments):xv(d*d+h*h)),A=sj(_pe(h-d)/2,+n.apply(this,arguments)),O=A,N=A,k,L;if(C>Jo){var B=bpe(C/d*Gf(T)),U=bpe(C/h*Gf(T));(E-=B*2)>Jo?(B*=y?1:-1,w+=B,x-=B):(E=0,w=x=(p+m)/2),(b-=U*2)>Jo?(U*=y?1:-1,v+=U,_-=U):(b=0,v=_=(p+m)/2)}var G=h*ky(v),H=h*Gf(v),Y=d*ky(x),q=d*Gf(x);if(A>Jo){var D=h*ky(_),M=h*Gf(_),W=d*ky(w),z=d*Gf(w),V;if(g<oE)if(V=Ikt(G,H,W,z,D,M,Y,q)){var te=G-V[0],le=H-V[1],me=D-V[0],ye=M-V[1],de=1/Gf(Ekt((te*me+le*ye)/(xv(te*te+le*le)*xv(me*me+ye*ye)))/2),we=xv(V[0]*V[0]+V[1]*V[1]);O=sj(A,(d-we)/(de-1)),N=sj(A,(h-we)/(de+1))}else O=N=0}b>Jo?N>Jo?(k=ek(W,z,G,H,h,N,y),L=ek(D,M,Y,q,h,N,y),a.moveTo(k.cx+k.x01,k.cy+k.y01),N<A?a.arc(k.cx,k.cy,N,Yo(k.y01,k.x01),Yo(L.y01,L.x01),!y):(a.arc(k.cx,k.cy,N,Yo(k.y01,k.x01),Yo(k.y11,k.x11),!y),a.arc(0,0,h,Yo(k.cy+k.y11,k.cx+k.x11),Yo(L.cy+L.y11,L.cx+L.x11),!y),a.arc(L.cx,L.cy,N,Yo(L.y11,L.x11),Yo(L.y01,L.x01),!y))):(a.moveTo(G,H),a.arc(0,0,h,v,_,!y)):a.moveTo(G,H),!(d>Jo)||!(E>Jo)?a.lineTo(Y,q):O>Jo?(k=ek(Y,q,D,M,d,-O,y),L=ek(G,H,W,z,d,-O,y),a.lineTo(k.cx+k.x01,k.cy+k.y01),O<A?a.arc(k.cx,k.cy,O,Yo(k.y01,k.x01),Yo(L.y01,L.x01),!y):(a.arc(k.cx,k.cy,O,Yo(k.y01,k.x01),Yo(k.y11,k.x11),!y),a.arc(0,0,d,Yo(k.cy+k.y11,k.cx+k.x11),Yo(L.cy+L.y11,L.cx+L.x11),y),a.arc(L.cx,L.cy,O,Yo(L.y11,L.x11),Yo(L.y01,L.x01),!y))):a.arc(0,0,d,x,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-oE/2;return[ky(f)*c,Gf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Cn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Cn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Cn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Cn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Cn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Cn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Cn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function rF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aRe(e){this._context=e}aRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nX(e){return new aRe(e)}function uRe(e){return e[0]}function lRe(e){return e[1]}function cRe(e,t){var n=Cn(!0),r=null,i=nX,s=null,o=nF(a);e=typeof e=="function"?e:e===void 0?uRe:Cn(e),t=typeof t=="function"?t:t===void 0?lRe:Cn(t);function a(u){var l,c=(u=rF(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Cn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Cn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Cn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function fRe(e,t,n){var r=null,i=Cn(!0),s=null,o=nX,a=null,u=nF(l);e=typeof e=="function"?e:e===void 0?uRe:Cn(+e),t=typeof t=="function"?t:Cn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?lRe:Cn(+n);function l(f){var d,h,p,m=(f=rF(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return cRe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Cn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Cn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Cn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Cn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Cn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Cn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Cn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Okt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Pkt(e){return e}function kkt(){var e=Pkt,t=Okt,n=null,r=Cn(0),i=Cn(P2),s=Cn(0);function o(a){var u,l=(a=rF(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(P2,Math.max(-P2,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(x,E){return t(p[x],p[E])}):n!=null&&h.sort(function(x,E){return n(a[x],a[E])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+_,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Cn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Cn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Cn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Cn(+a),o):s},o}const $kt={draw(e,t){const n=xv(t/oE);e.moveTo(n,0),e.arc(0,0,n,0,P2)}};function Rkt(e,t){let n=null,r=nF(i);e=typeof e=="function"?e:Cn(e||$kt),t=typeof t=="function"?t:Cn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Cn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Cn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function y0(){}function A3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function iF(e){this._context=e}iF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:A3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:A3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nkt(e){return new iF(e)}function dRe(e){this._context=e}dRe.prototype={areaStart:y0,areaEnd:y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:A3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dkt(e){return new dRe(e)}function hRe(e){this._context=e}hRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:A3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mkt(e){return new hRe(e)}function pRe(e,t){this._basis=new iF(e),this._beta=t}pRe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Lkt=function e(t){function n(r){return t===1?new iF(r):new pRe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function C3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function rX(e,t){this._context=e,this._k=(1-t)/6}rX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:C3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:C3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fkt=function e(t){function n(r){return new rX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iX(e,t){this._context=e,this._k=(1-t)/6}iX.prototype={areaStart:y0,areaEnd:y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:C3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bkt=function e(t){function n(r){return new iX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sX(e,t){this._context=e,this._k=(1-t)/6}sX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:C3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jkt=function e(t){function n(r){return new sX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Jo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Jo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function mRe(e,t){this._context=e,this._alpha=t}mRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:oX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ukt=function e(t){function n(r){return t?new mRe(r,t):new rX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gRe(e,t){this._context=e,this._alpha=t}gRe.prototype={areaStart:y0,areaEnd:y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zkt=function e(t){function n(r){return t?new gRe(r,t):new iX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yRe(e,t){this._context=e,this._alpha=t}yRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vkt=function e(t){function n(r){return t?new yRe(r,t):new sX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function vRe(e){this._context=e}vRe.prototype={areaStart:y0,areaEnd:y0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Hkt(e){return new vRe(e)}function wpe(e){return e<0?-1:1}function Epe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(wpe(s)+wpe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Spe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function oj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function I3(e){this._context=e}I3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oj(this,this._t0,Spe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oj(this,Spe(this,n=Epe(this,e,t)),n);break;default:oj(this,this._t0,n=Epe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function _Re(e){this._context=new bRe(e)}(_Re.prototype=Object.create(I3.prototype)).point=function(e,t){I3.prototype.point.call(this,t,e)};function bRe(e){this._context=e}bRe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function qkt(e){return new I3(e)}function Wkt(e){return new _Re(e)}function wRe(e){this._context=e}wRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=xpe(e),i=xpe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function xpe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Gkt(e){return new wRe(e)}function sF(e,t){this._context=e,this._t=t}sF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Ykt(e){return new sF(e,.5)}function Kkt(e){return new sF(e,0)}function Xkt(e){return new sF(e,1)}function Tpe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ape(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Qkt(e,t){return e[t]}function Jkt(e){const t=[];return t.key=e,t}function Zkt(){var e=Cn([]),t=Ape,n=Tpe,r=Qkt;function i(s){var o=Array.from(e.apply(this,arguments),Jkt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=rF(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Cn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Cn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Ape:typeof s=="function"?s:Cn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Tpe,i):n},i}function OT(e,t,n){this.k=e,this.x=t,this.y=n}OT.prototype={constructor:OT,scale:function(e){return e===1?this:new OT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new OT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};OT.prototype;function aX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?Z4("%B"):yS(".2s"))(c),[s]);return $.jsxs($.Fragment,{children:[$.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:$.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:$.jsx(qp,{children:$.jsx(va,{spacing:3,children:$.jsx(gt,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),$.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?$.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>$.jsxs("g",{transform:`translate(${f}, ${n})`,children:[$.jsx("line",{y2:"6",stroke:"currentColor"}),o?$.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,$.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:$.jsx(qp,{children:$.jsx(aw,{withinPortal:!0,label:c,children:$.jsx(gt,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const e$t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:aX},Symbol.toStringTag,{value:"Module"}));function ERe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return $.jsxs($.Fragment,{children:[$.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:$.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:$.jsx(qp,{children:$.jsx(va,{spacing:3,children:$.jsx(gt,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),$.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?$.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>$.jsxs("g",{transform:`translate(${n}, ${l})`,children:[$.jsx("line",{x2:"-6",stroke:"currentColor"}),s?$.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,$.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:$.jsx("foreignObject",{width:a,height:20,children:$.jsx(va,{style:{width:"100%",height:"100%"},position:"right",children:$.jsx(gt,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const t$t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:ERe},Symbol.toStringTag,{value:"Module"})),Ll={top:15,left:100,right:50,bottom:50};function CV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=jv(),o=P.useMemo(()=>s-Ll.left-Ll.right,[s]),a=P.useMemo(()=>i-Ll.top-Ll.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return vS(oRe).domain(d)},[n,t.category]),l=P.useMemo(()=>e?Yp([Ll.left,o+Ll.left]).domain([0,Ixt(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?II([Ll.top,a+Ll.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:$.jsxs("g",{children:[$.jsx("rect",{x:Ll.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Ll.left},h),$.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?$.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[$.jsx(aX,{xScale:l,yRange:c.range(),vertPosition:a+Ll.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?$.jsx(ERe,{yScale:c,horizontalPosition:Ll.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):$.jsx(J1,{})}const n$t=Object.freeze(Object.defineProperty({__proto__:null,Bar:CV,default:CV},Symbol.toStringTag,{value:"Module"})),gr=Array.isArray;function Nu(e){return e!=null?gr(e)?e:[e]:[]}function r$t(e=0,t=1/0){return`${Cpe(e)} < row_number() && row_number() <= ${Cpe(t)}`}function Cpe(e){return e<0?`count() + ${e}`:e}class SRe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(r$t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Nu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function In(e){throw Error(e)}function Ya(e){return typeof e=="number"}function bi(e){return typeof e=="function"}function oF(e,t){const n=Array(e);if(bi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let i$t=class extends SRe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){In("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){In("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){In("Not implemented")}getter(t){In("Not implemented")}objects(t){In("Not implemented")}object(t){In("Not implemented")}[Symbol.iterator](){In("Not implemented")}print(t={}){Ya(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=oF(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},s$t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},o$t=function(e){return e&&bi(e.get)?e:new s$t(e)};function Xp(e){return e instanceof Date}function _a(e){return e===Object(e)}function O3(e){return e instanceof RegExp}function Lo(e){return typeof e=="string"}function a$t(e,t){const n=r=>In(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Ipe(e.entries(),t):Xp(e)?n("Date"):O3(e)?n("RegExp"):Lo(e)?n():gr(e)?u$t(e,t):bi(e[Symbol.iterator])?l$t(e,t):_a(e)?Ipe(Object.entries(e),t):n()}function Ipe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function u$t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function l$t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:c$t}=Object.prototype;function Sf(e,t){return c$t.call(e,t)}function Nl(e){return e?new Ope({...e.data()},e.columnNames()):new Ope}class Ope{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Sf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const lr=void 0,f$t=Object.getPrototypeOf(Int8Array);function PI(e){return e instanceof f$t}function Tv(e){return gr(e)||PI(e)}function uf(e){return e!=null&&e===e}const jx=e=>Tv(e)||Lo(e),d$t={compact:e=>Tv(e)?e.filter(t=>uf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>jx(e)?e.includes(t,n):!1,indexof:(e,t)=>jx(e)?e.indexOf(t):-1,join:(e,t)=>Tv(e)?e.join(t):lr,lastindexof:(e,t)=>jx(e)?e.lastIndexOf(t):-1,length:e=>jx(e)?e.length:0,pluck:(e,t)=>Tv(e)?e.map(n=>uf(n)?n[t]:lr):lr,reverse:e=>Tv(e)?e.slice().reverse():Lo(e)?e.split("").reverse().join(""):lr,slice:(e,t,n)=>jx(e)?e.slice(t,n):lr};function h$t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function D$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Yf=e=>(e<10?"0":"")+e,p$t=e=>e<0?"-"+D$(-e,6):e>9999?"+"+D$(e,6):D$(e,4);function xRe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return p$t(e)+"-"+Yf(t+1)+"-"+Yf(n)+(!u||o?"T"+Yf(r)+":"+Yf(i)+":"+Yf(s)+"."+D$(o,3)+l:s?"T"+Yf(r)+":"+Yf(i)+":"+Yf(s)+l:i||r||!a?"T"+Yf(r)+":"+Yf(i)+l:"")}function TRe(e,t){return isNaN(e)?"Invalid Date":xRe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function aF(e,t){return isNaN(e)?"Invalid Date":xRe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const m$t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function g$t(e){return e.match(m$t)}function y$t(e,t=Date.parse){return g$t(e)?t(e):e}const ARe=6e4,CRe=864e5,IRe=6048e5,Gi=new Date,Yi=new Date,rs=e=>(Gi.setTime(typeof e=="string"?y$t(e):e),Gi);function v$t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function _$t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function b$t(e){Yi.setTime(+e),Yi.setHours(0,0,0,0),Gi.setTime(+Yi),Gi.setMonth(0),Gi.setDate(1);const t=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*ARe;return Math.floor(1+(Yi-Gi-t)/CRe)}function w$t(e){Yi.setTime(+e),Yi.setUTCHours(0,0,0,0);const t=Date.UTC(Yi.getUTCFullYear(),0,1);return Math.floor(1+(Yi-t)/CRe)}function E$t(e,t){const n=t||0;Yi.setTime(+e),Yi.setDate(Yi.getDate()-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0),Gi.setTime(+e),Gi.setMonth(0),Gi.setDate(1),Gi.setDate(1-(Gi.getDay()+7-n)%7),Gi.setHours(0,0,0,0);const r=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*ARe;return Math.floor((1+(Yi-Gi)-r)/IRe)}function S$t(e,t){const n=t||0;return Yi.setTime(+e),Yi.setUTCDate(Yi.getUTCDate()-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Gi.setTime(+e),Gi.setUTCMonth(0),Gi.setUTCDate(1),Gi.setUTCDate(1-(Gi.getUTCDay()+7-n)%7),Gi.setUTCHours(0,0,0,0),Math.floor((1+(Yi-Gi))/IRe)}const x$t={format_date:(e,t)=>TRe(rs(e),!t),format_utcdate:(e,t)=>aF(rs(e),!t),timestamp:e=>+rs(e),year:e=>rs(e).getFullYear(),quarter:e=>Math.floor(rs(e).getMonth()/3),month:e=>rs(e).getMonth(),date:e=>rs(e).getDate(),dayofweek:e=>rs(e).getDay(),hours:e=>rs(e).getHours(),minutes:e=>rs(e).getMinutes(),seconds:e=>rs(e).getSeconds(),milliseconds:e=>rs(e).getMilliseconds(),utcyear:e=>rs(e).getUTCFullYear(),utcquarter:e=>Math.floor(rs(e).getUTCMonth()/3),utcmonth:e=>rs(e).getUTCMonth(),utcdate:e=>rs(e).getUTCDate(),utcdayofweek:e=>rs(e).getUTCDay(),utchours:e=>rs(e).getUTCHours(),utcminutes:e=>rs(e).getUTCMinutes(),utcseconds:e=>rs(e).getUTCSeconds(),utcmilliseconds:e=>rs(e).getUTCMilliseconds(),datetime:v$t,dayofyear:b$t,week:E$t,utcdatetime:_$t,utcdayofyear:w$t,utcweek:S$t,now:Date.now};function uX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Xp(e)||Xp(t)?+e==+t:O3(e)&&O3(t)?e+""==t+"":_a(e)&&_a(t)?T$t(e,t):!1}function T$t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Ppe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Ppe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!uX(e[o],t[o]))return!1}return!0}function Ppe(e,t,n=uX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const A$t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let C$t=Math.random;function wS(){return C$t()}const I$t={random:wS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function lX(e){return e instanceof Map}function O$t(e){return e instanceof Set}function M$(e){return lX(e)||O$t(e)}function aj(e){return Array.from(e)}const P$t={has:(e,t)=>M$(e)?e.has(t):e!=null?Sf(e,t):!1,keys:e=>lX(e)?aj(e.keys()):e!=null?Object.keys(e):[],values:e=>M$(e)?aj(e.values()):e!=null?Object.values(e):[],entries:e=>M$(e)?aj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):lr};function k$t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Sf(t,e))return t[e];return n!==void 0?n:e}function $$t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const R$t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Ub={bin:h$t,equal:uX,recode:k$t,sequence:$$t,...d$t,...x$t,...A$t,...I$t,...P$t,...R$t};function XA(e){return typeof e=="bigint"}function eh(e){return e===void 0?e+"":XA(e)?e+"n":JSON.stringify(e)}function wn(e,t=[],n=[]){return new N$t(e,Nu(t),Nu(n))}let N$t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${eh(n)}]`),...this.params.map(eh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const ORe=e=>wn("any",e),PRe=()=>wn("count"),kRe=e=>wn("array_agg",e),$Re=e=>wn("array_agg_distinct",e),RRe=(e,t)=>wn("map_agg",[e,t]),NRe=(e,t)=>wn("object_agg",[e,t]),DRe=(e,t)=>wn("entries_agg",[e,t]);({...Ub});function D$t(e,t){e=M$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function M$t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function L$t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function F$t(e,t,n,r){const i=r==="map"||r===!0?RRe:r==="entries"?DRe:r==="object"?NRe:In('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=D$t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:kRe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const B$t="ArrayPattern",j$t="ArrowFunctionExpression",U$t="FunctionExpression",Kg="Identifier",ES="Literal",MRe="MemberExpression",z$t="ObjectExpression",LRe="ObjectPattern",FRe="Property",kI="Column",V$t="Constant",H$t="Dictionary",q$t="Function",W$t="Parameter",BRe="Op",oi=(e,t)=>{const n=G$t[e.type];return n?n(e,t):In(`Unsupported expression construct: ${e.type}`)},uj=(e,t)=>"("+oi(e.left,t)+" "+e.operator+" "+oi(e.right,t)+")",lj=(e,t)=>"("+rd(e.params,t)+")=>"+oi(e.body,t),kpe=(e,t)=>oi(e.callee,t)+"("+rd(e.arguments,t)+")",rd=(e,t,n=",")=>e.map(r=>oi(r,t)).join(n),jRe=e=>e.computed?`[${eh(e.name)}]`:`.${e.name}`,$pe=(e,t,n)=>{const r=e.table||"";return`data${r}${jRe(e)}.${n}(${t.index}${r})`},G$t={Constant:e=>e.raw,Column:(e,t)=>$pe(e,t,"get"),Dictionary:(e,t)=>$pe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${jRe(e)}`,Op:(e,t)=>`op(${eh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+oi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=oi(e.object,t),i=oi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:kpe,NewExpression:(e,t)=>"new "+kpe(e,t),ArrayExpression:(e,t)=>"["+rd(e.elements,t)+"]",AssignmentExpression:uj,BinaryExpression:uj,LogicalExpression:uj,UnaryExpression:(e,t)=>"("+e.operator+oi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+oi(e.test,t)+"?"+oi(e.consequent,t)+":"+oi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+rd(e.properties,t)+"})",Property:(e,t)=>{const n=oi(e.key,t);return(e.computed?`[${n}]`:n)+":"+oi(e.value,t)},ArrowFunctionExpression:lj,FunctionExpression:lj,FunctionDeclaration:lj,ArrayPattern:(e,t)=>"["+rd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+rd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+rd(e.declarations,t,","),VariableDeclarator:(e,t)=>oi(e.id,t)+"="+oi(e.init,t),SpreadElement:(e,t)=>"..."+oi(e.argument,t),BlockStatement:(e,t)=>"{"+rd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>oi(e.expression,t),IfStatement:(e,t)=>"if ("+oi(e.test,t)+")"+oi(e.consequent,t)+(e.alternate?" else "+oi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+oi(e.discriminant,t)+") {"+rd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+oi(e.test,t):"default")+": "+rd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+oi(e.argument,t),Program:(e,t)=>oi(e.body[0],t)};function P3(e,t={index:"row"}){return oi(e,t)}function Y$t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function aE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Xp(e)?+e:gr(e)||PI(e)?`[${e.map(aE)}]`:O3(e)?e+"":K$t(e)}function K$t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${aE(e[r])}`;return t+="}",t}function k3(e,t){const n=e.length;return n===1?(r,i)=>aE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=aE(a)}return s}}function X$t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=aE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=aE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Zh(){}function Q$t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Is(e){return e.init=e.init||Zh,e.add=e.add||Zh,e.rem=e.rem||Zh,e}function Rpe(e,t){return e.product_v=!1,e.product=t}const URe={count:{create:()=>Is({value:e=>e.count}),param:[]},array_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Is({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:lr}),param:[1]},valid:{create:()=>Is({value:e=>e.valid}),param:[1]},invalid:{create:()=>Is({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=X$t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Is({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Is({value:e=>{let t=lr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:lr,add:(e,t)=>XA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Rpe(e,1),value:e=>e.valid?e.product_v?Rpe(e,Q$t(e.list.values())):e.product:void 0,add:(e,t)=>XA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:lr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Is({value:e=>e.valid?e.mean:lr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):lr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Is({value:e=>e.valid>1?e.dev/e.valid:lr}),param:[1],req:["variance"]},stdev:{create:()=>Is({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):lr}),param:[1],req:["variance"]},stdevp:{create:()=>Is({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):lr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=lr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===lr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=lr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===lr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Is({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Is({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):lr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Is({value:e=>e.valid>1?e.cov/e.valid:lr}),param:[2],req:["covariance"]},corr:{create:()=>Is({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):lr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Is({value:i=>Y$t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Npe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Dpe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},zRe={row_number:{create(){return{init:Zh,value:e=>e.index+1}},param:[]},rank:Npe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Npe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Dpe,ntile:{create(e){e=+e,e>0||In("ntile num must be greater than zero.");const{init:t,value:n}=Dpe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=lr){return e=+e||1,{init:Zh,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=lr){return e=+e||1,{init:Zh,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Zh,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Zh,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||In("nth_value nth must be greater than zero."),{init:Zh,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):lr}}},param:[1,1]},fill_down:{create(e=lr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return uf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=lr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=J$t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function J$t(e,t,n){for(const r=e.size;n<r;++n)if(uf(e.value(n,t)))return n;return-1}function cX(e){return Sf(URe,e)}function fX(e){return Sf(zRe,e)}function VRe(e){return Sf(Ub,e)||e==="row_object"}function HRe(e){return cX(e)&&URe[e]}function qRe(e){return fX(e)&&zRe[e]}function Ux(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const dX={escape:(e,t,n)=>Ux(e,t,n),expr:(e,t)=>Ux(`(row,data,op)=>${e}`,Ub,t),expr2:(e,t)=>Ux(`(row0,data0,row,data)=>${e}`,Ub,t),join:(e,t)=>Ux(`(row1,data1,row2,data2)=>${e}`,Ub,t),param:(e,t)=>Ux(e,Ub,t)},Z$t={"==":1,"!=":1,"===":1,"!==":1};function WRe(e,t,n=0,r,i){if(e.type=kI,e.name=t,e.table=n,i&&r&&bi(r.keyFor)){const s=Z$t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===ES&&eRt(i,e,s,r.keyFor(s.value))}return e}function eRt(e,t,n,r){return r<0?(e.type=ES,e.value=!1,e.raw="false"):(t.type=H$t,n.value=r,n.raw=r+""),!0}function uF(e){return gr(e)?e:lX(e)?e.entries():e?Object.entries(e):[]}const GRe="row_object";function YRe(e,t){e.type=z$t;const n=e.properties=[];for(const r of uF(t)){const[i,s]=gr(r)?r:[r,r];n.push({type:FRe,key:{type:ES,raw:eh(s)},value:WRe({computed:!0},i)})}return e}function KRe(e){return P3(YRe({},e))}function XRe(e){return dX.expr(KRe(e))}function SS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ip(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Mpe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qn(e){return this instanceof Qn?(this.v=e,this):new Qn(e)}function Av(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof Qn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function cj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Qn(e[i](o)),done:!1}:s?s(o):o}:s}}function k2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Mpe=="function"?Mpe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const tRt=new TextDecoder("utf-8"),IV=e=>tRt.decode(e),nRt=new TextEncoder,hX=e=>nRt.encode(e),[HAn,QRe]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[l_,qAn]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[c_,WAn]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),rRt=e=>typeof e=="boolean",fu=e=>typeof e=="function",ry=e=>e!=null&&Object(e)===e,lF=e=>ry(e)&&fu(e.then),pX=e=>ry(e)&&fu(e[Symbol.iterator]),cF=e=>ry(e)&&fu(e[Symbol.asyncIterator]),iRt=e=>ry(e)&&"done"in e&&"value"in e,JRe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,sRt=e=>ry(e)&&fu(e.abort)&&fu(e.getWriter)&&!JRe(e),oRt=e=>ry(e)&&fu(e.end)&&fu(e.write)&&rRt(e.writable)&&!JRe(e),aRt=e=>ry(e)&&fu(e.clear)&&fu(e.bytes)&&fu(e.position)&&fu(e.setPosition)&&fu(e.capacity)&&fu(e.getBufferIdentifier)&&fu(e.createLong),mX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function uRt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function $3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function th(e,t){const n=uRt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?$3(o,s,a):o=s;break}$3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function wo(e,t){let n=iRt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=hX(n)),n instanceof ArrayBuffer?new e(n):n instanceof mX?new e(n):aRt(n)?wo(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const zx=e=>wo(Int32Array,e),Nr=e=>wo(Uint8Array,e),OV=e=>(e.next(),e);function*lRt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof mX?n(t):pX(t)?t:n(t);return yield*OV(function*(i){let s=null;do s=i.next(yield wo(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const cRt=e=>lRt(Uint8Array,e);function ZRe(e,t){return Av(this,arguments,function*(){if(lF(t))return yield Qn(yield Qn(yield*cj(k2(ZRe(e,yield Qn(t))))));const r=function(o){return Av(this,arguments,function*(){yield yield Qn(yield Qn(o))})},i=function(o){return Av(this,arguments,function*(){yield Qn(yield*cj(k2(OV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof mX?r(t):pX(t)?i(t):cF(t)?t:r(t);return yield Qn(yield*cj(k2(OV(function(o){return Av(this,arguments,function*(){let a=null;do a=yield Qn(o.next(yield yield Qn(wo(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Qn(new e)})}const fRt=e=>ZRe(Uint8Array,e);function gX(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function dRt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Lpe={fromIterable(e){return tk(hRt(e))},fromAsyncIterable(e){return tk(pRt(e))},fromDOMStream(e){return tk(mRt(e))},fromNodeStream(e){return tk(yRt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},tk=e=>(e.next(),e);function*hRt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?th(r,o)[0]:([i,r,a]=th(r,o),i)}({cmd:s,size:o}=yield null);const l=cRt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function pRt(e){return Av(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?th(i,a)[0]:([s,i,u]=th(i,a),s)}({cmd:o,size:a}=yield yield Qn(null));const c=fRt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Qn(c.next()):yield Qn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Qn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Qn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Qn(c.return(new Uint8Array(0))))}return yield Qn(null)})}function mRt(e){return Av(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?th(i,a)[0]:([s,i,u]=th(i,a),s)}({cmd:o,size:a}=yield yield Qn(null));const c=new gRt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Qn(c.read()):yield Qn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Nr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Qn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Qn(c.cancel(f)))}finally{r===!1?yield Qn(c.cancel()):e.locked&&c.releaseLock()}return yield Qn(null)})}class gRt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return ip(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return ip(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Nr(n)),n})}}const fj=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function yRt(e){return Av(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?th(l,a)[0]:([c,l,u]=th(l,a),c)}if({cmd:o,size:a}=yield yield Qn(null),e.isTTY)return yield yield Qn(new Uint8Array(0)),yield Qn(null);try{n[0]=fj(e,"end"),n[1]=fj(e,"error");do{if(n[2]=fj(e,"readable"),[r,s]=yield Qn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Nr(e.read(a-u)),c.byteLength<a-u&&(c=Nr(e.read()))):c=Nr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Qn(f()));while(a<u)}while(!i)}finally{yield Qn(d(n,r==="error"?s:null))}return yield Qn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var ol;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ol||(ol={}));var dc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(dc||(dc={}));var Po;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Po||(Po={}));var nh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(nh||(nh={}));var Jn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Jn||(Jn={}));var rh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(rh||(rh={}));var Js;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Js||(Js={}));var ae;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(ae||(ae={}));var Yh;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Yh||(Yh={}));const vRt=void 0;function Xg(e){if(e===null)return"null";if(e===vRt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof l_||e instanceof c_?`[${[...e].map(t=>Xg(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const _Rt=Symbol.for("isArrowBigNum");function Lf(e,...t){return t.length===0?Object.setPrototypeOf(wo(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Lf.prototype[_Rt]=!0;Lf.prototype.toJSON=function(){return`"${Wv(this)}"`};Lf.prototype.valueOf=function(){return eNe(this)};Lf.prototype.toString=function(){return Wv(this)};Lf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return eNe(this);case"string":return Wv(this);case"default":return PV(this)}return Wv(this)};function yw(...e){return Lf.apply(this,e)}function vw(...e){return Lf.apply(this,e)}function QA(...e){return Lf.apply(this,e)}Object.setPrototypeOf(yw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(vw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(QA.prototype,Object.create(Uint32Array.prototype));Object.assign(yw.prototype,Lf.prototype,{constructor:yw,signed:!0,TypedArray:Int32Array,BigIntArray:l_});Object.assign(vw.prototype,Lf.prototype,{constructor:vw,signed:!1,TypedArray:Uint32Array,BigIntArray:c_});Object.assign(QA.prototype,Lf.prototype,{constructor:QA,signed:!0,TypedArray:Uint32Array,BigIntArray:c_});function eNe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new c_(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let Wv,PV;QRe?(PV=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:dj(e),Wv=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:dj(e)):(Wv=dj,PV=Wv);function dj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class yX{static new(t,n){switch(n){case!0:return new yw(t);case!1:return new vw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case l_:return new yw(t)}return t.byteLength===16?new QA(t):new vw(t)}static signed(t){return new yw(t)}static unsigned(t){return new vw(t)}static decimal(t){return new QA(t)}constructor(t,n){return yX.new(t,n)}}var tNe,nNe,rNe,iNe,sNe,oNe,aNe,uNe,lNe,cNe,fNe,dNe,hNe,pNe,mNe,gNe,yNe,vNe,_Ne;class zn{static isNull(t){return(t==null?void 0:t.typeId)===ae.Null}static isInt(t){return(t==null?void 0:t.typeId)===ae.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ae.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ae.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ae.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ae.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ae.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ae.Date}static isTime(t){return(t==null?void 0:t.typeId)===ae.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ae.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ae.Interval}static isList(t){return(t==null?void 0:t.typeId)===ae.List}static isStruct(t){return(t==null?void 0:t.typeId)===ae.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ae.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ae.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ae.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ae.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ae.Dictionary}static isDenseUnion(t){return zn.isUnion(t)&&t.mode===dc.Dense}static isSparseUnion(t){return zn.isUnion(t)&&t.mode===dc.Sparse}get typeId(){return ae.NONE}}tNe=Symbol.toStringTag;zn[tNe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(zn.prototype);let Qp=class extends zn{toString(){return"Null"}get typeId(){return ae.Null}};nNe=Symbol.toStringTag;Qp[nNe]=(e=>e[Symbol.toStringTag]="Null")(Qp.prototype);class Ka extends zn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ae.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?l_:c_}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}rNe=Symbol.toStringTag;Ka[rNe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ka.prototype);class vX extends Ka{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class _X extends Ka{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class v0 extends Ka{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class bX extends Ka{constructor(){super(!0,64)}get ArrayType(){return l_}}class wX extends Ka{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class EX extends Ka{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class SX extends Ka{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class xX extends Ka{constructor(){super(!1,64)}get ArrayType(){return c_}}Object.defineProperty(vX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(_X.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(v0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(bX.prototype,"ArrayType",{value:l_});Object.defineProperty(wX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(EX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(SX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(xX.prototype,"ArrayType",{value:c_});class _0 extends zn{constructor(t){super(),this.precision=t}get typeId(){return ae.Float}get ArrayType(){switch(this.precision){case Po.HALF:return Uint16Array;case Po.SINGLE:return Float32Array;case Po.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}iNe=Symbol.toStringTag;_0[iNe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(_0.prototype);class bNe extends _0{constructor(){super(Po.HALF)}}class TX extends _0{constructor(){super(Po.SINGLE)}}class AX extends _0{constructor(){super(Po.DOUBLE)}}Object.defineProperty(bNe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(TX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(AX.prototype,"ArrayType",{value:Float64Array});let JA=class extends zn{constructor(){super()}get typeId(){return ae.Binary}toString(){return"Binary"}};sNe=Symbol.toStringTag;JA[sNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(JA.prototype);let uE=class extends zn{constructor(){super()}get typeId(){return ae.Utf8}toString(){return"Utf8"}};oNe=Symbol.toStringTag;uE[oNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(uE.prototype);let ZA=class extends zn{constructor(){super()}get typeId(){return ae.Bool}toString(){return"Bool"}};aNe=Symbol.toStringTag;ZA[aNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ZA.prototype);let R3=class extends zn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ae.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};uNe=Symbol.toStringTag;R3[uNe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(R3.prototype);class lE extends zn{constructor(t){super(),this.unit=t}get typeId(){return ae.Date}toString(){return`Date${(this.unit+1)*32}<${nh[this.unit]}>`}}lNe=Symbol.toStringTag;lE[lNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(lE.prototype);class bRt extends lE{constructor(){super(nh.DAY)}}class wRt extends lE{constructor(){super(nh.MILLISECOND)}}class Jp extends zn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ae.Time}toString(){return`Time${this.bitWidth}<${Jn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return l_}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}cNe=Symbol.toStringTag;Jp[cNe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Jp.prototype);class ERt extends Jp{constructor(){super(Jn.SECOND,32)}}class SRt extends Jp{constructor(){super(Jn.MILLISECOND,32)}}class xRt extends Jp{constructor(){super(Jn.MICROSECOND,64)}}class TRt extends Jp{constructor(){super(Jn.NANOSECOND,64)}}class N3 extends zn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ae.Timestamp}toString(){return`Timestamp<${Jn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}fNe=Symbol.toStringTag;N3[fNe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(N3.prototype);class cE extends zn{constructor(t){super(),this.unit=t}get typeId(){return ae.Interval}toString(){return`Interval<${rh[this.unit]}>`}}dNe=Symbol.toStringTag;cE[dNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(cE.prototype);class ARt extends cE{constructor(){super(rh.DAY_TIME)}}class CRt extends cE{constructor(){super(rh.YEAR_MONTH)}}let fE=class extends zn{constructor(t){super(),this.children=[t]}get typeId(){return ae.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};hNe=Symbol.toStringTag;fE[hNe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(fE.prototype);class aa extends zn{constructor(t){super(),this.children=t}get typeId(){return ae.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}pNe=Symbol.toStringTag;aa[pNe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(aa.prototype);class eC extends zn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ae.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}mNe=Symbol.toStringTag;eC[mNe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(eC.prototype);let D3=class extends zn{constructor(t){super(),this.byteWidth=t}get typeId(){return ae.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};gNe=Symbol.toStringTag;D3[gNe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(D3.prototype);let dE=class extends zn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ae.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};yNe=Symbol.toStringTag;dE[yNe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(dE.prototype);class tC extends zn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return ae.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}vNe=Symbol.toStringTag;tC[vNe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(tC.prototype);const IRt=(e=>()=>++e)(-1);class b0 extends zn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?IRt():typeof r=="number"?r:r.low}get typeId(){return ae.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}_Ne=Symbol.toStringTag;b0[_Ne]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(b0.prototype);function od(e){const t=e;switch(e.typeId){case ae.Decimal:return e.bitWidth/32;case ae.Timestamp:return 2;case ae.Date:return 1+t.unit;case ae.Interval:return 1+t.unit;case ae.FixedSizeList:return t.listSize;case ae.FixedSizeBinary:return t.byteWidth;default:return 1}}class tr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return ORt(this,t,n)}getVisitFnByTypeId(t,n=!0){return fb(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function ORt(e,t,n=!0){return typeof t=="number"?fb(e,t,n):typeof t=="string"&&t in ae?fb(e,ae[t],n):t&&t instanceof zn?fb(e,Fpe(t),n):t!=null&&t.type&&t.type instanceof zn?fb(e,Fpe(t.type),n):fb(e,ae.NONE,n)}function fb(e,t,n=!0){let r=null;switch(t){case ae.Null:r=e.visitNull;break;case ae.Bool:r=e.visitBool;break;case ae.Int:r=e.visitInt;break;case ae.Int8:r=e.visitInt8||e.visitInt;break;case ae.Int16:r=e.visitInt16||e.visitInt;break;case ae.Int32:r=e.visitInt32||e.visitInt;break;case ae.Int64:r=e.visitInt64||e.visitInt;break;case ae.Uint8:r=e.visitUint8||e.visitInt;break;case ae.Uint16:r=e.visitUint16||e.visitInt;break;case ae.Uint32:r=e.visitUint32||e.visitInt;break;case ae.Uint64:r=e.visitUint64||e.visitInt;break;case ae.Float:r=e.visitFloat;break;case ae.Float16:r=e.visitFloat16||e.visitFloat;break;case ae.Float32:r=e.visitFloat32||e.visitFloat;break;case ae.Float64:r=e.visitFloat64||e.visitFloat;break;case ae.Utf8:r=e.visitUtf8;break;case ae.Binary:r=e.visitBinary;break;case ae.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ae.Date:r=e.visitDate;break;case ae.DateDay:r=e.visitDateDay||e.visitDate;break;case ae.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ae.Timestamp:r=e.visitTimestamp;break;case ae.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ae.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ae.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ae.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ae.Time:r=e.visitTime;break;case ae.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ae.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ae.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ae.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ae.Decimal:r=e.visitDecimal;break;case ae.List:r=e.visitList;break;case ae.Struct:r=e.visitStruct;break;case ae.Union:r=e.visitUnion;break;case ae.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ae.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ae.Dictionary:r=e.visitDictionary;break;case ae.Interval:r=e.visitInterval;break;case ae.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ae.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ae.FixedSizeList:r=e.visitFixedSizeList;break;case ae.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ae[t]}'`)}function Fpe(e){switch(e.typeId){case ae.Null:return ae.Null;case ae.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ae.Int8:ae.Uint8;case 16:return n?ae.Int16:ae.Uint16;case 32:return n?ae.Int32:ae.Uint32;case 64:return n?ae.Int64:ae.Uint64}return ae.Int}case ae.Float:switch(e.precision){case Po.HALF:return ae.Float16;case Po.SINGLE:return ae.Float32;case Po.DOUBLE:return ae.Float64}return ae.Float;case ae.Binary:return ae.Binary;case ae.Utf8:return ae.Utf8;case ae.Bool:return ae.Bool;case ae.Decimal:return ae.Decimal;case ae.Time:switch(e.unit){case Jn.SECOND:return ae.TimeSecond;case Jn.MILLISECOND:return ae.TimeMillisecond;case Jn.MICROSECOND:return ae.TimeMicrosecond;case Jn.NANOSECOND:return ae.TimeNanosecond}return ae.Time;case ae.Timestamp:switch(e.unit){case Jn.SECOND:return ae.TimestampSecond;case Jn.MILLISECOND:return ae.TimestampMillisecond;case Jn.MICROSECOND:return ae.TimestampMicrosecond;case Jn.NANOSECOND:return ae.TimestampNanosecond}return ae.Timestamp;case ae.Date:switch(e.unit){case nh.DAY:return ae.DateDay;case nh.MILLISECOND:return ae.DateMillisecond}return ae.Date;case ae.Interval:switch(e.unit){case rh.DAY_TIME:return ae.IntervalDayTime;case rh.YEAR_MONTH:return ae.IntervalYearMonth}return ae.Interval;case ae.Map:return ae.Map;case ae.List:return ae.List;case ae.Struct:return ae.Struct;case ae.Union:switch(e.mode){case dc.Dense:return ae.DenseUnion;case dc.Sparse:return ae.SparseUnion}return ae.Union;case ae.FixedSizeBinary:return ae.FixedSizeBinary;case ae.FixedSizeList:return ae.FixedSizeList;case ae.Dictionary:return ae.Dictionary}throw new Error(`Unrecognized type '${ae[e.typeId]}'`)}tr.prototype.visitInt8=null;tr.prototype.visitInt16=null;tr.prototype.visitInt32=null;tr.prototype.visitInt64=null;tr.prototype.visitUint8=null;tr.prototype.visitUint16=null;tr.prototype.visitUint32=null;tr.prototype.visitUint64=null;tr.prototype.visitFloat16=null;tr.prototype.visitFloat32=null;tr.prototype.visitFloat64=null;tr.prototype.visitDateDay=null;tr.prototype.visitDateMillisecond=null;tr.prototype.visitTimestampSecond=null;tr.prototype.visitTimestampMillisecond=null;tr.prototype.visitTimestampMicrosecond=null;tr.prototype.visitTimestampNanosecond=null;tr.prototype.visitTimeSecond=null;tr.prototype.visitTimeMillisecond=null;tr.prototype.visitTimeMicrosecond=null;tr.prototype.visitTimeNanosecond=null;tr.prototype.visitDenseUnion=null;tr.prototype.visitSparseUnion=null;tr.prototype.visitIntervalDayTime=null;tr.prototype.visitIntervalYearMonth=null;const wNe=new Float64Array(1),G_=new Uint32Array(wNe.buffer);function ENe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function SNe(e){if(e!==e)return 32256;wNe[0]=e;const t=(G_[1]&2147483648)>>16&65535;let n=G_[1]&2146435072,r=0;return n>=1089470464?G_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(G_[1]&1048575)>>10):n<=1056964608?(r=1048576+(G_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(G_[1]&1048575)+512>>10),t|n|r&65535}class vn extends tr{}function xn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const PRt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},CX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},kRt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},$Rt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},xNe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},RRt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},wm=({values:e},t,n)=>{e[t]=n},IX=({values:e},t,n)=>{e[t]=n},TNe=({values:e},t,n)=>{e[t]=SNe(n)},NRt=(e,t,n)=>{switch(e.type.precision){case Po.HALF:return TNe(e,t,n);case Po.SINGLE:case Po.DOUBLE:return IX(e,t,n)}},OX=({values:e},t,n)=>{PRt(e,t,n.valueOf())},PX=({values:e},t,n)=>{CX(e,t*2,n.valueOf())},ANe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},DRt=({values:e,valueOffsets:t},n,r)=>xNe(e,t,n,r),MRt=({values:e,valueOffsets:t},n,r)=>{xNe(e,t,n,hX(r))},CNe=(e,t,n)=>{e.type.unit===nh.DAY?OX(e,t,n):PX(e,t,n)},kX=({values:e},t,n)=>CX(e,t*2,n/1e3),$X=({values:e},t,n)=>CX(e,t*2,n),RX=({values:e},t,n)=>kRt(e,t*2,n),NX=({values:e},t,n)=>$Rt(e,t*2,n),INe=(e,t,n)=>{switch(e.type.unit){case Jn.SECOND:return kX(e,t,n);case Jn.MILLISECOND:return $X(e,t,n);case Jn.MICROSECOND:return RX(e,t,n);case Jn.NANOSECOND:return NX(e,t,n)}},DX=({values:e},t,n)=>{e[t]=n},MX=({values:e},t,n)=>{e[t]=n},LX=({values:e},t,n)=>{e[t]=n},FX=({values:e},t,n)=>{e[t]=n},ONe=(e,t,n)=>{switch(e.type.unit){case Jn.SECOND:return DX(e,t,n);case Jn.MILLISECOND:return MX(e,t,n);case Jn.MICROSECOND:return LX(e,t,n);case Jn.NANOSECOND:return FX(e,t,n)}},PNe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},LRt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=hc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},FRt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=hc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},BRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),jRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),URt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),zRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),VRt=(e,t,n)=>{const r=e.type.children.map(s=>hc.getVisitFn(s.type)),i=n instanceof Map?URt(t,n):n instanceof yr?jRt(t,n):Array.isArray(n)?BRt(t,n):zRt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},HRt=(e,t,n)=>{e.type.mode===dc.Dense?kNe(e,t,n):$Ne(e,t,n)},kNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];hc.visit(i,e.valueOffsets[t],n)},$Ne=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];hc.visit(i,t,n)},qRt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},RNe=(e,t,n)=>{e.type.unit===rh.DAY_TIME?BX(e,t,n):jX(e,t,n)},BX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},jX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},WRt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=hc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};vn.prototype.visitBool=xn(RRt);vn.prototype.visitInt=xn(wm);vn.prototype.visitInt8=xn(wm);vn.prototype.visitInt16=xn(wm);vn.prototype.visitInt32=xn(wm);vn.prototype.visitInt64=xn(wm);vn.prototype.visitUint8=xn(wm);vn.prototype.visitUint16=xn(wm);vn.prototype.visitUint32=xn(wm);vn.prototype.visitUint64=xn(wm);vn.prototype.visitFloat=xn(NRt);vn.prototype.visitFloat16=xn(TNe);vn.prototype.visitFloat32=xn(IX);vn.prototype.visitFloat64=xn(IX);vn.prototype.visitUtf8=xn(MRt);vn.prototype.visitBinary=xn(DRt);vn.prototype.visitFixedSizeBinary=xn(ANe);vn.prototype.visitDate=xn(CNe);vn.prototype.visitDateDay=xn(OX);vn.prototype.visitDateMillisecond=xn(PX);vn.prototype.visitTimestamp=xn(INe);vn.prototype.visitTimestampSecond=xn(kX);vn.prototype.visitTimestampMillisecond=xn($X);vn.prototype.visitTimestampMicrosecond=xn(RX);vn.prototype.visitTimestampNanosecond=xn(NX);vn.prototype.visitTime=xn(ONe);vn.prototype.visitTimeSecond=xn(DX);vn.prototype.visitTimeMillisecond=xn(MX);vn.prototype.visitTimeMicrosecond=xn(LX);vn.prototype.visitTimeNanosecond=xn(FX);vn.prototype.visitDecimal=xn(PNe);vn.prototype.visitList=xn(LRt);vn.prototype.visitStruct=xn(VRt);vn.prototype.visitUnion=xn(HRt);vn.prototype.visitDenseUnion=xn(kNe);vn.prototype.visitSparseUnion=xn($Ne);vn.prototype.visitDictionary=xn(qRt);vn.prototype.visitInterval=xn(RNe);vn.prototype.visitIntervalDayTime=xn(BX);vn.prototype.visitIntervalYearMonth=xn(jX);vn.prototype.visitFixedSizeList=xn(WRt);vn.prototype.visitMap=xn(FRt);const hc=new vn,Kc=Symbol.for("parent"),_w=Symbol.for("rowIndex");class UX{constructor(t,n){return this[Kc]=t,this[_w]=n,new Proxy(this,new YRt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[_w],n=this[Kc],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Du.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Xg(t)}: ${Xg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new GRt(this[Kc],this[_w])}}class GRt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Du.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(UX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Kc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[_w]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class YRt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Kc].type.children.map(n=>n.name)}has(t,n){return t[Kc].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Kc].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Kc].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Du.visit(t[Kc].children[r],t[_w]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Kc].type.children.findIndex(s=>s.name===n);return i!==-1?(hc.visit(t[Kc].children[i],t[_w],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class pn extends tr{}function _n(e){return(t,n)=>t.getValid(n)?e(t,n):null}const KRt=(e,t)=>864e5*e[t],zX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),XRt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,QRt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,NNe=e=>new Date(e),JRt=(e,t)=>NNe(KRt(e,t)),ZRt=(e,t)=>NNe(zX(e,t)),eNt=(e,t)=>null,DNe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},tNt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},MNe=({values:e},t)=>JRt(e,t),LNe=({values:e},t)=>ZRt(e,t*2),iy=({stride:e,values:t},n)=>t[e*n],nNt=({stride:e,values:t},n)=>ENe(t[e*n]),FNe=({values:e},t)=>e[t],rNt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),iNt=({values:e,valueOffsets:t},n)=>DNe(e,t,n),sNt=({values:e,valueOffsets:t},n)=>{const r=DNe(e,t,n);return r!==null?IV(r):null},oNt=({values:e},t)=>e[t],aNt=({type:e,values:t},n)=>e.precision!==Po.HALF?t[n]:ENe(t[n]),uNt=(e,t)=>e.type.unit===nh.DAY?MNe(e,t):LNe(e,t),BNe=({values:e},t)=>1e3*zX(e,t*2),jNe=({values:e},t)=>zX(e,t*2),UNe=({values:e},t)=>XRt(e,t*2),zNe=({values:e},t)=>QRt(e,t*2),lNt=(e,t)=>{switch(e.type.unit){case Jn.SECOND:return BNe(e,t);case Jn.MILLISECOND:return jNe(e,t);case Jn.MICROSECOND:return UNe(e,t);case Jn.NANOSECOND:return zNe(e,t)}},VNe=({values:e},t)=>e[t],HNe=({values:e},t)=>e[t],qNe=({values:e},t)=>e[t],WNe=({values:e},t)=>e[t],cNt=(e,t)=>{switch(e.type.unit){case Jn.SECOND:return VNe(e,t);case Jn.MILLISECOND:return HNe(e,t);case Jn.MICROSECOND:return qNe(e,t);case Jn.NANOSECOND:return WNe(e,t)}},fNt=({values:e,stride:t},n)=>yX.decimal(e.subarray(t*n,t*(n+1))),dNt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new yr([u])},hNt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new fF(o.slice(i,s-i))},pNt=(e,t)=>new UX(e,t),mNt=(e,t)=>e.type.mode===dc.Dense?GNe(e,t):YNe(e,t),GNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Du.visit(r,e.valueOffsets[t])},YNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Du.visit(r,t)},gNt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},yNt=(e,t)=>e.type.unit===rh.DAY_TIME?KNe(e,t):XNe(e,t),KNe=({values:e},t)=>e.subarray(2*t,2*(t+1)),XNe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},vNt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new yr([s])};pn.prototype.visitNull=_n(eNt);pn.prototype.visitBool=_n(tNt);pn.prototype.visitInt=_n(oNt);pn.prototype.visitInt8=_n(iy);pn.prototype.visitInt16=_n(iy);pn.prototype.visitInt32=_n(iy);pn.prototype.visitInt64=_n(FNe);pn.prototype.visitUint8=_n(iy);pn.prototype.visitUint16=_n(iy);pn.prototype.visitUint32=_n(iy);pn.prototype.visitUint64=_n(FNe);pn.prototype.visitFloat=_n(aNt);pn.prototype.visitFloat16=_n(nNt);pn.prototype.visitFloat32=_n(iy);pn.prototype.visitFloat64=_n(iy);pn.prototype.visitUtf8=_n(sNt);pn.prototype.visitBinary=_n(iNt);pn.prototype.visitFixedSizeBinary=_n(rNt);pn.prototype.visitDate=_n(uNt);pn.prototype.visitDateDay=_n(MNe);pn.prototype.visitDateMillisecond=_n(LNe);pn.prototype.visitTimestamp=_n(lNt);pn.prototype.visitTimestampSecond=_n(BNe);pn.prototype.visitTimestampMillisecond=_n(jNe);pn.prototype.visitTimestampMicrosecond=_n(UNe);pn.prototype.visitTimestampNanosecond=_n(zNe);pn.prototype.visitTime=_n(cNt);pn.prototype.visitTimeSecond=_n(VNe);pn.prototype.visitTimeMillisecond=_n(HNe);pn.prototype.visitTimeMicrosecond=_n(qNe);pn.prototype.visitTimeNanosecond=_n(WNe);pn.prototype.visitDecimal=_n(fNt);pn.prototype.visitList=_n(dNt);pn.prototype.visitStruct=_n(pNt);pn.prototype.visitUnion=_n(mNt);pn.prototype.visitDenseUnion=_n(GNe);pn.prototype.visitSparseUnion=_n(YNe);pn.prototype.visitDictionary=_n(gNt);pn.prototype.visitInterval=_n(yNt);pn.prototype.visitIntervalDayTime=_n(KNe);pn.prototype.visitIntervalYearMonth=_n(XNe);pn.prototype.visitFixedSizeList=_n(vNt);pn.prototype.visitMap=_n(hNt);const Du=new pn,rf=Symbol.for("keys"),bw=Symbol.for("vals");class fF{constructor(t){return this[rf]=new yr([t.children[0]]).memoize(),this[bw]=t.children[1],new Proxy(this,new bNt)}[Symbol.iterator](){return new _Nt(this[rf],this[bw])}get size(){return this[rf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[rf],n=this[bw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Du.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Xg(t)}: ${Xg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class _Nt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Du.visit(this.vals,t)]})}}class bNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[rf].toArray().map(String)}has(t,n){return t[rf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[rf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[rf].indexOf(n);if(r!==-1){const i=Du.visit(Reflect.get(t,bw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[rf].indexOf(n);return i!==-1?(hc.visit(Reflect.get(t,bw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(fF.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[rf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[bw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Bpe;function QNe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Bpe=s,s=o,o=Bpe),o>i&&(o=i),r?r(e,s,o):[s,o]}const jpe=e=>e!==e;function xS(e){if(typeof e!=="object"||e===null)return jpe(e)?jpe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?dRt(e,n):!1:e instanceof Map?ENt(e):Array.isArray(e)?wNt(e):e instanceof yr?SNt(e):xNt(e,!0)}function wNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=xS(e[n]);return dF(t)}function ENt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=xS(r);return dF(n)}function SNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=xS(e.get(n));return dF(t)}function xNt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=xS(e[n[i]]);return dF(r,n)}function dF(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return TNt(e,n);case Map:return Upe(e,n,n.keys());case fF:case UX:case Object:case void 0:return Upe(e,n,t||Object.keys(n))}return n instanceof yr?ANt(e,n):!1}}function TNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function ANt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Upe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function JNe(e,t,n,r){return(n&1<<r)!==0}function CNt(e,t,n,r){return(n&1<<r)>>r}function VX(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):ZNe(new HX(n,e,t,null,JNe)).subarray(0,r)),i}return n}function ZNe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class HX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function kV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new HX(e,t,n-t,e,CNt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return kV(e,t,i)+kV(e,r,n)+INt(e,i>>3,r-i>>3)}function INt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=hj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=hj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=hj(s.getUint8(i)),i+=1;return r}function hj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const ONt=-1;class Vr{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Vr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=od(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=ONt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-kV(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Vr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ae.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(VX(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Yh.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Yh.TYPE])&&(o[Yh.TYPE]=s.subarray(t,t+n)),(s=o[Yh.OFFSET])&&(o[Yh.OFFSET]=s.subarray(t,t+n+1))||(s=o[Yh.DATA])&&(o[Yh.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Vr.prototype.children=Object.freeze([]);class $2 extends tr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Vr(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=zx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Vr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=zx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Vr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Nr(t.nullBitmap),o=zx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Vr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Nr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Nr(t.nullBitmap),o=wo(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(zn.isSparseUnion(n))return new Vr(n,r,a,u,[void 0,void 0,s,o],i);const l=zx(t.valueOffsets);return new Vr(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.indices.ArrayType,t.data),{["dictionary"]:o=new yr([new $2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Vr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=wo(n.ArrayType,t.data),{["length"]:o=s.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new $2().visit({type:n.valueType})}=t,s=Nr(t.nullBitmap),{["length"]:o=i.length/od(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Vr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new $2().visit({type:n.childType})}=t,s=Nr(t.nullBitmap),o=zx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Vr(n,r,a,u,[o,void 0,s],[i])}}function ra(e){return new $2().visit(e)}class zpe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function eDe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function tDe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function nDe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function qX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function WX(e,t){return e.getValid(t)}function ww(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return qX(r,this._offsets,n,t)}}function rDe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=qX(s,this._offsets,r,n);return t=void 0,o}}function iDe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):qX(s,this._offsets,i,n);return t=void 0,o}}class mn extends tr{}function PNt(e,t){return t===null&&e.length>0?0:-1}function kNt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new HX(n,e.offset+(t||0),e.length,n,JNe)){if(!i)return r;++r}return-1}function kn(e,t,n){if(t===void 0)return-1;if(t===null)return kNt(e,n);const r=Du.getVisitFn(e),i=xS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function sDe(e,t,n){const r=Du.getVisitFn(e),i=xS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}mn.prototype.visitNull=PNt;mn.prototype.visitBool=kn;mn.prototype.visitInt=kn;mn.prototype.visitInt8=kn;mn.prototype.visitInt16=kn;mn.prototype.visitInt32=kn;mn.prototype.visitInt64=kn;mn.prototype.visitUint8=kn;mn.prototype.visitUint16=kn;mn.prototype.visitUint32=kn;mn.prototype.visitUint64=kn;mn.prototype.visitFloat=kn;mn.prototype.visitFloat16=kn;mn.prototype.visitFloat32=kn;mn.prototype.visitFloat64=kn;mn.prototype.visitUtf8=kn;mn.prototype.visitBinary=kn;mn.prototype.visitFixedSizeBinary=kn;mn.prototype.visitDate=kn;mn.prototype.visitDateDay=kn;mn.prototype.visitDateMillisecond=kn;mn.prototype.visitTimestamp=kn;mn.prototype.visitTimestampSecond=kn;mn.prototype.visitTimestampMillisecond=kn;mn.prototype.visitTimestampMicrosecond=kn;mn.prototype.visitTimestampNanosecond=kn;mn.prototype.visitTime=kn;mn.prototype.visitTimeSecond=kn;mn.prototype.visitTimeMillisecond=kn;mn.prototype.visitTimeMicrosecond=kn;mn.prototype.visitTimeNanosecond=kn;mn.prototype.visitDecimal=kn;mn.prototype.visitList=kn;mn.prototype.visitStruct=kn;mn.prototype.visitUnion=kn;mn.prototype.visitDenseUnion=sDe;mn.prototype.visitSparseUnion=sDe;mn.prototype.visitDictionary=kn;mn.prototype.visitInterval=kn;mn.prototype.visitIntervalDayTime=kn;mn.prototype.visitIntervalYearMonth=kn;mn.prototype.visitFixedSizeList=kn;mn.prototype.visitMap=kn;const M3=new mn;class gn extends tr{}function bn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ae.Timestamp||t instanceof Ka&&t.bitWidth!==64||t instanceof Jp&&t.bitWidth!==64||t instanceof _0&&t.precision!==Po.HALF))return new zpe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new zpe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new $Nt(o)})}class $Nt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}gn.prototype.visitNull=bn;gn.prototype.visitBool=bn;gn.prototype.visitInt=bn;gn.prototype.visitInt8=bn;gn.prototype.visitInt16=bn;gn.prototype.visitInt32=bn;gn.prototype.visitInt64=bn;gn.prototype.visitUint8=bn;gn.prototype.visitUint16=bn;gn.prototype.visitUint32=bn;gn.prototype.visitUint64=bn;gn.prototype.visitFloat=bn;gn.prototype.visitFloat16=bn;gn.prototype.visitFloat32=bn;gn.prototype.visitFloat64=bn;gn.prototype.visitUtf8=bn;gn.prototype.visitBinary=bn;gn.prototype.visitFixedSizeBinary=bn;gn.prototype.visitDate=bn;gn.prototype.visitDateDay=bn;gn.prototype.visitDateMillisecond=bn;gn.prototype.visitTimestamp=bn;gn.prototype.visitTimestampSecond=bn;gn.prototype.visitTimestampMillisecond=bn;gn.prototype.visitTimestampMicrosecond=bn;gn.prototype.visitTimestampNanosecond=bn;gn.prototype.visitTime=bn;gn.prototype.visitTimeSecond=bn;gn.prototype.visitTimeMillisecond=bn;gn.prototype.visitTimeMicrosecond=bn;gn.prototype.visitTimeNanosecond=bn;gn.prototype.visitDecimal=bn;gn.prototype.visitList=bn;gn.prototype.visitStruct=bn;gn.prototype.visitUnion=bn;gn.prototype.visitDenseUnion=bn;gn.prototype.visitSparseUnion=bn;gn.prototype.visitDictionary=bn;gn.prototype.visitInterval=bn;gn.prototype.visitIntervalDayTime=bn;gn.prototype.visitIntervalYearMonth=bn;gn.prototype.visitFixedSizeList=bn;gn.prototype.visitMap=bn;const GX=new gn,RNt=(e,t)=>e+t;class sy extends tr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Jn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+ih.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+ih.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const NNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),DNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),MNt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=ih.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},LNt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=ih.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},FNt=(e,t)=>e.type.mode===dc.Dense?oDe(e,t):aDe(e,t),oDe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+ih.visit(t[s],r[i])},aDe=({children:e},t)=>4+ih.visitMany(e,e.map(()=>t)).reduce(RNt,0);sy.prototype.visitUtf8=NNt;sy.prototype.visitBinary=DNt;sy.prototype.visitList=MNt;sy.prototype.visitFixedSizeList=LNt;sy.prototype.visitUnion=FNt;sy.prototype.visitDenseUnion=oDe;sy.prototype.visitSparseUnion=aDe;const ih=new sy;var uDe;const lDe={},cDe={};class yr{constructor(t){var n,r,i;const s=t[0]instanceof yr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Vr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=lDe[o.typeId],f=s[0];this.isValid=d=>WX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,cDe[o.typeId]),this._offsets=tDe(s);break}this.data=s,this.type=o,this.stride=od(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=eDe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ae[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return GX.visit(this)}concat(...t){return new yr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new yr(QNe(this,t,n,({data:r,_offsets:i},s,o)=>nDe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ae.Int:case ae.Float:case ae.Decimal:case ae.Time:case ae.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new yr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return zn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(zn.isDictionary(this.type)){const t=new L3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new yr(n)}return new L3(this)}unmemoize(){if(zn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new yr(n)}return this}}uDe=Symbol.toStringTag;yr[uDe]=(e=>{e.type=zn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ae).map(n=>ae[n]).filter(n=>typeof n=="number"&&n!==ae.NONE);for(const n of t){const r=Du.getVisitFnByTypeId(n),i=hc.getVisitFnByTypeId(n),s=M3.getVisitFnByTypeId(n),o=ih.getVisitFnByTypeId(n);lDe[n]={get:r,set:i,indexOf:s,byteLength:o},cDe[n]=Object.create(e,{isValid:{value:ww(WX)},get:{value:ww(Du.getVisitFnByTypeId(n))},set:{value:rDe(hc.getVisitFnByTypeId(n))},indexOf:{value:iDe(M3.getVisitFnByTypeId(n))},getByteLength:{value:ww(ih.getVisitFnByTypeId(n))}})}return"Vector"})(yr.prototype);class L3 extends yr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new L3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new yr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function BNt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${jNt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function jNt(e){return typeof e!="bigint"?Xg(e):QRe?`${Xg(e)}n`:`"${Xg(e)}"`}const pj=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,UNt=(e,t=0)=>e.length>=t?e.subarray(0,t):$3(new e.constructor(t),e,0);class hF{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?pj(r*1,this.BYTES_PER_ELEMENT):pj(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=pj(t*this.stride,this.BYTES_PER_ELEMENT);const n=UNt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=$3(new this.ArrayType(t),this.buffer)}}hF.prototype.offset=0;class $I extends hF{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class fDe extends $I{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class dDe extends $I{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Hu=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=od(t),this._nulls=new fDe,n&&n.length>0&&(this._isValid=BNt(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new yr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ra({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Hu.prototype.length=1;Hu.prototype.stride=1;Hu.prototype.children=null;Hu.prototype.finished=!1;Hu.prototype.nullValues=null;Hu.prototype._isValid=()=>!0;class oy extends Hu{constructor(t){super(t),this._values=new $I(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class pF extends Hu{constructor(t){super(t),this._pendingLength=0,this._offsets=new dDe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof fF?n[rf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class $V{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const mj=2,md=4,sp=4,ii=4,tg=new Int32Array(2),Vpe=new Float32Array(tg.buffer),Hpe=new Float64Array(tg.buffer),nk=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let kp=class RV{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?RV.ZERO:new RV(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};kp.ZERO=new kp(0,0);var NV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(NV||(NV={}));let F3=class hDe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new hDe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new kp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new kp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return tg[0]=this.readInt32(t),Vpe[0]}readFloat64(t){return tg[nk?0:1]=this.readInt32(t),tg[nk?1:0]=this.readInt32(t+4),Hpe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Vpe[0]=n,this.writeInt32(t,tg[0])}writeFloat64(t,n){Hpe[0]=n,this.writeInt32(t,tg[nk?0:1]),this.writeInt32(t+4,tg[nk?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+md+sp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<sp;n++)t+=String.fromCharCode(this.readInt8(this.position_+md+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=md,n===NV.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+md}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=sp)throw new Error("FlatBuffers: file identifier must be length "+sp);for(let n=0;n<sp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+md+n))return!1;return!0}createLong(t,n){return kp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},pDe=class mDe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=F3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=mDe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=F3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(md,0),this.writeInt32(this.offset()-t+md)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*mj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=mj;l<s;l+=mj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ii:0;if(n){const s=n;if(this.prep(this.minalign,md+sp+i),s.length!=sp)throw new Error("FlatBuffers: file identifier must be length "+sp);for(let o=sp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,md+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(md,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return kp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ks{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ks).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ii),(n||new ks).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ks.startKeyValue(t),ks.addKey(t,n),ks.addValue(t,r),ks.endKeyValue(t)}}var hE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(hE||(hE={}));var pE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(pE||(pE={}));var B3;(function(e){e[e.DenseArray=0]="DenseArray"})(B3||(B3={}));class rl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new rl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ii),(n||new rl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return rl.startInt(t),rl.addBitWidth(t,n),rl.addIsSigned(t,r),rl.endInt(t)}}class op{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new op).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ii),(n||new op).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new rl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):B3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,B3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Cv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Cv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ii),(n||new Cv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Cv.startBinary(t),Cv.endBinary(t)}}class Iv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Iv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ii),(n||new Iv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Iv.startBool(t),Iv.endBool(t)}}var j3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(j3||(j3={}));let L$=class db{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new db).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ii),(n||new db).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):j3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,j3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return db.startDate(t),db.addUnit(t,n),db.endDate(t)}};class du{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new du).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ii),(n||new du).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return du.startDecimal(t),du.addPrecision(t,n),du.addScale(t,r),du.addBitWidth(t,i),du.endDecimal(t)}}var mE;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(mE||(mE={}));class gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ii),(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return gd.startFixedSizeBinary(t),gd.addByteWidth(t,n),gd.endFixedSizeBinary(t)}}class yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ii),(n||new yd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return yd.startFixedSizeList(t),yd.addListSize(t,n),yd.endFixedSizeList(t)}}var U3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(U3||(U3={}));class vd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new vd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ii),(n||new vd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,U3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return vd.startFloatingPoint(t),vd.addPrecision(t,n),vd.endFloatingPoint(t)}}var z3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(z3||(z3={}));class _d{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new _d).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ii),(n||new _d).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,z3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return _d.startInterval(t),_d.addUnit(t,n),_d.endInterval(t)}}class Ov{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Ov).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ii),(n||new Ov).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Ov.startList(t),Ov.endList(t)}}let F$=class hb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new hb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ii),(n||new hb).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return hb.startMap(t),hb.addKeysSorted(t,n),hb.endMap(t)}};class Pv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ii),(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Pv.startNull(t),Pv.endNull(t)}}class kv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new kv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ii),(n||new kv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return kv.startStruct_(t),kv.endStruct_(t)}}let PT=class Ky{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Ky).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ii),(n||new Ky).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mE.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,mE.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Ky.startTime(t),Ky.addUnit(t,n),Ky.addBitWidth(t,r),Ky.endTime(t)}},kT=class Xy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Xy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ii),(n||new Xy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mE.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,mE.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Xy.startTimestamp(t),Xy.addUnit(t,n),Xy.addTimezone(t,r),Xy.endTimestamp(t)}};var V3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(V3||(V3={}));let Qy=class Jy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ii),(n||new Jy).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):V3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,V3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Jy.startUnion(t),Jy.addMode(t,n),Jy.addTypeIds(t,r),Jy.endUnion(t)}};class $v{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new $v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ii),(n||new $v).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return $v.startUtf8(t),$v.endUtf8(t)}}var Mi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Mi||(Mi={}));let Vl=class B${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new B$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ii),(n||new B$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Mi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new op).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new B$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Mi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},id=class Wh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Wh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ii),(n||new Wh).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Vl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,pE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Wh.startSchema(t),Wh.addEndianness(t,n),Wh.addFields(t,r),Wh.addCustomMetadata(t,i),Wh.addFeatures(t,s),Wh.endSchema(t)}};class Zu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Zu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ii),(n||new Zu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new id).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new $V).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new $V).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,hE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class $r{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=MV(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new $r(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new $r(n,this.metadata)}assign(...t){const n=t[0]instanceof $r?t[0]:Array.isArray(t[0])?new $r(t[0]):new $r(t),r=[...this.fields],i=rk(rk(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:rk(rk(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=MV(s,new Map);return new $r([...r,...s],i,new Map([...this.dictionaries,...o]))}}$r.prototype.fields=null;$r.prototype.metadata=null;$r.prototype.dictionaries=null;let qr=class DV{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new DV(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],DV.new(n,r,i,s)}};qr.prototype.type=null;qr.prototype.name=null;qr.prototype.nullable=null;qr.prototype.metadata=null;function rk(e,t){return new Map([...e||new Map,...t||new Map])}function MV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(zn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&MV(s.children,t)}return t}var qpe=kp,zNt=pDe,VNt=F3;class LV{constructor(t,n=ol.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new VNt(Nr(t));const n=Zu.getRootAsFooter(t),r=$r.decode(n.schema());return new HNt(r,n)}static encode(t){const n=new zNt,r=$r.encode(n,t.schema);Zu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())w0.encode(n,o);const i=n.endVector();Zu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())w0.encode(n,o);const s=n.endVector();return Zu.startFooter(n),Zu.addSchema(n,r),Zu.addVersion(n,ol.V4),Zu.addRecordBatches(n,i),Zu.addDictionaries(n,s),Zu.finishFooterBuffer(n,Zu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class HNt extends LV{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return w0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return w0.decode(n)}return null}}class w0{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new w0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new qpe(n.offset,0),s=new qpe(n.bodyLength,0);return $V.createBlock(t,i,r,s)}}const ik=Object.freeze({done:!0,value:void 0});class gDe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class qNt extends gDe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return ip(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(ik);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Lpe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Lpe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return ip(this,void 0,void 0,function*(){return yield this.abort(t),ik})}return(t){return ip(this,void 0,void 0,function*(){return yield this.close(),ik})}read(t){return ip(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return ip(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(ik)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class gj extends qNt{write(t){if((t=Nr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?IV(this.toUint8Array(!0)):this.toUint8Array(!1).then(IV)}toUint8Array(t=!1){return t?th(this._values)[0]:ip(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=k2(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return th(i,s)[0]})}}class yDe extends pF{constructor(t){super(t),this._values=new hF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Nr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class WNt extends Hu{constructor(t){super(t),this._values=new fDe}setValue(t,n){this._values.set(t,+n)}}class mF extends oy{}mF.prototype._setValue=CNe;class vDe extends mF{}vDe.prototype._setValue=OX;class _De extends mF{}_De.prototype._setValue=PX;class bDe extends oy{}bDe.prototype._setValue=PNe;class GNt extends Hu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new b0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=H3({type:this.type.indices,nullValues:n}),this.dictionary=H3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wDe extends oy{}wDe.prototype._setValue=ANe;class YNt extends Hu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new dE(this.type.listSize,new qr(n,t.type,!0)),r}}class gF extends oy{setValue(t,n){this._values.set(t,n)}}class KNt extends gF{setValue(t,n){super.setValue(t,SNe(n))}}class XNt extends gF{}class QNt extends gF{}class yF extends oy{}yF.prototype._setValue=RNe;class EDe extends yF{}EDe.prototype._setValue=BX;class SDe extends yF{}SDe.prototype._setValue=jX;class Em extends oy{setValue(t,n){this._values.set(t,n)}}class JNt extends Em{}class ZNt extends Em{}class eDt extends Em{}class tDt extends Em{}class nDt extends Em{}class rDt extends Em{}class iDt extends Em{}class sDt extends Em{}class oDt extends pF{constructor(t){super(t),this._offsets=new dDe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new fE(new qr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class aDt extends pF{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new tC(new qr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class uDt extends Hu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class lDt extends Hu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new aa([...this.type.children,new qr(n,t.type,!0)]),r}}class TS extends oy{}TS.prototype._setValue=INe;class xDe extends TS{}xDe.prototype._setValue=kX;class TDe extends TS{}TDe.prototype._setValue=$X;class ADe extends TS{}ADe.prototype._setValue=RX;class CDe extends TS{}CDe.prototype._setValue=NX;class AS extends oy{}AS.prototype._setValue=ONe;class IDe extends AS{}IDe.prototype._setValue=DX;class ODe extends AS{}ODe.prototype._setValue=MX;class PDe extends AS{}PDe.prototype._setValue=LX;class kDe extends AS{}kDe.prototype._setValue=FX;class YX extends Hu{constructor(t){super(t),this._typeIds=new $I(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new qr(n,t.type)];return this.type=new eC(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class cDt extends YX{}class fDt extends YX{constructor(t){super(t),this._offsets=new $I(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class $De extends pF{constructor(t){super(t),this._values=new hF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,hX(n))}_flushPending(t,n){}}$De.prototype._flushPending=yDe.prototype._flushPending;class dDt extends tr{visitNull(){return uDt}visitBool(){return WNt}visitInt(){return Em}visitInt8(){return JNt}visitInt16(){return ZNt}visitInt32(){return eDt}visitInt64(){return tDt}visitUint8(){return nDt}visitUint16(){return rDt}visitUint32(){return iDt}visitUint64(){return sDt}visitFloat(){return gF}visitFloat16(){return KNt}visitFloat32(){return XNt}visitFloat64(){return QNt}visitUtf8(){return $De}visitBinary(){return yDe}visitFixedSizeBinary(){return wDe}visitDate(){return mF}visitDateDay(){return vDe}visitDateMillisecond(){return _De}visitTimestamp(){return TS}visitTimestampSecond(){return xDe}visitTimestampMillisecond(){return TDe}visitTimestampMicrosecond(){return ADe}visitTimestampNanosecond(){return CDe}visitTime(){return AS}visitTimeSecond(){return IDe}visitTimeMillisecond(){return ODe}visitTimeMicrosecond(){return PDe}visitTimeNanosecond(){return kDe}visitDecimal(){return bDe}visitList(){return oDt}visitStruct(){return lDt}visitUnion(){return YX}visitDenseUnion(){return fDt}visitSparseUnion(){return cDt}visitDictionary(){return GNt}visitInterval(){return yF}visitIntervalDayTime(){return EDe}visitIntervalYearMonth(){return SDe}visitFixedSizeList(){return YNt}visitMap(){return aDt}}const hDt=new dDt;class yn extends tr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function qu(e,t){return t instanceof e.constructor}function RI(e,t){return e===t||qu(e,t)}function Sm(e,t){return e===t||qu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function vF(e,t){return e===t||qu(e,t)&&e.precision===t.precision}function pDt(e,t){return e===t||qu(e,t)&&e.byteWidth===t.byteWidth}function KX(e,t){return e===t||qu(e,t)&&e.unit===t.unit}function NI(e,t){return e===t||qu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function DI(e,t){return e===t||qu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function mDt(e,t){return e===t||qu(e,t)&&e.children.length===t.children.length&&E0.compareManyFields(e.children,t.children)}function gDt(e,t){return e===t||qu(e,t)&&e.children.length===t.children.length&&E0.compareManyFields(e.children,t.children)}function XX(e,t){return e===t||qu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&E0.compareManyFields(e.children,t.children)}function yDt(e,t){return e===t||qu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&E0.visit(e.indices,t.indices)&&E0.visit(e.dictionary,t.dictionary)}function QX(e,t){return e===t||qu(e,t)&&e.unit===t.unit}function vDt(e,t){return e===t||qu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&E0.compareManyFields(e.children,t.children)}function _Dt(e,t){return e===t||qu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&E0.compareManyFields(e.children,t.children)}yn.prototype.visitNull=RI;yn.prototype.visitBool=RI;yn.prototype.visitInt=Sm;yn.prototype.visitInt8=Sm;yn.prototype.visitInt16=Sm;yn.prototype.visitInt32=Sm;yn.prototype.visitInt64=Sm;yn.prototype.visitUint8=Sm;yn.prototype.visitUint16=Sm;yn.prototype.visitUint32=Sm;yn.prototype.visitUint64=Sm;yn.prototype.visitFloat=vF;yn.prototype.visitFloat16=vF;yn.prototype.visitFloat32=vF;yn.prototype.visitFloat64=vF;yn.prototype.visitUtf8=RI;yn.prototype.visitBinary=RI;yn.prototype.visitFixedSizeBinary=pDt;yn.prototype.visitDate=KX;yn.prototype.visitDateDay=KX;yn.prototype.visitDateMillisecond=KX;yn.prototype.visitTimestamp=NI;yn.prototype.visitTimestampSecond=NI;yn.prototype.visitTimestampMillisecond=NI;yn.prototype.visitTimestampMicrosecond=NI;yn.prototype.visitTimestampNanosecond=NI;yn.prototype.visitTime=DI;yn.prototype.visitTimeSecond=DI;yn.prototype.visitTimeMillisecond=DI;yn.prototype.visitTimeMicrosecond=DI;yn.prototype.visitTimeNanosecond=DI;yn.prototype.visitDecimal=RI;yn.prototype.visitList=mDt;yn.prototype.visitStruct=gDt;yn.prototype.visitUnion=XX;yn.prototype.visitDenseUnion=XX;yn.prototype.visitSparseUnion=XX;yn.prototype.visitDictionary=yDt;yn.prototype.visitInterval=QX;yn.prototype.visitIntervalDayTime=QX;yn.prototype.visitIntervalYearMonth=QX;yn.prototype.visitFixedSizeList=vDt;yn.prototype.visitMap=_Dt;const E0=new yn;function FV(e,t){return E0.compareSchemas(e,t)}function H3(e){const t=e.type,n=new(hDt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(H3(Object.assign(Object.assign({},l),{type:u})))}}return n}function yj(e,t){return bDt(e,t.map(n=>n.data.concat()))}function bDt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=wDt(n,o,c,t,i),o>0&&(r[s++]=ra({type:new aa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new il(e,f))]}function wDt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ra({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var RDe;class mu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new $r([]),this._offsets=[0],this;let i,s;t[0]instanceof $r&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof il)return[u];if(u instanceof mu)return u.batches;if(u instanceof Vr){if(u.type instanceof aa)return[new il(new $r(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new yr([u[h]])),f=new $r(l.map((h,p)=>new qr(String(h),c[p].type))),[,d]=yj(f,c);return d.length===0?[new il(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new $r([]),!(i instanceof $r))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof il))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!FV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??tDe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=eDe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?GX.visit(new yr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new mu(n,r.map(i=>new il(n,i)))}slice(t,n){const r=this.schema;[t,n]=QNe({length:this.numRows},t,n);const i=nDe(this.data,this._offsets,t,n);return new mu(r,i.map(s=>new il(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ra({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new yr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new yr([ra({type:new Qp,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=yj(r,a)}return new mu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new mu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new mu(...yj(s,o))}}RDe=Symbol.toStringTag;mu[RDe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=ww(WX),e.get=ww(Du.getVisitFn(ae.Struct)),e.set=rDe(hc.getVisitFn(ae.Struct)),e.indexOf=iDe(M3.getVisitFn(ae.Struct)),e.getByteLength=ww(ih.getVisitFn(ae.Struct)),"Table"))(mu.prototype);var NDe;let il=class $T{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof $r))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ra({nullCount:0,type:new aa(this.schema.fields),children:this.schema.fields.map(n=>ra({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Vr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Wpe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=qr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new $r(r),a=ra({type:new aa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Wpe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=DDe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Du.visit(this.data,t)}set(t,n){return hc.visit(this.data,t,n)}indexOf(t,n){return M3.visit(this.data,t,n)}getByteLength(t){return ih.visit(this.data,t)}[Symbol.iterator](){return GX.visit(new yr([this.data]))}toArray(){return[...this]}concat(...t){return new mu(this.schema,[this,...t])}slice(t,n){const[r]=new yr([this.data]).slice(t,n).data;return new $T(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new yr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new yr([ra({type:new Qp,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new $r(s,new Map(this.schema.metadata)),i=ra({type:new aa(s),children:o})}return new $T(r,i)}select(t){const n=this.schema.select(t),r=new aa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new $T(n,ra({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ra({type:new aa(n.fields),length:this.numRows,children:r});return new $T(n,i)}};NDe=Symbol.toStringTag;il[NDe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(il.prototype);function Wpe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ra({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ra({type:new aa(i),length:n,children:s})]}function DDe(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(zn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&DDe(o.children,a.children,n)}return n}class EDt extends il{constructor(t){const n=t.fields.map(i=>ra({type:i.type})),r=ra({type:new aa(t.fields),nullCount:0,children:n});super(t,r)}}var q3;(function(e){e[e.BUFFER=0]="BUFFER"})(q3||(q3={}));var W3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(W3||(W3={}));class ng{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new ng).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ii),(n||new ng).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):W3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):q3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,W3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,q3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return ng.startBodyCompression(t),ng.addCodec(t,n),ng.addMethod(t,r),ng.endBodyCompression(t)}}let MDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},LDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},Kh=class BV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new BV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ii),(n||new BV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new LDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new MDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new ng).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},pb=class jV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new jV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ii),(n||new jV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Kh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var G3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(G3||(G3={}));let Bm=class Xf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Xf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ii),(n||new Xf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):G3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,hE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,G3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Xf.startMessage(t),Xf.addVersion(t,n),Xf.addHeaderType(t,r),Xf.addHeader(t,i),Xf.addBodyLength(t,s),Xf.addCustomMetadata(t,o),Xf.endMessage(t)}};var SDt=kp;class xDt extends tr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Pv.startNull(n),Pv.endNull(n)}visitInt(t,n){return rl.startInt(n),rl.addBitWidth(n,t.bitWidth),rl.addIsSigned(n,t.isSigned),rl.endInt(n)}visitFloat(t,n){return vd.startFloatingPoint(n),vd.addPrecision(n,t.precision),vd.endFloatingPoint(n)}visitBinary(t,n){return Cv.startBinary(n),Cv.endBinary(n)}visitBool(t,n){return Iv.startBool(n),Iv.endBool(n)}visitUtf8(t,n){return $v.startUtf8(n),$v.endUtf8(n)}visitDecimal(t,n){return du.startDecimal(n),du.addScale(n,t.scale),du.addPrecision(n,t.precision),du.addBitWidth(n,t.bitWidth),du.endDecimal(n)}visitDate(t,n){return L$.startDate(n),L$.addUnit(n,t.unit),L$.endDate(n)}visitTime(t,n){return PT.startTime(n),PT.addUnit(n,t.unit),PT.addBitWidth(n,t.bitWidth),PT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return kT.startTimestamp(n),kT.addUnit(n,t.unit),r!==void 0&&kT.addTimezone(n,r),kT.endTimestamp(n)}visitInterval(t,n){return _d.startInterval(n),_d.addUnit(n,t.unit),_d.endInterval(n)}visitList(t,n){return Ov.startList(n),Ov.endList(n)}visitStruct(t,n){return kv.startStruct_(n),kv.endStruct_(n)}visitUnion(t,n){Qy.startTypeIdsVector(n,t.typeIds.length);const r=Qy.createTypeIdsVector(n,t.typeIds);return Qy.startUnion(n),Qy.addMode(n,t.mode),Qy.addTypeIds(n,r),Qy.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return op.startDictionaryEncoding(n),op.addId(n,new SDt(t.id,0)),op.addIsOrdered(n,t.isOrdered),r!==void 0&&op.addIndexType(n,r),op.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return gd.startFixedSizeBinary(n),gd.addByteWidth(n,t.byteWidth),gd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return yd.startFixedSizeList(n),yd.addListSize(n,t.listSize),yd.endFixedSizeList(n)}visitMap(t,n){return F$.startMap(n),F$.addKeysSorted(n,t.keysSorted),F$.endMap(n)}}const vj=new xDt;function TDt(e,t=new Map){return new $r(CDt(e,t),j$(e.customMetadata),t)}function FDe(e){return new El(e.count,BDe(e.columns),jDe(e.columns))}function ADt(e){return new sh(FDe(e.data),e.id,e.isDelta)}function CDt(e,t){return(e.fields||[]).filter(Boolean).map(n=>qr.fromJSON(n,t))}function Gpe(e,t){return(e.children||[]).filter(Boolean).map(n=>qr.fromJSON(n,t))}function BDe(e){return(e||[]).reduce((t,n)=>[...t,new f_(n.count,IDt(n.VALIDITY)),...BDe(n.children)],[])}function jDe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Cd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new Cd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new Cd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Cd(t.length,i.DATA.length)),t=jDe(i.children,t)}return t}function IDt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function ODt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Kpe(e,Gpe(e,t)),i=new qr(e.name,o,e.nullable,j$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?Ype(r):new v0,a=new b0(t.get(n),r,n,s.isOrdered),i=new qr(e.name,a,e.nullable,j$(e.customMetadata))):(r=(r=s.indexType)?Ype(r):new v0,t.set(n,o=Kpe(e,Gpe(e,t))),a=new b0(o,r,n,s.isOrdered),i=new qr(e.name,a,e.nullable,j$(e.customMetadata))),i||null}function j$(e){return new Map(Object.entries(e||{}))}function Ype(e){return new Ka(e.isSigned,e.bitWidth)}function Kpe(e,t){const n=e.type.name;switch(n){case"NONE":return new Qp;case"null":return new Qp;case"binary":return new JA;case"utf8":return new uE;case"bool":return new ZA;case"list":return new fE((t||[])[0]);case"struct":return new aa(t||[]);case"struct_":return new aa(t||[])}switch(n){case"int":{const r=e.type;return new Ka(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new _0(Po[r.precision])}case"decimal":{const r=e.type;return new R3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new lE(nh[r.unit])}case"time":{const r=e.type;return new Jp(Jn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new N3(Jn[r.unit],r.timezone)}case"interval":{const r=e.type;return new cE(rh[r.unit])}case"union":{const r=e.type;return new eC(dc[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new D3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new dE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new tC((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var v1=kp,PDt=pDe,kDt=F3;class bd{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new bd(0,ol.V4,n);return r._createHeader=$Dt(t,n),r}static decode(t){t=new kDt(Nr(t));const n=Bm.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new bd(r,i,s);return o._createHeader=RDt(n,s),o}static encode(t){const n=new PDt;let r=-1;return t.isSchema()?r=$r.encode(n,t.header()):t.isRecordBatch()?r=El.encode(n,t.header()):t.isDictionaryBatch()&&(r=sh.encode(n,t.header())),Bm.startMessage(n),Bm.addVersion(n,ol.V4),Bm.addHeader(n,r),Bm.addHeaderType(n,t.headerType),Bm.addBodyLength(n,new v1(t.bodyLength,0)),Bm.finishMessageBuffer(n,Bm.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof $r)return new bd(0,ol.V4,Js.Schema,t);if(t instanceof El)return new bd(n,ol.V4,Js.RecordBatch,t);if(t instanceof sh)return new bd(n,ol.V4,Js.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Js.Schema}isRecordBatch(){return this.headerType===Js.RecordBatch}isDictionaryBatch(){return this.headerType===Js.DictionaryBatch}}class El{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class sh{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Cd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class f_{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function $Dt(e,t){return()=>{switch(t){case Js.Schema:return $r.fromJSON(e);case Js.RecordBatch:return El.fromJSON(e);case Js.DictionaryBatch:return sh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Js[t]}, type: ${t} }`)}}function RDt(e,t){return()=>{switch(t){case Js.Schema:return $r.decode(e.header(new id));case Js.RecordBatch:return El.decode(e.header(new Kh),e.version());case Js.DictionaryBatch:return sh.decode(e.header(new pb),e.version())}throw new Error(`Unrecognized Message type: { name: ${Js[t]}, type: ${t} }`)}}qr.encode=HDt;qr.decode=zDt;qr.fromJSON=ODt;$r.encode=VDt;$r.decode=NDt;$r.fromJSON=TDt;El.encode=qDt;El.decode=DDt;El.fromJSON=FDe;sh.encode=WDt;sh.decode=MDt;sh.fromJSON=ADt;f_.encode=GDt;f_.decode=FDt;Cd.encode=YDt;Cd.decode=LDt;function NDt(e,t=new Map){const n=UDt(e,t);return new $r(n,U$(e),t)}function DDt(e,t=ol.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new El(e.length(),BDt(e),jDt(e,t))}function MDt(e,t=ol.V4){return new sh(El.decode(e.data(),t),e.id(),e.isDelta())}function LDt(e){return new Cd(e.offset(),e.length())}function FDt(e){return new f_(e.length(),e.nullCount())}function BDt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=f_.decode(n));return t}function jDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ol.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Cd.decode(r));return n}function UDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=qr.decode(r,t));return n}function Xpe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=qr.decode(r,t));return n}function zDt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Jpe(e,Xpe(e,t)),r=new qr(e.name(),i,e.nullable(),U$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?Qpe(s):new v0,o=new b0(t.get(n),s,n,a.isOrdered()),r=new qr(e.name(),o,e.nullable(),U$(e))):(s=(s=a.indexType())?Qpe(s):new v0,t.set(n,i=Jpe(e,Xpe(e,t))),o=new b0(i,s,n,a.isOrdered()),r=new qr(e.name(),o,e.nullable(),U$(e))),r||null}function U$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Qpe(e){return new Ka(e.isSigned(),e.bitWidth())}function Jpe(e,t){const n=e.typeType();switch(n){case Mi.NONE:return new Qp;case Mi.Null:return new Qp;case Mi.Binary:return new JA;case Mi.Utf8:return new uE;case Mi.Bool:return new ZA;case Mi.List:return new fE((t||[])[0]);case Mi.Struct_:return new aa(t||[])}switch(n){case Mi.Int:{const r=e.type(new rl);return new Ka(r.isSigned(),r.bitWidth())}case Mi.FloatingPoint:{const r=e.type(new vd);return new _0(r.precision())}case Mi.Decimal:{const r=e.type(new du);return new R3(r.scale(),r.precision(),r.bitWidth())}case Mi.Date:{const r=e.type(new L$);return new lE(r.unit())}case Mi.Time:{const r=e.type(new PT);return new Jp(r.unit(),r.bitWidth())}case Mi.Timestamp:{const r=e.type(new kT);return new N3(r.unit(),r.timezone())}case Mi.Interval:{const r=e.type(new _d);return new cE(r.unit())}case Mi.Union:{const r=e.type(new Qy);return new eC(r.mode(),r.typeIdsArray()||[],t||[])}case Mi.FixedSizeBinary:{const r=e.type(new gd);return new D3(r.byteWidth())}case Mi.FixedSizeList:{const r=e.type(new yd);return new dE(r.listSize(),(t||[])[0])}case Mi.Map:{const r=e.type(new F$);return new tC((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Mi[n]}" (${n})`)}function VDt(e,t){const n=t.fields.map(s=>qr.encode(e,s));id.startFieldsVector(e,n.length);const r=id.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?id.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ks.startKeyValue(e),ks.addKey(e,a),ks.addValue(e,u),ks.endKeyValue(e)})):-1;return id.startSchema(e),id.addFields(e,r),id.addEndianness(e,KDt?pE.Little:pE.Big),i!==-1&&id.addCustomMetadata(e,i),id.endSchema(e)}function HDt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;zn.isDictionary(s)?(o=s.dictionary.typeId,i=vj.visit(s,e),r=vj.visit(s.dictionary,e)):r=vj.visit(s,e);const a=(s.children||[]).map(c=>qr.encode(e,c)),u=Vl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Vl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ks.startKeyValue(e),ks.addKey(e,d),ks.addValue(e,h),ks.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Vl.startField(e),Vl.addType(e,r),Vl.addTypeType(e,o),Vl.addChildren(e,u),Vl.addNullable(e,!!t.nullable),n!==-1&&Vl.addName(e,n),i!==-1&&Vl.addDictionary(e,i),l!==-1&&Vl.addCustomMetadata(e,l),Vl.endField(e)}function qDt(e,t){const n=t.nodes||[],r=t.buffers||[];Kh.startNodesVector(e,n.length);for(const o of n.slice().reverse())f_.encode(e,o);const i=e.endVector();Kh.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Cd.encode(e,o);const s=e.endVector();return Kh.startRecordBatch(e),Kh.addLength(e,new v1(t.length,0)),Kh.addNodes(e,i),Kh.addBuffers(e,s),Kh.endRecordBatch(e)}function WDt(e,t){const n=El.encode(e,t.data);return pb.startDictionaryBatch(e),pb.addId(e,new v1(t.id,0)),pb.addIsDelta(e,t.isDelta),pb.addData(e,n),pb.endDictionaryBatch(e)}function GDt(e,t){return LDe.createFieldNode(e,new v1(t.length,0),new v1(t.nullCount,0))}function YDt(e,t){return MDe.createBuffer(e,new v1(t.offset,0),new v1(t.length,0))}const KDt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),UV="ARROW1",JX=new Uint8Array(UV.length);for(let e=0;e<UV.length;e+=1)JX[e]=UV.codePointAt(e);JX.length;class xs extends tr{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof il?s.data.children:s.data),r=new xs;return r.visitMany(n(t)),r}visit(t){if(t instanceof yr)return this.visitMany(t.data),this;const{type:n}=t;if(!zn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");zn.isNull(n)||yf.call(this,i<=0?new Uint8Array(0):VX(t.offset,r,t.nullBitmap)),this.nodes.push(new f_(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function yf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Cd(this._byteLength,t)),this._byteLength+=t,this}function XDt(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(yf.call(this,r),t.mode===dc.Sparse)return zV.call(this,e);if(t.mode===dc.Dense){if(e.offset<=0)return yf.call(this,i),zV.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=gX(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];yf.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function QDt(e){let t;return e.nullCount>=e.length?yf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?yf.call(this,VX(e.offset,e.length,t)):yf.call(this,ZNe(e.values))}function ay(e){return yf.call(this,e.values.subarray(0,e.length*e.stride))}function UDe(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return yf.call(this,gX(-r[0],t,r)),yf.call(this,n.subarray(i,i+o)),this}function ZX(e){const{length:t,valueOffsets:n}=e;return n&&yf.call(this,gX(n[0],t,n)),this.visit(e.children[0])}function zV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}xs.prototype.visitBool=QDt;xs.prototype.visitInt=ay;xs.prototype.visitFloat=ay;xs.prototype.visitUtf8=UDe;xs.prototype.visitBinary=UDe;xs.prototype.visitFixedSizeBinary=ay;xs.prototype.visitDate=ay;xs.prototype.visitTimestamp=ay;xs.prototype.visitTime=ay;xs.prototype.visitDecimal=ay;xs.prototype.visitList=ZX;xs.prototype.visitStruct=zV;xs.prototype.visitUnion=XDt;xs.prototype.visitInterval=ay;xs.prototype.visitFixedSizeList=ZX;xs.prototype.visitMap=ZX;class zDe extends gDe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new gj,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ry(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return lF(t)?t.then(n=>this.writeAll(n)):cF(t)?rQ(this,t):nQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof gj?this._sink=t:(this._sink=new gj,t&&sRt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&oRt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!FV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof mu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof il&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!FV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof il?t instanceof EDt||this._writeRecordBatch(t):t instanceof mu?this.writeAll(t.batches):pX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=bd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Js.RecordBatch?this._recordBatchBlocks.push(new w0(a,t.bodyLength,this._position)):t.headerType===Js.DictionaryBatch&&this._dictionaryBlocks.push(new w0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Nr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(bd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(JX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=xs.assemble(t),o=new El(t.numRows,r,i),a=bd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=xs.assemble(new yr([t])),u=new El(t.length,s,o),l=new sh(u,n,r),c=bd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class eQ extends zDe{static writeAll(t,n){const r=new eQ(n);return lF(t)?t.then(i=>r.writeAll(i)):cF(t)?rQ(r,t):nQ(r,t)}}class tQ extends zDe{static writeAll(t){const n=new tQ;return lF(t)?t.then(r=>n.writeAll(r)):cF(t)?rQ(n,t):nQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=LV.encode(new LV(t,ol.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function nQ(e,t){let n=t;t instanceof mu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function rQ(e,t){var n,r,i,s;return ip(this,void 0,void 0,function*(){try{for(n=k2(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function JDt(e,t="stream"){return(t==="stream"?eQ:tQ).writeAll(e).toUint8Array(!0)}function iQ(e,t=1){return(e*t+63&-64||64)/t}function S0(e,t,n=e.BYTES_PER_ELEMENT){return new e(iQ(t,n))}function sQ(e){return e instanceof Vr?e:new Vr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function ZDt(e){return new yr([sQ(e)])}const oQ=new TextEncoder;function e3t(e,t,n){const r=oQ.encode(n);return e.set(r,t),r.length}function t3t(e,t,n){return oQ.encodeInto(n,e.subarray(t)).written}const n3t=oQ.encodeInto?t3t:e3t;function Zpe(e,t){const n=S0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function r3t(e,t){const n=S0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function i3t(e,t){const n=S0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function s3t(e,t){const n=S0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function o3t(e){const t=H3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function a3t(e,t,n){const r=S0(Int32Array,t+1),i=S0(Uint8Array,3*n);let s=0;return{set(o,a){s+=n3t(i,s,o),r[a+1]=s},data:()=>{const o=iQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function u3t(e,t){const n=[],r=S0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:l3t(e.dictionary,n,o)})}}function l3t(e,t,n){const r=a3t(e,t.length,n);return t.forEach(r.set),ZDt(r.data())}function c3t(e,t){const n=S0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function f3t(e,t,n=!0){let r;switch(e.typeId){case ae.Int:r=e.bitWidth<64?Zpe:null;break;case ae.Float:r=e.precision>0?Zpe:null;break;case ae.Dictionary:r=e.dictionary.typeId===ae.Utf8&&e.indices.typeId===ae.Int&&e.indices.bitWidth<64?u3t:null;break;case ae.Bool:r=r3t;break;case ae.Date:r=e.unit?s3t:i3t;break}return r==null?o3t(e):n?c3t(r(e,t),t):r(e,t)}function d3t(e,t){const n=e.length,r=iQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),sQ({type:t,length:n,buffers:[null,i]})}function VDe(e,t,n,r,i=!0){const s=f3t(r,e,i);return t(n,s.set),sQ(s.data())}function aQ(e){if(e instanceof zn||e==null)return e;switch(e){case ae.Binary:return new JA;case ae.Bool:return new ZA;case ae.DateDay:return new bRt;case ae.DateMillisecond:case ae.Date:return new wRt;case ae.Dictionary:return new b0(new uE,new v0);case ae.Float16:return new bNe;case ae.Float32:return new TX;case ae.Float64:case ae.Float:return new AX;case ae.Int8:return new vX;case ae.Int16:return new _X;case ae.Int32:case ae.Int:return new v0;case ae.Int64:return new bX;case ae.IntervalDayTime:return new ARt;case ae.Interval:case ae.IntervalYearMonth:return new CRt;case ae.Null:return new Qp;case ae.TimeMicrosecond:return new xRt;case ae.TimeMillisecond:case ae.Time:return new SRt;case ae.TimeNanosecond:return new TRt;case ae.TimeSecond:return new ERt;case ae.Uint8:return new wX;case ae.Uint16:return new EX;case ae.Uint32:return new SX;case ae.Uint64:return new xX;case ae.Utf8:return new uE;default:In(`Unsupported type code: ${eh(e)}. Use a data type constructor instead?`)}}function h3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function HDe(e,t){const n=VV();return e(t,n.add),n}function VV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Xp(t))++e.dates,h3t(t)&&++e.utcdays;else if(Tv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=VV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=VV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return aQ(p3t(e))}};return e}function p3t(e){const t=e.count-e.nulls;if(t===0)return ae.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ae.Float64:n<128?ae.Int8:n<32768?ae.Int16:ae.Int32:n>=2**32?ae.Float64:n<256?ae.Uint8:n<65536?ae.Uint16:ae.Uint32}else{if(e.nums===t)return ae.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ae.Int64:In(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ae.Uint64:In(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ae.Bool;if(e.utcdays===t)return ae.DateDay;if(e.dates===t)return ae.DateMillisecond;if(e.arrays===t){const n=qr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new dE(e.minlen,n):new fE(n)}else if(e.structs===t){const n=e.struct_prof;return new aa(Object.keys(n).map(r=>qr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ae.Dictionary;In("Type inference failure")}}}}function m3t(e,t,n,r,i,s=!0){if(i=aQ(i),!i){const o=HDe(r,t);s=o.nulls>0,i=o.type()}return VDe(n,r,t,i,s)}function g3t(e,t,n,r,i,s=!0){i=aQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=y3t(o);if(u&&a&&eme(u.type,i))return u;const l=o.data;if(PI(l)){const c=v3t(l);if(a&&c&&eme(c,i))return d3t(l,c);i=i||c,s=!1}if(!i){const c=HDe(r,o);s=c.nulls>0,i=c.type()}return VDe(n,r,o,i,s)}function y3t(e){return e instanceof yr?e:e.vector instanceof yr?e.vector:null}function v3t(e){const n={Float32Array:TX,Float64Array:AX,Int8Array:vX,Int16Array:_X,Int32Array:v0,Uint8Array:wX,Uint16Array:EX,Uint32Array:SX,BigInt64Array:bX,BigUint64Array:xX}[e.constructor.name];return n?new n:null}function eme(e,t){return!e||!t?!0:e.compareTo(t)}function _3t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function b3t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Tv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const w3t=()=>In("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function E3t(){try{return mu}catch{w3t()}}function qDe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=S3t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&In("Column length mismatch"),a[l]=c});const u=E3t();return new u(a)}function S3t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=bi(n)?n(e):gr(n)?n:null;if(gr(e))return{dataFrom:m3t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:_3t(e,r,i)};if(x3t(e))return{dataFrom:g3t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:b3t(e,r,i)};In("Unsupported input data type")}function x3t(e){return e&&bi(e.reify)}function T3t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return JDt(qDe(e,r),n)}function A3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function C3t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Xp(u))++i,A3t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function _F(e,t){return bi(t)?t(e):t||e.columnNames()}function WDe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=C3t(I3t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function I3t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function uQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function O3t(e,t={}){const n=_F(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Xp(l)?aF(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return uQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function GDe(e,t={}){if(bi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Xp(e))return t.utc?aF(e):TRe(e);{const r=JSON.stringify(e,(s,o)=>PI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function bF(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function P3t(e,t={}){const n=_F(e,t.columns),{align:r,format:i}=WDe(e,n,t),s=k3t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(GDe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return uQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function k3t(e){return bF(e.style,t=>bi(t)?t:()=>t)}function $3t(e,t=!0,n=!1){return e===void 0||e?t:n}const R3t=e=>Xp(e)?aF(e,!0):e;function N3t(e,t={}){const n=$3t(t.schema),r=t.format||{},i=_F(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||R3t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function D3t(e,t={}){const n=_F(e,t.columns),{align:r,format:i}=WDe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return uQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(GDe(u,i[l]))+"|"}}),a+`
`}function YDe(e,t){for(const[n,r]of uF(t))e.set(n,r);return e}function M3t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Zp(e,t,n=new Map){return t=Ya(t)?e.columnName(t):t,Lo(t)?n.set(t,t):gr(t)?t.forEach(r=>Zp(e,r,n)):bi(t)?Zp(e,t(e),n):_a(t)?YDe(n,t):In(`Invalid column selection: ${eh(t)}`),n}function wF(e,t){return e.toObject=t,e}function KDe(e){return gr(e)?e.map(KDe):e&&e.toObject?e.toObject():e}function gE(){return wF(e=>e.columnNames(),()=>({all:[]}))}function XDe(...e){return e=e.flat(),wF(t=>{const n=Zp(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:KDe(e)}))}function L3t(e,t){return wF(n=>{let r=Ya(e)?e:n.columnIndex(e),i=Ya(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function F3t(e){return Lo(e)&&(e=RegExp(M3t(e))),wF(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function B3t(e){return PI(e.data)?e.data.constructor:Array}class ap extends i$t{static from(t,n){return new ap(a$t(t,n),n)}static new(t,n){if(t instanceof ap)return t;const r={},i=[];for(const[s,o]of uF(t))r[s]=o,i.push(s);return new ap(r,n||i)}constructor(t,n,r,i,s,o){bF(t,o$t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new ap(t||this._data,n||(t?null:this._names),o,i!==void 0?i:M$t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Nl(r).groupby(r.groups());return t.forEach(s=>{s=ap.new(s),s.numRows()!==n&&In("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):In(`Unrecognized column: ${t}`)}object(t=0){return tme(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Zp(this,t.columns||gE()),o=XRe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),F$t(this,u,a,n)}return a}*[Symbol.iterator](){const t=tme(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(B3t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=L$t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return qDe(this,t)}toArrowBuffer(t){return T3t(this,t)}toCSV(t){return O3t(this,t)}toHTML(t){return P3t(this,t)}toJSON(t){return N3t(this,t)}toMarkdown(t){return D3t(this,t)}}function tme(e){let t=e._builder;if(!t){const n=XRe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class j3t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function or(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=U3t[e.type];s&&s(e,t,n)}const sk=(e,t,n)=>{or(e.argument,t,n,e)},_j=(e,t,n)=>{or(e.left,t,n,e),or(e.right,t,n,e)},nme=(e,t,n)=>{or(e.test,t,n,e),or(e.consequent,t,n,e),e.alternate&&or(e.alternate,t,n,e)},bj=(e,t,n)=>{sd(e.params,t,n,e),or(e.body,t,n,e)},rme=(e,t,n)=>{or(e.callee,t,n,e),sd(e.arguments,t,n,e)},sd=(e,t,n,r)=>{e.forEach(i=>or(i,t,n,r))},U3t={TemplateLiteral:(e,t,n)=>{sd(e.expressions,t,n,e),sd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{or(e.object,t,n,e),or(e.property,t,n,e)},CallExpression:rme,NewExpression:rme,ArrayExpression:(e,t,n)=>{sd(e.elements,t,n,e)},AssignmentExpression:_j,AwaitExpression:sk,BinaryExpression:_j,LogicalExpression:_j,UnaryExpression:sk,UpdateExpression:sk,ConditionalExpression:nme,ObjectExpression:(e,t,n)=>{sd(e.properties,t,n,e)},Property:(e,t,n)=>{or(e.key,t,n,e),or(e.value,t,n,e)},ArrowFunctionExpression:bj,FunctionExpression:bj,FunctionDeclaration:bj,VariableDeclaration:(e,t,n)=>{sd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{or(e.id,t,n,e),or(e.init,t,n,e)},SpreadElement:(e,t,n)=>{or(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{sd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{or(e.expression,t,n,e)},IfStatement:nme,ForStatement:(e,t,n)=>{or(e.init,t,n,e),or(e.test,t,n,e),or(e.update,t,n,e),or(e.body,t,n,e)},WhileStatement:(e,t,n)=>{or(e.test,t,n,e),or(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{or(e.body,t,n,e),or(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{or(e.discriminant,t,n,e),sd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&or(e.test,t,n,e),sd(e.consequent,t,n,e)},ReturnStatement:sk,Program:(e,t,n)=>{or(e.body[0],t,n,e)}};function QDe(e){delete e.start,delete e.end,delete e.optional}function ime(e){QDe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function z3t(e){return or(e,null,{Column:ime,Constant:ime,Default:QDe}),e}function Rs(e,t){return t&&t.type===e}function V3t(e){return Rs(U$t,e)||Rs(j$t,e)}function H3t(e){return bi(e)?e:()=>e}const q3t="Escaped functions are not valid as rollup or pivot values.";function W3t(e,t,n){e.aggronly&&In(q3t);const r="(row,data)=>fn("+KRe(e.table.columnNames())+",$)";return{escape:dX.escape(r,H3t(t.expr),n)}}var G3t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],JDe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Y3t="-----------------------------------------------------------------------------------------------------------------------------------------------------",ZDe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",wj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Ej="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",K3t={5:Ej,"5module":Ej+" export import",6:Ej+" const class extends export import super"},X3t=/^in(stanceof)?$/,Q3t=new RegExp("["+ZDe+"]"),J3t=new RegExp("["+ZDe+Y3t+"]");function HV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function em(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Q3t.test(String.fromCharCode(e)):t===!1?!1:HV(e,JDe)}function yE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&J3t.test(String.fromCharCode(e)):t===!1?!1:HV(e,JDe)||HV(e,G3t)}var ur=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Fl(e,t){return new ur(e,{beforeExpr:!0,binop:t})}var Bl={beforeExpr:!0},ou={startsExpr:!0},lQ={};function Kn(e,t){return t===void 0&&(t={}),t.keyword=e,lQ[e]=new ur(e,t)}var X={num:new ur("num",ou),regexp:new ur("regexp",ou),string:new ur("string",ou),name:new ur("name",ou),privateId:new ur("privateId",ou),eof:new ur("eof"),bracketL:new ur("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ur("]"),braceL:new ur("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ur("}"),parenL:new ur("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ur(")"),comma:new ur(",",Bl),semi:new ur(";",Bl),colon:new ur(":",Bl),dot:new ur("."),question:new ur("?",Bl),questionDot:new ur("?."),arrow:new ur("=>",Bl),template:new ur("template"),invalidTemplate:new ur("invalidTemplate"),ellipsis:new ur("...",Bl),backQuote:new ur("`",ou),dollarBraceL:new ur("${",{beforeExpr:!0,startsExpr:!0}),eq:new ur("=",{beforeExpr:!0,isAssign:!0}),assign:new ur("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ur("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ur("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Fl("||",1),logicalAND:Fl("&&",2),bitwiseOR:Fl("|",3),bitwiseXOR:Fl("^",4),bitwiseAND:Fl("&",5),equality:Fl("==/!=/===/!==",6),relational:Fl("</>/<=/>=",7),bitShift:Fl("<</>>/>>>",8),plusMin:new ur("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Fl("%",10),star:Fl("*",10),slash:Fl("/",10),starstar:new ur("**",{beforeExpr:!0}),coalesce:Fl("??",1),_break:Kn("break"),_case:Kn("case",Bl),_catch:Kn("catch"),_continue:Kn("continue"),_debugger:Kn("debugger"),_default:Kn("default",Bl),_do:Kn("do",{isLoop:!0,beforeExpr:!0}),_else:Kn("else",Bl),_finally:Kn("finally"),_for:Kn("for",{isLoop:!0}),_function:Kn("function",ou),_if:Kn("if"),_return:Kn("return",Bl),_switch:Kn("switch"),_throw:Kn("throw",Bl),_try:Kn("try"),_var:Kn("var"),_const:Kn("const"),_while:Kn("while",{isLoop:!0}),_with:Kn("with"),_new:Kn("new",{beforeExpr:!0,startsExpr:!0}),_this:Kn("this",ou),_super:Kn("super",ou),_class:Kn("class",ou),_extends:Kn("extends",Bl),_export:Kn("export"),_import:Kn("import",ou),_null:Kn("null",ou),_true:Kn("true",ou),_false:Kn("false",ou),_in:Kn("in",{beforeExpr:!0,binop:7}),_instanceof:Kn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Kn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Kn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Kn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Oc=/\r\n?|\n|\u2028|\u2029/,Z3t=new RegExp(Oc.source,"g");function CS(e){return e===10||e===13||e===8232||e===8233}function e3e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(CS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var t3e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Jl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,n3e=Object.prototype,eMt=n3e.hasOwnProperty,tMt=n3e.toString,MI=Object.hasOwn||function(e,t){return eMt.call(e,t)},sme=Array.isArray||function(e){return tMt.call(e)==="[object Array]"},ome=Object.create(null);function Sg(e){return ome[e]||(ome[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function x0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var nMt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,nC=function(t,n){this.line=t,this.column=n};nC.prototype.offset=function(t){return new nC(this.line,this.column+t)};var EF=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function r3e(e,t){for(var n=1,r=0;;){var i=e3e(e,r,t);if(i<0)return new nC(n,t-r);++n,r=i}}var qV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ame=!1;function rMt(e){var t={};for(var n in qV)t[n]=e&&MI(e,n)?e[n]:qV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!ame&&typeof console=="object"&&console.warn&&(ame=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),sme(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return sme(t.onComment)&&(t.onComment=iMt(t,t.onComment)),t}function iMt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new EF(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var rC=1,IS=2,cQ=4,i3e=8,s3e=16,o3e=32,fQ=64,a3e=128,LI=256,dQ=rC|IS|LI;function hQ(e,t){return IS|(e?cQ:0)|(t?i3e:0)}var Y3=0,pQ=1,xm=2,u3e=3,l3e=4,c3e=5,Vs=function(t,n,r){this.options=t=rMt(t),this.sourceFile=t.sourceFile,this.keywords=Sg(K3t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=wj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Sg(i);var s=(i?i+" ":"")+wj.strict;this.reservedWordsStrict=Sg(s),this.reservedWordsStrictBind=Sg(s+" "+wj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Oc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=X.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(rC),this.regexpState=null,this.privateNameStack=[]},bh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Vs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};bh.inFunction.get=function(){return(this.currentVarScope().flags&IS)>0};bh.inGenerator.get=function(){return(this.currentVarScope().flags&i3e)>0&&!this.currentVarScope().inClassFieldInit};bh.inAsync.get=function(){return(this.currentVarScope().flags&cQ)>0&&!this.currentVarScope().inClassFieldInit};bh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&LI)return!1;if(t.flags&IS)return(t.flags&cQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};bh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&fQ)>0||n||this.options.allowSuperOutsideMethod};bh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&a3e)>0};bh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};bh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(IS|LI))>0||n};bh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&LI)>0};Vs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Vs.parse=function(t,n){return new this(n,t).parse()};Vs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Vs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Vs.prototype,bh);var nu=Vs.prototype,sMt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;nu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Jl.lastIndex=e,e+=Jl.exec(this.input)[0].length;var t=sMt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Jl.lastIndex=e+t[0].length;var n=Jl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Oc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Jl.lastIndex=e,e+=Jl.exec(this.input)[0].length,this.input[e]===";"&&e++}};nu.eat=function(e){return this.type===e?(this.next(),!0):!1};nu.isContextual=function(e){return this.type===X.name&&this.value===e&&!this.containsEsc};nu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};nu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};nu.canInsertSemicolon=function(){return this.type===X.eof||this.type===X.braceR||Oc.test(this.input.slice(this.lastTokEnd,this.start))};nu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};nu.semicolon=function(){!this.eat(X.semi)&&!this.insertSemicolon()&&this.unexpected()};nu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};nu.expect=function(e){this.eat(e)||this.unexpected()};nu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var SF=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};nu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};nu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};nu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};nu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Lt=Vs.prototype;Lt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==X.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var mQ={kind:"loop"},oMt={kind:"switch"};Lt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Jl.lastIndex=this.pos;var t=Jl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(em(r,!0)){for(var i=n+1;yE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!X3t.test(s))return!0}return!1};Lt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Jl.lastIndex=this.pos;var e=Jl.exec(this.input),t=this.pos+e[0].length,n;return!Oc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(yE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Lt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=X._var,s="let"),r){case X._break:case X._continue:return this.parseBreakContinueStatement(i,r.keyword);case X._debugger:return this.parseDebuggerStatement(i);case X._do:return this.parseDoStatement(i);case X._for:return this.parseForStatement(i);case X._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case X._class:return e&&this.unexpected(),this.parseClass(i,!0);case X._if:return this.parseIfStatement(i);case X._return:return this.parseReturnStatement(i);case X._switch:return this.parseSwitchStatement(i);case X._throw:return this.parseThrowStatement(i);case X._try:return this.parseTryStatement(i);case X._const:case X._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case X._while:return this.parseWhileStatement(i);case X._with:return this.parseWithStatement(i);case X.braceL:return this.parseBlock(!0,i);case X.semi:return this.parseEmptyStatement(i);case X._export:case X._import:if(this.options.ecmaVersion>10&&r===X._import){Jl.lastIndex=this.pos;var o=Jl.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===X._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===X.name&&c.type==="Identifier"&&this.eat(X.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Lt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(X.semi)||this.insertSemicolon()?e.label=null:this.type!==X.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Lt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Lt.parseDoStatement=function(e){return this.next(),this.labels.push(mQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(X._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(X.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Lt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(mQ),this.enterScope(0),this.expect(X.parenL),this.type===X.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===X._var||this.type===X._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new SF,u=this.parseExpression(t>-1?"await":!0,a);return this.type===X._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Lt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,R2|(n?0:WV),!1,t)};Lt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(X._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Lt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(X.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Lt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(X.braceL),this.labels.push(oMt),this.enterScope(0);for(var t,n=!1;this.type!==X.braceR;)if(this.type===X._case||this.type===X._default){var r=this.type===X._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(X.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Lt.parseThrowStatement=function(e){return this.next(),Oc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var aMt=[];Lt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?o3e:0),this.checkLValPattern(e,t?l3e:xm),this.expect(X.parenR),e};Lt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===X._catch){var t=this.startNode();this.next(),this.eat(X.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(X._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Lt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Lt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(mQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Lt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Lt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Lt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===X._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Lt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Lt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(X.braceL),e&&this.enterScope(0);this.type!==X.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Lt.parseFor=function(e,t){return e.init=t,this.expect(X.semi),e.test=this.type===X.semi?null:this.parseExpression(),this.expect(X.semi),e.update=this.type===X.parenR?null:this.parseExpression(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Lt.parseForIn=function(e,t){var n=this.type===X._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Lt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(X.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===X._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(X.comma))break}return e};Lt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?pQ:xm,!1)};var R2=1,WV=2,f3e=4;Lt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===X.star&&t&WV&&this.unexpected(),e.generator=this.eat(X.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&R2&&(e.id=t&f3e&&this.type!==X.name?null:this.parseIdent(),e.id&&!(t&WV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?pQ:xm:u3e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hQ(e.async,e.generator)),t&R2||(e.id=this.type===X.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&R2?"FunctionDeclaration":"FunctionExpression")};Lt.parseFunctionParams=function(e){this.expect(X.parenL),e.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Lt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(X.braceL);this.type!==X.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&uMt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Lt.parseClassElement=function(e){if(this.eat(X.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(X.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===X.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===X.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(X.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===X.parenL||o!=="method"||i||s){var l=!n.static&&K3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Lt.isClassElementNameStart=function(){return this.type===X.name||this.type===X.privateId||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword};Lt.parseClassElementName=function(e){this.type===X.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Lt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&K3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Lt.parseClassField=function(e){if(K3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&K3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(X.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Lt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(LI|fQ);this.type!==X.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Lt.parseClassId=function(e,t){this.type===X.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,xm,!1)):(t===!0&&this.unexpected(),e.id=null)};Lt.parseClassSuper=function(e){e.superClass=this.eat(X._extends)?this.parseExprSubscripts(null,!1):null};Lt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Lt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];MI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function uMt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function K3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Lt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Lt.parseExport=function(e,t){if(this.next(),this.eat(X.star))return this.parseExportAllDeclaration(e,t);if(this.eat(X._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Lt.parseExportDeclaration=function(e){return this.parseStatement(null)};Lt.parseExportDefaultDeclaration=function(){var e;if(this.type===X._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,R2|f3e,!1,e)}else if(this.type===X._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Lt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),MI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Lt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Lt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Lt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Lt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Lt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(X.braceL);!this.eat(X.braceR);){if(n)n=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Lt.parseImport=function(e){return this.next(),this.type===X.string?(e.specifiers=aMt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===X.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Lt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,xm),this.finishNode(e,"ImportSpecifier")};Lt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,xm),this.finishNode(e,"ImportDefaultSpecifier")};Lt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,xm),this.finishNode(e,"ImportNamespaceSpecifier")};Lt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===X.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(X.comma)))return e;if(this.type===X.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(X.braceL);!this.eat(X.braceR);){if(t)t=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;e.push(this.parseImportSpecifier())}return e};Lt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===X.string){var e=this.parseLiteral(this.value);return nMt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Lt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Lt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Pc=Vs.prototype;Pc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Pc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Pc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Pc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==X.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Pc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case X.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(X.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case X.braceL:return this.parseObj(!0)}return this.parseIdent()};Pc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(X.comma),t&&this.type===X.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===X.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Pc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Pc.parseBindingListItem=function(e){return e};Pc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(X.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Pc.checkLValSimple=function(e,t,n){t===void 0&&(t=Y3);var r=t!==Y3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===xm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(MI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==c3e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Pc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Y3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Pc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Y3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var jc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Pi={b_stat:new jc("{",!1),b_expr:new jc("{",!0),b_tmpl:new jc("${",!1),p_stat:new jc("(",!1),p_expr:new jc("(",!0),q_tmpl:new jc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new jc("function",!1),f_expr:new jc("function",!0),f_expr_gen:new jc("function",!0,!1,null,!0),f_gen:new jc("function",!1,!1,null,!0)},OS=Vs.prototype;OS.initialContext=function(){return[Pi.b_stat]};OS.curContext=function(){return this.context[this.context.length-1]};OS.braceIsBlock=function(e){var t=this.curContext();return t===Pi.f_expr||t===Pi.f_stat?!0:e===X.colon&&(t===Pi.b_stat||t===Pi.b_expr)?!t.isExpr:e===X._return||e===X.name&&this.exprAllowed?Oc.test(this.input.slice(this.lastTokEnd,this.start)):e===X._else||e===X.semi||e===X.eof||e===X.parenR||e===X.arrow?!0:e===X.braceL?t===Pi.b_stat:e===X._var||e===X._const||e===X.name?!1:!this.exprAllowed};OS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};OS.updateContext=function(e){var t,n=this.type;n.keyword&&e===X.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};OS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};X.parenR.updateContext=X.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Pi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};X.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Pi.b_stat:Pi.b_expr),this.exprAllowed=!0};X.dollarBraceL.updateContext=function(){this.context.push(Pi.b_tmpl),this.exprAllowed=!0};X.parenL.updateContext=function(e){var t=e===X._if||e===X._for||e===X._with||e===X._while;this.context.push(t?Pi.p_stat:Pi.p_expr),this.exprAllowed=!0};X.incDec.updateContext=function(){};X._function.updateContext=X._class.updateContext=function(e){e.beforeExpr&&e!==X._else&&!(e===X.semi&&this.curContext()!==Pi.p_stat)&&!(e===X._return&&Oc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===X.colon||e===X.braceL)&&this.curContext()===Pi.b_stat)?this.context.push(Pi.f_expr):this.context.push(Pi.f_stat),this.exprAllowed=!1};X.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};X.backQuote.updateContext=function(){this.curContext()===Pi.q_tmpl?this.context.pop():this.context.push(Pi.q_tmpl),this.exprAllowed=!1};X.star.updateContext=function(e){if(e===X._function){var t=this.context.length-1;this.context[t]===Pi.f_expr?this.context[t]=Pi.f_expr_gen:this.context[t]=Pi.f_gen}this.exprAllowed=!0};X.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==X.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var an=Vs.prototype;an.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};an.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===X.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(X.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};an.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new SF,r=!0);var a=this.start,u=this.startLoc;(this.type===X.parenL||this.type===X.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===X.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===X.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};an.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(X.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(X.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};an.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};an.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==X._in)&&s>r){var o=this.type===X.logicalOR||this.type===X.logicalAND,a=this.type===X.coalesce;a&&(s=X.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===X.coalesce||a&&(this.type===X.logicalOR||this.type===X.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};an.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};an.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===X.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&d3e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===X.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==X._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(X.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function d3e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&d3e(e.expression)}an.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};an.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};an.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(X.arrow)};an.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};an.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(X.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(X.bracketL);if(l||u&&this.type!==X.parenL&&this.type!==X.backQuote||this.eat(X.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(X.bracketR)):this.type===X.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(X.parenL)){var f=new SF,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===X.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};an.parseExprAtom=function(e,t,n){this.type===X.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case X._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===X.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==X.dot&&this.type!==X.bracketL&&this.type!==X.parenL&&this.unexpected(),this.finishNode(r,"Super");case X._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case X.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(X._function))return this.overrideContext(Pi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(X.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===X.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(X.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case X.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case X.num:case X.string:return this.parseLiteral(this.value);case X._null:case X._true:case X._false:return r=this.startNode(),r.value=this.type===X._null?null:this.type===X._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case X.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case X.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(X.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case X.braceL:return this.overrideContext(Pi.b_expr),this.parseObj(!1,e);case X._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case X._class:return this.parseClass(this.startNode(),!1);case X._new:return this.parseNew();case X.backQuote:return this.parseTemplate();case X._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};an.parseExprAtomDefault=function(){this.unexpected()};an.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===X.parenL&&!e)return this.parseDynamicImport(t);if(this.type===X.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};an.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(X.parenR)){var t=this.start;this.eat(X.comma)&&this.eat(X.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};an.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};an.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};an.parseParenExpression=function(){this.expect(X.parenL);var e=this.parseExpression();return this.expect(X.parenR),e};an.shouldParseArrow=function(e){return!this.canInsertSemicolon()};an.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new SF,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==X.parenR;)if(l?l=!1:this.expect(X.comma),s&&this.afterTrailingComma(X.parenR,!0)){c=!0;break}else if(this.type===X.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(X.parenR),e&&this.shouldParseArrow(u)&&this.eat(X.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};an.parseParenItem=function(e){return e};an.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var lMt=[];an.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===X.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(X.parenL)?e.arguments=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1):e.arguments=lMt,this.finishNode(e,"NewExpression")};an.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===X.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===X.backQuote,this.finishNode(n,"TemplateElement")};an.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===X.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(X.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(X.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};an.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===X.name||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===X.star)&&!Oc.test(this.input.slice(this.lastTokEnd,this.start))};an.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(X.braceR);){if(r)r=!1;else if(this.expect(X.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(X.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};an.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(X.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===X.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(X.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(X.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};an.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};an.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===X.colon&&this.unexpected(),this.eat(X.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===X.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==X.comma&&this.type!==X.braceR&&this.type!==X.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===X.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};an.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(X.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(X.bracketR),e.key;e.computed=!1}return e.key=this.type===X.num||this.type===X.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};an.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};an.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(hQ(t,r.generator)|fQ|(n?a3e:0)),this.expect(X.parenL),r.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};an.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(hQ(n,!1)|s3e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};an.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==X.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,c3e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};an.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};an.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,pQ,t?null:n)}};an.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(X.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===X.comma?o=null:this.type===X.ellipsis?(o=this.parseSpread(r),r&&this.type===X.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};an.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};an.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};an.parseIdentNode=function(){var e=this.startNode();return this.type===X.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=X.name):this.unexpected(),e};an.parsePrivateIdent=function(){var e=this.startNode();return this.type===X.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};an.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===X.semi||this.canInsertSemicolon()||this.type!==X.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(X.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};an.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var X3=Vs.prototype;X3.raise=function(e,t){var n=r3e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};X3.raiseRecoverable=X3.raise;X3.curPosition=function(){if(this.options.locations)return new nC(this.curLine,this.pos-this.lineStart)};var uy=Vs.prototype,cMt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};uy.enterScope=function(e){this.scopeStack.push(new cMt(e))};uy.exitScope=function(){this.scopeStack.pop()};uy.treatFunctionsAsVarInScope=function(e){return e.flags&IS||!this.inModule&&e.flags&rC};uy.declareName=function(e,t,n){var r=!1;if(t===xm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&rC&&delete this.undefinedExports[e]}else if(t===l3e){var s=this.currentScope();s.lexical.push(e)}else if(t===u3e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&o3e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&rC&&delete this.undefinedExports[e],u.flags&dQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};uy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};uy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};uy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&dQ)return t}};uy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&dQ&&!(t.flags&s3e))return t}};var xF=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new EF(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},FI=Vs.prototype;FI.startNode=function(){return new xF(this,this.start,this.startLoc)};FI.startNodeAt=function(e,t){return new xF(this,e,t)};function h3e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}FI.finishNode=function(e,t){return h3e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};FI.finishNodeAt=function(e,t,n,r){return h3e.call(this,e,t,n,r)};FI.copyNode=function(e){var t=new xF(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var p3e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",m3e=p3e+" Extended_Pictographic",g3e=m3e,y3e=g3e+" EBase EComp EMod EPres ExtPict",v3e=y3e,fMt=v3e,dMt={9:p3e,10:m3e,11:g3e,12:y3e,13:v3e,14:fMt},hMt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",pMt={9:"",10:"",11:"",12:"",13:"",14:hMt},ume="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",_3e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",b3e=_3e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",w3e=b3e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",E3e=w3e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",S3e=E3e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",mMt=S3e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",gMt={9:_3e,10:b3e,11:w3e,12:E3e,13:S3e,14:mMt},x3e={};function yMt(e){var t=x3e[e]={binary:Sg(dMt[e]+" "+ume),binaryOfStrings:Sg(pMt[e]),nonBinary:{General_Category:Sg(ume),Script:Sg(gMt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Sj=0,lme=[9,10,11,12,13,14];Sj<lme.length;Sj+=1){var vMt=lme[Sj];yMt(vMt)}var kt=Vs.prototype,wh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=x3e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};wh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};wh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};wh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};wh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};wh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};wh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};wh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};wh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};wh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};kt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};kt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};kt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};kt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};kt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};kt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};kt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};kt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};kt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};kt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};kt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};kt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};kt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};kt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};kt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};kt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};kt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return T3e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function T3e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}kt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!T3e(n);)e.advance();return e.pos!==t};kt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};kt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};kt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};kt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=x0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=x0(e.lastIntValue);return!0}return!1};kt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),_Mt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function _Mt(e){return em(e,!0)||e===36||e===95}kt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),bMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function bMt(e){return yE(e,!0)||e===36||e===95||e===8204||e===8205}kt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};kt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};kt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};kt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};kt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};kt.regexp_eatZero=function(e){return e.current()===48&&!TF(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};kt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};kt.regexp_eatControlLetter=function(e){var t=e.current();return A3e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function A3e(e){return e>=65&&e<=90||e>=97&&e<=122}kt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&wMt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function wMt(e){return e>=0&&e<=1114111}kt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};kt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var C3e=0,tm=1,ec=2;kt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(EMt(t))return e.lastIntValue=-1,e.advance(),tm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===ec&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return C3e};function EMt(e){return e===100||e===68||e===115||e===83||e===119||e===87}kt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),tm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return C3e};kt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){MI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};kt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return tm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return ec;e.raise("Invalid property name")};kt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";I3e(t=e.current());)e.lastStringValue+=x0(t),e.advance();return e.lastStringValue!==""};function I3e(e){return A3e(e)||e===95}kt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";SMt(t=e.current());)e.lastStringValue+=x0(t),e.advance();return e.lastStringValue!==""};function SMt(e){return I3e(e)||TF(e)}kt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};kt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ec&&e.raise("Negated character class may contain strings"),!0}return!1};kt.regexp_classContents=function(e){return e.current()===93?tm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),tm)};kt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};kt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||k3e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};kt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};kt.regexp_classSetExpression=function(e){var t=tm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===ec&&(t=ec);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==ec&&(t=tm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===ec&&(t=ec)}};kt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};kt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?tm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};kt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===ec&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};kt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};kt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ec&&(t=ec);return t};kt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?tm:ec};kt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&xMt(n)||TMt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function xMt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function TMt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}kt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return AMt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function AMt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}kt.regexp_eatClassControlLetter=function(e){var t=e.current();return TF(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};kt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};kt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;TF(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function TF(e){return e>=48&&e<=57}kt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;O3e(n=e.current());)e.lastIntValue=16*e.lastIntValue+P3e(n),e.advance();return e.pos!==t};function O3e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function P3e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}kt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};kt.regexp_eatOctalDigit=function(e){var t=e.current();return k3e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function k3e(e){return e>=48&&e<=55}kt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!O3e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+P3e(i),e.advance()}return!0};var gQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new EF(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Wn=Vs.prototype;Wn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new gQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Wn.getToken=function(){return this.next(),new gQ(this)};typeof Symbol<"u"&&(Wn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===X.eof,value:t}}}});Wn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(X.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Wn.readToken=function(e){return em(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Wn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Wn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=e3e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Wn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!CS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Wn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&t3e.test(String.fromCharCode(e)))++this.pos;else break e}}};Wn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Wn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(X.ellipsis)):(++this.pos,this.finishToken(X.dot))};Wn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(X.assign,2):this.finishOp(X.slash,1)};Wn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?X.star:X.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=X.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(X.assign,n+1):this.finishOp(r,n)};Wn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(X.assign,3)}return this.finishOp(e===124?X.logicalOR:X.logicalAND,2)}return t===61?this.finishOp(X.assign,2):this.finishOp(e===124?X.bitwiseOR:X.bitwiseAND,1)};Wn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(X.assign,2):this.finishOp(X.bitwiseXOR,1)};Wn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Oc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(X.incDec,2):t===61?this.finishOp(X.assign,2):this.finishOp(X.plusMin,1)};Wn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(X.assign,n+1):this.finishOp(X.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(X.relational,n))};Wn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(X.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(X.arrow)):this.finishOp(e===61?X.eq:X.prefix,1)};Wn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(X.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(X.assign,3)}return this.finishOp(X.coalesce,2)}}return this.finishOp(X.question,1)};Wn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),em(t,!0)||t===92))return this.finishToken(X.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+x0(t)+"'")};Wn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(X.parenL);case 41:return++this.pos,this.finishToken(X.parenR);case 59:return++this.pos,this.finishToken(X.semi);case 44:return++this.pos,this.finishToken(X.comma);case 91:return++this.pos,this.finishToken(X.bracketL);case 93:return++this.pos,this.finishToken(X.bracketR);case 123:return++this.pos,this.finishToken(X.braceL);case 125:return++this.pos,this.finishToken(X.braceR);case 58:return++this.pos,this.finishToken(X.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(X.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(X.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+x0(e)+"'")};Wn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Wn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Oc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new wh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(X.regexp,{pattern:i,flags:o,value:u})};Wn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function CMt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function $3e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Wn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=$3e(this.input.slice(t,this.pos)),++this.pos):em(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,n)};Wn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=$3e(this.input.slice(t,this.pos));return++this.pos,em(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),em(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=CMt(this.input.slice(t,this.pos),n);return this.finishToken(X.num,s)};Wn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Wn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(CS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(X.string,t)};var R3e={};Wn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===R3e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Wn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw R3e;this.raise(e,t)};Wn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===X.template||this.type===X.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(X.dollarBraceL)):(++this.pos,this.finishToken(X.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(X.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(CS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Wn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(X.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Wn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return x0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return CS(t)?"":String.fromCharCode(t)}};Wn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Wn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(yE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?em:yE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=x0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Wn.readWord=function(){var e=this.readWord1(),t=X.name;return this.keywords.test(e)&&(t=lQ[e]),this.finishToken(t,e)};var IMt="8.11.2";Vs.acorn={Parser:Vs,version:IMt,defaultOptions:qV,Position:nC,SourceLocation:EF,getLineInfo:r3e,Node:xF,TokenType:ur,tokTypes:X,keywordTypes:lQ,TokContext:jc,tokContexts:Pi,isIdentifierChar:yE,isIdentifierStart:em,Token:gQ,isNewLine:CS,lineBreak:Oc,lineBreakG:Z3t,nonASCIIwhitespace:t3e};function OMt(e,t){return Vs.parse(e,t)}const yQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},PMt={ecmaVersion:11},cme="$",kMt="d",$Mt="d1",RMt="d2",bo=e=>(t,n)=>n.error(t,e+" not allowed"),NMt=bo("Aggregate function"),DMt=bo("Window function"),MMt="Invalid argument",vQ="Invalid column reference",LMt=vQ+" (must be input to an aggregate function)",N3e="Invalid function call",FMt="Invalid member expression",BMt="Invalid operator parameter",jMt="Invalid param reference",UMt="Invalid variable reference",zMt="Variable not accessible in operator call",VMt="Unsupported variable declaration",HMt="Unsupported destructuring pattern",D3e="Table expressions do not support closures",M3e="Use aq.escape(fn) to use a function as-is (including closures)",qMt="use table.params({ name: value }) to define dynamic parameters",WMt="use aq.addFunction(name, fn) to add new op functions",GMt=`
Note: ${D3e}. ${M3e}, or ${qMt}.`,L3e=`
Note: ${D3e}. ${M3e}, or ${WMt}.`,YMt=`The ${GRe} method is not valid in multi-table expressions.`;function KMt(e,t){const n=XMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,V3t(r)?(JMt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=$Mt),e.scope.add(e.tuple2=RMt),e.scope.add(e.$param=cme)):(e.scope.add(e.tuple=kMt),e.scope.add(e.$param=cme)),or(r,e,_Q),e.root}function XMt(e){try{const t=e.field?QMt(e):gr(e)?eh(e):e;return OMt(`expr=(${t})`,PMt).body[0].expression.right}catch{In(`Expression parse error: ${e+""}`)}}function QMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const _Q={FunctionDeclaration:bo("Function definitions"),ForStatement:bo("For loops"),ForOfStatement:bo("For-of loops"),ForInStatement:bo("For-in loops"),WhileStatement:bo("While loops"),DoWhileStatement:bo("Do-while loops"),AwaitExpression:bo("Await expressions"),ArrowFunctionExpression:bo("Function definitions"),AssignmentExpression:bo("Assignments"),FunctionExpression:bo("Function definitions"),NewExpression:bo('Use of "new"'),UpdateExpression:bo("Update expressions"),VariableDeclarator(e,t){KV(e.id,t)},Identifier(e,t,n){j3e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,UMt,GMt)},CallExpression(e,t){const n=F3e(e.callee),r=HRe(n)||qRe(n);if(r){if((t.join||t.aggregate===!1)&&cX(n)&&NMt(e,t),(t.join||t.window===!1)&&fX(n)&&DMt(e,t),t.$op=1,t.ast)YV(e,n,t),e.arguments.forEach(i=>or(i,t,GV));else{const i=t.op(ZMt(t,r,n,e.arguments));Object.assign(e,{type:BRe,name:i.id})}return t.$op=0,!1}else VRe(n)?YV(e,n,t):t.error(e,N3e,L3e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Rs(Kg,r))return;const{name:s}=r;if(B3e(e)&&Rs(Kg,i)&&Sf(yQ,i.name)){V3e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return fme(e,o,t,U3e,n);if(s===t.$param)return fme(e,o,t,tLt);t.paramsRef.has(s)?iC(e,t.paramsRef.get(s)):t.columnRef.has(s)?z3e(r,s,t,e):Sf(t.params,s)&&iC(r,s)}};function fme(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Rs(ES,s))a=s.value;else try{or(s,n,_Q,e),a=n.param(s)}catch{n.error(e,FMt)}return r(e,a,t,n,i),!1}const GV={..._Q,VariableDeclarator:bo("Variable declaration in operator call"),Identifier(e,t,n){j3e(e,t,n)&&t.error(e,zMt)},CallExpression(e,t){const n=F3e(e.callee);VRe(n)?YV(e,n,t):t.error(e,N3e,L3e)}};function JMt(e,t){e.generator&&bo("Generator functions")(e,t),e.async&&bo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(Vx(t,n[0],"tuple1",i(1)),r>1&&Vx(t,n[1],"tuple2",i(2)),r>2&&Vx(t,n[2],"$param",s)):(Vx(t,n[0],"tuple",i(0)),r>1&&Vx(t,n[1],"$param",s))),t.root=e.body}function Vx(e,t,n,r){Rs(Kg,t)?(e.scope.add(t.name),e[n]=t.name):Rs(LRe,t)&&t.properties.forEach(i=>{const s=Rs(Kg,i.key)?i.key.name:Rs(ES,i.key)?i.key.value:e.error(i,MMt);Rs(Kg,i.value)||e.error(i.value,HMt),r(i.value.name,s)})}function ZMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(or(u,e,GV),i.push(e.field(u))):l<a?(or(u,e,GV),s.push(e.param(u))):e.error(u,BMt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function F3e(e){return Rs(Kg,e)?e.name:Rs(MRe,e)?B3e(e)?eLt(e.property.name):e.property.name:null}function B3e(e){return Rs(Kg,e.object)&&e.object.name==="Math"}function eLt(e){return e==="max"?"greatest":e==="min"?"least":e}function j3e(e,t,n){const{name:r}=e;if(!(Rs(MRe,n)&&n.property===e)){if(!(Rs(FRe,n)&&n.key===e))if(t.paramsRef.has(r))iC(e,t.paramsRef.get(r));else if(t.columnRef.has(r))z3e(e,r,t,n);else if(Sf(t.params,r))iC(e,r);else if(Sf(yQ,r))V3e(e,r);else return!0}}function U3e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,vQ),r.aggronly&&!r.$op&&r.error(e,LMt),WRe(e,t,n,o,i)}function z3e(e,t,n,r){const[i,s]=n.columnRef.get(t);U3e(e,i,s,n,r)}function tLt(e,t,n,r){r.params&&!Sf(r.params,t)&&r.error(e,jMt),iC(e,t)}function iC(e,t){e.type=W$t,e.name=t}function V3e(e,t){e.type=V$t,e.name=t,e.raw=yQ[t]}function YV(e,t,n){if(t===GRe){const r=n.table;r||n.error(e,YMt),YRe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ya(s)?r.columnName(s):s;return r.column(o)||n.error(i,vQ),o}):r.columnNames())}else e.callee={type:q$t,name:t}}function KV(e,t){Rs(Kg,e)?t.scope.add(e.name):Rs(B$t,e)?e.elements.forEach(n=>KV(n,t)):Rs(LRe,e)?e.properties.forEach(n=>KV(n.value,t)):t.error(e.id,VMt)}const nLt={[kI]:1,[BRe]:1};function Mu(e,t={}){const n=t.generate||P3,r=t.compiler||dX,i=iLt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=rLt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Rs(ES,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?z3t(g):f(n(g),i));u.push(y),nLt[g.type]&&y!==g&&_a(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(d.spec).slice(v,_);In(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of uF(e))d.value(m+"",g.escape?W3t(d,g,i):KMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function rLt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function iLt(e){return(e.table?xj(e.table):e.join?{...xj(e.join[1]),...xj(e.join[0])}:{})||{}}function xj(e){return e&&bi(e.params)?e.params():{}}const H3e="Expr",Uc="ExprList",q3e="ExprNumber",RT="ExprObject",zb="JoinKeys",Q3="JoinValues",Hl="Options",bQ="OrderKeys",Ym="SelectionList",lv="TableRef",Vb="TableRefList",sLt="Descending",oLt="Query",aLt="Selection",uLt="Verb",lLt="Window";function AF(e,t){return e&&e.expr?new dme({...e,...t}):new dme(t,e)}class dme{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...bi(this.expr)?{func:!0}:{}}}}function cLt(e){return AF(e,{desc:!0})}function _1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return AF(e,t?{expr:t,...r}:r)}function fLt(e,t,n){return AF(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function dLt(e){const t=n=>n;return t.toString=()=>e,t}function hme(e,t){return t=t&&bi(t.query)?t.query():t,t&&bi(t.evaluate)?t.evaluate(null,e):e(t)}function W3e(e){return _a(e)&&(gr(e.all)||gr(e.matches)||gr(e.not)||gr(e.range))}function sC(e){return e&&bi(e.toObject)?e.toObject():bi(e)?{expr:String(e),func:!0}:gr(e)?e.map(sC):_a(e)?bF(e,t=>sC(t)):e}function wQ(e){return gr(e)?e.map(wQ):_a(e)?gr(e.verbs)?SQ.from(e):gr(e.all)?gE():gr(e.range)?L3t(...e.range):gr(e.match)?F3t(RegExp(...e.match)):gr(e.not)?XDe(e.not.map(sC)):hLt(e):e}function hLt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=_1(n):e.func===!0&&(t=n=dLt(n)),_a(e.window)){const{frame:r,peers:i}=e.window;t=n=fLt(n,r,i)}e.desc===!0&&(t=cLt(n))}return e===t?bF(e,r=>wQ(r)):t}function pLt(e){return gr(e)?e.map(mLt):e}function mLt(e){const t=[];return Nu(e).forEach(n=>{Ya(n)?t.push(n):Lo(n)?t.push(_1(n,null)):_a(n)&&n.expr||bi(n)?t.push(n):In(`Invalid key value: ${n+""}`)}),t}function gLt(e){return gr(e)?e.map(yLt):e}function yLt(e,t){return t<2?Nu(e):e}function vLt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(_a(r)&&!bi(r))for(const i in r)t.push(r[i]);else n=Ya(r)?r:Lo(r)?_1(n):bi(r)?n:In(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const _Lt={[H3e]:X3e,[Uc]:vE,[q3e]:TLt,[RT]:T0,[zb]:ALt,[Q3]:CLt,[bQ]:vE,[Ym]:SLt};function bLt(e,t,n){return t===lv?pme(e):t===Vb?e.map(pme):G3e(sC(e),t,n)}function G3e(e,t,n){return t===Hl?e&&wLt(e,n):_Lt[t](e)}function wLt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?G3e(i,t[r]):i}return n}function ELt(e,t){return Mu({expr:e},{...t,ast:!0}).exprs[0]}function EQ(e){return{type:kI,name:e}}function Y3e(e){return{type:kI,index:e}}function T0(e,t){if(Lo(e))return ELt(e,t);if(e.expr){let n;if(e.field===!0?n=EQ(e.expr):e.func===!0&&(n=T0(e.expr,t)),n)return e.desc&&(n={type:sLt,expr:n}),e.window&&(n={type:lLt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...T0(e[n],t),as:n}))}function K3e(e){const t=aLt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:vE(e.not)}:e.range?{type:t,operator:"range",arguments:vE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:In("Invalid input")}function SLt(e){return Nu(e).map(xLt).flat()}function xLt(e){return W3e(e)?K3e(e):Ya(e)?Y3e(e):Lo(e)?EQ(e):_a(e)?Object.keys(e).map(t=>({type:kI,name:t,as:e[t]})):In("Invalid input")}function X3e(e){return W3e(e)?K3e(e):Ya(e)?Y3e(e):Lo(e)?EQ(e):_a(e)?T0(e):In("Invalid input")}function vE(e){return Nu(e).map(X3e).flat()}function TLt(e){return Ya(e)?e:T0(e)}function ALt(e){return gr(e)?e.map(vE):T0(e,{join:!0})}function CLt(e){return gr(e)?e.map((t,n)=>n<2?vE(t):T0(t,{join:!0})):T0(e,{join:!0})}function pme(e){return e&&bi(e.toAST)?e.toAST():e}class Q3e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===zb?pLt(a):o===Q3?gLt(a):o===bQ?vLt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=XV[t.verb],r=(n.schema||[]).map(({name:i})=>wQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===lv?hme(n,o):s===Vb?o.map(a=>hme(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=sC(this[n])}),t}toAST(){const t={type:uLt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=bLt(this[n],r,i)}),t}}function zr(e,t){return Object.assign((...n)=>new Q3e(e,t,n),{schema:t})}const XV={count:zr("count",[{name:"options",type:Hl}]),derive:zr("derive",[{name:"values",type:RT},{name:"options",type:Hl,props:{before:Ym,after:Ym}}]),filter:zr("filter",[{name:"criteria",type:RT}]),groupby:zr("groupby",[{name:"keys",type:Uc}]),orderby:zr("orderby",[{name:"keys",type:bQ}]),relocate:zr("relocate",[{name:"columns",type:Ym},{name:"options",type:Hl,props:{before:Ym,after:Ym}}]),rename:zr("rename",[{name:"columns",type:Ym}]),rollup:zr("rollup",[{name:"values",type:RT}]),sample:zr("sample",[{name:"size",type:q3e},{name:"options",type:Hl,props:{weight:H3e}}]),select:zr("select",[{name:"columns",type:Ym}]),ungroup:zr("ungroup"),unorder:zr("unorder"),reify:zr("reify"),dedupe:zr("dedupe",[{name:"keys",type:Uc,default:[]}]),impute:zr("impute",[{name:"values",type:RT},{name:"options",type:Hl,props:{expand:Uc}}]),fold:zr("fold",[{name:"values",type:Uc},{name:"options",type:Hl}]),pivot:zr("pivot",[{name:"keys",type:Uc},{name:"values",type:Uc},{name:"options",type:Hl}]),spread:zr("spread",[{name:"values",type:Uc},{name:"options",type:Hl}]),unroll:zr("unroll",[{name:"values",type:Uc},{name:"options",type:Hl,props:{drop:Uc}}]),lookup:zr("lookup",[{name:"table",type:lv},{name:"on",type:zb},{name:"values",type:Uc}]),join:zr("join",[{name:"table",type:lv},{name:"on",type:zb},{name:"values",type:Q3},{name:"options",type:Hl}]),cross:zr("cross",[{name:"table",type:lv},{name:"values",type:Q3},{name:"options",type:Hl}]),semijoin:zr("semijoin",[{name:"table",type:lv},{name:"on",type:zb}]),antijoin:zr("antijoin",[{name:"table",type:lv},{name:"on",type:zb}]),concat:zr("concat",[{name:"tables",type:Vb}]),union:zr("union",[{name:"tables",type:Vb}]),intersect:zr("intersect",[{name:"tables",type:Vb}]),except:zr("except",[{name:"tables",type:Vb}])};let SQ=class J3e extends SRe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new J3e(t.map(Q3e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return mme(this,"toObject")}toJSON(){return this.toObject()}toAST(){return mme(this,"toAST",{type:oLt})}};function mme(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function ILt(e,t){return new SQ(e._verbs.concat(t),e._params,e._table)}for(const e in XV){const t=XV[e];SQ.prototype["__"+e]=function(n,...r){return ILt(n,t(...r))}}function PS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function OLt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function xQ(e,t){const n=Nl();return t.forEach((r,i)=>{const s=Lo(r)?r:i;if(s){const o=e.column(i)||In(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function Z3e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||In("relocate requires a before or after option."),i&&s&&In("relocate accepts only one of the before or after options."),t=Zp(e,t);const o=[...Zp(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),xQ(e,u)}function BI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function TQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function PLt(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function kLt(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function ok(e){return XA(e)?e:+e}function $Lt(e,t){const n=e.length;if(!n)return lr;if((t=+t)<=0||n<2)return ok(e[0]);if(t>=1)return ok(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=ok(e[i]);return XA(s)?s:s+(ok(e[i+1])-s)*(r-i)}class RLt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:PLt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:kLt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(TQ)),$Lt(this._sorted,t)}}const J3=(e,t,n)=>PS(t,"{"+BI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function NLt(e,t){const{ops:n,output:r}=DLt(e,t),i=e[0].fields,s=i.length,o=s===0?AQ:s===1?MLt:s===2?LLt:In("Unsupported field count: "+s);return new o(i,n,r,t)}function DLt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=HRe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class AQ extends j3t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new RLt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class MLt extends AQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=J3(n,s,"add"),this._rem=J3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,uf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,uf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class LLt extends AQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=J3(n,s,"add"),this._rem=J3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,uf(i)&&uf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,uf(i)&&uf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function d_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=kS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function kS(e,t,n){if(!t.length)return n;const r=eMe(t),i=e.groups(),s=i?i.size:1;return n=n||oF(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=nMe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=tMe(e,o);o.write(a,n,0)}),n}function eMe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(NLt(r[i],t));return n}function tMe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function nMe(e,t,n){const{keys:r,size:i}=n,s=oF(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function rMe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function iMe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const gme=iMe(TQ);function FLt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?PS(["w","r","k"],"{"+BI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=gme.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=gme.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const E=i[x],b=a[x];for(let T=_;T<p.i0;++T)E.rem(b,s[T],e);for(let T=w;T<p.i1;++T)E.add(b,s[T],e);E.write(b,u,l)}return h(p,u,l),u}};return p}const BLt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),jLt=e=>!!e.peers;function ULt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=qRe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function zLt(e,t,n,r={},i){const s=e.data(),o=VLt(i,s),a=o.length,u=PS(["r","d","op"],"{"+BI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=HLt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function VLt(e,t){const n={};return e.forEach(r=>{const i=BLt(r),s=jLt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});cX(r.name)?a.push(r):u.push(ULt(r))}),Object.values(n).map(r=>FLt(t,r.frame,r.peers,r.winOps,eMe(r.aggOps,r.frame[0]!=null?-1:1)))}function HLt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function qLt(e){return fX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function CQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Nl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=WLt(r),c=e.isGrouped()?e.groups().size:1,f=kS(e,u,oF(r.length,()=>Array(c)));return l.length?zLt(e,a,n,f,l):GLt(e,a,n,f),e.create(o)}function WLt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(qLt(s)?n:t).push(s)}return[t,n]}function GLt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function YLt(e,t,n={}){const r=CQ(e,Mu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:Z3e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function KLt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const ak=2147483648,XLt=4294967295;class sMe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&ak>>>t}set(t){this._bits[t>>5]|=ak>>>t}clear(t){this._bits[t>>5]&=~(ak>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&XLt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=ak>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function QLt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new sMe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function JLt(e,t){const n=Mu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=CQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return QLt(e,r)}function oMe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=d_(e,r,n),l=Nl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const x=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(x))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,x)=>{for(let E=0;E<g;++E)d[E].length=m+x,d[E].fill(f[E].get(w),m,m+x)},_=p?(w,x)=>{for(let E=0;E<x;++E)p[w+E]=E}:()=>{};if(y===1){const w=u[0],x=h[0];e.scan((E,b)=>{const T=Nu(w(E,b)),C=Math.min(T.length,s);v(E,C);for(let A=0;A<C;++A)x[m+A]=T[A];_(m,C),m+=C})}else e.scan((w,x)=>{let E=0;const b=u.map(T=>{const C=Nu(T(w,x));return E=Math.min(Math.max(E,C.length),s),C});v(w,E);for(let T=0;T<y;++T){const C=h[T],A=b[T];for(let O=0;O<E;++O)C[m+O]=A[O]}_(m,E),m+=E});return e.create(l.new())}function ZLt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=d_(e,r,n);return oMe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function xf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ya(o)?t.columnName(o):o,Lo(o)?i.set(o,_1(o)):bi(o)?Zp(t,o).forEach(s):_a(o)?YDe(i,o):In(`Invalid ${e} value: ${o+""}`)};return Nu(n).forEach(s),r.preparse&&r.preparse(i),Mu(i,{table:t,...r})}function e6t(e,t,n){return ZLt(e,xf("fold",e,t),n)}function yme(e,t,n,r){const i=n&&n.length;return t6t(i?n6t(e,n,r):e,t,i)}function t6t(e,{names:t,exprs:n,ops:r},i){const s=d_(e,r,n),o=i?null:Nl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=uf(p)?p:d(h)})}),i?e:e.create(o)}function n6t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=k3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Nl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=k3(o.map((p,m)=>g=>g[m])),h=PS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),vme(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else vme(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function vme(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function IQ(e,{names:t,exprs:n,ops:r}){const i=Nl(),s=e.groups();return s&&rMe(i,s),r6t(t,n,s,kS(e,r),i),e.create(i.new())}function r6t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function i6t(e,t,n={}){if(t=Mu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:In(`Invalid impute column ${eh(r)}`)),n.expand){const r={preparse:s6t,aggronly:!0},i=xf("impute",e,n.expand,r),s=IQ(e.ungroup(),i);return yme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return yme(e,t)}function s6t(e){e.forEach((t,n)=>t.field?e.set(n,$Re(t+"")):0)}function o6t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function aMe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function a6t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function u6t(e,t){const n=["i","a","j","b"];return PS(n,"{"+BI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function l6t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Nl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=u6t(g,y);if((gr(n)?f6t:c6t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function c6t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function f6t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(E,b,T,C)=>e(T,C,E,b));const w=a6t(v,m,g),x=p.length;for(let E=0;E<x;++E){const b=p[E],T=w.get(d(b,f));if(T){const C=T.length;for(let A=0;A<C;++A){const O=T[A];_(b,f,v[O],m),y[O]=1}h[E]=1}}}function Z3(e,t,n){const r=new Map;Nu(n).forEach((s,o)=>{s=Ya(s)?t.columnName(s):s,Lo(s)?r.set(o,_1(s)):bi(s)||_a(s)&&s.expr?r.set(o,s):In(`Invalid ${e} key value: ${s+""}`)});const i=Mu(r,{table:t,aggregate:!1,window:!1});return k3(i.exprs,!0)}function d6t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function OQ(e,t,n){if(n)Lo(n)?n=[n,n]:gr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=d6t(e.columnNames(),t.columnNames());r.length||In("Natural join requires shared column names."),n=[r,r]}return n}function uMe(e,t,n,r){return n.length!==r.length&&In("Mismatched number of join keys"),[Z3("join",e,n),Z3("join",t,r)]}const h6t={aggregate:!1,window:!1},p6t={...h6t,index:1};function _me(e,t,n,r,i={}){n=OQ(e,t,n);const s={join:[e,t]};let o;if(gr(n)){const[a,u]=n.map(Nu);o=uMe(e,t,a,u),r||(r=m6t(e,a,u,i))}else o=Mu({on:n},s).exprs[0],r||(r=[gE(),gE()]);return l6t(e,t,o,g6t(e,t,r,s,i&&i.suffix),i)}function m6t(e,t,n,r){const i=[];t.forEach((o,a)=>Lo(o)&&o===n[a]?i.push(o):0);const s=XDe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${eh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,gE()]:[gE(),s]}function g6t(e,t,n,r,i=[]){if(gr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=xf("join",e,n[0],r)),u--&&(o=xf("join",t,n[1],p6t)),u--&&(a=Mu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(bme(s.names,l,i[0]||"_1"),bme(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Mu(n,r)}function bme(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function y6t(e,t,n,r={}){const i=new sMe(e.totalRows());return(gr(n)?v6t:_6t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function v6t(e,t,n,[r,i]){const s=aMe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function _6t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function wme(e,t,n,r){n=OQ(e,t,n);const i=gr(n)?uMe(e,t,...n.map(Nu)):Mu({on:n},{join:[e,t]}).exprs[0];return y6t(e,t,i,r)}function b6t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Nl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(lr)));const l=aMe(t,r),c=PS(["lr","rr","data"],"{"+BI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),d_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function w6t(e,t,n,r){return n=OQ(e,t,n),b6t(e,t,[Z3("lookup",e,n[0]),Z3("lookup",t,n[1])],xf("lookup",t,r))}const QV=(e,t)=>e??t;function E6t(e,t,n,r={}){const{keys:i,keyColumn:s}=S6t(e,t,r),o=QV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>kS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(x6t(n,a,e.groups(),u))}function S6t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=QV(n.sort,!0),s=QV(n.keySeparator,"_"),o=d_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=kS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function x6t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Nl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&rMe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function T6t(e,t,n,r){return E6t(e,xf("fold",e,t),xf("fold",e,n,{preparse:A6t,aggronly:!0}),r)}function A6t(e){e.forEach((t,n)=>t.field?e.set(n,ORe(t+"")):0)}function C6t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),xQ(e,Zp(e,t,n))}function Eme(e,t){return IQ(e,Mu(t,{table:e,aggronly:!0,window:!1}))}function I6t(e,t,n,r){return(t?r?P6t:O6t:r?$6t:k6t)(e.length,e,n,r)}function O6t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*wS()|0];return t}function P6t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=iMe(TQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*wS())];return t}function k6t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*wS();s<e&&(t[s|0]=n[i])}return t}function $6t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(wS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function R6t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=wS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function N6t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):I6t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&R6t(u),e.reify(u)}function D6t(e,t,n={}){return N6t(e,M6t(e,t),L6t(e,n.weight),n)}const lMe=e=>t=>e.get(t)||0;function M6t(e,t){return Ya(t)?()=>t:lMe(IQ(e,Mu({size:t},{table:e,window:!1})).column("size"))}function L6t(e,t){return t==null?null:(t=Ya(t)?e.columnName(t):t,lMe(Lo(t)?e.column(t):CQ(e,Mu({w:t},{table:e}),{drop:!0}).column("w")))}function F6t(e,t){return xQ(e,Zp(e,t))}function B6t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=d_(e,r,n),l=Nl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=j6t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function j6t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Nu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(lr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function U6t(e,t,n){return B6t(e,xf("spread",e,t),n)}function z6t(e,t){return e.concat(t).dedupe()}function V6t(e,t,n){return oMe(e,xf("unroll",e,t),n&&n.drop?{...n,drop:xf("unroll",e,n.drop).names}:n)}function H6t(e,t){return e.create({groups:q6t(e,t)})}function q6t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=d_(e,r,n);const o=k3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function W6t(e,t){return H6t(e,xf("groupby",e,t))}function G6t(e,t){return e.create({order:t})}const Y6t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function K6t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Mu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([P3(p,{index:"a",op:o}),P3(p,{index:"b",op:a})])},window:!1}),l=kS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Y6t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function X6t(e,t){return G6t(e,Q6t(e,t))}function Q6t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(_a(o)&&!bi(o))for(const a in o)i(o[a]);else i(Ya(o)?_1(s,e.columnName(o)):Lo(o)?_1(s):bi(o)?s:In(`Invalid orderby field: ${s+""}`))}),K6t(e,r)}function J6t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Nl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>lr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Z6t(e,t){const n=Nl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?nMe(e,t,r):[tMe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function e4t(e){return e.isGrouped()?e.create({groups:null}):e}function t4t(e){return e.isOrdered()?e.create({order:null}):e}const n4t={__antijoin:(e,t,n)=>wme(e,t,n,{anti:!0}),__count:(e,t={})=>Eme(e,{[t.as||"count"]:PRe()}),__cross:(e,t,n,r)=>_me(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:J6t,__dedupe:OLt,__derive:YLt,__except:KLt,__filter:JLt,__fold:e6t,__impute:i6t,__intersect:o6t,__join:_me,__lookup:w6t,__pivot:T6t,__relocate:Z3e,__rename:C6t,__rollup:Eme,__sample:D6t,__select:F6t,__semijoin:wme,__spread:U6t,__union:z6t,__unroll:V6t,__groupby:W6t,__orderby:X6t,__ungroup:e4t,__unorder:t4t,__reduce:Z6t};Object.assign(ap.prototype,n4t);function r4t(e,t){return ap.from(e,t)}function Tj(e){return AF(e,{escape:!0,toString(){In("Escaped values can not be serialized.")}})}ap.prototype;function i4t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let uk;const s4t=new Uint8Array(16);function o4t(){if(!uk&&(uk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uk(s4t)}const go=[];for(let e=0;e<256;++e)go.push((e+256).toString(16).slice(1));function a4t(e,t=0){return(go[e[t+0]]+go[e[t+1]]+go[e[t+2]]+go[e[t+3]]+"-"+go[e[t+4]]+go[e[t+5]]+"-"+go[e[t+6]]+go[e[t+7]]+"-"+go[e[t+8]]+go[e[t+9]]+"-"+go[e[t+10]]+go[e[t+11]]+go[e[t+12]]+go[e[t+13]]+go[e[t+14]]+go[e[t+15]]).toLowerCase()}const u4t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sme={randomUUID:u4t};function xme(e,t,n){if(Sme.randomUUID&&!t&&!e)return Sme.randomUUID();e=e||{};const r=e.random||(e.rng||o4t)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return a4t(r)}class Fd{static get(){let t=xme();for(;this.ids.has(t);)t=xme();return this.ids.set(t,!0),t}}Fd.ids=new Map;function Bd(e){return"parent"in e}function l4t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Fd.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Fd.get(),createdOn:Date.now(),val:r}]:[];return{id:Fd.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function c4t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Fd.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Fd.get(),createdOn:Date.now(),val:s}]:[];return{id:Fd.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=_4t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function b1(e){return!!e&&!!e[Sl]}function A0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===b4t}(e)||Array.isArray(e)||!!e[N2]||!!(!((t=e.constructor)===null||t===void 0)&&t[N2])||CF(e)||IF(e))}function _E(e,t,n){n===void 0&&(n=!1),C0(e)===0?(n?Object.keys:DQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function C0(e){var t=e[Sl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:CF(e)?2:IF(e)?3:0}function oC(e,t){return C0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function z$(e,t){return C0(e)===2?e.get(t):e[t]}function cMe(e,t,n){var r=C0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function f4t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function CF(e){return y4t&&e instanceof Map}function IF(e){return v4t&&e instanceof Set}function Zy(e){return e.o||e.t}function PQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=w4t(e);delete t[Sl];for(var n=DQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kQ(e,t){return t===void 0&&(t=!1),$Q(e)||b1(e)||!A0(e)||(C0(e)>1&&(e.set=e.add=e.clear=e.delete=d4t),Object.freeze(e),t&&_E(e,function(n,r){return kQ(r,!0)},!0)),e}function d4t(){Ki(2)}function $Q(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jd(e){var t=tH[e];return t||Ki(18,e),t}function h4t(e,t){tH[e]||(tH[e]=t)}function Tme(){return{}.NODE_ENV==="production"||bE||Ki(0),bE}function Aj(e,t){t&&(jd("Patches"),e.u=[],e.s=[],e.v=t)}function eM(e){JV(e),e.p.forEach(p4t),e.p=null}function JV(e){e===bE&&(bE=e.l)}function Ame(e){return bE={p:[],l:bE,h:e,m:!0,_:0}}function p4t(e){var t=e[Sl];t.i===0||t.i===1?t.j():t.O=!0}function Cj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||jd("ES5").S(t,e,r),r?(n[Sl].P&&(eM(t),Ki(4)),A0(e)&&(e=tM(t,e),t.l||nM(t,e)),t.u&&jd("Patches").M(n[Sl].t,e,t.u,t.s)):e=tM(t,n,[]),eM(t),t.u&&t.v(t.u,t.s),e!==NQ?e:void 0}function tM(e,t,n){if($Q(t))return t;var r=t[Sl];if(!r)return _E(t,function(s,o){return Cme(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return nM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=PQ(r.k):r.o;_E(r.i===3?new Set(i):i,function(s,o){return Cme(e,r,i,s,o,n)}),nM(e,i,!1),n&&e.u&&jd("Patches").R(r,n,e.u,e.s)}return r.o}function Cme(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ki(5),b1(i)){var o=tM(e,i,s&&t&&t.i!==3&&!oC(t.D,r)?s.concat(r):void 0);if(cMe(n,r,o),!b1(o))return;e.m=!1}if(A0(i)&&!$Q(i)){if(!e.h.F&&e._<1)return;tM(e,i),t&&t.A.l||nM(e,i)}}function nM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&kQ(t,n)}function Ij(e,t){var n=e[Sl];return(n?Zy(n):e)[t]}function Ime(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ZV(e){e.P||(e.P=!0,e.l&&ZV(e.l))}function Oj(e){e.o||(e.o=PQ(e.t))}function eH(e,t,n){var r=CF(t)?jd("MapSet").N(t,n):IF(t)?jd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Tme(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=nH;o&&(u=[a],l=NT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):jd("ES5").J(t,n);return(n?n.A:Tme()).p.push(r),r}function m4t(e){return b1(e)||Ki(22,e),function t(n){if(!A0(n))return n;var r,i=n[Sl],s=C0(n);if(i){if(!i.P&&(i.i<4||!jd("ES5").K(i)))return i.t;i.I=!0,r=Ome(n,s),i.I=!1}else r=Ome(n,s);return _E(r,function(o,a){i&&z$(i.t,o)===a||cMe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ome(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return PQ(e)}function g4t(){function e(r){if(!A0(r))return r;if(Array.isArray(r))return r.map(e);if(CF(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(IF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return oC(r,N2)&&(i[N2]=r[N2]),i}function t(r){return b1(r)?e(r):r}var n="add";h4t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=C0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ki(24),typeof u=="function"&&f==="prototype"&&Ki(24),typeof(u=z$(u,f))!="object"&&Ki(15,o.join("/"))}var d=C0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;_E(a.D,function(h,p){var m=z$(f,h),g=z$(d,h),y=p?oC(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===NQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Pme,bE,RQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",y4t=typeof Map<"u",v4t=typeof Set<"u",kme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",NQ=RQ?Symbol.for("immer-nothing"):((Pme={})["immer-nothing"]=!0,Pme),N2=RQ?Symbol.for("immer-draftable"):"__$immer_draftable",Sl=RQ?Symbol.for("immer-state"):"__$immer_state",_4t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},b4t=""+Object.prototype.constructor,DQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,w4t=Object.getOwnPropertyDescriptors||function(e){var t={};return DQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},tH={},nH={get:function(e,t){if(t===Sl)return e;var n=Zy(e);if(!oC(n,t))return function(i,s,o){var a,u=Ime(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!A0(r)?r:r===Ij(e.t,t)?(Oj(e),e.o[t]=eH(e.A.h,r,e)):r},has:function(e,t){return t in Zy(e)},ownKeys:function(e){return Reflect.ownKeys(Zy(e))},set:function(e,t,n){var r=Ime(Zy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Ij(Zy(e),t),s=i==null?void 0:i[Sl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(f4t(n,i)&&(n!==void 0||oC(e.t,t)))return!0;Oj(e),ZV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Ij(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Oj(e),ZV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Zy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ki(12)}},NT={};_E(nH,function(e,t){NT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),NT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ki(13),NT.set.call(this,e,t,void 0)},NT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ki(14),nH.set.call(this,e[0],t,n,e[0])};var E4t=function(){function e(n){var r=this;this.g=kme,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Ki(6),o!==void 0&&typeof o!="function"&&Ki(7),A0(i)){var c=Ame(r),f=eH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?eM(c):JV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Aj(c,o),Cj(m,c)},function(m){throw eM(c),m}):(Aj(c,o),Cj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===NQ&&(l=void 0),r.F&&kQ(l,!0),o){var h=[],p=[];jd("Patches").M(i,l,h,p),o(h,p)}return l}Ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){A0(n)||Ki(8),b1(n)&&(n=m4t(n));var r=Ame(this),i=eH(this,n,void 0);return i[Sl].C=!0,JV(r),i},t.finishDraft=function(n,r){var i=n&&n[Sl];({}).NODE_ENV!=="production"&&(i&&i.C||Ki(9),i.I&&Ki(10));var s=i.A;return Aj(s,r),Cj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!kme&&Ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jd("Patches").$;return b1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),xl=new E4t,S4t=xl.produce;xl.produceWithPatches.bind(xl);xl.setAutoFreeze.bind(xl);xl.setUseProxies.bind(xl);xl.applyPatches.bind(xl);xl.createDraft.bind(xl);xl.finishDraft.bind(xl);function x4t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=l4t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return eke({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Fd.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Fd.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function T4t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=x4t(e),s=RSt();s.startListening({matcher:Bde(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Bde(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=JPe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Fd.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var A4t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C4t=Object.prototype.hasOwnProperty;function rH(e,t){return C4t.call(e,t)}function iH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)rH(e,i)&&r.push(i);return r}function Au(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function ev(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fMe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oH(e[t]))return!0}else if(typeof e=="object"){for(var r=iH(e),i=r.length,s=0;s<i;s++)if(oH(e[r[s]]))return!0}}return!1}function $me(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dMe=function(e){A4t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,$me(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=$me(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Hi=dMe,I4t=Au,Hb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=rM(n,this.path);r&&(r=Au(r));var i=Gv(n,{op:"remove",path:this.from}).removed;return Gv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=rM(n,this.from);return Gv(n,{op:"add",path:this.path,value:Au(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:aC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},O4t={add:function(e,t,n){return sH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Hb.move,copy:Hb.copy,test:Hb.test,_get:Hb._get};function rM(e,t){if(t=="")return e;var n={op:"_get",path:t};return Gv(e,n),n.value}function Gv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):iM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=rM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=aC(e,t.value),o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Hi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Au(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=iM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fMe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!sH(h))throw new Hi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);sH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Hi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=O4t[t.op].call(t,l,h,e);if(o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Hb[t.op].call(t,l,h,e);if(o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Hi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function OF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Hi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Au(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Gv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function P4t(e,t,n){var r=Gv(e,t);if(r.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function iM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Hi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Hb[e.op]){if(typeof e.path!="string")throw new Hi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Hi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Hi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Hi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oH(e.value))throw new Hi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Hi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Hi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hMe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Hi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Hi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hMe(e,t,n){try{if(!Array.isArray(e))throw new Hi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)OF(Au(t),Au(e),n||!0);else{n=n||iM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Hi)return i;throw i}}function aC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!aC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!aC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const k4t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Hi,_areEquals:aC,applyOperation:Gv,applyPatch:OF,applyReducer:P4t,deepClone:I4t,getValueByPointer:rM,validate:hMe,validator:iM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var MQ=new WeakMap,$4t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),R4t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function N4t(e){return MQ.get(e)}function D4t(e,t){return e.observers.get(t)}function M4t(e,t){e.observers.delete(t.callback)}function L4t(e,t){t.unobserve()}function F4t(e,t){var n=[],r,i=N4t(e);if(!i)i=new $4t(e),MQ.set(e,i);else{var s=D4t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Au(e),t){r.callback=t,r.next=null;var o=function(){aH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){aH(r),clearTimeout(r.next),M4t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new R4t(t,r)),r}function aH(e,t){t===void 0&&(t=!1);var n=MQ.get(e.object);LQ(n.value,e.object,e.patches,"",t),e.patches.length&&OF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function LQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=iH(t),o=iH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(rH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?LQ(c,f,n,r+"/"+ev(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+ev(l),value:Au(c)}),n.push({op:"replace",path:r+"/"+ev(l),value:Au(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+ev(l),value:Au(c)}),n.push({op:"remove",path:r+"/"+ev(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!rH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+ev(l),value:Au(t[l])})}}}function pMe(e,t,n){n===void 0&&(n=!1);var r=[];return LQ(e,t,r,"",n),r}const B4t=Object.freeze(Object.defineProperty({__proto__:null,compare:pMe,generate:aH,observe:F4t,unobserve:L4t},Symbol.toStringTag,{value:"Module"}));Object.assign({},k4t,B4t,{JsonPatchError:dMe,deepClone:Au,escapePathComponent:ev,unescapePathComponent:fMe});var DT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(DT||{});function V$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=gMe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=V$(i,t);return OF(a,Au(o),!0,!1).newDocument}function j4t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function mMe({registry:e,initialState:t}){let n=!1;const r=i4t(),i=T4t(t);function s(c){return i.backend.nodes[c]}r.listen(DT.TRAVERSAL_START,()=>{n=!0}),r.listen(DT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return V$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=V$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=pMe(y,f);if(j4t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=c4t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=V$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(DT.TRAVERSAL_START);const f=gMe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);z4t(p,m)?Bd(p)&&d.push(...p.sideEffects.undo):Bd(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(DT.TRAVERSAL_END)},undo(){const{current:c}=i;return Bd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return yMe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function U4t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Bd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Bd(r)&&(r=n[r.parent]),Bd(i)&&(i=n[i.parent]);return r.id}function gMe(e,t,n){const r=U4t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Bd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Bd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function z4t(e,t){if(Bd(e)&&e.parent===t.id)return!0;if(Bd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function yMe(e,t){return{...e,children:e.children.map(n=>yMe(t[n],t)),name:`${e.label}`}}g4t();function V4t(e){return e.length===2?S4t(e):e}class PF{static create(){return new PF}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:V4t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Dd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var H4t="Expected a function",Rme=NaN,q4t="[object Symbol]",W4t=/^\s+|\s+$/g,G4t=/^[-+]0x[0-9a-f]+$/i,Y4t=/^0b[01]+$/i,K4t=/^0o[0-7]+$/i,X4t=parseInt,Q4t=typeof Eu=="object"&&Eu&&Eu.Object===Object&&Eu,J4t=typeof self=="object"&&self&&self.Object===Object&&self,Z4t=Q4t||J4t||Function("return this")(),eFt=Object.prototype,tFt=eFt.toString,nFt=Math.max,rFt=Math.min,Pj=function(){return Z4t.Date.now()};function iFt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(H4t);t=Nme(t)||0,uH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?nFt(Nme(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(E){var b=r,T=i;return r=i=void 0,l=E,o=e.apply(T,b),o}function p(E){return l=E,a=setTimeout(y,t),c?h(E):o}function m(E){var b=E-u,T=E-l,C=t-b;return f?rFt(C,s-T):C}function g(E){var b=E-u,T=E-l;return u===void 0||b>=t||b<0||f&&T>=s}function y(){var E=Pj();if(g(E))return v(E);a=setTimeout(y,m(E))}function v(E){return a=void 0,d&&r?h(E):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Pj())}function x(){var E=Pj(),b=g(E);if(r=arguments,i=this,u=E,b){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=_,x.flush=w,x}function uH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function sFt(e){return!!e&&typeof e=="object"}function oFt(e){return typeof e=="symbol"||sFt(e)&&tFt.call(e)==q4t}function Nme(e){if(typeof e=="number")return e;if(oFt(e))return Rme;if(uH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(W4t,"");var n=Y4t.test(e);return n||K4t.test(e)?X4t(e.slice(2),n?2:8):G4t.test(e)?Rme:+e}var aFt=iFt;const Qf=Pl(aFt);function vMe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>yS(".2s"),[]);return $.jsxs($.Fragment,{children:[$.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:$.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:$.jsx(qp,{children:$.jsx(va,{spacing:3,children:$.jsx(gt,{size:14,style:{color:"#878E95"},children:r})})})})}),$.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),$.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>$.jsxs("g",{transform:`translate(${n}, ${a})`,children:[$.jsx("line",{x2:"-6",stroke:"currentColor"}),$.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),$.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const uFt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:vMe},Symbol.toStringTag,{value:"Module"})),kj=15;function _Me({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=gs("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<kj&&Math.abs(t(g[r.y])-p[1])<kj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),$.jsx("circle",{style:{cursor:l?"pointer":"default"},r:kj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const lFt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:_Me},Symbol.toStringTag,{value:"Module"})),Si={top:15,left:100,right:15,bottom:70};function lH({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=jv(),[c]=jv(),[f]=jv(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-Si.left-Si.right,[l]),m=P.useMemo(()=>u-Si.top-Si.bottom,[u]),g=P.useMemo(()=>{const A=Array.from(new Set(s.map(O=>O[i.category])));return vS(oRe).domain(A)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:w}=P.useMemo(()=>{const A=s.map(U=>+U[i.x]).filter(U=>U!==null),[O,N]=ihe(A),k=s.map(U=>+U[i.y]).filter(U=>U!==null),[L,B]=ihe(k);return{xMin:O,xMax:N,yMin:L,yMax:B}},[s,i.x,i.y]),x=P.useMemo(()=>{const A=_-y;return p<=0?null:i.dataType==="date"?eRe([Si.left,p+Si.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Yp([Si.left,p+Si.left]).domain([y-A/10,_+A/10]).nice()},[i.dataType,p,_,y]),E=P.useMemo(()=>{const A=w-v;return m<=0?null:Yp([m+Si.top,Si.top]).domain([v-A/10,w+A/10]).nice()},[m,w,v]),b=P.useMemo(()=>{if(!x||!E)return()=>null;if(r==="Axis Selection"){const A=vCt().extent([[Si.left,Si.top+m-5],[Si.left+p,Si.top+m+5]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[N.selection[0],null],[N.selection[1],null]],x,E,N.mode)}),O=_Ct().extent([[Si.left-5,Si.top],[Si.left+5,Si.top+m]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[null,N.selection[0]],[null,N.selection[1]]],x,E,N.mode)});return c.current&&f.current&&(gs(f.current).call(O),gs(c.current).call(A),t.hasBrush||(gs(f.current).call(O.move,[E(w),E(v)]),gs(c.current).call(A.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),E(w)],[x(new Date("2015-12-31")),E(v)]],x,E,"drag"))),()=>{gs(f.current).call(O.move,[E(w),E(v)]),gs(c.current).call(A.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),E(w)],[x(new Date("2015-12-31")),E(v)]],x,E,"clear")}}if(r==="Rectangular Selection"){const A=bCt().extent([[Si.left,Si.top],[Si.left+p,Si.top+m]]).on("brush",O=>{O.sourceEvent!==void 0&&n([[O.selection[0][0],O.selection[0][1]],[O.selection[1][0],O.selection[1][1]]],x,E,O.mode)}).on("end",O=>{O.selection===null&&O.sourceEvent!==void 0&&(gs(a.current).call(A.move,null),e(null))});return gs(a.current).call(A),()=>{gs(a.current).call(A.move,null),n([[null,null],[null,null]],x,E,"clear")}}return r==="Slider Selection"?()=>n([[x(y),E(w)],[x(_),E(v)]],x,E,"clear"):r==="Paintbrush Selection"?()=>n([[x(y),E(w)],[x(_),E(v)]],x,E,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,x,w,v,E]);P.useEffect(()=>{r==="Slider Selection"&&x&&E&&n([[x(y),E(w)],[x(_),E(v)]],x,E,null)},[r,n,_,y,x,w,v,E]);const T=P.useMemo(()=>o.length===0?null:new Set(o),[o]),C=P.useMemo(()=>!x||!E?null:s.map((A,O)=>{if(A[i.x]===null||A[i.y]===null)return null;const N=i.dataType==="date"?x(new Date(A[i.x])):x(A[i.x]);return $.jsx("circle",{opacity:T&&!T.has(A[i.ids])?.3:1,r:3,fill:T&&!T.has(A[i.ids])?"lightgray":g(A[i.category]),cx:N,cy:E(A[i.y])},O)}),[T,g,s,i.category,i.dataType,i.ids,i.x,i.y,x,E]);return P.useEffect(()=>{r==="Axis Selection"&&c2t(".handle").style("fill","darkgrey")},[t,r]),$.jsxs(Td,{children:[$.jsxs(va,{children:[$.jsx(Hr,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),b==null||b()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?$.jsx(hIe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:A=>h(A==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),$.jsxs(va,{style:{width:"100%",height:"100%"},noWrap:!0,children:[$.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[x&&E?$.jsxs("g",{children:[$.jsx(vMe,{yScale:E,label:i.y,horizontalPosition:Si.left,xRange:x.range()}),$.jsx(aX,{xScale:x,yRange:E.range(),isDate:i.dataType==="date",vertPosition:m+Si.top,label:i.x,ticks:x.ticks(i.brushType==="Axis Selection"?12:5).map(A=>({value:A.toString(),offset:x(A)}))})]}):null,C,$.jsx("g",{id:"brushXRef",ref:c}),$.jsx("g",{id:"brushYRef",ref:f}),x&&E&&r==="Paintbrush Selection"?$.jsx(_Me,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:x,yScale:E}):null]}),r==="Slider Selection"&&x&&E?$.jsxs(Td,{style:{flexGrow:1},spacing:50,children:[$.jsxs(Td,{spacing:0,children:[$.jsx(gt,{children:i.x}),$.jsx(Pz,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],labelAlwaysOn:!1,onChange:A=>{n([[x(A[0]),t.y1],[x(A[1]),t.y2]],x,E,"drag")},style:{width:"300px"},marks:x.ticks(5).map(A=>({value:A,label:A})),value:[x.invert(t.x1),x.invert(t.x2)]})]}),$.jsxs(Td,{spacing:0,children:[$.jsx(gt,{children:i.y}),$.jsx(Pz,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],onChange:A=>{n([[t.x1,E(A[1])],[t.x2,E(A[0])]],x,E,"drag")},style:{width:"300px"},marks:E.ticks(5).map(A=>({value:A,label:A})),value:[E.invert(t.y2),E.invert(t.y1)]})]})]}):null]})]})}const cFt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:lH,default:lH},Symbol.toStringTag,{value:"Module"}));function Dme({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=P.useState(null);P.useEffect(()=>{VCt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=P.useMemo(()=>o?r4t(o):null,[o]),{actions:l,trrack:c}=P.useMemo(()=>{const g=PF.create(),y=g.register("brush",(E,b)=>(E.all={brush:b},E)),v=g.register("brushMove",(E,b)=>(E.all={brush:b},E)),_=g.register("brushResize",(E,b)=>(E.all={brush:b},E)),w=g.register("brushClear",(E,b)=>(E.all={brush:b},E)),x=mMe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:w},trrack:x}},[]),f=P.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=P.useMemo(()=>Qf(f,100,{maxWait:100}),[f]),h=P.useCallback((g,y,v,_,w)=>{if(!y||!v)return;const x=y.invert(g[0][0]||i.x1),E=y.invert(g[1][0]||i.x2),b=v.invert(g[1][1]||i.y2),T=v.invert(g[0][1]||i.y1);let C=null;if(_==="clear")C=u;else if(w){const O=new Set(w);C=u.filter(Tj(N=>O.has(N[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(Tj(O=>new Date(O[e.x])>=new Date(x)&&new Date(O[e.x])<=new Date(E)&&O[e.y]>=b&&O[e.y]<=T)):C=u.filter(Tj(O=>O[e.x]>=x&&O[e.x]<=E&&O[e.y]>=b&&O[e.y]<=T));const A={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?C==null?void 0:C.array("id"):[]};s(A),_==="drag"||_==="handle"?d(_,A):_==="clear"&&c.apply("Clear Brush",l.clearBrush(A)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=P.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=P.useCallback(g=>{r(g)},[]);return o?$.jsxs(Td,{spacing:"xs",children:[$.jsx(lH,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),$.jsx(CV,{data:o,parameters:e,barsTable:p})]}):$.jsx(J1,{})}const fFt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Dme,default:Dme},Symbol.toStringTag,{value:"Module"})),dFt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Mme=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},$S=e=>{const t=P.useRef(null),n=Mme(e),[r,i]=P.useState(0),[s,o]=P.useState(0);P.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Mme({...n,width:n.width||r,height:n.height||s});return[t,a]},hFt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:$S},Symbol.toStringTag,{value:"Module"}));function bMe({data:e,xScale:t,yScale:n,height:r}){return $.jsx("g",{children:e.map((i,s)=>$.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const pFt=Object.freeze(Object.defineProperty({__proto__:null,Bars:bMe},Symbol.toStringTag,{value:"Module"}));function FQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=Yp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return $.jsxs("g",{children:[$.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>$.jsxs("g",{transform:`translate(0,${a})`,children:[$.jsx("line",{x2:`${r}`,stroke:"currentColor"}),$.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const mFt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:FQ},Symbol.toStringTag,{value:"Module"}));function wMe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=II().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return $.jsxs("g",{children:[$.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>$.jsx("g",{transform:`translate(${a}, 10)`,children:$.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const gFt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:wMe},Symbol.toStringTag,{value:"Module"})),yFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function vFt({parameters:e}){const[n,r]=$S(yFt),i=II().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Yp().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return $.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:$.jsx("svg",{width:r.width,height:r.height,children:$.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[$.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:$.jsx(wMe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),$.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:$.jsx(FQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),$.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:$.jsx(bMe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const _Ft=Object.freeze(Object.defineProperty({__proto__:null,default:vFt},Symbol.toStringTag,{value:"Module"}));function EMe({data:e}){return $.jsx("g",{children:e.map(({bubble:t},n)=>$.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const bFt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:EMe},Symbol.toStringTag,{value:"Module"}));function BQ({positions:e}){return $.jsx("g",{children:e.map((t,n)=>$.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const wFt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:BQ},Symbol.toStringTag,{value:"Module"})),EFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},SFt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=I$e().size([t-10,n-10]).padding(1.5),o=q4(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},xFt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function TFt({parameters:e}){const[t,n]=$S(EFt),r=SFt(e,n.width,n.height),i=xFt(r,e.selectedIndices);return $.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:$.jsx("svg",{width:n.width,height:n.height,children:$.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[$.jsx(EMe,{data:r}),$.jsx(BQ,{positions:i})]})})})}const AFt=Object.freeze(Object.defineProperty({__proto__:null,default:TFt},Symbol.toStringTag,{value:"Module"}));function SMe({arcs:e}){return $.jsx("g",{children:e.map((t,n)=>$.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const CFt=Object.freeze(Object.defineProperty({__proto__:null,Slices:SMe},Symbol.toStringTag,{value:"Module"}));function xMe({positions:e}){return $.jsx("g",{children:e.map((t,n)=>$.jsx("g",{transform:`translate(${t.centroid()})`,children:$.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const IFt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:xMe},Symbol.toStringTag,{value:"Module"})),OFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},PFt=kkt().value(e=>e.value),Hx=150;function kFt({parameters:e}){const[t,n]=$S(OFt),r=PFt(e.data),i=r.map(o=>AV().innerRadius(0).outerRadius(Hx).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>AV().outerRadius(Hx+10).innerRadius(Hx+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return $.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:$.jsx("svg",{width:n.width,height:n.height,children:$.jsxs("g",{transform:`translate(${[n.marginLeft+Hx,n.marginTop+Hx].join(",")})`,children:[$.jsx(SMe,{arcs:i}),$.jsx(xMe,{positions:s})]})})})}const $Ft=Object.freeze(Object.defineProperty({__proto__:null,default:kFt},Symbol.toStringTag,{value:"Module"}));function TMe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=Yp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return $.jsxs("g",{children:[$.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>$.jsxs("g",{transform:`translate(${a}, 0)`,children:[$.jsx("line",{y2:`${r}`,stroke:"currentColor"}),$.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const RFt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:TMe},Symbol.toStringTag,{value:"Module"}));function AMe({data:e,barWidth:t,yScale:n}){return $.jsx("g",{children:e.map((r,i)=>$.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const NFt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:AMe},Symbol.toStringTag,{value:"Module"})),DFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function MFt({parameters:e}){const[n,r]=$S(DFt),i=II().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Yp().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,w)=>Number(_)+Number(w))/100,y={};p.forEach((_,w)=>{y[String.fromCharCode(w+65)]=_/g});const v=[y];return Zkt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return $.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:$.jsx("svg",{width:r.width,height:r.height,children:$.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[$.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:$.jsx(TMe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),$.jsx("g",{transform:"translate(0, 0)",children:$.jsx(FQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),$.jsxs("g",{transform:"translate(0, 0)",children:[$.jsx(AMe,{data:c,barWidth:f,yScale:s}),$.jsx(BQ,{positions:d})]})]})})})}const LFt=Object.freeze(Object.defineProperty({__proto__:null,default:MFt},Symbol.toStringTag,{value:"Module"})),FFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function BFt({parameters:e,setAnswer:t}){const[n,r]=$S(FFt),[i,s]=P.useState(100),[o,a]=P.useState(100),[u,l]=P.useState(300),{taskid:c}=e,{actions:f,trrack:d}=P.useMemo(()=>{const p=PF.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=mMe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=P.useCallback(p=>{const m=gs("#movingCircle"),g=gs("#clickAccuracySvg"),y=aV(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return P.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;gs(n.current).select("circle").transition().duration(y).ease(iCt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),$.jsxs($.Fragment,{children:[$.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:$.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:$.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[$.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),$.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),$.jsxs(pt,{children:["Adjust speed (px/s):",$.jsx(qY,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const jFt=Object.freeze(Object.defineProperty({__proto__:null,default:BFt},Symbol.toStringTag,{value:"Module"}));function Lme({rankings:e}){return $.jsx("div",{style:{fontFamily:"sans-serif"},children:$.jsx("div",{children:e.map((t,n)=>$.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function UFt({parameters:e,setAnswer:t}){const n=Ic(),r=vh()[n],[i,s]=P.useState(""),{goToNextStep:o,isNextDisabled:a}=gke(),u=P.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[l]=P.useState(new URLSearchParams(window.location.search)),c=(l.get("admin")||"f")==="t",f=P.useCallback(p=>{s(p),t({status:!0,answers:{[`${r}/leftARP`]:u==="r1"?e.data.r1ARP:e.data.r2ARP,[`${r}/rightARP`]:u==="r2"?e.data.r1ARP:e.data.r2ARP,[`${r}/leftRanking`]:JSON.stringify(u==="r1"?e.data.r1:e.data.r2),[`${r}/rightRanking`]:JSON.stringify(u==="r2"?e.data.r1:e.data.r2),[`${r}/choice`]:p,[`${r}/correctChoice`]:u==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[r,u,e.data,t]),d=P.useCallback(()=>{a||o()},[a,o]);P.useEffect(()=>{const p=bJe([["ArrowLeft",()=>f("left")],["ArrowRight",()=>f("right")],["Enter",d]]);return document.body.addEventListener("keydown",p),()=>{document.body.removeEventListener("keydown",p)}},[f,d]);let h=!1;return u==="r1"?(i==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||i==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(h=!0):(i==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||i==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(h=!0),$.jsxs("div",{children:[$.jsxs(xu,{children:[$.jsxs(xu.Col,{span:2,children:[$.jsx(Lme,{rankings:u==="r1"?e.data.r1:e.data.r2}),$.jsx(Hr,{fullWidth:!0,disabled:i==="left",onClick:()=>{f("left")},children:i==="left"?$.jsx(dfe,{}):"Select this ranking"}),c&&i&&$.jsx("div",{children:u==="r1"?e.data.r1ARP:e.data.r2ARP})]}),$.jsxs(xu.Col,{span:2,children:[$.jsx(Lme,{rankings:u==="r1"?e.data.r2:e.data.r1}),$.jsx(Hr,{fullWidth:!0,disabled:i==="right",onClick:()=>{f("right")},children:i==="right"?$.jsx(dfe,{}):"Select this ranking"}),c&&i&&$.jsx("div",{children:u==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),c&&i&&$.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:h?"CORRECT":"INCORRECT"})]})}const zFt=Object.freeze(Object.defineProperty({__proto__:null,default:UFt},Symbol.toStringTag,{value:"Module"})),VFt=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":n$t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":fFt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":lFt,"../public/demo-brush-interactions/assets/Scatter.tsx":cFt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":e$t,"../public/demo-brush-interactions/assets/YAxis.tsx":uFt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":t$t,"../public/demo-brush-interactions/assets/types.ts":dFt,"../public/demo-cleveland/assets/BarChart.tsx":_Ft,"../public/demo-cleveland/assets/BubbleChart.tsx":AFt,"../public/demo-cleveland/assets/PieChart.tsx":$Ft,"../public/demo-cleveland/assets/StackedBarChart.tsx":LFt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":pFt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":bFt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":wFt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":RFt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":mFt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":gFt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":CFt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":IFt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":NFt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":hFt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":jFt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":zFt});function HFt({currentConfig:e}){const t=Ic(),n=vh()[t],r=`../public/${e.path}`,i=VFt[r].default,s=yh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=gh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return $.jsx(P.Suspense,{fallback:$.jsx("div",{children:"Loading..."}),children:$.jsx(i,{parameters:e.parameters,setAnswer:u})})}function qFt({currentConfig:e}){const[t,n]=P.useState(null);return P.useEffect(()=>{fetch(`${Ec}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:$.jsx(Wa,{text:t})}const WFt={},GFt=Object.freeze(Object.defineProperty({__proto__:null,default:WFt},Symbol.toStringTag,{value:"Module"})),YFt=cWe(GFt);var KFt=YFt;function XFt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function QFt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function JFt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function ZFt(e){return e.__COMMENTS__}function e5t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var kF={EOL:KFt.EOL||`
`,tryParseNumber:XFt,createComment:QFt,removeComment:JFt,getComment:ZFt,forceComment:e5t},t5t="3.2.1";function n5t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Fme}else if(e.length===0)return Fme;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return i5t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),r5t.bind(null,n)}function r5t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Fme(){}function i5t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function CMe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}CMe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function IMe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}IMe.description="parse hexadecimal numbers prefixed with 0x";function OMe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}OMe.description="support ISO dates";var jQ={loadDsf:n5t,std:{math:CMe,hex:IMe,date:OMe}},s5t=function(e,t){var n=kF,r=jQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(L){return L==="{"||L==="}"||L==="["||L==="]"||L===","||L===":"}function d(L){var B,U=0,G=1;for(B=s-1;B>0&&i[B]!==`
`;B--,U++);for(;B>0;B--)i[B]===`
`&&G++;throw new Error(L+" at line "+G+","+U+" >>>"+i.substr(s-U,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(L){return i.charAt(s+L)}function m(L){for(var B="",U=o;h();){if(o===U)return h(),L&&U==="'"&&o==="'"&&B.length===0?(h(),g()):B;if(o==="\\")if(h(),o==="u"){for(var G=0,H=0;H<4;H++){h();var Y=o.charCodeAt(0),q;o>="0"&&o<="9"?q=Y-48:o>="a"&&o<="f"?q=Y-97+10:o>="A"&&o<="F"?q=Y-65+10:d("Bad \\u char "+o),G=G*16+q}B+=String.fromCharCode(G)}else if(typeof a[o]=="string")B+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):B+=o}d("Bad string")}function g(){for(var L="",B=0,U=0;;){var G=p(-U-5);if(!G||G===`
`)break;U++}function H(){for(var Y=U;o&&o<=" "&&o!==`
`&&Y-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),H());;){if(!o)d("Bad multiline string");else if(o==="'"){if(B++,h(),B===3)return L.slice(-1)===`
`&&(L=L.slice(0,-1)),L;continue}else for(;B>0;)L+="'",B--;o===`
`?(L+=`
`,h(),H()):(o!=="\r"&&(L+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var L="",B=s,U=-1;;){if(o===":")return L?U>=0&&U!==L.length&&(s=B+U,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),L;o<=" "?o?U<0&&(U=L.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):L+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var L=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var B=o==="\r"||o===`
`||o==="";if(B||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var U=L[0];switch(U){case"f":if(L.trim()==="false")return!1;break;case"n":if(L.trim()==="null")return null;break;case"t":if(L.trim()==="true")return!0;break;default:if(U==="-"||U>="0"&&U<="9"){var G=n.tryParseNumber(L);if(G!==void 0)return G}}if(B){L=L.trim();var H=l(L);return H!==void 0?H:L}}L+=o}}function w(L,B){var U;for(L--,U=s-2;U>L&&i[U]<=" "&&i[U]!==`
`;U--);i[U]===`
`&&U--,i[U]==="\r"&&U--;var G=i.substr(L,U-L+1);for(U=0;U<G.length;U++)if(G[U]>" "){var H=G.indexOf(`
`);if(H>=0){var Y=[G.substr(0,H),G.substr(H+1)];return B&&Y[0].trim().length===0&&Y.shift(),Y}else return[G]}return[]}function x(L){function B(G,H){var Y,q,D,M;switch(typeof G){case"string":G.indexOf(H)>=0&&(M=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(Y=0,D=G.length;Y<D;Y++)M=B(G[Y],H)||M;else for(q in G)Object.prototype.hasOwnProperty.call(G,q)&&(M=B(G[q],H)||M)}return M}function U(G){var H=B(L,G);return H?"found '"+G+`' in a string value, your mistake could be with:
  > `+H+`
  (unquoted strings contain everything up to the next line!)`:""}return U("}")||U("]")}function E(){var L=[],B,U,G;try{if(u&&(B=n.createComment(L,{a:[]})),h(),U=s,v(),B&&(G=w(U,!0).join(`
`)),o==="]")return h(),B&&(B.e=[G]),L;for(;o;){if(L.push(T()),U=s,v(),o===","&&(h(),U=s,v()),B){var H=w(U);B.a.push([G||"",H[0]||""]),G=H[1]}if(o==="]")return h(),B&&(B.a[B.a.length-1][1]+=G||""),L;v()}d("End of input while parsing an array (missing ']')")}catch(Y){throw Y.hint=Y.hint||x(L),Y}}function b(L){var B="",U={},G,H,Y;try{if(u&&(G=n.createComment(U,{c:{},o:[]})),L?H=1:(h(),H=s),v(),G&&(Y=w(H,!0).join(`
`)),o==="}"&&!L)return G&&(G.e=[Y]),h(),U;for(;o;){if(B=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),U[B]=T(),H=s,v(),o===","&&(h(),H=s,v()),G){var q=w(H);G.c[B]=[Y||"",q[0]||""],Y=q[1],G.o.push(B)}if(o==="}"&&!L)return h(),G&&(G.c[B][1]+=Y||""),U;v()}if(L)return U;d("End of input while parsing an object (missing '}')")}catch(D){throw D.hint=D.hint||x(U),D}}function T(){switch(v(),o){case"{":return b();case"[":return E();case"'":case'"':return m(!0);default:return _()}}function C(L,B){var U=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var G=B.join(`
`),H=w(U).join(`
`);if(H||G){var Y=n.createComment(L,n.getComment(L));Y.r=[G,H]}}return L}function A(){v();var L=u?w(1):null;switch(o){case"{":return C(b(),L);case"[":return C(E(),L);default:return C(T(),L)}}function O(){v();var L=u?w(1):null;switch(o){case"{":return C(b(),L);case"[":return C(E(),L)}try{return C(b(!0),L)}catch(B){c();try{return C(T(),L)}catch{throw B}}}if(typeof e!="string")throw new Error("source is not a string");var N=null,k=!0;return t&&typeof t=="object"&&(u=t.keepWsc,N=t.dsf,k=t.legacyRoot!==!1),l=r.loadDsf(N,"parse"),i=e,c(),k?O():A()},o5t=function(e,t){var n=kF,r=jQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,x="---\u2028--\uFEFF-",E=new RegExp('[\\\\\\"\0-'+x+"]","g"),b=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),A={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,N="",k=0;function L(M,W){return k+=M[0].length+M[1].length-M[2]-M[3],M[0]+W+M[1]}function B(M){return M.replace(E,function(W){var z=A[W];return typeof z=="string"?L(g.esc,z):L(g.uni,("0000"+W.charCodeAt(0).toString(16)).slice(-4))})}function U(M,W,z,V){return M?(b.lastIndex=0,C.lastIndex=0,c||z||b.test(M)||n.tryParseNumber(M,!0)!==void 0||C.test(M)?(E.lastIndex=0,T.lastIndex=0,E.test(M)?!T.test(M)&&!V&&d?G(M,W):L(g.qstr,B(M)):L(g.qstr,M)):L(g.str,M)):L(g.qstr,"")}function G(M,W){var z,V=M.replace(/\r/g,"").split(`
`);if(W+=o,V.length===1)return L(g.mstr,V[0]);var te=s+W+g.mstr[0];for(z=0;z<V.length;z++)te+=s,V[z]&&(te+=W+V[z]);return te+s+W+g.mstr[1]}function H(M){return M?l||O.test(M)?(E.lastIndex=0,L(g.qkey,E.test(M)?B(M):M)):L(g.key,M):'""'}function Y(M,W,z,V){function te(At){return At&&At[At[0]==="\r"?1:0]===`
`}function le(At){return At&&!te(At)}function me(At,Tn,Zt){if(!At)return"";At=n.forceComment(At);var Jt,nr=At.length;for(Jt=0;Jt<nr&&At[Jt]<=" ";Jt++);return Zt&&Jt>0&&(At=At.substr(Jt)),Jt<nr?Tn+L(g.rem,At):At}var ye=w(M);if(ye!==void 0)return L(g.dsf,ye);switch(typeof M){case"string":return U(M,N,W,V);case"number":return isFinite(M)?L(g.num,String(M)):L(g.lit,"null");case"boolean":return L(g.lit,String(M));case"object":if(!M)return L(g.lit,"null");var de;a&&(de=n.getComment(M));var we=Object.prototype.toString.apply(M)==="[object Array]",he=N;N+=o;var Ve=s+he,Me=s+N,Ye=z||u?"":Ve,Fe=[],De,He=f?[]:null,Qt=c,nt=d,qe=h?"":g.com[0],Pt=0,at,ht,vt,Ht,Xt,fe,xe,Le,ct;if(we){for(at=0,ht=M.length;at<ht;at++){if(De=at<ht-1,de?(fe=de.a[at]||[],xe=le(fe[1]),Fe.push(me(fe[0],`
`)+Me),He&&(fe[0]||fe[1]||xe)&&(He=null)):Fe.push(Me),k=0,Ht=M[at],Fe.push(Y(Ht,de?xe:!1,!0)+(De?h:"")),He){switch(typeof Ht){case"string":k=0,c=!0,d=0,He.push(Y(Ht,!1,!0)+(De?g.com[0]:"")),c=Qt,d=nt;break;case"object":if(Ht){He=null;break}default:He.push(Fe[Fe.length-1]+(De?qe:""));break}De&&(k+=g.com[0].length-g.com[2]),Pt+=k}de&&fe[1]&&Fe.push(me(fe[1],xe?" ":`
`,xe))}ht===0?de&&de.e&&Fe.push(me(de.e[0],`
`)+Ve):Fe.push(Ve),Fe.length===0?Le=L(g.arr,""):(Le=Ye+L(g.arr,Fe.join("")),He&&(ct=He.join(" "),ct.length-Pt<=f&&(Le=L(g.arr,ct))))}else{var Je=de?de.o.slice():[],lt=[];for(vt in M)Object.prototype.hasOwnProperty.call(M,vt)&&Je.indexOf(vt)<0&&lt.push(vt);m&&lt.sort();var st=Je.concat(lt);for(at=0,ht=st.length;at<ht;at++)if(De=at<ht-1,vt=st[at],de?(fe=de.c[vt]||[],xe=le(fe[1]),Fe.push(me(fe[0],`
`)+Me),He&&(fe[0]||fe[1]||xe)&&(He=null)):Fe.push(Me),k=0,Ht=M[vt],Xt=Y(Ht,de&&xe),Fe.push(H(vt)+g.col[0]+(te(Xt)?"":" ")+Xt+(De?h:"")),de&&fe[1]&&Fe.push(me(fe[1],xe?" ":`
`,xe)),He){switch(typeof Ht){case"string":k=0,c=!0,d=0,Xt=Y(Ht,!1),c=Qt,d=nt,He.push(H(vt)+g.col[0]+" "+Xt+(De?g.com[0]:""));break;case"object":if(Ht){He=null;break}default:He.push(Fe[Fe.length-1]+(De?qe:""));break}k+=g.col[0].length-g.col[2],De&&(k+=g.com[0].length-g.com[2]),Pt+=k}ht===0?de&&de.e&&Fe.push(me(de.e[0],`
`)+Ve):Fe.push(Ve),Fe.length===0?Le=L(g.obj,""):(Le=Ye+L(g.obj,Fe.join("")),He&&(ct=He.join(" "),ct.length-Pt<=f&&(Le=L(g.obj,ct))))}return N=he,Le}}w=r.loadDsf(p,"stringify");var q="",D=a?D=(n.getComment(e)||{}).r:null;return D&&D[0]&&(q=D[0]+`
`),q+=Y(e,null,!0,!0),D&&(q+=D[1]||""),q},Ew=kF;function D2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function cH(e,t){if(!(e===null||typeof e!="object")){var n=Ew.getComment(e);n&&Ew.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Bme(o.a,r,n.a[r],cH(e[r]))&&(s=!0);!s&&n.e&&(o.e=D2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Bme(o.s,l,n.c[l],cH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=D2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=D2(n.r[0],n.r[1])),s?o:void 0}}function a5t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function u5t(e,t){var n=[];if(fH(e,t,n,[]),n.length>0){var r=sM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+a5t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),sM(t,r,1)}}function Bme(e,t,n,r){var i=D2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function M2(e,t){var n=D2(t.b,t.a);return n.path=e,n}function L2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(M2(s,o)),L2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(M2(u,l)),L2(l.x,t,u))});e.e&&t.push(M2(n,e.e))}}function fH(e,t,n,r){if(e){if(t===null||typeof t!="object"){L2(e,n,r);return}var i,s=Ew.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],fH(u.x,t[i],n,l)):(n.push(M2(l,u)),L2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],fH(d.x,t[c],n,f))):d&&(n.push(M2(f,d)),L2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function sM(e,t,n){var r=Ew.createComment(e,Ew.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Ew.forceComment(t)),r.r[n]||""}var l5t={extract:function(e){return cH(e,!0)},merge:u5t,header:function(e,t){return sM(e,t,0)},footer:function(e,t){return sM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var jme=kF,c5t=t5t,Ume=s5t,zme=o5t,f5t=l5t,d5t=jQ,UQ={parse:Ume,stringify:zme,endOfLine:function(){return jme.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(jme.EOL=e)},version:c5t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Ume(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,zme(e,t)}},comments:f5t,dsf:d5t.std},dH={exports:{}},PMe={},vf={},wE={},jI={},Ln={},uC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(uC);var hH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=uC;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(hH);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=uC,n=hH;var r=uC;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=hH;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(z,V){return this}}class o extends s{constructor(z,V,te){super(),this.varKind=z,this.name=V,this.rhs=te}render({es5:z,_n:V}){const te=z?n.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${le};`+V}optimizeNames(z,V){if(z[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,z,V)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(z,V,te){super(),this.lhs=z,this.rhs=V,this.sideEffects=te}render({_n:z}){return`${this.lhs} = ${this.rhs};`+z}optimizeNames(z,V){if(!(this.lhs instanceof t.Name&&!z[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,z,V),this}get names(){const z=this.lhs instanceof t.Name?{}:{...this.lhs.names};return k(z,this.rhs)}}class u extends a{constructor(z,V,te,le){super(z,te,le),this.op=V}render({_n:z}){return`${this.lhs} ${this.op}= ${this.rhs};`+z}}class l extends s{constructor(z){super(),this.label=z,this.names={}}render({_n:z}){return`${this.label}:`+z}}class c extends s{constructor(z){super(),this.label=z,this.names={}}render({_n:z}){return`break${this.label?` ${this.label}`:""};`+z}}class f extends s{constructor(z){super(),this.error=z}render({_n:z}){return`throw ${this.error};`+z}get names(){return this.error.names}}class d extends s{constructor(z){super(),this.code=z}render({_n:z}){return`${this.code};`+z}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(z,V){return this.code=L(this.code,z,V),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(z=[]){super(),this.nodes=z}render(z){return this.nodes.reduce((V,te)=>V+te.render(z),"")}optimizeNodes(){const{nodes:z}=this;let V=z.length;for(;V--;){const te=z[V].optimizeNodes();Array.isArray(te)?z.splice(V,1,...te):te?z[V]=te:z.splice(V,1)}return z.length>0?this:void 0}optimizeNames(z,V){const{nodes:te}=this;let le=te.length;for(;le--;){const me=te[le];me.optimizeNames(z,V)||(B(z,me.names),te.splice(le,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((z,V)=>N(z,V.names),{})}}class p extends h{render(z){return"{"+z._n+super.render(z)+"}"+z._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(z,V){super(V),this.condition=z}render(z){let V=`if(${this.condition})`+super.render(z);return this.else&&(V+="else "+this.else.render(z)),V}optimizeNodes(){super.optimizeNodes();const z=this.condition;if(z===!0)return this.nodes;let V=this.else;if(V){const te=V.optimizeNodes();V=this.else=Array.isArray(te)?new g(te):te}if(V)return z===!1?V instanceof y?V:V.nodes:this.nodes.length?this:new y(U(z),V instanceof y?[V]:V.nodes);if(!(z===!1||!this.nodes.length))return this}optimizeNames(z,V){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(z,V),!!(super.optimizeNames(z,V)||this.else))return this.condition=L(this.condition,z,V),this}get names(){const z=super.names;return k(z,this.condition),this.else&&N(z,this.else.names),z}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(z){super(),this.iteration=z}render(z){return`for(${this.iteration})`+super.render(z)}optimizeNames(z,V){if(super.optimizeNames(z,V))return this.iteration=L(this.iteration,z,V),this}get names(){return N(super.names,this.iteration.names)}}class w extends v{constructor(z,V,te,le){super(),this.varKind=z,this.name=V,this.from=te,this.to=le}render(z){const V=z.es5?n.varKinds.var:this.varKind,{name:te,from:le,to:me}=this;return`for(${V} ${te}=${le}; ${te}<${me}; ${te}++)`+super.render(z)}get names(){const z=k(super.names,this.from);return k(z,this.to)}}class x extends v{constructor(z,V,te,le){super(),this.loop=z,this.varKind=V,this.name=te,this.iterable=le}render(z){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(z)}optimizeNames(z,V){if(super.optimizeNames(z,V))return this.iterable=L(this.iterable,z,V),this}get names(){return N(super.names,this.iterable.names)}}class E extends p{constructor(z,V,te){super(),this.name=z,this.args=V,this.async=te}render(z){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(z)}}E.kind="func";class b extends h{render(z){return"return "+super.render(z)}}b.kind="return";class T extends p{render(z){let V="try"+super.render(z);return this.catch&&(V+=this.catch.render(z)),this.finally&&(V+=this.finally.render(z)),V}optimizeNodes(){var z,V;return super.optimizeNodes(),(z=this.catch)===null||z===void 0||z.optimizeNodes(),(V=this.finally)===null||V===void 0||V.optimizeNodes(),this}optimizeNames(z,V){var te,le;return super.optimizeNames(z,V),(te=this.catch)===null||te===void 0||te.optimizeNames(z,V),(le=this.finally)===null||le===void 0||le.optimizeNames(z,V),this}get names(){const z=super.names;return this.catch&&N(z,this.catch.names),this.finally&&N(z,this.finally.names),z}}class C extends p{constructor(z){super(),this.error=z}render(z){return`catch(${this.error})`+super.render(z)}}C.kind="catch";class A extends p{render(z){return"finally"+super.render(z)}}A.kind="finally";class O{constructor(z,V={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...V,_n:V.lines?`
`:""},this._extScope=z,this._scope=new n.Scope({parent:z}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(z){return this._scope.name(z)}scopeName(z){return this._extScope.name(z)}scopeValue(z,V){const te=this._extScope.value(z,V);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(z,V){return this._extScope.getValue(z,V)}scopeRefs(z){return this._extScope.scopeRefs(z,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(z,V,te,le){const me=this._scope.toName(V);return te!==void 0&&le&&(this._constants[me.str]=te),this._leafNode(new o(z,me,te)),me}const(z,V,te){return this._def(n.varKinds.const,z,V,te)}let(z,V,te){return this._def(n.varKinds.let,z,V,te)}var(z,V,te){return this._def(n.varKinds.var,z,V,te)}assign(z,V,te){return this._leafNode(new a(z,V,te))}add(z,V){return this._leafNode(new u(z,e.operators.ADD,V))}code(z){return typeof z=="function"?z():z!==t.nil&&this._leafNode(new d(z)),this}object(...z){const V=["{"];for(const[te,le]of z)V.length>1&&V.push(","),V.push(te),(te!==le||this.opts.es5)&&(V.push(":"),(0,t.addCodeArg)(V,le));return V.push("}"),new t._Code(V)}if(z,V,te){if(this._blockNode(new y(z)),V&&te)this.code(V).else().code(te).endIf();else if(V)this.code(V).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(z){return this._elseNode(new y(z))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(z,V){return this._blockNode(z),V&&this.code(V).endFor(),this}for(z,V){return this._for(new _(z),V)}forRange(z,V,te,le,me=this.opts.es5?n.varKinds.var:n.varKinds.let){const ye=this._scope.toName(z);return this._for(new w(me,ye,V,te),()=>le(ye))}forOf(z,V,te,le=n.varKinds.const){const me=this._scope.toName(z);if(this.opts.es5){const ye=V instanceof t.Name?V:this.var("_arr",V);return this.forRange("_i",0,(0,t._)`${ye}.length`,de=>{this.var(me,(0,t._)`${ye}[${de}]`),te(me)})}return this._for(new x("of",le,me,V),()=>te(me))}forIn(z,V,te,le=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(z,(0,t._)`Object.keys(${V})`,te);const me=this._scope.toName(z);return this._for(new x("in",le,me,V),()=>te(me))}endFor(){return this._endBlockNode(v)}label(z){return this._leafNode(new l(z))}break(z){return this._leafNode(new c(z))}return(z){const V=new b;if(this._blockNode(V),this.code(z),V.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(b)}try(z,V,te){if(!V&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new T;if(this._blockNode(le),this.code(z),V){const me=this.name("e");this._currNode=le.catch=new C(me),V(me)}return te&&(this._currNode=le.finally=new A,this.code(te)),this._endBlockNode(C,A)}throw(z){return this._leafNode(new f(z))}block(z,V){return this._blockStarts.push(this._nodes.length),z&&this.code(z).endBlock(V),this}endBlock(z){const V=this._blockStarts.pop();if(V===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-V;if(te<0||z!==void 0&&te!==z)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${z} expected`);return this._nodes.length=V,this}func(z,V=t.nil,te,le){return this._blockNode(new E(z,V,te)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(z=1){for(;z-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(z){return this._currNode.nodes.push(z),this}_blockNode(z){this._currNode.nodes.push(z),this._nodes.push(z)}_endBlockNode(z,V){const te=this._currNode;if(te instanceof z||V&&te instanceof V)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${V?`${z.kind}/${V.kind}`:z.kind}"`)}_elseNode(z){const V=this._currNode;if(!(V instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=V.else=z,this}get _root(){return this._nodes[0]}get _currNode(){const z=this._nodes;return z[z.length-1]}set _currNode(z){const V=this._nodes;V[V.length-1]=z}}e.CodeGen=O;function N(W,z){for(const V in z)W[V]=(W[V]||0)+(z[V]||0);return W}function k(W,z){return z instanceof t._CodeOrName?N(W,z.names):W}function L(W,z,V){if(W instanceof t.Name)return te(W);if(!le(W))return W;return new t._Code(W._items.reduce((me,ye)=>(ye instanceof t.Name&&(ye=te(ye)),ye instanceof t._Code?me.push(...ye._items):me.push(ye),me),[]));function te(me){const ye=V[me.str];return ye===void 0||z[me.str]!==1?me:(delete z[me.str],ye)}function le(me){return me instanceof t._Code&&me._items.some(ye=>ye instanceof t.Name&&z[ye.str]===1&&V[ye.str]!==void 0)}}function B(W,z){for(const V in z)W[V]=(W[V]||0)-(z[V]||0)}function U(W){return typeof W=="boolean"||typeof W=="number"||W===null?!W:(0,t._)`!${M(W)}`}e.not=U;const G=D(e.operators.AND);function H(...W){return W.reduce(G)}e.and=H;const Y=D(e.operators.OR);function q(...W){return W.reduce(Y)}e.or=q;function D(W){return(z,V)=>z===t.nil?V:V===t.nil?z:(0,t._)`${M(z)} ${W} ${M(V)}`}function M(W){return W instanceof t.Name?W:(0,t._)`(${W})`}})(Ln);var dr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=Ln,n=uC;function r(E){const b={};for(const T of E)b[T]=!0;return b}e.toHash=r;function i(E,b){return typeof b=="boolean"?b:Object.keys(b).length===0?!0:(s(E,b),!o(b,E.self.RULES.all))}e.alwaysValidSchema=i;function s(E,b=E.schema){const{opts:T,self:C}=E;if(!T.strictSchema||typeof b=="boolean")return;const A=C.RULES.keywords;for(const O in b)A[O]||x(E,`unknown keyword: "${O}"`)}e.checkUnknownRules=s;function o(E,b){if(typeof E=="boolean")return!E;for(const T in E)if(b[T])return!0;return!1}e.schemaHasRules=o;function a(E,b){if(typeof E=="boolean")return!E;for(const T in E)if(T!=="$ref"&&b.all[T])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:E,schemaPath:b},T,C,A){if(!A){if(typeof T=="number"||typeof T=="boolean")return T;if(typeof T=="string")return(0,t._)`${T}`}return(0,t._)`${E}${b}${(0,t.getProperty)(C)}`}e.schemaRefOrVal=u;function l(E){return d(decodeURIComponent(E))}e.unescapeFragment=l;function c(E){return encodeURIComponent(f(E))}e.escapeFragment=c;function f(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(E,b){if(Array.isArray(E))for(const T of E)b(T);else b(E)}e.eachItem=h;function p({mergeNames:E,mergeToName:b,mergeValues:T,resultToName:C}){return(A,O,N,k)=>{const L=N===void 0?O:N instanceof t.Name?(O instanceof t.Name?E(A,O,N):b(A,O,N),N):O instanceof t.Name?(b(A,N,O),O):T(O,N);return k===t.Name&&!(L instanceof t.Name)?C(A,L):L}}e.mergeEvaluated={props:p({mergeNames:(E,b,T)=>E.if((0,t._)`${T} !== true && ${b} !== undefined`,()=>{E.if((0,t._)`${b} === true`,()=>E.assign(T,!0),()=>E.assign(T,(0,t._)`${T} || {}`).code((0,t._)`Object.assign(${T}, ${b})`))}),mergeToName:(E,b,T)=>E.if((0,t._)`${T} !== true`,()=>{b===!0?E.assign(T,!0):(E.assign(T,(0,t._)`${T} || {}`),g(E,T,b))}),mergeValues:(E,b)=>E===!0?!0:{...E,...b},resultToName:m}),items:p({mergeNames:(E,b,T)=>E.if((0,t._)`${T} !== true && ${b} !== undefined`,()=>E.assign(T,(0,t._)`${b} === true ? true : ${T} > ${b} ? ${T} : ${b}`)),mergeToName:(E,b,T)=>E.if((0,t._)`${T} !== true`,()=>E.assign(T,b===!0?!0:(0,t._)`${T} > ${b} ? ${T} : ${b}`)),mergeValues:(E,b)=>E===!0?!0:Math.max(E,b),resultToName:(E,b)=>E.var("items",b)})};function m(E,b){if(b===!0)return E.var("props",!0);const T=E.var("props",(0,t._)`{}`);return b!==void 0&&g(E,T,b),T}e.evaluatedPropsToName=m;function g(E,b,T){Object.keys(T).forEach(C=>E.assign((0,t._)`${b}${(0,t.getProperty)(C)}`,!0))}e.setEvaluated=g;const y={};function v(E,b){return E.scopeValue("func",{ref:b,code:y[b.code]||(y[b.code]=new n._Code(b.code))})}e.useFunc=v;var _;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(_=e.Type||(e.Type={}));function w(E,b,T){if(E instanceof t.Name){const C=b===_.Num;return T?C?(0,t._)`"[" + ${E} + "]"`:(0,t._)`"['" + ${E} + "']"`:C?(0,t._)`"/" + ${E}`:(0,t._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return T?(0,t.getProperty)(E).toString():"/"+f(E)}e.getErrorPath=w;function x(E,b,T=E.opts.strictSchema){if(T){if(b=`strict mode: ${b}`,T===!0)throw new Error(b);E.self.logger.warn(b)}}e.checkStrictMode=x})(dr);var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});const Ko=Ln,h5t={data:new Ko.Name("data"),valCxt:new Ko.Name("valCxt"),instancePath:new Ko.Name("instancePath"),parentData:new Ko.Name("parentData"),parentDataProperty:new Ko.Name("parentDataProperty"),rootData:new Ko.Name("rootData"),dynamicAnchors:new Ko.Name("dynamicAnchors"),vErrors:new Ko.Name("vErrors"),errors:new Ko.Name("errors"),this:new Ko.Name("this"),self:new Ko.Name("self"),scope:new Ko.Name("scope"),json:new Ko.Name("json"),jsonPos:new Ko.Name("jsonPos"),jsonLen:new Ko.Name("jsonLen"),jsonPart:new Ko.Name("jsonPart")};Eh.default=h5t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Ln,n=dr,r=Eh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:x,compositeRule:E,allErrors:b}=w,T=f(g,y,v);_??(E||b)?u(x,T):l(w,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:x,allErrors:E}=_,b=f(g,y,v);u(w,b),x||E||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:x}){if(w===void 0)throw new Error("ajv implementation error");const E=g.name("err");g.forRange("i",w,r.default.errors,b=>{g.const(E,(0,t._)`${r.default.vErrors}[${b}]`),g.if((0,t._)`${E}.instancePath === undefined`,()=>g.assign((0,t._)`${E}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${E}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${E}.schema`,v),g.assign((0,t._)`${E}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,x=[h(w,v),p(g,v)];return m(g,y,x),_.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:x,schemaValue:E,it:b}=g,{opts:T,propertyName:C,topSchemaRef:A,schemaPath:O}=b;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&_.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&_.push([c.schema,E],[c.parentSchema,(0,t._)`${A}${O}`],[r.default.data,x]),C&&_.push([c.propertyName,C])}})(jI);Object.defineProperty(wE,"__esModule",{value:!0});wE.boolOrEmptySchema=wE.topBoolOrEmptySchema=void 0;const p5t=jI,m5t=Ln,g5t=Eh,y5t={message:"boolean schema is false"};function v5t(e){const{gen:t,schema:n,validateName:r}=e;n===!1?kMe(e,!1):typeof n=="object"&&n.$async===!0?t.return(g5t.default.data):(t.assign((0,m5t._)`${r}.errors`,null),t.return(!0))}wE.topBoolOrEmptySchema=v5t;function _5t(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),kMe(e)):n.var(t,!0)}wE.boolOrEmptySchema=_5t;function kMe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,p5t.reportError)(i,y5t,void 0,t)}var UI={},w1={};Object.defineProperty(w1,"__esModule",{value:!0});w1.getRules=w1.isJSONType=void 0;const b5t=["string","number","integer","boolean","null","object","array"],w5t=new Set(b5t);function E5t(e){return typeof e=="string"&&w5t.has(e)}w1.isJSONType=E5t;function S5t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}w1.getRules=S5t;var $p={};Object.defineProperty($p,"__esModule",{value:!0});$p.shouldUseRule=$p.shouldUseGroup=$p.schemaHasRulesForType=void 0;function x5t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&$Me(e,r)}$p.schemaHasRulesForType=x5t;function $Me(e,t){return t.rules.some(n=>RMe(e,n))}$p.shouldUseGroup=$Me;function RMe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}$p.shouldUseRule=RMe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=w1,n=$p,r=jI,i=Ln,s=dr;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const w=u(_.type);if(w.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&w.push("null")}return w}e.getSchemaTypes=a;function u(_){const w=Array.isArray(_)?_:_?[_]:[];if(w.every(t.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}e.getJSONTypes=u;function l(_,w){const{gen:x,data:E,opts:b}=_,T=f(w,b.coerceTypes),C=w.length>0&&!(T.length===0&&w.length===1&&(0,n.schemaHasRulesForType)(_,w[0]));if(C){const A=m(w,E,b.strictNumbers,o.Wrong);x.if(A,()=>{T.length?d(_,w,T):y(_)})}return C}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,w){return w?_.filter(x=>c.has(x)||w==="array"&&x==="array"):[]}function d(_,w,x){const{gen:E,data:b,opts:T}=_,C=E.let("dataType",(0,i._)`typeof ${b}`),A=E.let("coerced",(0,i._)`undefined`);T.coerceTypes==="array"&&E.if((0,i._)`${C} == 'object' && Array.isArray(${b}) && ${b}.length == 1`,()=>E.assign(b,(0,i._)`${b}[0]`).assign(C,(0,i._)`typeof ${b}`).if(m(w,b,T.strictNumbers),()=>E.assign(A,b))),E.if((0,i._)`${A} !== undefined`);for(const N of x)(c.has(N)||N==="array"&&T.coerceTypes==="array")&&O(N);E.else(),y(_),E.endIf(),E.if((0,i._)`${A} !== undefined`,()=>{E.assign(b,A),h(_,A)});function O(N){switch(N){case"string":E.elseIf((0,i._)`${C} == "number" || ${C} == "boolean"`).assign(A,(0,i._)`"" + ${b}`).elseIf((0,i._)`${b} === null`).assign(A,(0,i._)`""`);return;case"number":E.elseIf((0,i._)`${C} == "boolean" || ${b} === null
              || (${C} == "string" && ${b} && ${b} == +${b})`).assign(A,(0,i._)`+${b}`);return;case"integer":E.elseIf((0,i._)`${C} === "boolean" || ${b} === null
              || (${C} === "string" && ${b} && ${b} == +${b} && !(${b} % 1))`).assign(A,(0,i._)`+${b}`);return;case"boolean":E.elseIf((0,i._)`${b} === "false" || ${b} === 0 || ${b} === null`).assign(A,!1).elseIf((0,i._)`${b} === "true" || ${b} === 1`).assign(A,!0);return;case"null":E.elseIf((0,i._)`${b} === "" || ${b} === 0 || ${b} === false`),E.assign(A,null);return;case"array":E.elseIf((0,i._)`${C} === "string" || ${C} === "number"
              || ${C} === "boolean" || ${b} === null`).assign(A,(0,i._)`[${b}]`)}}}function h({gen:_,parentData:w,parentDataProperty:x},E){_.if((0,i._)`${w} !== undefined`,()=>_.assign((0,i._)`${w}[${x}]`,E))}function p(_,w,x,E=o.Correct){const b=E===o.Correct?i.operators.EQ:i.operators.NEQ;let T;switch(_){case"null":return(0,i._)`${w} ${b} null`;case"array":T=(0,i._)`Array.isArray(${w})`;break;case"object":T=(0,i._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":T=C((0,i._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":T=C();break;default:return(0,i._)`typeof ${w} ${b} ${_}`}return E===o.Correct?T:(0,i.not)(T);function C(A=i.nil){return(0,i.and)((0,i._)`typeof ${w} == "number"`,A,x?(0,i._)`isFinite(${w})`:i.nil)}}e.checkDataType=p;function m(_,w,x,E){if(_.length===1)return p(_[0],w,x,E);let b;const T=(0,s.toHash)(_);if(T.array&&T.object){const C=(0,i._)`typeof ${w} != "object"`;b=T.null?C:(0,i._)`!${w} || ${C}`,delete T.null,delete T.array,delete T.object}else b=i.nil;T.number&&delete T.integer;for(const C in T)b=(0,i.and)(b,p(C,w,x,E));return b}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:w})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${w}}`};function y(_){const w=v(_);(0,r.reportError)(w,g)}e.reportTypeError=y;function v(_){const{gen:w,data:x,schema:E}=_,b=(0,s.schemaRefOrVal)(_,E,"type");return{gen:w,keyword:"type",data:x,schema:E.type,schemaCode:b,schemaValue:b,parentSchema:E,params:{},it:_}}})(UI);var $F={};Object.defineProperty($F,"__esModule",{value:!0});$F.assignDefaults=void 0;const Y_=Ln,T5t=dr;function A5t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Vme(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Vme(e,s,i.default))}$F.assignDefaults=A5t;function Vme(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,Y_._)`${s}${(0,Y_.getProperty)(t)}`;if(i){(0,T5t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,Y_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Y_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,Y_._)`${a} = ${(0,Y_.stringify)(n)}`)}var Id={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.validateUnion=Dn.validateArray=Dn.usePattern=Dn.callValidateCode=Dn.schemaProperties=Dn.allSchemaProperties=Dn.noPropertyInData=Dn.propertyInData=Dn.isOwnProperty=Dn.hasPropFunc=Dn.reportMissingProp=Dn.checkMissingProp=Dn.checkReportMissingProp=void 0;const mi=Ln,zQ=dr,jm=Eh,C5t=dr;function I5t(e,t){const{gen:n,data:r,it:i}=e;n.if(HQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,mi._)`${t}`},!0),e.error()})}Dn.checkReportMissingProp=I5t;function O5t({gen:e,data:t,it:{opts:n}},r,i){return(0,mi.or)(...r.map(s=>(0,mi.and)(HQ(e,t,s,n.ownProperties),(0,mi._)`${i} = ${s}`)))}Dn.checkMissingProp=O5t;function P5t(e,t){e.setParams({missingProperty:t},!0),e.error()}Dn.reportMissingProp=P5t;function NMe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,mi._)`Object.prototype.hasOwnProperty`})}Dn.hasPropFunc=NMe;function VQ(e,t,n){return(0,mi._)`${NMe(e)}.call(${t}, ${n})`}Dn.isOwnProperty=VQ;function k5t(e,t,n,r){const i=(0,mi._)`${t}${(0,mi.getProperty)(n)} !== undefined`;return r?(0,mi._)`${i} && ${VQ(e,t,n)}`:i}Dn.propertyInData=k5t;function HQ(e,t,n,r){const i=(0,mi._)`${t}${(0,mi.getProperty)(n)} === undefined`;return r?(0,mi.or)(i,(0,mi.not)(VQ(e,t,n))):i}Dn.noPropertyInData=HQ;function DMe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Dn.allSchemaProperties=DMe;function $5t(e,t){return DMe(t).filter(n=>!(0,zQ.alwaysValidSchema)(e,t[n]))}Dn.schemaProperties=$5t;function R5t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,mi._)`${e}, ${t}, ${r}${i}`:t,f=[[jm.default.instancePath,(0,mi.strConcat)(jm.default.instancePath,s)],[jm.default.parentData,o.parentData],[jm.default.parentDataProperty,o.parentDataProperty],[jm.default.rootData,jm.default.rootData]];o.opts.dynamicRef&&f.push([jm.default.dynamicAnchors,jm.default.dynamicAnchors]);const d=(0,mi._)`${c}, ${n.object(...f)}`;return u!==mi.nil?(0,mi._)`${a}.call(${u}, ${d})`:(0,mi._)`${a}(${d})`}Dn.callValidateCode=R5t;const N5t=(0,mi._)`new RegExp`;function D5t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,mi._)`${i.code==="new RegExp"?N5t:(0,C5t.useFunc)(e,i)}(${n}, ${r})`})}Dn.usePattern=D5t;function M5t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,mi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:zQ.Type.Num},s),t.if((0,mi.not)(s),a)})}}Dn.validateArray=M5t;function L5t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,zQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,mi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,mi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Dn.validateUnion=L5t;Object.defineProperty(Id,"__esModule",{value:!0});Id.validateKeywordUsage=Id.validSchemaType=Id.funcKeywordCode=Id.macroKeywordCode=void 0;const Na=Ln,cv=Eh,F5t=Dn,B5t=jI;function j5t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=MMe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Na.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Id.macroKeywordCode=j5t;function U5t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;V5t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=MMe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Hme(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Hme(e),g(()=>z5t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Na._)`await `),v=>r.assign(f,!1).if((0,Na._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Na._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Na._)`${c}.errors`;return r.assign(y,null),m(Na.nil),y}function m(y=t.async?(0,Na._)`await `:Na.nil){const v=u.opts.passContext?cv.default.this:cv.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Na._)`${y}${(0,F5t.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Na.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Id.funcKeywordCode=U5t;function Hme(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Na._)`${r.parentData}[${r.parentDataProperty}]`))}function z5t(e,t){const{gen:n}=e;n.if((0,Na._)`Array.isArray(${t})`,()=>{n.assign(cv.default.vErrors,(0,Na._)`${cv.default.vErrors} === null ? ${t} : ${cv.default.vErrors}.concat(${t})`).assign(cv.default.errors,(0,Na._)`${cv.default.vErrors}.length`),(0,B5t.extendErrors)(e)},()=>e.error())}function V5t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function MMe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Na.stringify)(n)})}function H5t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Id.validSchemaType=H5t;function q5t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Id.validateKeywordUsage=q5t;var Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.extendSubschemaMode=Qg.extendSubschemaData=Qg.getSubschema=void 0;const wd=Ln,LMe=dr;function W5t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,wd._)`${e.schemaPath}${(0,wd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,wd._)`${e.schemaPath}${(0,wd.getProperty)(t)}${(0,wd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,LMe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Qg.getSubschema=W5t;function G5t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,wd._)`${t.data}${(0,wd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,wd.str)`${l}${(0,LMe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,wd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof wd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Qg.extendSubschemaData=G5t;function Y5t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Qg.extendSubschemaMode=Y5t;var To={},FMe={exports:{}},xg=FMe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};H$(t,r,i,e,"",e)};xg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};xg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};xg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};xg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function H$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in xg.arrayKeywords)for(var d=0;d<f.length;d++)H$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in xg.propsKeywords){if(f&&typeof f=="object")for(var h in f)H$(e,t,n,f[h],i+"/"+c+"/"+K5t(h),s,i,c,r,h)}else(c in xg.keywords||e.allKeys&&!(c in xg.skipKeywords))&&H$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function K5t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var X5t=FMe.exports;Object.defineProperty(To,"__esModule",{value:!0});To.getSchemaRefs=To.resolveUrl=To.normalizeId=To._getFullPath=To.getFullPath=To.inlineRef=void 0;const Q5t=dr,J5t=CK,Z5t=X5t,e8t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function t8t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!pH(e):t?BMe(e)<=t:!1}To.inlineRef=t8t;const n8t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function pH(e){for(const t in e){if(n8t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(pH)||typeof n=="object"&&pH(n))return!0}return!1}function BMe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!e8t.has(n)&&(typeof e[n]=="object"&&(0,Q5t.eachItem)(e[n],r=>t+=BMe(r)),t===1/0))return 1/0}return t}function jMe(e,t="",n){n!==!1&&(t=Sw(t));const r=e.parse(t);return UMe(e,r)}To.getFullPath=jMe;function UMe(e,t){return e.serialize(t).split("#")[0]+"#"}To._getFullPath=UMe;const r8t=/#\/?$/;function Sw(e){return e?e.replace(r8t,""):""}To.normalizeId=Sw;function i8t(e,t,n){return n=Sw(n),e.resolve(t,n)}To.resolveUrl=i8t;const s8t=/^[a-z_][-a-z0-9._]*$/i;function o8t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Sw(e[n]||t),s={"":i},o=jMe(r,i,!1),a={},u=new Set;return Z5t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=Sw(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let x=this.refs[_];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?l(f,x.schema,_):_!==Sw(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!s8t.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!J5t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}To.getSchemaRefs=o8t;Object.defineProperty(vf,"__esModule",{value:!0});vf.getData=vf.KeywordCxt=vf.validateFunctionCode=void 0;const zMe=wE,qme=UI,qQ=$p,oM=UI,a8t=$F,F2=Id,$j=Qg,Dt=Ln,rn=Eh,u8t=To,Rp=dr,qx=jI;function l8t(e){if(qMe(e)&&(WMe(e),HMe(e))){d8t(e);return}VMe(e,()=>(0,zMe.topBoolOrEmptySchema)(e))}vf.validateFunctionCode=l8t;function VMe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${rn.default.data}, ${rn.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${Wme(n,i)}`),f8t(e,i),e.code(s)}):e.func(t,(0,Dt._)`${rn.default.data}, ${c8t(i)}`,r.$async,()=>e.code(Wme(n,i)).code(s))}function c8t(e){return(0,Dt._)`{${rn.default.instancePath}="", ${rn.default.parentData}, ${rn.default.parentDataProperty}, ${rn.default.rootData}=${rn.default.data}${e.dynamicRef?(0,Dt._)`, ${rn.default.dynamicAnchors}={}`:Dt.nil}}={}`}function f8t(e,t){e.if(rn.default.valCxt,()=>{e.var(rn.default.instancePath,(0,Dt._)`${rn.default.valCxt}.${rn.default.instancePath}`),e.var(rn.default.parentData,(0,Dt._)`${rn.default.valCxt}.${rn.default.parentData}`),e.var(rn.default.parentDataProperty,(0,Dt._)`${rn.default.valCxt}.${rn.default.parentDataProperty}`),e.var(rn.default.rootData,(0,Dt._)`${rn.default.valCxt}.${rn.default.rootData}`),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Dt._)`${rn.default.valCxt}.${rn.default.dynamicAnchors}`)},()=>{e.var(rn.default.instancePath,(0,Dt._)`""`),e.var(rn.default.parentData,(0,Dt._)`undefined`),e.var(rn.default.parentDataProperty,(0,Dt._)`undefined`),e.var(rn.default.rootData,rn.default.data),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Dt._)`{}`)})}function d8t(e){const{schema:t,opts:n,gen:r}=e;VMe(e,()=>{n.$comment&&t.$comment&&YMe(e),y8t(e),r.let(rn.default.vErrors,null),r.let(rn.default.errors,0),n.unevaluated&&h8t(e),GMe(e),b8t(e)})}function h8t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function Wme(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function p8t(e,t){if(qMe(e)&&(WMe(e),HMe(e))){m8t(e,t);return}(0,zMe.boolOrEmptySchema)(e,t)}function HMe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function qMe(e){return typeof e.schema!="boolean"}function m8t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&YMe(e),v8t(e),_8t(e);const s=r.const("_errs",rn.default.errors);GMe(e,s),r.var(t,(0,Dt._)`${s} === ${rn.default.errors}`)}function WMe(e){(0,Rp.checkUnknownRules)(e),g8t(e)}function GMe(e,t){if(e.opts.jtd)return Gme(e,[],!1,t);const n=(0,qme.getSchemaTypes)(e.schema),r=(0,qme.coerceAndCheckDataType)(e,n);Gme(e,n,!r,t)}function g8t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Rp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function y8t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Rp.checkStrictMode)(e,"default is ignored in the schema root")}function v8t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,u8t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function _8t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function YMe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function b8t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${rn.default.errors} === 0`,()=>t.return(rn.default.data),()=>t.throw((0,Dt._)`new ${i}(${rn.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,rn.default.vErrors),s.unevaluated&&w8t(e),t.return((0,Dt._)`${rn.default.errors} === 0`))}function w8t({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function Gme(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Rp.schemaHasRulesButRef)(s,c))){i.block(()=>QMe(e,"$ref",c.all.$ref.definition));return}u.jtd||E8t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,qQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,oM.checkDataType)(d.type,o,u.strictNumbers)),Yme(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,oM.reportTypeError)(e)),i.endIf()):Yme(e,d),a||i.if((0,Dt._)`${rn.default.errors} === ${r||0}`))}}function Yme(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,a8t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,qQ.shouldUseRule)(r,s)&&QMe(e,s.keyword,s.definition,t.type)})}function E8t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(S8t(e,t),e.opts.allowUnionTypes||x8t(e,t),T8t(e,e.dataTypes))}function S8t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{KMe(e.dataTypes,n)||WQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),C8t(e,t)}}function x8t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&WQ(e,"use allowUnionTypes to allow union type keyword")}function T8t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,qQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>A8t(t,o))&&WQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function A8t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function KMe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function C8t(e,t){const n=[];for(const r of e.dataTypes)KMe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function WQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Rp.checkStrictMode)(e,t,e.opts.strictTypes)}class XMe{constructor(t,n,r){if((0,F2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Rp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",JMe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,F2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",rn.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?qx.reportExtraError:qx.reportError)(this,this.def.error,n)}$dataError(){(0,qx.reportError)(this,this.def.$dataError||qx.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,qx.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,oM.checkDataTypes)(u,n,s.opts.strictNumbers,oM.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,$j.getSubschema)(this.it,t);(0,$j.extendSubschemaData)(r,this.it,t),(0,$j.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return p8t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Rp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Rp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}vf.KeywordCxt=XMe;function QMe(e,t,n,r){const i=new XMe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,F2.funcKeywordCode)(i,n):"macro"in n?(0,F2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,F2.funcKeywordCode)(i,n)}const I8t=/^\/(?:[^~]|~0|~1)*$/,O8t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function JMe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return rn.default.rootData;if(e[0]==="/"){if(!I8t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=rn.default.rootData}else{const l=O8t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,Rp.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}vf.getData=JMe;var zI={};Object.defineProperty(zI,"__esModule",{value:!0});class P8t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}zI.default=P8t;var VI={};Object.defineProperty(VI,"__esModule",{value:!0});const Rj=To;class k8t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Rj.resolveUrl)(t,n,r),this.missingSchema=(0,Rj.normalizeId)((0,Rj.getFullPath)(t,this.missingRef))}}VI.default=k8t;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.resolveSchema=_u.getCompilingSchema=_u.resolveRef=_u.compileSchema=_u.SchemaEnv=void 0;const Fc=Ln,$8t=zI,$y=Eh,sf=To,Kme=dr,R8t=vf;class RF{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,sf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}_u.SchemaEnv=RF;function GQ(e){const t=ZMe.call(this,e);if(t)return t;const n=(0,sf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Fc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:$8t.default,code:(0,Fc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:$y.default.data,parentData:$y.default.parentData,parentDataProperty:$y.default.parentDataProperty,dataNames:[$y.default.data],dataPathArr:[Fc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Fc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Fc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Fc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,R8t.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs($y.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${$y.default.self}`,`${$y.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Fc.Name?void 0:p,items:m instanceof Fc.Name?void 0:m,dynamicProps:p instanceof Fc.Name,dynamicItems:m instanceof Fc.Name},h.source&&(h.source.evaluated=(0,Fc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}_u.compileSchema=GQ;function N8t(e,t,n){var r;n=(0,sf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=L8t.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new RF({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=D8t.call(this,s)}_u.resolveRef=N8t;function D8t(e){return(0,sf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:GQ.call(this,e)}function ZMe(e){for(const t of this._compilations)if(M8t(t,e))return t}_u.getCompilingSchema=ZMe;function M8t(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function L8t(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||NF.call(this,e,t)}function NF(e,t){const n=this.opts.uriResolver.parse(t),r=(0,sf._getFullPath)(this.opts.uriResolver,n);let i=(0,sf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Nj.call(this,n,e);const s=(0,sf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=NF.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Nj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||GQ.call(this,o),s===(0,sf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,sf.resolveUrl)(this.opts.uriResolver,i,l)),new RF({schema:a,schemaId:u,root:e,baseId:i})}return Nj.call(this,n,o)}}_u.resolveSchema=NF;const F8t=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Nj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Kme.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!F8t.has(a)&&l&&(t=(0,sf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Kme.schemaHasRulesButRef)(n,this.RULES)){const a=(0,sf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=NF.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new RF({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const B8t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",j8t="Meta-schema for $data reference (JSON AnySchema extension proposal)",U8t="object",z8t=["$data"],V8t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},H8t=!1,q8t={$id:B8t,description:j8t,type:U8t,required:z8t,properties:V8t,additionalProperties:H8t};var YQ={},mH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Eu,function(n){function r(){for(var oe=arguments.length,ne=Array(oe),ue=0;ue<oe;ue++)ne[ue]=arguments[ue];if(ne.length>1){ne[0]=ne[0].slice(0,-1);for(var Ee=ne.length-1,Se=1;Se<Ee;++Se)ne[Se]=ne[Se].slice(1,-1);return ne[Ee]=ne[Ee].slice(1),ne.join("")}else return ne[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ne){var ue=oe;if(ne)for(var Ee in ne)ue[Ee]=ne[Ee];return ue}function l(oe){var ne="[A-Za-z]",ue="[0-9]",Ee=r(ue,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ee+"%"+Ee+Ee+"%"+Ee+Ee)+"|"+i("%[89A-Fa-f]"+Ee+"%"+Ee+Ee)+"|"+i("%"+Ee+Ee)),St="[\\:\\/\\?\\#\\[\\]\\@]",ke="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",_t=r(St,ke),Ft=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ct=oe?"[\\uE000-\\uF8FF]":"[]",Bt=r(ne,ue,"[\\-\\.\\_\\~]",Ft);i(ne+r(ne,ue,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(Bt,ke,"[\\:]"))+"*");var un=i(i("25[0-5]")+"|"+i("2[0-4]"+ue)+"|"+i("1"+ue+ue)+"|"+i("0?[1-9]"+ue)+"|0?0?"+ue),Er=i(un+"\\."+un+"\\."+un+"\\."+un),qt=i(Ee+"{1,4}"),ir=i(i(qt+"\\:"+qt)+"|"+Er),en=i(i(qt+"\\:")+"{6}"+ir),Gn=i("\\:\\:"+i(qt+"\\:")+"{5}"+ir),si=i(i(qt)+"?\\:\\:"+i(qt+"\\:")+"{4}"+ir),wi=i(i(i(qt+"\\:")+"{0,1}"+qt)+"?\\:\\:"+i(qt+"\\:")+"{3}"+ir),Ei=i(i(i(qt+"\\:")+"{0,2}"+qt)+"?\\:\\:"+i(qt+"\\:")+"{2}"+ir),Cs=i(i(i(qt+"\\:")+"{0,3}"+qt)+"?\\:\\:"+qt+"\\:"+ir),Di=i(i(i(qt+"\\:")+"{0,4}"+qt)+"?\\:\\:"+ir),Sr=i(i(i(qt+"\\:")+"{0,5}"+qt)+"?\\:\\:"+qt),wt=i(i(i(qt+"\\:")+"{0,6}"+qt)+"?\\:\\:"),An=i([en,Gn,si,wi,Ei,Cs,Di,Sr,wt].join("|")),Rr=i(i(Bt+"|"+Se)+"+");i("[vV]"+Ee+"+\\."+r(Bt,ke,"[\\:]")+"+"),i(i(Se+"|"+r(Bt,ke))+"*");var ns=i(Se+"|"+r(Bt,ke,"[\\:\\@]"));return i(i(Se+"|"+r(Bt,ke,"[\\@]"))+"+"),i(i(ns+"|"+r("[\\/\\?]",Ct))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ne,ue,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Bt,ke),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Bt,ke),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Bt,ke),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Bt,ke),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Bt,ke,"[\\:\\@\\/\\?]",Ct),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Bt,ke,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Bt,ke),"g"),UNRESERVED:new RegExp(Bt,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Bt,_t),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Er+")$"),IPV6ADDRESS:new RegExp("^\\[?("+An+")"+i(i("\\%25|\\%(?!"+Ee+"{2})")+"("+Rr+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ne,ue){var Ee=[],Se=!0,St=!1,ke=void 0;try{for(var _t=ne[Symbol.iterator](),Ft;!(Se=(Ft=_t.next()).done)&&(Ee.push(Ft.value),!(ue&&Ee.length===ue));Se=!0);}catch(Ct){St=!0,ke=Ct}finally{try{!Se&&_t.return&&_t.return()}finally{if(St)throw ke}}return Ee}return function(ne,ue){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return oe(ne,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ne=0,ue=Array(oe.length);ne<oe.length;ne++)ue[ne]=oe[ne];return ue}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,x=128,E="-",b=/^xn--/,T=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=m-g,N=Math.floor,k=String.fromCharCode;function L(oe){throw new RangeError(A[oe])}function B(oe,ne){for(var ue=[],Ee=oe.length;Ee--;)ue[Ee]=ne(oe[Ee]);return ue}function U(oe,ne){var ue=oe.split("@"),Ee="";ue.length>1&&(Ee=ue[0]+"@",oe=ue[1]),oe=oe.replace(C,".");var Se=oe.split("."),St=B(Se,ne).join(".");return Ee+St}function G(oe){for(var ne=[],ue=0,Ee=oe.length;ue<Ee;){var Se=oe.charCodeAt(ue++);if(Se>=55296&&Se<=56319&&ue<Ee){var St=oe.charCodeAt(ue++);(St&64512)==56320?ne.push(((Se&1023)<<10)+(St&1023)+65536):(ne.push(Se),ue--)}else ne.push(Se)}return ne}var H=function(ne){return String.fromCodePoint.apply(String,h(ne))},Y=function(ne){return ne-48<10?ne-22:ne-65<26?ne-65:ne-97<26?ne-97:m},q=function(ne,ue){return ne+22+75*(ne<26)-((ue!=0)<<5)},D=function(ne,ue,Ee){var Se=0;for(ne=Ee?N(ne/_):ne>>1,ne+=N(ne/ue);ne>O*y>>1;Se+=m)ne=N(ne/O);return N(Se+(O+1)*ne/(ne+v))},M=function(ne){var ue=[],Ee=ne.length,Se=0,St=x,ke=w,_t=ne.lastIndexOf(E);_t<0&&(_t=0);for(var Ft=0;Ft<_t;++Ft)ne.charCodeAt(Ft)>=128&&L("not-basic"),ue.push(ne.charCodeAt(Ft));for(var Ct=_t>0?_t+1:0;Ct<Ee;){for(var Bt=Se,un=1,Er=m;;Er+=m){Ct>=Ee&&L("invalid-input");var qt=Y(ne.charCodeAt(Ct++));(qt>=m||qt>N((p-Se)/un))&&L("overflow"),Se+=qt*un;var ir=Er<=ke?g:Er>=ke+y?y:Er-ke;if(qt<ir)break;var en=m-ir;un>N(p/en)&&L("overflow"),un*=en}var Gn=ue.length+1;ke=D(Se-Bt,Gn,Bt==0),N(Se/Gn)>p-St&&L("overflow"),St+=N(Se/Gn),Se%=Gn,ue.splice(Se++,0,St)}return String.fromCodePoint.apply(String,ue)},W=function(ne){var ue=[];ne=G(ne);var Ee=ne.length,Se=x,St=0,ke=w,_t=!0,Ft=!1,Ct=void 0;try{for(var Bt=ne[Symbol.iterator](),un;!(_t=(un=Bt.next()).done);_t=!0){var Er=un.value;Er<128&&ue.push(k(Er))}}catch(Oe){Ft=!0,Ct=Oe}finally{try{!_t&&Bt.return&&Bt.return()}finally{if(Ft)throw Ct}}var qt=ue.length,ir=qt;for(qt&&ue.push(E);ir<Ee;){var en=p,Gn=!0,si=!1,wi=void 0;try{for(var Ei=ne[Symbol.iterator](),Cs;!(Gn=(Cs=Ei.next()).done);Gn=!0){var Di=Cs.value;Di>=Se&&Di<en&&(en=Di)}}catch(Oe){si=!0,wi=Oe}finally{try{!Gn&&Ei.return&&Ei.return()}finally{if(si)throw wi}}var Sr=ir+1;en-Se>N((p-St)/Sr)&&L("overflow"),St+=(en-Se)*Sr,Se=en;var wt=!0,An=!1,Rr=void 0;try{for(var ns=ne[Symbol.iterator](),po;!(wt=(po=ns.next()).done);wt=!0){var K=po.value;if(K<Se&&++St>p&&L("overflow"),K==Se){for(var se=St,Z=m;;Z+=m){var ge=Z<=ke?g:Z>=ke+y?y:Z-ke;if(se<ge)break;var ve=se-ge,pe=m-ge;ue.push(k(q(ge+ve%pe,0))),se=N(ve/pe)}ue.push(k(q(se,0))),ke=D(St,Sr,ir==qt),St=0,++ir}}}catch(Oe){An=!0,Rr=Oe}finally{try{!wt&&ns.return&&ns.return()}finally{if(An)throw Rr}}++St,++Se}return ue.join("")},z=function(ne){return U(ne,function(ue){return b.test(ue)?M(ue.slice(4).toLowerCase()):ue})},V=function(ne){return U(ne,function(ue){return T.test(ue)?"xn--"+W(ue):ue})},te={version:"2.1.0",ucs2:{decode:G,encode:H},decode:M,encode:W,toASCII:V,toUnicode:z},le={};function me(oe){var ne=oe.charCodeAt(0),ue=void 0;return ne<16?ue="%0"+ne.toString(16).toUpperCase():ne<128?ue="%"+ne.toString(16).toUpperCase():ne<2048?ue="%"+(ne>>6|192).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase():ue="%"+(ne>>12|224).toString(16).toUpperCase()+"%"+(ne>>6&63|128).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase(),ue}function ye(oe){for(var ne="",ue=0,Ee=oe.length;ue<Ee;){var Se=parseInt(oe.substr(ue+1,2),16);if(Se<128)ne+=String.fromCharCode(Se),ue+=3;else if(Se>=194&&Se<224){if(Ee-ue>=6){var St=parseInt(oe.substr(ue+4,2),16);ne+=String.fromCharCode((Se&31)<<6|St&63)}else ne+=oe.substr(ue,6);ue+=6}else if(Se>=224){if(Ee-ue>=9){var ke=parseInt(oe.substr(ue+4,2),16),_t=parseInt(oe.substr(ue+7,2),16);ne+=String.fromCharCode((Se&15)<<12|(ke&63)<<6|_t&63)}else ne+=oe.substr(ue,9);ue+=9}else ne+=oe.substr(ue,3),ue+=3}return ne}function de(oe,ne){function ue(Ee){var Se=ye(Ee);return Se.match(ne.UNRESERVED)?Se:Ee}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ne.PCT_ENCODED,ue).toLowerCase().replace(ne.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ne.PCT_ENCODED,ue).replace(ne.NOT_USERINFO,me).replace(ne.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ne.PCT_ENCODED,ue).toLowerCase().replace(ne.NOT_HOST,me).replace(ne.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ne.PCT_ENCODED,ue).replace(oe.scheme?ne.NOT_PATH:ne.NOT_PATH_NOSCHEME,me).replace(ne.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ne.PCT_ENCODED,ue).replace(ne.NOT_QUERY,me).replace(ne.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ne.PCT_ENCODED,ue).replace(ne.NOT_FRAGMENT,me).replace(ne.PCT_ENCODED,o)),oe}function we(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function he(oe,ne){var ue=oe.match(ne.IPV4ADDRESS)||[],Ee=d(ue,2),Se=Ee[1];return Se?Se.split(".").map(we).join("."):oe}function Ve(oe,ne){var ue=oe.match(ne.IPV6ADDRESS)||[],Ee=d(ue,3),Se=Ee[1],St=Ee[2];if(Se){for(var ke=Se.toLowerCase().split("::").reverse(),_t=d(ke,2),Ft=_t[0],Ct=_t[1],Bt=Ct?Ct.split(":").map(we):[],un=Ft.split(":").map(we),Er=ne.IPV4ADDRESS.test(un[un.length-1]),qt=Er?7:8,ir=un.length-qt,en=Array(qt),Gn=0;Gn<qt;++Gn)en[Gn]=Bt[Gn]||un[ir+Gn]||"";Er&&(en[qt-1]=he(en[qt-1],ne));var si=en.reduce(function(Sr,wt,An){if(!wt||wt==="0"){var Rr=Sr[Sr.length-1];Rr&&Rr.index+Rr.length===An?Rr.length++:Sr.push({index:An,length:1})}return Sr},[]),wi=si.sort(function(Sr,wt){return wt.length-Sr.length})[0],Ei=void 0;if(wi&&wi.length>1){var Cs=en.slice(0,wi.index),Di=en.slice(wi.index+wi.length);Ei=Cs.join(":")+"::"+Di.join(":")}else Ei=en.join(":");return St&&(Ei+="%"+St),Ei}else return oe}var Me=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ye="".match(/(){0}/)[1]===void 0;function Fe(oe){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue={},Ee=ne.iri!==!1?f:c;ne.reference==="suffix"&&(oe=(ne.scheme?ne.scheme+":":"")+"//"+oe);var Se=oe.match(Me);if(Se){Ye?(ue.scheme=Se[1],ue.userinfo=Se[3],ue.host=Se[4],ue.port=parseInt(Se[5],10),ue.path=Se[6]||"",ue.query=Se[7],ue.fragment=Se[8],isNaN(ue.port)&&(ue.port=Se[5])):(ue.scheme=Se[1]||void 0,ue.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ue.host=oe.indexOf("//")!==-1?Se[4]:void 0,ue.port=parseInt(Se[5],10),ue.path=Se[6]||"",ue.query=oe.indexOf("?")!==-1?Se[7]:void 0,ue.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ue.port)&&(ue.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ue.host&&(ue.host=Ve(he(ue.host,Ee),Ee)),ue.scheme===void 0&&ue.userinfo===void 0&&ue.host===void 0&&ue.port===void 0&&!ue.path&&ue.query===void 0?ue.reference="same-document":ue.scheme===void 0?ue.reference="relative":ue.fragment===void 0?ue.reference="absolute":ue.reference="uri",ne.reference&&ne.reference!=="suffix"&&ne.reference!==ue.reference&&(ue.error=ue.error||"URI is not a "+ne.reference+" reference.");var St=le[(ne.scheme||ue.scheme||"").toLowerCase()];if(!ne.unicodeSupport&&(!St||!St.unicodeSupport)){if(ue.host&&(ne.domainHost||St&&St.domainHost))try{ue.host=te.toASCII(ue.host.replace(Ee.PCT_ENCODED,ye).toLowerCase())}catch(ke){ue.error=ue.error||"Host's domain name can not be converted to ASCII via punycode: "+ke}de(ue,c)}else de(ue,Ee);St&&St.parse&&St.parse(ue,ne)}else ue.error=ue.error||"URI can not be parsed.";return ue}function De(oe,ne){var ue=ne.iri!==!1?f:c,Ee=[];return oe.userinfo!==void 0&&(Ee.push(oe.userinfo),Ee.push("@")),oe.host!==void 0&&Ee.push(Ve(he(String(oe.host),ue),ue).replace(ue.IPV6ADDRESS,function(Se,St,ke){return"["+St+(ke?"%25"+ke:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ee.push(":"),Ee.push(String(oe.port))),Ee.length?Ee.join(""):void 0}var He=/^\.\.?\//,Qt=/^\/\.(\/|$)/,nt=/^\/\.\.(\/|$)/,qe=/^\/?(?:.|\n)*?(?=\/|$)/;function Pt(oe){for(var ne=[];oe.length;)if(oe.match(He))oe=oe.replace(He,"");else if(oe.match(Qt))oe=oe.replace(Qt,"/");else if(oe.match(nt))oe=oe.replace(nt,"/"),ne.pop();else if(oe==="."||oe==="..")oe="";else{var ue=oe.match(qe);if(ue){var Ee=ue[0];oe=oe.slice(Ee.length),ne.push(Ee)}else throw new Error("Unexpected dot segment condition")}return ne.join("")}function at(oe){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=ne.iri?f:c,Ee=[],Se=le[(ne.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ne),oe.host&&!ue.IPV6ADDRESS.test(oe.host)){if(ne.domainHost||Se&&Se.domainHost)try{oe.host=ne.iri?te.toUnicode(oe.host):te.toASCII(oe.host.replace(ue.PCT_ENCODED,ye).toLowerCase())}catch(_t){oe.error=oe.error||"Host's domain name can not be converted to "+(ne.iri?"Unicode":"ASCII")+" via punycode: "+_t}}de(oe,ue),ne.reference!=="suffix"&&oe.scheme&&(Ee.push(oe.scheme),Ee.push(":"));var St=De(oe,ne);if(St!==void 0&&(ne.reference!=="suffix"&&Ee.push("//"),Ee.push(St),oe.path&&oe.path.charAt(0)!=="/"&&Ee.push("/")),oe.path!==void 0){var ke=oe.path;!ne.absolutePath&&(!Se||!Se.absolutePath)&&(ke=Pt(ke)),St===void 0&&(ke=ke.replace(/^\/\//,"/%2F")),Ee.push(ke)}return oe.query!==void 0&&(Ee.push("?"),Ee.push(oe.query)),oe.fragment!==void 0&&(Ee.push("#"),Ee.push(oe.fragment)),Ee.join("")}function ht(oe,ne){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=arguments[3],Se={};return Ee||(oe=Fe(at(oe,ue),ue),ne=Fe(at(ne,ue),ue)),ue=ue||{},!ue.tolerant&&ne.scheme?(Se.scheme=ne.scheme,Se.userinfo=ne.userinfo,Se.host=ne.host,Se.port=ne.port,Se.path=Pt(ne.path||""),Se.query=ne.query):(ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0?(Se.userinfo=ne.userinfo,Se.host=ne.host,Se.port=ne.port,Se.path=Pt(ne.path||""),Se.query=ne.query):(ne.path?(ne.path.charAt(0)==="/"?Se.path=Pt(ne.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ne.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ne.path:Se.path=ne.path,Se.path=Pt(Se.path)),Se.query=ne.query):(Se.path=oe.path,ne.query!==void 0?Se.query=ne.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ne.fragment,Se}function vt(oe,ne,ue){var Ee=u({scheme:"null"},ue);return at(ht(Fe(oe,Ee),Fe(ne,Ee),Ee,!0),Ee)}function Ht(oe,ne){return typeof oe=="string"?oe=at(Fe(oe,ne),ne):s(oe)==="object"&&(oe=Fe(at(oe,ne),ne)),oe}function Xt(oe,ne,ue){return typeof oe=="string"?oe=at(Fe(oe,ue),ue):s(oe)==="object"&&(oe=at(oe,ue)),typeof ne=="string"?ne=at(Fe(ne,ue),ue):s(ne)==="object"&&(ne=at(ne,ue)),oe===ne}function fe(oe,ne){return oe&&oe.toString().replace(!ne||!ne.iri?c.ESCAPE:f.ESCAPE,me)}function xe(oe,ne){return oe&&oe.toString().replace(!ne||!ne.iri?c.PCT_ENCODED:f.PCT_ENCODED,ye)}var Le={scheme:"http",domainHost:!0,parse:function(ne,ue){return ne.host||(ne.error=ne.error||"HTTP URIs must have a host."),ne},serialize:function(ne,ue){var Ee=String(ne.scheme).toLowerCase()==="https";return(ne.port===(Ee?443:80)||ne.port==="")&&(ne.port=void 0),ne.path||(ne.path="/"),ne}},ct={scheme:"https",domainHost:Le.domainHost,parse:Le.parse,serialize:Le.serialize};function Je(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var lt={scheme:"ws",domainHost:!0,parse:function(ne,ue){var Ee=ne;return Ee.secure=Je(Ee),Ee.resourceName=(Ee.path||"/")+(Ee.query?"?"+Ee.query:""),Ee.path=void 0,Ee.query=void 0,Ee},serialize:function(ne,ue){if((ne.port===(Je(ne)?443:80)||ne.port==="")&&(ne.port=void 0),typeof ne.secure=="boolean"&&(ne.scheme=ne.secure?"wss":"ws",ne.secure=void 0),ne.resourceName){var Ee=ne.resourceName.split("?"),Se=d(Ee,2),St=Se[0],ke=Se[1];ne.path=St&&St!=="/"?St:void 0,ne.query=ke,ne.resourceName=void 0}return ne.fragment=void 0,ne}},st={scheme:"wss",domainHost:lt.domainHost,parse:lt.parse,serialize:lt.serialize},At={},Tn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Zt="[0-9A-Fa-f]",Jt=i(i("%[EFef]"+Zt+"%"+Zt+Zt+"%"+Zt+Zt)+"|"+i("%[89A-Fa-f]"+Zt+"%"+Zt+Zt)+"|"+i("%"+Zt+Zt)),nr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Bn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Bo=r(Bn,'[\\"\\\\]'),hr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ni=new RegExp(Tn,"g"),jr=new RegExp(Jt,"g"),Ir=new RegExp(r("[^]",nr,"[\\.]",'[\\"]',Bo),"g"),Ur=new RegExp(r("[^]",Tn,hr),"g"),rr=Ur;function Et(oe){var ne=ye(oe);return ne.match(Ni)?ne:oe}var pr={scheme:"mailto",parse:function(ne,ue){var Ee=ne,Se=Ee.to=Ee.path?Ee.path.split(","):[];if(Ee.path=void 0,Ee.query){for(var St=!1,ke={},_t=Ee.query.split("&"),Ft=0,Ct=_t.length;Ft<Ct;++Ft){var Bt=_t[Ft].split("=");switch(Bt[0]){case"to":for(var un=Bt[1].split(","),Er=0,qt=un.length;Er<qt;++Er)Se.push(un[Er]);break;case"subject":Ee.subject=xe(Bt[1],ue);break;case"body":Ee.body=xe(Bt[1],ue);break;default:St=!0,ke[xe(Bt[0],ue)]=xe(Bt[1],ue);break}}St&&(Ee.headers=ke)}Ee.query=void 0;for(var ir=0,en=Se.length;ir<en;++ir){var Gn=Se[ir].split("@");if(Gn[0]=xe(Gn[0]),ue.unicodeSupport)Gn[1]=xe(Gn[1],ue).toLowerCase();else try{Gn[1]=te.toASCII(xe(Gn[1],ue).toLowerCase())}catch(si){Ee.error=Ee.error||"Email address's domain name can not be converted to ASCII via punycode: "+si}Se[ir]=Gn.join("@")}return Ee},serialize:function(ne,ue){var Ee=ne,Se=a(ne.to);if(Se){for(var St=0,ke=Se.length;St<ke;++St){var _t=String(Se[St]),Ft=_t.lastIndexOf("@"),Ct=_t.slice(0,Ft).replace(jr,Et).replace(jr,o).replace(Ir,me),Bt=_t.slice(Ft+1);try{Bt=ue.iri?te.toUnicode(Bt):te.toASCII(xe(Bt,ue).toLowerCase())}catch(ir){Ee.error=Ee.error||"Email address's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+ir}Se[St]=Ct+"@"+Bt}Ee.path=Se.join(",")}var un=ne.headers=ne.headers||{};ne.subject&&(un.subject=ne.subject),ne.body&&(un.body=ne.body);var Er=[];for(var qt in un)un[qt]!==At[qt]&&Er.push(qt.replace(jr,Et).replace(jr,o).replace(Ur,me)+"="+un[qt].replace(jr,Et).replace(jr,o).replace(rr,me));return Er.length&&(Ee.query=Er.join("&")),Ee}},fi=/^([^\:]+)\:(.*)/,jn={scheme:"urn",parse:function(ne,ue){var Ee=ne.path&&ne.path.match(fi),Se=ne;if(Ee){var St=ue.scheme||Se.scheme||"urn",ke=Ee[1].toLowerCase(),_t=Ee[2],Ft=St+":"+(ue.nid||ke),Ct=le[Ft];Se.nid=ke,Se.nss=_t,Se.path=void 0,Ct&&(Se=Ct.parse(Se,ue))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ne,ue){var Ee=ue.scheme||ne.scheme||"urn",Se=ne.nid,St=Ee+":"+(ue.nid||Se),ke=le[St];ke&&(ne=ke.serialize(ne,ue));var _t=ne,Ft=ne.nss;return _t.path=(Se||ue.nid)+":"+Ft,_t}},fs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ds={scheme:"urn:uuid",parse:function(ne,ue){var Ee=ne;return Ee.uuid=Ee.nss,Ee.nss=void 0,!ue.tolerant&&(!Ee.uuid||!Ee.uuid.match(fs))&&(Ee.error=Ee.error||"UUID is not valid."),Ee},serialize:function(ne,ue){var Ee=ne;return Ee.nss=(ne.uuid||"").toLowerCase(),Ee}};le[Le.scheme]=Le,le[ct.scheme]=ct,le[lt.scheme]=lt,le[st.scheme]=st,le[pr.scheme]=pr,le[jn.scheme]=jn,le[ds.scheme]=ds,n.SCHEMES=le,n.pctEncChar=me,n.pctDecChars=ye,n.parse=Fe,n.removeDotSegments=Pt,n.serialize=at,n.resolveComponents=ht,n.resolve=vt,n.normalize=Ht,n.equal=Xt,n.escapeComponent=fe,n.unescapeComponent=xe,Object.defineProperty(n,"__esModule",{value:!0})})})(mH,mH.exports);var W8t=mH.exports;Object.defineProperty(YQ,"__esModule",{value:!0});const eLe=W8t;eLe.code='require("ajv/dist/runtime/uri").default';YQ.default=eLe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=vf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Ln;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=zI,i=VI,s=w1,o=_u,a=Ln,u=To,l=UI,c=dr,f=q8t,d=YQ,h=(q,D)=>new RegExp(q,D);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(q){var D,M,W,z,V,te,le,me,ye,de,we,he,Ve,Me,Ye,Fe,De,He,Qt,nt,qe,Pt,at,ht,vt;const Ht=q.strict,Xt=(D=q.code)===null||D===void 0?void 0:D.optimize,fe=Xt===!0||Xt===void 0?1:Xt||0,xe=(W=(M=q.code)===null||M===void 0?void 0:M.regExp)!==null&&W!==void 0?W:h,Le=(z=q.uriResolver)!==null&&z!==void 0?z:d.default;return{strictSchema:(te=(V=q.strictSchema)!==null&&V!==void 0?V:Ht)!==null&&te!==void 0?te:!0,strictNumbers:(me=(le=q.strictNumbers)!==null&&le!==void 0?le:Ht)!==null&&me!==void 0?me:!0,strictTypes:(de=(ye=q.strictTypes)!==null&&ye!==void 0?ye:Ht)!==null&&de!==void 0?de:"log",strictTuples:(he=(we=q.strictTuples)!==null&&we!==void 0?we:Ht)!==null&&he!==void 0?he:"log",strictRequired:(Me=(Ve=q.strictRequired)!==null&&Ve!==void 0?Ve:Ht)!==null&&Me!==void 0?Me:!1,code:q.code?{...q.code,optimize:fe,regExp:xe}:{optimize:fe,regExp:xe},loopRequired:(Ye=q.loopRequired)!==null&&Ye!==void 0?Ye:v,loopEnum:(Fe=q.loopEnum)!==null&&Fe!==void 0?Fe:v,meta:(De=q.meta)!==null&&De!==void 0?De:!0,messages:(He=q.messages)!==null&&He!==void 0?He:!0,inlineRefs:(Qt=q.inlineRefs)!==null&&Qt!==void 0?Qt:!0,schemaId:(nt=q.schemaId)!==null&&nt!==void 0?nt:"$id",addUsedSchema:(qe=q.addUsedSchema)!==null&&qe!==void 0?qe:!0,validateSchema:(Pt=q.validateSchema)!==null&&Pt!==void 0?Pt:!0,validateFormats:(at=q.validateFormats)!==null&&at!==void 0?at:!0,unicodeRegExp:(ht=q.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=q.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:Le}}class w{constructor(D={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,D=this.opts={...D,..._(D)};const{es5:M,lines:W}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:M,lines:W}),this.logger=N(D.logger);const z=D.validateFormats;D.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,D,"NOT SUPPORTED"),x.call(this,y,D,"DEPRECATED","warn"),this._metaOpts=A.call(this),D.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),D.keywords&&C.call(this,D.keywords),typeof D.meta=="object"&&this.addMetaSchema(D.meta),b.call(this),D.validateFormats=z}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:D,meta:M,schemaId:W}=this.opts;let z=f;W==="id"&&(z={...f},z.id=z.$id,delete z.$id),M&&D&&this.addMetaSchema(z,z[W],!1)}defaultMeta(){const{meta:D,schemaId:M}=this.opts;return this.opts.defaultMeta=typeof D=="object"?D[M]||D:void 0}validate(D,M){let W;if(typeof D=="string"){if(W=this.getSchema(D),!W)throw new Error(`no schema with key or ref "${D}"`)}else W=this.compile(D);const z=W(M);return"$async"in W||(this.errors=W.errors),z}compile(D,M){const W=this._addSchema(D,M);return W.validate||this._compileSchemaEnv(W)}compileAsync(D,M){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:W}=this.opts;return z.call(this,D,M);async function z(de,we){await V.call(this,de.$schema);const he=this._addSchema(de,we);return he.validate||te.call(this,he)}async function V(de){de&&!this.getSchema(de)&&await z.call(this,{$ref:de},!0)}async function te(de){try{return this._compileSchemaEnv(de)}catch(we){if(!(we instanceof i.default))throw we;return le.call(this,we),await me.call(this,we.missingSchema),te.call(this,de)}}function le({missingSchema:de,missingRef:we}){if(this.refs[de])throw new Error(`AnySchema ${de} is loaded but ${we} cannot be resolved`)}async function me(de){const we=await ye.call(this,de);this.refs[de]||await V.call(this,we.$schema),this.refs[de]||this.addSchema(we,de,M)}async function ye(de){const we=this._loading[de];if(we)return we;try{return await(this._loading[de]=W(de))}finally{delete this._loading[de]}}}addSchema(D,M,W,z=this.opts.validateSchema){if(Array.isArray(D)){for(const te of D)this.addSchema(te,void 0,W,z);return this}let V;if(typeof D=="object"){const{schemaId:te}=this.opts;if(V=D[te],V!==void 0&&typeof V!="string")throw new Error(`schema ${te} must be string`)}return M=(0,u.normalizeId)(M||V),this._checkUnique(M),this.schemas[M]=this._addSchema(D,W,M,z,!0),this}addMetaSchema(D,M,W=this.opts.validateSchema){return this.addSchema(D,M,!0,W),this}validateSchema(D,M){if(typeof D=="boolean")return!0;let W;if(W=D.$schema,W!==void 0&&typeof W!="string")throw new Error("$schema must be a string");if(W=W||this.opts.defaultMeta||this.defaultMeta(),!W)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const z=this.validate(W,D);if(!z&&M){const V="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(V);else throw new Error(V)}return z}getSchema(D){let M;for(;typeof(M=E.call(this,D))=="string";)D=M;if(M===void 0){const{schemaId:W}=this.opts,z=new o.SchemaEnv({schema:{},schemaId:W});if(M=o.resolveSchema.call(this,z,D),!M)return;this.refs[D]=M}return M.validate||this._compileSchemaEnv(M)}removeSchema(D){if(D instanceof RegExp)return this._removeAllSchemas(this.schemas,D),this._removeAllSchemas(this.refs,D),this;switch(typeof D){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const M=E.call(this,D);return typeof M=="object"&&this._cache.delete(M.schema),delete this.schemas[D],delete this.refs[D],this}case"object":{const M=D;this._cache.delete(M);let W=D[this.opts.schemaId];return W&&(W=(0,u.normalizeId)(W),delete this.schemas[W],delete this.refs[W]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(D){for(const M of D)this.addKeyword(M);return this}addKeyword(D,M){let W;if(typeof D=="string")W=D,typeof M=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),M.keyword=W);else if(typeof D=="object"&&M===void 0){if(M=D,W=M.keyword,Array.isArray(W)&&!W.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,W,M),!M)return(0,c.eachItem)(W,V=>B.call(this,V)),this;G.call(this,M);const z={...M,type:(0,l.getJSONTypes)(M.type),schemaType:(0,l.getJSONTypes)(M.schemaType)};return(0,c.eachItem)(W,z.type.length===0?V=>B.call(this,V,z):V=>z.type.forEach(te=>B.call(this,V,z,te))),this}getKeyword(D){const M=this.RULES.all[D];return typeof M=="object"?M.definition:!!M}removeKeyword(D){const{RULES:M}=this;delete M.keywords[D],delete M.all[D];for(const W of M.rules){const z=W.rules.findIndex(V=>V.keyword===D);z>=0&&W.rules.splice(z,1)}return this}addFormat(D,M){return typeof M=="string"&&(M=new RegExp(M)),this.formats[D]=M,this}errorsText(D=this.errors,{separator:M=", ",dataVar:W="data"}={}){return!D||D.length===0?"No errors":D.map(z=>`${W}${z.instancePath} ${z.message}`).reduce((z,V)=>z+M+V)}$dataMetaSchema(D,M){const W=this.RULES.all;D=JSON.parse(JSON.stringify(D));for(const z of M){const V=z.split("/").slice(1);let te=D;for(const le of V)te=te[le];for(const le in W){const me=W[le];if(typeof me!="object")continue;const{$data:ye}=me.definition,de=te[le];ye&&de&&(te[le]=Y(de))}}return D}_removeAllSchemas(D,M){for(const W in D){const z=D[W];(!M||M.test(W))&&(typeof z=="string"?delete D[W]:z&&!z.meta&&(this._cache.delete(z.schema),delete D[W]))}}_addSchema(D,M,W,z=this.opts.validateSchema,V=this.opts.addUsedSchema){let te;const{schemaId:le}=this.opts;if(typeof D=="object")te=D[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof D!="boolean")throw new Error("schema must be object or boolean")}let me=this._cache.get(D);if(me!==void 0)return me;W=(0,u.normalizeId)(te||W);const ye=u.getSchemaRefs.call(this,D,W);return me=new o.SchemaEnv({schema:D,schemaId:le,meta:M,baseId:W,localRefs:ye}),this._cache.set(me.schema,me),V&&!W.startsWith("#")&&(W&&this._checkUnique(W),this.refs[W]=me),z&&this.validateSchema(D,!0),me}_checkUnique(D){if(this.schemas[D]||this.refs[D])throw new Error(`schema with key or id "${D}" already exists`)}_compileSchemaEnv(D){if(D.meta?this._compileMetaSchema(D):o.compileSchema.call(this,D),!D.validate)throw new Error("ajv implementation error");return D.validate}_compileMetaSchema(D){const M=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,D)}finally{this.opts=M}}}e.default=w,w.ValidationError=r.default,w.MissingRefError=i.default;function x(q,D,M,W="error"){for(const z in q){const V=z;V in D&&this.logger[W](`${M}: option ${z}. ${q[V]}`)}}function E(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function b(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const D in q)this.addSchema(q[D],D)}function T(){for(const q in this.opts.formats){const D=this.opts.formats[q];D&&this.addFormat(q,D)}}function C(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const D in q){const M=q[D];M.keyword||(M.keyword=D),this.addKeyword(M)}}function A(){const q={...this.opts};for(const D of p)delete q[D];return q}const O={log(){},warn(){},error(){}};function N(q){if(q===!1)return O;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const k=/^[a-z_$][a-z0-9_$:-]*$/i;function L(q,D){const{RULES:M}=this;if((0,c.eachItem)(q,W=>{if(M.keywords[W])throw new Error(`Keyword ${W} is already defined`);if(!k.test(W))throw new Error(`Keyword ${W} has invalid name`)}),!!D&&D.$data&&!("code"in D||"validate"in D))throw new Error('$data keyword must have "code" or "validate" function')}function B(q,D,M){var W;const z=D==null?void 0:D.post;if(M&&z)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:V}=this;let te=z?V.post:V.rules.find(({type:me})=>me===M);if(te||(te={type:M,rules:[]},V.rules.push(te)),V.keywords[q]=!0,!D)return;const le={keyword:q,definition:{...D,type:(0,l.getJSONTypes)(D.type),schemaType:(0,l.getJSONTypes)(D.schemaType)}};D.before?U.call(this,te,le,D.before):te.rules.push(le),V.all[q]=le,(W=D.implements)===null||W===void 0||W.forEach(me=>this.addKeyword(me))}function U(q,D,M){const W=q.rules.findIndex(z=>z.keyword===M);W>=0?q.rules.splice(W,0,D):(q.rules.push(D),this.logger.warn(`rule ${M} is not defined`))}function G(q){let{metaSchema:D}=q;D!==void 0&&(q.$data&&this.opts.$data&&(D=Y(D)),q.validateSchema=this.compile(D,!0))}const H={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Y(q){return{anyOf:[q,H]}}})(PMe);var KQ={},XQ={},QQ={};Object.defineProperty(QQ,"__esModule",{value:!0});const G8t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};QQ.default=G8t;var E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.callRef=E1.getValidate=void 0;const Y8t=VI,Xme=Dn,lu=Ln,K_=Eh,Qme=_u,lk=dr,K8t={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Qme.resolveRef.call(u,l,i,n);if(c===void 0)throw new Y8t.default(r.opts.uriResolver,i,n);if(c instanceof Qme.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return q$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return q$(e,(0,lu._)`${p}.validate`,l,l.$async)}function d(p){const m=tLe(e,p);q$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,lu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:lu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function tLe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,lu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}E1.getValidate=tLe;function q$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?K_.default.this:lu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,lu._)`await ${(0,Xme.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,lu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Xme.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,lu._)`${p}.errors`;i.assign(K_.default.vErrors,(0,lu._)`${K_.default.vErrors} === null ? ${m} : ${K_.default.vErrors}.concat(${m})`),i.assign(K_.default.errors,(0,lu._)`${K_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=lk.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,lu._)`${p}.evaluated.props`);s.props=lk.mergeEvaluated.props(i,y,s.props,lu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=lk.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,lu._)`${p}.evaluated.items`);s.items=lk.mergeEvaluated.items(i,y,s.items,lu.Name)}}}E1.callRef=q$;E1.default=K8t;Object.defineProperty(XQ,"__esModule",{value:!0});const X8t=QQ,Q8t=E1,J8t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",X8t.default,Q8t.default];XQ.default=J8t;var JQ={},ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const aM=Ln,Um=aM.operators,uM={maximum:{okStr:"<=",ok:Um.LTE,fail:Um.GT},minimum:{okStr:">=",ok:Um.GTE,fail:Um.LT},exclusiveMaximum:{okStr:"<",ok:Um.LT,fail:Um.GTE},exclusiveMinimum:{okStr:">",ok:Um.GT,fail:Um.LTE}},Z8t={message:({keyword:e,schemaCode:t})=>(0,aM.str)`must be ${uM[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,aM._)`{comparison: ${uM[e].okStr}, limit: ${t}}`},e9t={keyword:Object.keys(uM),type:"number",schemaType:"number",$data:!0,error:Z8t,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,aM._)`${n} ${uM[t].fail} ${r} || isNaN(${n})`)}};ZQ.default=e9t;var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});const B2=Ln,t9t={message:({schemaCode:e})=>(0,B2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,B2._)`{multipleOf: ${e}}`},n9t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:t9t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,B2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,B2._)`${o} !== parseInt(${o})`;e.fail$data((0,B2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};eJ.default=n9t;var tJ={},nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});function nLe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}nJ.default=nLe;nLe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(tJ,"__esModule",{value:!0});const fv=Ln,r9t=dr,i9t=nJ,s9t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,fv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,fv._)`{limit: ${e}}`},o9t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:s9t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?fv.operators.GT:fv.operators.LT,o=i.opts.unicode===!1?(0,fv._)`${n}.length`:(0,fv._)`${(0,r9t.useFunc)(e.gen,i9t.default)}(${n})`;e.fail$data((0,fv._)`${o} ${s} ${r}`)}};tJ.default=o9t;var rJ={};Object.defineProperty(rJ,"__esModule",{value:!0});const a9t=Dn,lM=Ln,u9t={message:({schemaCode:e})=>(0,lM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,lM._)`{pattern: ${e}}`},l9t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:u9t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,lM._)`(new RegExp(${i}, ${o}))`:(0,a9t.usePattern)(e,r);e.fail$data((0,lM._)`!${a}.test(${t})`)}};rJ.default=l9t;var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const j2=Ln,c9t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,j2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,j2._)`{limit: ${e}}`},f9t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:c9t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?j2.operators.GT:j2.operators.LT;e.fail$data((0,j2._)`Object.keys(${n}).length ${i} ${r}`)}};iJ.default=f9t;var sJ={};Object.defineProperty(sJ,"__esModule",{value:!0});const Wx=Dn,U2=Ln,d9t=dr,h9t={message:({params:{missingProperty:e}})=>(0,U2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,U2._)`{missingProperty: ${e}}`},p9t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:h9t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,d9t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(U2.nil,f);else for(const h of n)(0,Wx.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,Wx.checkMissingProp)(e,n,h)),(0,Wx.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,Wx.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,Wx.propertyInData)(t,i,h,a.ownProperties)),t.if((0,U2.not)(p),()=>{e.error(),t.break()})},U2.nil)}}};sJ.default=p9t;var oJ={};Object.defineProperty(oJ,"__esModule",{value:!0});const z2=Ln,m9t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,z2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,z2._)`{limit: ${e}}`},g9t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:m9t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?z2.operators.GT:z2.operators.LT;e.fail$data((0,z2._)`${n}.length ${i} ${r}`)}};oJ.default=g9t;var aJ={},HI={};Object.defineProperty(HI,"__esModule",{value:!0});const rLe=CK;rLe.code='require("ajv/dist/runtime/equal").default';HI.default=rLe;Object.defineProperty(aJ,"__esModule",{value:!0});const Dj=UI,vo=Ln,y9t=dr,v9t=HI,_9t={message:({params:{i:e,j:t}})=>(0,vo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,vo._)`{i: ${e}, j: ${t}}`},b9t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:_9t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Dj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,vo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,vo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,vo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Dj.checkDataTypes)(l,g,a.opts.strictNumbers,Dj.DataType.Wrong),v=t.const("indices",(0,vo._)`{}`);t.for((0,vo._)`;${p}--;`,()=>{t.let(g,(0,vo._)`${n}[${p}]`),t.if(y,(0,vo._)`continue`),l.length>1&&t.if((0,vo._)`typeof ${g} == "string"`,(0,vo._)`${g} += "_"`),t.if((0,vo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,vo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,vo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,y9t.useFunc)(t,v9t.default),y=t.name("outer");t.label(y).for((0,vo._)`;${p}--;`,()=>t.for((0,vo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,vo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};aJ.default=b9t;var uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const gH=Ln,w9t=dr,E9t=HI,S9t={message:"must be equal to constant",params:({schemaCode:e})=>(0,gH._)`{allowedValue: ${e}}`},x9t={keyword:"const",$data:!0,error:S9t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,gH._)`!${(0,w9t.useFunc)(t,E9t.default)}(${n}, ${i})`):e.fail((0,gH._)`${s} !== ${n}`)}};uJ.default=x9t;var lJ={};Object.defineProperty(lJ,"__esModule",{value:!0});const MT=Ln,T9t=dr,A9t=HI,C9t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,MT._)`{allowedValues: ${e}}`},I9t={keyword:"enum",schemaType:"array",$data:!0,error:C9t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,T9t.useFunc)(t,A9t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,MT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,MT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,MT._)`${l()}(${n}, ${h}[${p}])`:(0,MT._)`${n} === ${m}`}}};lJ.default=I9t;Object.defineProperty(JQ,"__esModule",{value:!0});const O9t=ZQ,P9t=eJ,k9t=tJ,$9t=rJ,R9t=iJ,N9t=sJ,D9t=oJ,M9t=aJ,L9t=uJ,F9t=lJ,B9t=[O9t.default,P9t.default,k9t.default,$9t.default,R9t.default,N9t.default,D9t.default,M9t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},L9t.default,F9t.default];JQ.default=B9t;var cJ={},RS={};Object.defineProperty(RS,"__esModule",{value:!0});RS.validateAdditionalItems=void 0;const dv=Ln,yH=dr,j9t={message:({params:{len:e}})=>(0,dv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,dv._)`{limit: ${e}}`},U9t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:j9t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,yH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}iLe(e,r)}};function iLe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,dv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,dv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,yH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,dv._)`${a} <= ${t.length}`);n.if((0,dv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:yH.Type.Num},l),o.allErrors||n.if((0,dv.not)(l),()=>n.break())})}}RS.validateAdditionalItems=iLe;RS.default=U9t;var fJ={},NS={};Object.defineProperty(NS,"__esModule",{value:!0});NS.validateTuple=void 0;const Jme=Ln,W$=dr,z9t=Dn,V9t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return sLe(e,"additionalItems",t);n.items=!0,!(0,W$.alwaysValidSchema)(n,t)&&e.ok((0,z9t.validateArray)(e))}};function sLe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=W$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Jme._)`${s}.length`);n.forEach((f,d)=>{(0,W$.alwaysValidSchema)(a,f)||(r.if((0,Jme._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,W$.checkStrictMode)(a,g,d.strictTuples)}}}NS.validateTuple=sLe;NS.default=V9t;Object.defineProperty(fJ,"__esModule",{value:!0});const H9t=NS,q9t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,H9t.validateTuple)(e,"items")};fJ.default=q9t;var dJ={};Object.defineProperty(dJ,"__esModule",{value:!0});const Zme=Ln,W9t=dr,G9t=Dn,Y9t=RS,K9t={message:({params:{len:e}})=>(0,Zme.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Zme._)`{limit: ${e}}`},X9t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:K9t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,W9t.alwaysValidSchema)(r,t)&&(i?(0,Y9t.validateAdditionalItems)(e,i):e.ok((0,G9t.validateArray)(e)))}};dJ.default=X9t;var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});const Wl=Ln,ck=dr,Q9t={message:({params:{min:e,max:t}})=>t===void 0?(0,Wl.str)`must contain at least ${e} valid item(s)`:(0,Wl.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Wl._)`{minContains: ${e}}`:(0,Wl._)`{minContains: ${e}, maxContains: ${t}}`},J9t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Q9t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Wl._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,ck.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ck.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,ck.alwaysValidSchema)(s,n)){let m=(0,Wl._)`${c} >= ${o}`;a!==void 0&&(m=(0,Wl._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Wl._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:ck.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Wl._)`${m}++`),a===void 0?t.if((0,Wl._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Wl._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Wl._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};hJ.default=J9t;var oLe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Ln,n=dr,r=Dn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(oLe);var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const aLe=Ln,Z9t=dr,eBt={message:"property name must be valid",params:({params:e})=>(0,aLe._)`{propertyName: ${e.propertyName}}`},tBt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:eBt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Z9t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,aLe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};pJ.default=tBt;var DF={};Object.defineProperty(DF,"__esModule",{value:!0});const fk=Dn,zc=Ln,nBt=Eh,dk=dr,rBt={message:"must NOT have additional properties",params:({params:e})=>(0,zc._)`{additionalProperty: ${e.additionalProperty}}`},iBt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:rBt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,dk.alwaysValidSchema)(o,n))return;const l=(0,fk.allSchemaProperties)(r.properties),c=(0,fk.allSchemaProperties)(r.patternProperties);f(),e.ok((0,zc._)`${s} === ${nBt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,dk.schemaRefOrVal)(o,r.properties,"properties");y=(0,fk.isOwnProperty)(t,v,g)}else l.length?y=(0,zc.or)(...l.map(v=>(0,zc._)`${g} === ${v}`)):y=zc.nil;return c.length&&(y=(0,zc.or)(y,...c.map(v=>(0,zc._)`${(0,fk.usePattern)(e,v)}.test(${g})`))),(0,zc.not)(y)}function h(g){t.code((0,zc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,dk.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,zc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,zc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:dk.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};DF.default=iBt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const sBt=vf,ege=Dn,Mj=dr,tge=DF,oBt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&tge.default.code(new sBt.KeywordCxt(s,tge.default,"additionalProperties"));const o=(0,ege.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Mj.mergeEvaluated.props(t,(0,Mj.toHash)(o),s.props));const a=o.filter(f=>!(0,Mj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,ege.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};mJ.default=oBt;var gJ={};Object.defineProperty(gJ,"__esModule",{value:!0});const nge=Dn,hk=Ln,rge=dr,ige=dr,aBt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,nge.allSchemaProperties)(n),u=a.filter(m=>(0,rge.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof hk.Name)&&(s.props=(0,ige.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,rge.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,hk._)`${(0,nge.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:ige.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,hk._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,hk.not)(c),()=>t.break())})})}}};gJ.default=aBt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const uBt=dr,lBt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,uBt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};yJ.default=lBt;var vJ={};Object.defineProperty(vJ,"__esModule",{value:!0});const cBt=Dn,fBt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:cBt.validateUnion,error:{message:"must match a schema in anyOf"}};vJ.default=fBt;var _J={};Object.defineProperty(_J,"__esModule",{value:!0});const G$=Ln,dBt=dr,hBt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,G$._)`{passingSchemas: ${e.passing}}`},pBt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:hBt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,dBt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,G$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,G$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,G$.Name)})})}}};_J.default=pBt;var bJ={};Object.defineProperty(bJ,"__esModule",{value:!0});const mBt=dr,gBt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,mBt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};bJ.default=gBt;var wJ={};Object.defineProperty(wJ,"__esModule",{value:!0});const cM=Ln,uLe=dr,yBt={message:({params:e})=>(0,cM.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,cM._)`{failingKeyword: ${e.ifClause}}`},vBt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:yBt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,uLe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=sge(r,"then"),s=sge(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,cM.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,cM._)`${c}`):e.setParams({ifClause:c})}}}};function sge(e,t){const n=e.schema[t];return n!==void 0&&!(0,uLe.alwaysValidSchema)(e,n)}wJ.default=vBt;var EJ={};Object.defineProperty(EJ,"__esModule",{value:!0});const _Bt=dr,bBt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,_Bt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};EJ.default=bBt;Object.defineProperty(cJ,"__esModule",{value:!0});const wBt=RS,EBt=fJ,SBt=NS,xBt=dJ,TBt=hJ,ABt=oLe,CBt=pJ,IBt=DF,OBt=mJ,PBt=gJ,kBt=yJ,$Bt=vJ,RBt=_J,NBt=bJ,DBt=wJ,MBt=EJ;function LBt(e=!1){const t=[kBt.default,$Bt.default,RBt.default,NBt.default,DBt.default,MBt.default,CBt.default,IBt.default,ABt.default,OBt.default,PBt.default];return e?t.push(EBt.default,xBt.default):t.push(wBt.default,SBt.default),t.push(TBt.default),t}cJ.default=LBt;var SJ={},xJ={};Object.defineProperty(xJ,"__esModule",{value:!0});const is=Ln,FBt={message:({schemaCode:e})=>(0,is.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,is._)`{format: ${e}}`},BBt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:FBt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,is._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,is._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,is._)`${m}.type || "string"`).assign(y,(0,is._)`${m}.validate`),()=>n.assign(g,(0,is._)`"string"`).assign(y,m)),e.fail$data((0,is.or)(v(),_()));function v(){return u.strictSchema===!1?is.nil:(0,is._)`${o} && !${y}`}function _(){const w=c.$async?(0,is._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,is._)`${y}(${r})`,x=(0,is._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,is._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(x){const E=x instanceof RegExp?(0,is.regexpCode)(x):u.code.formats?(0,is._)`${u.code.formats}${(0,is.getProperty)(s)}`:void 0,b=n.scopeValue("formats",{key:s,ref:x,code:E});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,is._)`${b}.validate`]:["string",x,b]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,is._)`await ${y}(${r})`}return typeof g=="function"?(0,is._)`${y}(${r})`:(0,is._)`${y}.test(${r})`}}}};xJ.default=BBt;Object.defineProperty(SJ,"__esModule",{value:!0});const jBt=xJ,UBt=[jBt.default];SJ.default=UBt;var EE={};Object.defineProperty(EE,"__esModule",{value:!0});EE.contentVocabulary=EE.metadataVocabulary=void 0;EE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];EE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(KQ,"__esModule",{value:!0});const zBt=XQ,VBt=JQ,HBt=cJ,qBt=SJ,oge=EE,WBt=[zBt.default,VBt.default,(0,HBt.default)(),qBt.default,oge.metadataVocabulary,oge.contentVocabulary];KQ.default=WBt;var TJ={},lLe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(lLe);Object.defineProperty(TJ,"__esModule",{value:!0});const mb=Ln,vH=lLe,age=_u,GBt=dr,YBt={message:({params:{discrError:e,tagName:t}})=>e===vH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,mb._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},KBt={keyword:"discriminator",type:"object",schemaType:"object",error:YBt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,mb._)`${n}${(0,mb.getProperty)(a)}`);t.if((0,mb._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:vH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,mb._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:vH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,mb.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let x=o[w];x!=null&&x.$ref&&!(0,GBt.schemaHasRulesButRef)(x,s.self.RULES)&&(x=age.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,x==null?void 0:x.$ref),x instanceof age.SchemaEnv&&(x=x.schema));const E=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof E!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(E,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,x){if(w.const)_(w.const,x);else if(w.enum)for(const E of w.enum)_(E,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,x){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=x}}}};TJ.default=KBt;const XBt="http://json-schema.org/draft-07/schema#",QBt="http://json-schema.org/draft-07/schema#",JBt="Core schema meta-schema",ZBt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},ejt=["object","boolean"],tjt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},njt={$schema:XBt,$id:QBt,title:JBt,definitions:ZBt,type:ejt,properties:tjt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=PMe,r=KQ,i=TJ,s=njt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=vf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Ln;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=zI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=VI;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(dH,dH.exports);var rjt=dH.exports;const cLe=Pl(rjt),ijt="#/definitions/StudyConfig",sjt="http://json-schema.org/draft-07/schema#",ojt={Answer:{additionalProperties:!1,description:"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.",properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a latin square.",properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.",properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. If the component is repeated within the block, this condition will only check the first instance of the component once the order is flattened. If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.",properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. If the component is repeated within the block, this condition will only check the first instance of the component once the order is flattened.",properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"}]},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:"The QuestionnaireComponent interface is used to define the properties of a questionnaire component. A QuestionnaireComponent is used to render questions with different response types. The response types are also defined with these documentation. The main use case of this component type is to ask participants questions, without using markdown, websites, images, etc.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta8/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta8/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times.",properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Skip conditions work recursively, that is if you have a nested block, they parent blocks' skip conditions will be considered when computing the skip logic.",items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/reVISit-studies/study/v1.0.0-beta9/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "path/to/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "path/to/assets/help.md",  "logoPath": "path/to/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "path/to/study/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "path/to/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},ajt={$ref:ijt,$schema:sjt,definitions:ojt},ujt="#/definitions/GlobalConfig",ljt="http://json-schema.org/draft-07/schema#",cjt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},fjt={$ref:ujt,$schema:ljt,definitions:cjt},fLe=new cLe;fLe.addSchema(fjt);const uge=fLe.getSchema("#/definitions/GlobalConfig"),dLe=new cLe;dLe.addSchema(ajt);const lge=dLe.getSchema("#/definitions/StudyConfig");function djt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function MF(e){return e.baseComponent!==void 0}function hjt(e){const t=UQ.parse(e),n=uge(t),r=djt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...uge.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function pjt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return MF(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function hLe(e,t){const n=UQ.parse(e),r=lge(n),i=pjt(n);if(r&&i[0])return n;const s=[...lge.errors||[]];return console.error(`${t} parsing errors`,s),{...n,errors:s}}function pLe(){const e=Ic(),{setAlertModal:t}=gh(),n=yh();P.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}function mjt(){const e=m0(),{storageEngine:t}=xa(),{answers:n}=Nf(s=>s),[r,i]=P.useState(!1);return P.useEffect(()=>{const s=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(s))},1e3)},[]),pLe(),$.jsx(qp,{style:{height:"100%"},children:$.jsx(Ii,{direction:"column",children:r?$.jsx(gt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?$.jsx(Wa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):$.jsxs($.Fragment,{children:[$.jsx(gt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),$.jsx(n4,{h:"lg"}),$.jsx(qp,{children:$.jsx(J1,{color:"blue"})})]})})})}function gjt(e){const{email:t}=e;return $.jsx(vm,{pt:100,children:$.jsx(qp,{children:$.jsxs(sa,{order:3,children:["Trial not found, please contact the administrator at"," ",$.jsxs(H6,{span:!0,c:"blue",href:`mailto:${t}`,children:[t," "]})]})})})}function yjt(){var d;const e=m0(),t=Ic(),n=vh()[t]||"Notfound",r=e.components[n],i=AK();pLe();const{storageEngine:s}=xa(),o=yh(),{setAlertModal:a}=gh();if(P.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return $.jsx(mjt,{});if(n==="Notfound")return $.jsx(gjt,{email:e.uiConfig.contactEmail});const u=MF(r)&&e.baseComponents?TK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return $.jsxs($.Fragment,{children:[c==="aboveStimulus"&&$.jsx(Wa,{text:l}),$.jsx(c3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),$.jsxs(P.Suspense,{fallback:$.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&$.jsx(qFt,{currentConfig:u}),u.type==="website"&&$.jsx(Txt,{currentConfig:u}),u.type==="image"&&$.jsx(Cxt,{currentConfig:u}),u.type==="react-component"&&$.jsx(HFt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&$.jsx(Wa,{text:l}),$.jsx(c3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function _H(e){const[t]=nY();return $.jsx(tY,{...e,to:{pathname:e.to,search:t.toString()}})}const bH=["description","instruction","answer","correctAnswer","startTime","endTime","duration","taskOrder"],Y$=["participantId","trialId","responseId"];function V2(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function vjt(e,t,n){return Object.entries(e.answers).map(([r,i])=>{const s=r.split("_")[0],o=r.split("_")[1],a=t.components[s],u=MF(a)&&a.baseComponent&&t.baseComponents?TK({},t.baseComponents[a.baseComponent],a):a,l=i.endTime-i.startTime;return Object.entries(i.answer).map(([f,d])=>{const h={participantId:e.participantId,trialId:s,responseId:f,startTime:new Date(i.startTime).toUTCString(),endTime:new Date(i.endTime).toUTCString(),duration:l};return n.includes("description")&&(h.description=u.description),n.includes("instruction")&&(h.instruction=u.instruction),n.includes("answer")&&(h.answer=d),n.includes("correctAnswer")&&(h.correctAnswer=u.correctAnswer),n.includes("taskOrder")&&(h.taskOrder=o),h}).flat()}).flat()}async function _jt(e,t,n,r,i=[...Y$,...bH]){const o=(r||await t.getAllParticipantsData()).map(c=>vjt(c,n,i)).flat(),a=c=>c.replace(/"/g,'""'),u=o.map(c=>i.map(f=>c===null?"":typeof c[f]=="string"?`"${a(c[f])}"`:JSON.stringify(c[f])).join(",")),l=[i.join(","),...u].join(`
`);V2(l,e)}function mLe({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=xJe([...Y$,...bH]),a=P.useCallback(c=>{Y$.every(f=>c.includes(f))&&o(c)},[o]),u=P.useMemo(()=>[...Y$,...bH],[]),{storageEngine:l}=xa();return l?$.jsxs(Ip,{opened:e,size:"lg",onClose:t,title:$.jsx(gt,{size:"xl",children:"Download Tidy CSV"}),centered:!0,radius:"md",padding:"xl",children:[$.jsx(pt,{children:$.jsx(DCe,{searchable:!0,limit:30,nothingFound:"Property not found",data:u,value:s,onChange:a,label:$.jsx(gt,{fw:"bold",size:"lg",children:"Select properties to include in tidy csv:"}),placeholder:"Select atleast one property"})}),$.jsxs(Ii,{mt:"xl",direction:{base:"column",sm:"row"},gap:{base:"sm",sm:"lg"},justify:{sm:"space-around"},children:[$.jsx(Hr,{leftIcon:$.jsx(YY,{}),onClick:()=>_jt(n,l,r,i,s),children:"Download"}),$.jsx(Hr,{onClick:t,color:"red",children:"Close"})]})]}):null}function bjt({studyConfig:e}){const{storageEngine:t}=xa(),[n,{open:r,close:i}]=Mb(!1),[s,o]=P.useState(),[a,u]=P.useState(""),l=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=P.useCallback(async()=>{V2(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=P.useState(Math.floor(d/1e3));return P.useEffect(()=>{const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)},[h,c]),$.jsxs(Td,{children:[$.jsx(Hr,{leftIcon:$.jsx(agt,{}),onClick:()=>V2(JSON.stringify(s,null,2),`${l}_${a}.json`),display:"block",children:"Download Current (JSON)"}),$.jsx(Hr,{disabled:!(t!=null&&t.isConnected()),leftIcon:$.jsx(ugt,{}),onClick:async()=>{if(!t)return;const m=await t.getAllParticipantsData();V2(JSON.stringify(m,null,2),`${l}_all.json`)},display:"block",children:"Download All (JSON)"}),$.jsx(Hr,{disabled:!(t!=null&&t.isConnected()),leftIcon:$.jsx(YY,{}),onClick:r,display:"block",children:"Download All (Tidy)"}),f&&$.jsxs(gt,{size:"lg",children:["Study results will be downloaded in"," ",h," ","seconds. If the download does not start automatically, click above to download."]}),$.jsx(mLe,{opened:n,close:i,filename:`${l}_${a}.csv`,studyConfig:e})]})}function gLe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=gLe(o,t,n,r),r.includes(o.orderPath))break}return i}function yLe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=yLe(s,r)}}),n}function wjt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Ejt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=R4(),a=hm(),u=Ic(),l=m0(),[c,{close:f,open:d}]=Mb(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?gLe(n,e,r,s.orderPath):-1,m=u===p;return $.jsxs(Ci,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[$.jsx(Ci.Target,{children:$.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:$.jsx(BCe,{active:m,style:{lineHeight:"32px",height:"32px"},label:$.jsxs("div",{children:[i&&$.jsx(tgt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?$.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&Q1.createPortal($.jsx(Ci.Dropdown,{onMouseLeave:f,children:$.jsx(gt,{size:"sm",children:$.jsxs("div",{children:[h.description&&$.jsxs("div",{children:[$.jsx(gt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),$.jsx(gt,{fw:400,component:"span",children:h.description})]}),h.meta&&$.jsxs(gt,{children:[$.jsx(gt,{fw:"900",component:"span",children:"Task Meta: "}),$.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function vLe({configSequence:e,fullSequence:t,participantSequence:n}){let r=Vv(e.components);return n&&(r=wjt(Vv(e.components),Vv(n.components))),$.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return $.jsx(Ejt,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?h1(o).length-yLe(i,o):0,u=h1(i);return $.jsx(BCe,{label:$.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",$.jsxs(ow,{ml:5,children:[a,"/",u.length]}),i.interruptions&&$.jsx(ow,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),$.jsx(gt,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?$.jsx(Zmt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:$.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:$.jsx(vLe,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function _Le(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>_Le(n,`${t}-${r}`))}}function Sjt(){const{showStudyBrowser:e,sequence:t}=Nf(u=>u),{toggleStudyBrowser:n}=gh(),r=Ic(),i=vh()[r],s=m0(),o=yh(),a=P.useMemo(()=>{let u=Vv(s.sequence);return u=_Le(u,"root"),u.components.push("end"),u},[s.sequence]);return e||i==="end"&&s.uiConfig.autoDownloadStudy?$.jsxs(bY,{p:"0",width:{base:300},style:{zIndex:0},children:[$.jsx(mm,{style:{position:"absolute",right:"10px",top:"10px",zIndex:5},onClick:()=>o(n())}),$.jsxs(VTe,{p:"0",children:[i==="end"&&$.jsxs("div",{style:{padding:10,paddingBottom:15,borderBottom:"1px solid #e9ecef"},children:[$.jsx(gt,{size:"md",p:10,weight:"bold",children:"Download"}),$.jsx(bjt,{studyConfig:s})]}),$.jsx(gt,{size:"md",p:10,weight:"bold",children:"Study Browser"}),$.jsx(vLe,{configSequence:a,participantSequence:t,fullSequence:t})]})]}):null}var cge={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bLe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},xjt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},wLe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bLe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xjt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Tjt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let Tjt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const Ajt=function(e){const t=bLe(e);return wLe.encodeByteArray(t,!0)},fM=function(e){return Ajt(e).replace(/\./g,"")},ELe=function(e){try{return wLe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cjt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ijt=()=>Cjt().__FIREBASE_DEFAULTS__,Ojt=()=>{if(typeof process>"u"||typeof cge>"u")return;const e=cge.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Pjt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ELe(e[1]);return t&&JSON.parse(t)},LF=()=>{try{return Ijt()||Ojt()||Pjt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},SLe=e=>{var t,n;return(n=(t=LF())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},kjt=e=>{const t=SLe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},xLe=()=>{var e;return(e=LF())===null||e===void 0?void 0:e.config},TLe=e=>{var t;return(t=LF())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $jt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rjt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[fM(JSON.stringify(n)),fM(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Njt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Do())}function Djt(){var e;const t=(e=LF())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mjt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ljt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fjt(){const e=Do();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Bjt(){return!Djt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jjt(){try{return typeof indexedDB=="object"}catch{return!1}}function Ujt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zjt="FirebaseError";let ly=class ALe extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=zjt,Object.setPrototypeOf(this,ALe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qI.prototype.create)}},qI=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Vjt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ly(i,a,r)}};function Vjt(e,t){return e.replace(Hjt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Hjt=/\{\$([^}]+)}/g;function qjt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function lC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(fge(s)&&fge(o)){if(!lC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fge(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Wjt(e,t){const n=new Gjt(e,t);return n.subscribe.bind(n)}let Gjt=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Yjt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Lj),i.error===void 0&&(i.error=Lj),i.complete===void 0&&(i.complete=Lj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Yjt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Lj(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(e){return e&&e._delegate?e._delegate:e}let I0=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kjt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new $jt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Qjt(t))try{this.getOrInitializeService({instanceIdentifier:tv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=tv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=tv){return this.instances.has(t)}getOptions(t=tv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xjt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=tv){return this.component?this.component.multipleInstances?t:tv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xjt(e){return e===tv?void 0:e}function Qjt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jjt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Kjt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Xn||(Xn={}));const Zjt={debug:Xn.DEBUG,verbose:Xn.VERBOSE,info:Xn.INFO,warn:Xn.WARN,error:Xn.ERROR,silent:Xn.SILENT},eUt=Xn.INFO,tUt={[Xn.DEBUG]:"log",[Xn.VERBOSE]:"log",[Xn.INFO]:"info",[Xn.WARN]:"warn",[Xn.ERROR]:"error"},nUt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=tUt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let AJ=class{constructor(t){this.name=t,this._logLevel=eUt,this._logHandler=nUt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Zjt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xn.DEBUG,...t),this._logHandler(this,Xn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xn.VERBOSE,...t),this._logHandler(this,Xn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xn.INFO,...t),this._logHandler(this,Xn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xn.WARN,...t),this._logHandler(this,Xn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xn.ERROR,...t),this._logHandler(this,Xn.ERROR,...t)}};const rUt=(e,t)=>t.some(n=>e instanceof n);let dge,hge;function iUt(){return dge||(dge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sUt(){return hge||(hge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CLe=new WeakMap,wH=new WeakMap,ILe=new WeakMap,Fj=new WeakMap,CJ=new WeakMap;function oUt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Jg(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&CLe.set(n,e)}).catch(()=>{}),CJ.set(t,e),t}function aUt(e){if(wH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});wH.set(e,t)}let EH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return wH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ILe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jg(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uUt(e){EH=e(EH)}function lUt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Bj(this),t,...n);return ILe.set(r,t.sort?t.sort():[t]),Jg(r)}:sUt().includes(e)?function(...t){return e.apply(Bj(this),t),Jg(CLe.get(this))}:function(...t){return Jg(e.apply(Bj(this),t))}}function cUt(e){return typeof e=="function"?lUt(e):(e instanceof IDBTransaction&&aUt(e),rUt(e,iUt())?new Proxy(e,EH):e)}function Jg(e){if(e instanceof IDBRequest)return oUt(e);if(Fj.has(e))return Fj.get(e);const t=cUt(e);return t!==e&&(Fj.set(e,t),CJ.set(t,e)),t}const Bj=e=>CJ.get(e);function fUt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Jg(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Jg(o.result),u.oldVersion,u.newVersion,Jg(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const dUt=["get","getKey","getAll","getAllKeys","count"],hUt=["put","add","delete","clear"],jj=new Map;function pge(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(jj.get(t))return jj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hUt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dUt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return jj.set(t,s),s}uUt(e=>({...e,get:(t,n,r)=>pge(t,n)||e.get(t,n,r),has:(t,n)=>!!pge(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pUt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mUt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mUt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const SH="@firebase/app",mge="0.10.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=new AJ("@firebase/app"),gUt="@firebase/app-compat",yUt="@firebase/analytics-compat",vUt="@firebase/analytics",_Ut="@firebase/app-check-compat",bUt="@firebase/app-check",wUt="@firebase/auth",EUt="@firebase/auth-compat",SUt="@firebase/database",xUt="@firebase/database-compat",TUt="@firebase/functions",AUt="@firebase/functions-compat",CUt="@firebase/installations",IUt="@firebase/installations-compat",OUt="@firebase/messaging",PUt="@firebase/messaging-compat",kUt="@firebase/performance",$Ut="@firebase/performance-compat",RUt="@firebase/remote-config",NUt="@firebase/remote-config-compat",DUt="@firebase/storage",MUt="@firebase/storage-compat",LUt="@firebase/firestore",FUt="@firebase/vertexai-preview",BUt="@firebase/firestore-compat",jUt="firebase",UUt="10.12.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH="[DEFAULT]",zUt={[SH]:"fire-core",[gUt]:"fire-core-compat",[vUt]:"fire-analytics",[yUt]:"fire-analytics-compat",[bUt]:"fire-app-check",[_Ut]:"fire-app-check-compat",[wUt]:"fire-auth",[EUt]:"fire-auth-compat",[SUt]:"fire-rtdb",[xUt]:"fire-rtdb-compat",[TUt]:"fire-fn",[AUt]:"fire-fn-compat",[CUt]:"fire-iid",[IUt]:"fire-iid-compat",[OUt]:"fire-fcm",[PUt]:"fire-fcm-compat",[kUt]:"fire-perf",[$Ut]:"fire-perf-compat",[RUt]:"fire-rc",[NUt]:"fire-rc-compat",[DUt]:"fire-gcs",[MUt]:"fire-gcs-compat",[LUt]:"fire-fst",[BUt]:"fire-fst-compat",[FUt]:"fire-vertex","fire-js":"fire-js",[jUt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new Map,VUt=new Map,TH=new Map;function gge(e,t){try{e.container.addComponent(t)}catch(n){S1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Tf(e){const t=e.name;if(TH.has(t))return S1.debug(`There were multiple attempts to register component ${t}.`),!1;TH.set(t,e);for(const n of dM.values())gge(n,e);for(const n of VUt.values())gge(n,e);return!0}function cy(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tg(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HUt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zg=new qI("app","Firebase",HUt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qUt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new I0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=UUt;function OLe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:xH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Zg.create("bad-app-name",{appName:String(i)});if(n||(n=xLe()),!n)throw Zg.create("no-options");const s=dM.get(i);if(s){if(lC(n,s.options)&&lC(r,s.config))return s;throw Zg.create("duplicate-app",{appName:i})}const o=new Jjt(i);for(const u of TH.values())o.addComponent(u);const a=new qUt(n,r,o);return dM.set(i,a),a}function FF(e=xH){const t=dM.get(e);if(!t&&e===xH&&xLe())return OLe();if(!t)throw Zg.create("no-app",{appName:e});return t}function gl(e,t,n){var r;let i=(r=zUt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),S1.warn(a.join(" "));return}Tf(new I0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WUt="firebase-heartbeat-database",GUt=1,cC="firebase-heartbeat-store";let Uj=null;function PLe(){return Uj||(Uj=fUt(WUt,GUt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(cC)}catch(n){console.warn(n)}}}}).catch(e=>{throw Zg.create("idb-open",{originalErrorMessage:e.message})})),Uj}async function YUt(e){try{const n=(await PLe()).transaction(cC),r=await n.objectStore(cC).get(kLe(e));return await n.done,r}catch(t){if(t instanceof ly)S1.warn(t.message);else{const n=Zg.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});S1.warn(n.message)}}}async function yge(e,t){try{const r=(await PLe()).transaction(cC,"readwrite");await r.objectStore(cC).put(t,kLe(e)),await r.done}catch(n){if(n instanceof ly)S1.warn(n.message);else{const r=Zg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});S1.warn(r.message)}}}function kLe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KUt=1024,XUt=30*24*60*60*1e3;class QUt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZUt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vge();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=XUt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vge(),{heartbeatsToSend:r,unsentEntries:i}=JUt(this._heartbeatsCache.heartbeats),s=fM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function vge(){return new Date().toISOString().substring(0,10)}function JUt(e,t=KUt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_ge(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_ge(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZUt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jjt()?Ujt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YUt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function _ge(e){return fM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7t(e){Tf(new I0("platform-logger",t=>new pUt(t),"PRIVATE")),Tf(new I0("heartbeat",t=>new QUt(t),"PRIVATE")),gl(SH,mge,e),gl(SH,mge,"esm2017"),gl("fire-js","")}e7t("");function $Le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t7t=$Le,RLe=new qI("auth","Firebase",$Le());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new AJ("@firebase/auth");function n7t(e,...t){hM.logLevel<=Xn.WARN&&hM.warn(`Auth (${kc}): ${e}`,...t)}function K$(e,...t){hM.logLevel<=Xn.ERROR&&hM.error(`Auth (${kc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(e,...t){throw IJ(e,...t)}function Ud(e,...t){return IJ(e,...t)}function NLe(e,t,n){const r=Object.assign(Object.assign({},t7t()),{[t]:n});return new qI("auth","Firebase",r).create(t,{appName:e.name})}function Yv(e){return NLe(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return RLe.create(e,...t)}function sn(e,t,...n){if(!e)throw IJ(t,...n)}function vp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw K$(t),new Error(t)}function rm(e,t){e||vp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function r7t(){return bge()==="http:"||bge()==="https:"}function bge(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7t(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r7t()||Mjt()||"connection"in navigator)?navigator.onLine:!0}function s7t(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GI=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,rm(n>t,"Short delay should be less than long delay!"),this.isMobile=Njt()||Ljt()}get(){return i7t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(e,t){rm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DLe=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7t=new GI(3e4,6e4);function PJ(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function DS(e,t,n,r,i={}){return MLe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=WI(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),DLe.fetch()(LLe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function MLe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},o7t),t);try{const i=new l7t(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw pk(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw pk(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw pk(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw NLe(e,c,l);nm(e,c)}}catch(i){if(i instanceof ly)throw i;nm(e,"network-request-failed",{message:String(i)})}}async function u7t(e,t,n,r,i={}){const s=await DS(e,t,n,r,i);return"mfaPendingCredential"in s&&nm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function LLe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?OJ(e.config,i):`${e.config.apiScheme}://${i}`}let l7t=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ud(this.auth,"network-request-failed")),a7t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function pk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ud(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7t(e,t){return DS(e,"POST","/v1/accounts:delete",t)}async function FLe(e,t){return DS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function f7t(e,t=!1){const n=Zi(e),r=await n.getIdToken(t),i=kJ(r);sn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:H2(zj(i.auth_time)),issuedAtTime:H2(zj(i.iat)),expirationTime:H2(zj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zj(e){return Number(e)*1e3}function kJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return K$("JWT malformed, contained fewer than 3 sections"),null;try{const i=ELe(n);return i?JSON.parse(i):(K$("Failed to decode base64 JWT payload"),null)}catch(i){return K$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wge(e){const t=kJ(e);return sn(t,"internal-error"),sn(typeof t.exp<"u","internal-error"),sn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ly&&d7t(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function d7t({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h7t=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CH=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=H2(this.lastLoginAt),this.creationTime=H2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await fC(e,FLe(n,{idToken:r}));sn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?BLe(s.providerUserInfo):[],a=m7t(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new CH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function p7t(e){const t=Zi(e);await pM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function m7t(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function BLe(e){return e.map(t=>{var{providerId:n}=t,r=SS(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7t(e,t){const n=await MLe(e,{},async()=>{const r=WI({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=LLe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DLe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function y7t(e,t){return DS(e,"POST","/v2/accounts:revokeToken",PJ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vj=class IH{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){sn(t.idToken,"internal-error"),sn(typeof t.idToken<"u","internal-error"),sn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):wge(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){sn(t.length!==0,"internal-error");const n=wge(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(sn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await g7t(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new IH;return r&&(sn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(sn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(sn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new IH,this.toJSON())}_performRefresh(){return vp("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(e,t){sn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}let mM=class LT{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=SS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new h7t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await fC(this,this.stsTokenManager.getToken(this.auth,t));return sn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return f7t(this,t)}reload(){return p7t(this)}_assign(t){this!==t&&(sn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new LT(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await pM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tg(this.auth.app))return Promise.reject(Yv(this.auth));const t=await this.getIdToken();return await fC(this,c7t(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:b}=n;sn(_&&b,t,"internal-error");const T=Vj.fromJSON(this.name,b);sn(typeof _=="string",t,"internal-error"),zm(f,t.name),zm(d,t.name),sn(typeof w=="boolean",t,"internal-error"),sn(typeof x=="boolean",t,"internal-error"),zm(h,t.name),zm(p,t.name),zm(m,t.name),zm(g,t.name),zm(y,t.name),zm(v,t.name);const C=new LT({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(C.providerData=E.map(A=>Object.assign({},A))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new Vj;i.updateFromServerResponse(n);const s=new LT({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await pM(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];sn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?BLe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vj;a.updateFromIdToken(r);const u=new LT({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new CH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ege=new Map;function _p(e){rm(e instanceof Function,"Expected a class definition");let t=Ege.get(e);return t?(rm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ege.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jLe=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}};jLe.type="NONE";const Sge=jLe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(e,t,n){return`firebase:${e}:${t}:${n}`}let xge=class Q${constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=X$(this.userKey,i.apiKey,s),this.fullPersistenceKey=X$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?mM._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Q$(_p(Sge),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||_p(Sge);const o=X$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=mM._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Q$(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Q$(s,t,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VLe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ULe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qLe(t))return"Blackberry";if(WLe(t))return"Webos";if($J(t))return"Safari";if((t.includes("chrome/")||zLe(t))&&!t.includes("edge/"))return"Chrome";if(HLe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ULe(e=Do()){return/firefox\//i.test(e)}function $J(e=Do()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function zLe(e=Do()){return/crios\//i.test(e)}function VLe(e=Do()){return/iemobile/i.test(e)}function HLe(e=Do()){return/android/i.test(e)}function qLe(e=Do()){return/blackberry/i.test(e)}function WLe(e=Do()){return/webos/i.test(e)}function BF(e=Do()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function v7t(e=Do()){var t;return BF(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function _7t(){return Fjt()&&document.documentMode===10}function GLe(e=Do()){return BF(e)||HLe(e)||WLe(e)||qLe(e)||/windows phone/i.test(e)||VLe(e)}function b7t(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YLe(e,t=[]){let n;switch(e){case"Browser":n=Tge(Do());break;case"Worker":n=`${Tge(Do())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w7t=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7t(e,t={}){return DS(e,"GET","/v2/passwordPolicy",PJ(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7t=6;let x7t=class{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:S7t,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T7t=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Age(this),this.idTokenSubscription=new Age(this),this.beforeStateQueue=new w7t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RLe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=_p(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xge.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await FLe(this,{idToken:t}),r=await mM._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Tg(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await pM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=s7t()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Tg(this.app))return Promise.reject(Yv(this));const n=t?Zi(t):null;return n&&sn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&sn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Tg(this.app)?Promise.reject(Yv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Tg(this.app)?Promise.reject(Yv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_p(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await E7t(this),n=new x7t(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new qI("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await y7t(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&_p(t)||this._popupRedirectResolver;sn(n,this,"argument-error"),this.redirectPersistenceManager=await xge.create(this,[_p(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(sn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YLe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&n7t(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}};function RJ(e){return Zi(e)}let Age=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=Wjt(n=>this.observer=n)}get next(){return sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A7t(e){NJ=e}function C7t(e){return NJ.loadJS(e)}function I7t(){return NJ.gapiScript}function O7t(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7t(e,t){const n=cy(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(lC(s,t??{}))return i;nm(i,"already-initialized")}return n.initialize({options:t})}function k7t(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_p);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function $7t(e,t,n){const r=RJ(e);sn(r._canInitEmulator,r,"emulator-config-failed"),sn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=KLe(t),{host:o,port:a}=R7t(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||N7t()}function KLe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function R7t(e){const t=KLe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Cge(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Cge(o)}}}function Cge(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function N7t(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XLe=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return vp("not implemented")}_getIdTokenResponse(t){return vp("not implemented")}_linkToIdToken(t,n){return vp("not implemented")}_getReauthenticationResolver(t){return vp("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(e,t){return u7t(e,"POST","/v1/accounts:signInWithIdp",PJ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7t="http://localhost";let jF=class OH extends XLe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new OH(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):nm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=SS(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new OH(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return xw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,xw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,xw(t,n)}buildRequest(){const t={requestUri:D7t,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=WI(n)}return t}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QLe=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YI=class extends QLe{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JLe=class gb extends YI{constructor(){super("facebook.com")}static credential(t){return jF._fromParams({providerId:gb.PROVIDER_ID,signInMethod:gb.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return gb.credentialFromTaggedObject(t)}static credentialFromError(t){return gb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return gb.credential(t.oauthAccessToken)}catch{return null}}};JLe.FACEBOOK_SIGN_IN_METHOD="facebook.com";JLe.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZLe=class yb extends YI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return jF._fromParams({providerId:yb.PROVIDER_ID,signInMethod:yb.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return yb.credentialFromTaggedObject(t)}static credentialFromError(t){return yb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return yb.credential(n,r)}catch{return null}}};ZLe.GOOGLE_SIGN_IN_METHOD="google.com";ZLe.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e6e=class vb extends YI{constructor(){super("github.com")}static credential(t){return jF._fromParams({providerId:vb.PROVIDER_ID,signInMethod:vb.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vb.credentialFromTaggedObject(t)}static credentialFromError(t){return vb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vb.credential(t.oauthAccessToken)}catch{return null}}};e6e.GITHUB_SIGN_IN_METHOD="github.com";e6e.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t6e=class _b extends YI{constructor(){super("twitter.com")}static credential(t,n){return jF._fromParams({providerId:_b.PROVIDER_ID,signInMethod:_b.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return _b.credentialFromTaggedObject(t)}static credentialFromError(t){return _b.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _b.credential(n,r)}catch{return null}}};t6e.TWITTER_SIGN_IN_METHOD="twitter.com";t6e.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DJ=class PH{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await mM._fromIdTokenResponse(t,r,i),o=Ige(r);return new PH({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Ige(r);return new PH({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function Ige(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M7t=class kH extends ly{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,kH.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new kH(t,n,r,i)}};function n6e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?M7t._fromErrorAndOperation(e,s,t,r):s})}async function L7t(e,t,n=!1){const r=await fC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return DJ._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F7t(e,t,n=!1){const{auth:r}=e;if(Tg(r.app))return Promise.reject(Yv(r));const i="reauthenticate";try{const s=await fC(e,n6e(r,i,t,e),n);sn(s.idToken,r,"internal-error");const o=kJ(s.idToken);sn(o,r,"internal-error");const{sub:a}=o;return sn(e.uid===a,r,"user-mismatch"),DJ._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B7t(e,t,n=!1){if(Tg(e.app))return Promise.reject(Yv(e));const r="signIn",i=await n6e(e,r,t),s=await DJ._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function j7t(e,t,n,r){return Zi(e).onIdTokenChanged(t,n,r)}function U7t(e,t,n){return Zi(e).beforeAuthStateChanged(t,n)}function z7t(e,t,n,r){return Zi(e).onAuthStateChanged(t,n,r)}function V7t(e){return Zi(e).signOut()}const gM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r6e=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gM,"1"),this.storage.removeItem(gM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7t(){const e=Do();return $J(e)||BF(e)}const q7t=1e3,W7t=10;let i6e=class extends r6e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=H7t()&&b7t(),this.fallbackToPolling=GLe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);_7t()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,W7t):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},q7t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}};i6e.type="LOCAL";const G7t=i6e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s6e=class extends r6e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}};s6e.type="SESSION";const o6e=s6e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7t(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a6e=class u6e{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new u6e(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Y7t(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};a6e.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K7t=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=MJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(){return window}function X7t(e){zd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6e(){return typeof zd().WorkerGlobalScope<"u"&&typeof zd().importScripts=="function"}async function Q7t(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J7t(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Z7t(){return l6e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6e="firebaseLocalStorageDb",ezt=1,yM="firebaseLocalStorage",f6e="fbase_key";let KI=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function UF(e,t){return e.transaction([yM],t?"readwrite":"readonly").objectStore(yM)}function tzt(){const e=indexedDB.deleteDatabase(c6e);return new KI(e).toPromise()}function $H(){const e=indexedDB.open(c6e,ezt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(yM,{keyPath:f6e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(yM)?t(r):(r.close(),await tzt(),t(await $H()))})})}async function Oge(e,t,n){const r=UF(e,!0).put({[f6e]:t,value:n});return new KI(r).toPromise()}async function nzt(e,t){const n=UF(e,!1).get(t),r=await new KI(n).toPromise();return r===void 0?null:r.value}function Pge(e,t){const n=UF(e,!0).delete(t);return new KI(n).toPromise()}const rzt=800,izt=3;let d6e=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $H(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>izt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l6e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=a6e._getInstance(Z7t()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Q7t(),!this.activeServiceWorker)return;this.sender=new K7t(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||J7t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $H();return await Oge(t,gM,"1"),await Pge(t,gM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Oge(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>nzt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pge(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=UF(i,!1).getAll();return new KI(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rzt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}};d6e.type="LOCAL";const szt=d6e;new GI(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ozt(e,t){return t?_p(t):(sn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LJ=class extends XLe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return xw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return xw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return xw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function azt(e){return B7t(e.auth,new LJ(e),e.bypassAuthState)}function uzt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),F7t(n,new LJ(e),e.bypassAuthState)}async function lzt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),L7t(n,new LJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h6e=class{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return azt;case"linkViaPopup":case"linkViaRedirect":return lzt;case"reauthViaPopup":case"reauthViaRedirect":return uzt;default:nm(this.auth,"internal-error")}}resolve(t){rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const czt=new GI(2e3,1e4);let fzt=class FT extends h6e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,FT.currentPopupAction&&FT.currentPopupAction.cancel(),FT.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return sn(t,this.auth,"internal-error"),t}async onExecution(){rm(this.filter.length===1,"Popup operations only handle one event");const t=MJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ud(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ud(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,FT.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ud(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,czt.get())};t()}};fzt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dzt="pendingRedirect",J$=new Map;let hzt=class extends h6e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=J$.get(this.auth._key());if(!t){try{const r=await pzt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}J$.set(this.auth._key(),t)}return this.bypassAuthState||J$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function pzt(e,t){const n=yzt(t),r=gzt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mzt(e,t){J$.set(e._key(),t)}function gzt(e){return _p(e._redirectPersistence)}function yzt(e){return X$(dzt,e.config.apiKey,e.name)}async function vzt(e,t,n=!1){if(Tg(e.app))return Promise.reject(Yv(e));const r=RJ(e),i=ozt(r,t),o=await new hzt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _zt=10*60*1e3;let bzt=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!wzt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!p6e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ud(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=_zt&&this.cachedEventUids.clear(),this.cachedEventUids.has(kge(t))}saveEventToCache(t){this.cachedEventUids.add(kge(t)),this.lastProcessedEventTime=Date.now()}};function kge(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function p6e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function wzt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p6e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ezt(e,t={}){return DS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Szt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xzt=/^https?/;async function Tzt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ezt(e);for(const n of t)try{if(Azt(n))return}catch{}nm(e,"unauthorized-domain")}function Azt(e){const t=AH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xzt.test(n))return!1;if(Szt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Czt=new GI(3e4,6e4);function $ge(){const e=zd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Izt(e){return new Promise((t,n)=>{var r,i,s;function o(){$ge(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$ge(),n(Ud(e,"network-request-failed"))},timeout:Czt.get()})}if(!((i=(r=zd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=zd().gapi)===null||s===void 0)&&s.load)o();else{const a=O7t("iframefcb");return zd()[a]=()=>{gapi.load?o():n(Ud(e,"network-request-failed"))},C7t(`${I7t()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw Z$=null,t})}let Z$=null;function Ozt(e){return Z$=Z$||Izt(e),Z$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pzt=new GI(5e3,15e3),kzt="__/auth/iframe",$zt="emulator/auth/iframe",Rzt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nzt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dzt(e){const t=e.config;sn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?OJ(t,$zt):`https://${e.config.authDomain}/${kzt}`,r={apiKey:t.apiKey,appName:e.name,v:kc},i=Nzt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${WI(r).slice(1)}`}async function Mzt(e){const t=await Ozt(e),n=zd().gapi;return sn(n,e,"internal-error"),t.open({where:document.body,url:Dzt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rzt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ud(e,"network-request-failed"),a=zd().setTimeout(()=>{s(o)},Pzt.get());function u(){zd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lzt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fzt=500,Bzt=600,jzt="_blank",Uzt="http://localhost";let Rge=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zzt(e,t,n,r=Fzt,i=Bzt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Lzt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Do().toLowerCase();n&&(a=zLe(l)?jzt:n),ULe(l)&&(t=t||Uzt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(v7t(l)&&a!=="_self")return Vzt(t||"",a),new Rge(null);const f=window.open(t||"",a,c);sn(f,e,"popup-blocked");try{f.focus()}catch{}return new Rge(f)}function Vzt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hzt="__/auth/handler",qzt="emulator/auth/handler",Wzt=encodeURIComponent("fac");async function Nge(e,t,n,r,i,s){sn(e.config.authDomain,e,"auth-domain-config-required"),sn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kc,eventId:i};if(t instanceof QLe){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",qjt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof YI){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Wzt}=${encodeURIComponent(u)}`:"";return`${Gzt(e)}?${WI(a).slice(1)}${l}`}function Gzt({config:e}){return e.emulator?OJ(e,qzt):`https://${e.authDomain}/${Hzt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="webStorageSupport";let Yzt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o6e,this._completeRedirectFn=vzt,this._overrideRedirectResult=mzt}async _openPopup(t,n,r,i){var s;rm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Nge(t,n,r,AH(),i);return zzt(t,o,MJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Nge(t,n,r,AH(),i);return X7t(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(rm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Mzt(t),r=new bzt(t);return n.register("authEvent",i=>(sn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hj,{type:Hj},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hj];o!==void 0&&n(!!o),nm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Tzt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return GLe()||$J()||BF()}};const Kzt=Yzt;var Dge="@firebase/auth",Mge="1.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xzt=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qzt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jzt(e){Tf(new I0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;sn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YLe(e)},l=new T7t(r,i,s,u);return k7t(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Tf(new I0("auth-internal",t=>{const n=RJ(t.getProvider("auth").getImmediate());return(r=>new Xzt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gl(Dge,Mge,Qzt(e)),gl(Dge,Mge,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zzt=5*60,eVt=TLe("authIdTokenMaxAge")||Zzt;let Lge=null;const tVt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eVt)return;const i=n==null?void 0:n.token;Lge!==i&&(Lge=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Fge(e=FF()){const t=cy(e,"auth");if(t.isInitialized())return t.getImmediate();const n=P7t(e,{popupRedirectResolver:Kzt,persistence:[szt,G7t,o6e]}),r=TLe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=tVt(s.toString());U7t(n,o,()=>o(n.currentUser)),j7t(n,a=>o(a))}}const i=SLe("auth");return i&&$7t(n,`http://${i}`),n}function nVt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}A7t({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Ud("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",nVt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jzt("Browser");var rVt="firebase",iVt="10.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gl(rVt,iVt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6e="firebasestorage.googleapis.com",g6e="storageBucket",sVt=2*60*1e3,oVt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends ly{constructor(t,n,r=0){super(qj(t),`Firebase Storage: ${n} (${qj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ts.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return qj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var es;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(es||(es={}));function qj(e){return"storage/"+e}function FJ(){const e="An unknown error occurred, please check the error payload for server response.";return new ts(es.UNKNOWN,e)}function aVt(e){return new ts(es.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function uVt(e){return new ts(es.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lVt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ts(es.UNAUTHENTICATED,e)}function cVt(){return new ts(es.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fVt(e){return new ts(es.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function dVt(){return new ts(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hVt(){return new ts(es.CANCELED,"User canceled the upload/download.")}function pVt(e){return new ts(es.INVALID_URL,"Invalid URL '"+e+"'.")}function mVt(e){return new ts(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function gVt(){return new ts(es.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+g6e+"' property when initializing the app?")}function yVt(){return new ts(es.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vVt(){return new ts(es.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _Vt(e){return new ts(es.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function RH(e){return new ts(es.INVALID_ARGUMENT,e)}function y6e(){return new ts(es.APP_DELETED,"The Firebase app was deleted.")}function bVt(e){return new ts(es.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function q2(e,t){return new ts(es.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Gx(e){throw new ts(es.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=cl.makeFromUrl(t,n)}catch{return new cl(t,"")}if(r.path==="")return r;throw mVt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===m6e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const x=_[w],E=x.regex.exec(t);if(E){const b=E[x.indices.bucket];let T=E[x.indices.path];T||(T=""),r=new cl(b,T),x.postModify(r);break}}if(r==null)throw pVt(t);return r}}class wVt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EVt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function SVt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xVt(e){return e!==void 0}function TVt(e){return typeof e=="object"&&!Array.isArray(e)}function BJ(e){return typeof e=="string"||e instanceof String}function Bge(e){return jJ()&&e instanceof Blob}function jJ(){return typeof Blob<"u"}function jge(e,t,n,r){if(r<t)throw RH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw RH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function v6e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kv;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Kv||(Kv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AVt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CVt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new mk(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Kv.NO_ERROR,u=s.getStatus();if(!a||AVt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Kv.ABORT;r(!1,new mk(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new mk(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());xVt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=FJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?y6e():hVt();o(u)}else{const u=dVt();o(u)}};this.canceled_?n(!1,new mk(!1,null,!0)):this.backoffId_=EVt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&SVt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mk{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function IVt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function OVt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function PVt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function kVt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function $Vt(e,t,n,r,i,s,o=!0){const a=v6e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return PVt(l,t),IVt(l,n),OVt(l,s),kVt(l,r),new CVt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RVt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NVt(...e){const t=RVt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(jJ())return new Blob(e);throw new ts(es.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DVt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MVt(e){if(typeof atob>"u")throw _Vt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wj{constructor(t,n){this.data=t,this.contentType=n||null}}function LVt(e,t){switch(e){case Od.RAW:return new Wj(_6e(t));case Od.BASE64:case Od.BASE64URL:return new Wj(b6e(e,t));case Od.DATA_URL:return new Wj(BVt(t),jVt(t))}throw FJ()}function _6e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function FVt(e){let t;try{t=decodeURIComponent(e)}catch{throw q2(Od.DATA_URL,"Malformed data URL.")}return _6e(t)}function b6e(e,t){switch(e){case Od.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw q2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Od.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw q2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MVt(t)}catch(i){throw i.message.includes("polyfill")?i:q2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class w6e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw q2(Od.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=UVt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function BVt(e){const t=new w6e(e);return t.base64?b6e(Od.BASE64,t.rest):FVt(t.rest)}function jVt(e){return new w6e(e).contentType}function UVt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,n){let r=0,i="";Bge(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Bge(this.data_)){const r=this.data_,i=DVt(r,t,n);return i===null?null:new dg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new dg(r,!0)}}static getBlob(...t){if(jJ()){const n=t.map(r=>r instanceof dg?r.data_:r);return new dg(NVt.apply(null,n))}else{const n=t.map(o=>BJ(o)?LVt(Od.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new dg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6e(e){let t;try{t=JSON.parse(e)}catch{return null}return TVt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zVt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function VVt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function S6e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HVt(e,t){return t}class Pa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||HVt}}let gk=null;function qVt(e){return!BJ(e)||e.length<2?e:S6e(e)}function x6e(){if(gk)return gk;const e=[];e.push(new Pa("bucket")),e.push(new Pa("generation")),e.push(new Pa("metageneration")),e.push(new Pa("name","fullPath",!0));function t(s,o){return qVt(o)}const n=new Pa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Pa("size");return i.xform=r,e.push(i),e.push(new Pa("timeCreated")),e.push(new Pa("updated")),e.push(new Pa("md5Hash",null,!0)),e.push(new Pa("cacheControl",null,!0)),e.push(new Pa("contentDisposition",null,!0)),e.push(new Pa("contentEncoding",null,!0)),e.push(new Pa("contentLanguage",null,!0)),e.push(new Pa("contentType",null,!0)),e.push(new Pa("metadata","customMetadata",!0)),gk=e,gk}function WVt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new cl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function GVt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return WVt(r,e),r}function T6e(e,t,n){const r=E6e(t);return r===null?null:GVt(e,r,n)}function YVt(e,t,n,r){const i=E6e(t);if(i===null||!BJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=zF(d,n,r),p=v6e({alt:"media",token:l});return h+p})[0]}function KVt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class UJ{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6e(e){if(!e)throw FJ()}function XVt(e,t){function n(r,i){const s=T6e(e,i,t);return A6e(s!==null),s}return n}function QVt(e,t){function n(r,i){const s=T6e(e,i,t);return A6e(s!==null),YVt(s,i,e.host,e._protocol)}return n}function C6e(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=cVt():i=lVt():n.getStatus()===402?i=uVt(e.bucket):n.getStatus()===403?i=fVt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function I6e(e){const t=C6e(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=aVt(e.path)),s.serverResponse=i.serverResponse,s}return n}function JVt(e,t,n){const r=t.fullServerUrl(),i=zF(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new UJ(i,s,QVt(e,n),o);return a.errorHandler=I6e(t),a}function ZVt(e,t){const n=t.fullServerUrl(),r=zF(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new UJ(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=I6e(t),a}function eHt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function tHt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=eHt(null,t)),r}function nHt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=tHt(t,r,i),c=KVt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=dg.getBlob(f,r,d);if(h===null)throw yVt();const p={name:l.fullPath},m=zF(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new UJ(m,g,XVt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=C6e(t),v}class rHt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kv.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kv.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kv.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Gx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gx("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class iHt extends rHt{initXhr(){this.xhr_.responseType="text"}}function zJ(){return new iHt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,n){this._service=t,n instanceof cl?this._location=n:this._location=cl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new x1(t,n)}get root(){const t=new cl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S6e(this._location.path)}get storage(){return this._service}get parent(){const t=zVt(this._location.path);if(t===null)return null;const n=new cl(this._location.bucket,t);return new x1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw bVt(t)}}function sHt(e,t,n){e._throwIfRoot("uploadBytes");const r=nHt(e.storage,e._location,x6e(),new dg(t,!0),n);return e.storage.makeRequestWithTokens(r,zJ).then(i=>({metadata:i,ref:e}))}function oHt(e){e._throwIfRoot("getDownloadURL");const t=JVt(e.storage,e._location,x6e());return e.storage.makeRequestWithTokens(t,zJ).then(n=>{if(n===null)throw vVt();return n})}function aHt(e){e._throwIfRoot("deleteObject");const t=ZVt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,zJ)}function uHt(e,t){const n=VVt(e._location.path,t),r=new cl(e._location.bucket,n);return new x1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lHt(e){return/^[A-Za-z]+:\/\//.test(e)}function cHt(e,t){return new x1(e,t)}function O6e(e,t){if(e instanceof VJ){const n=e;if(n._bucket==null)throw gVt();const r=new x1(n,n._bucket);return t!=null?O6e(r,t):r}else return t!==void 0?uHt(e,t):e}function fHt(e,t){if(t&&lHt(t)){if(e instanceof VJ)return cHt(e,t);throw RH("To use ref(service, url), the first argument must be a Storage instance.")}else return O6e(e,t)}function Uge(e,t){const n=t==null?void 0:t[g6e];return n==null?null:cl.makeFromBucketSpec(n,e)}function dHt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Rjt(i,e.app.options.projectId))}class VJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=m6e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sVt,this._maxUploadRetryTime=oVt,this._requests=new Set,i!=null?this._bucket=cl.makeFromBucketSpec(i,this._host):this._bucket=Uge(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=cl.makeFromBucketSpec(this._url,t):this._bucket=Uge(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jge("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jge("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new x1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new wVt(y6e());{const o=$Vt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const zge="@firebase/storage",Vge="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6e="storage";function hHt(e,t,n){return e=Zi(e),sHt(e,t,n)}function pHt(e){return e=Zi(e),oHt(e)}function mHt(e){return e=Zi(e),aHt(e)}function Gj(e,t){return e=Zi(e),fHt(e,t)}function Yj(e=FF(),t){e=Zi(e);const r=cy(e,P6e).getImmediate({identifier:t}),i=kjt("storage");return i&&gHt(r,...i),r}function gHt(e,t,n,r={}){dHt(e,t,n,r)}function yHt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new VJ(n,r,i,t,kc)}function vHt(){Tf(new I0(P6e,yHt,"PUBLIC").setMultipleInstances(!0)),gl(zge,Vge,""),gl(zge,Vge,"esm2017")}vHt();var Hge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xv,k6e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,T){function C(){}C.prototype=T.prototype,b.D=T.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(A,O,N){for(var k=Array(arguments.length-2),L=2;L<arguments.length;L++)k[L-2]=arguments[L];return T.prototype[O].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,T,C){C||(C=0);var A=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)A[O]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(O=0;16>O;++O)A[O]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=b.g[0],C=b.g[1],O=b.g[2];var N=b.g[3],k=T+(N^C&(O^N))+A[0]+3614090360&4294967295;T=C+(k<<7&4294967295|k>>>25),k=N+(O^T&(C^O))+A[1]+3905402710&4294967295,N=T+(k<<12&4294967295|k>>>20),k=O+(C^N&(T^C))+A[2]+606105819&4294967295,O=N+(k<<17&4294967295|k>>>15),k=C+(T^O&(N^T))+A[3]+3250441966&4294967295,C=O+(k<<22&4294967295|k>>>10),k=T+(N^C&(O^N))+A[4]+4118548399&4294967295,T=C+(k<<7&4294967295|k>>>25),k=N+(O^T&(C^O))+A[5]+1200080426&4294967295,N=T+(k<<12&4294967295|k>>>20),k=O+(C^N&(T^C))+A[6]+2821735955&4294967295,O=N+(k<<17&4294967295|k>>>15),k=C+(T^O&(N^T))+A[7]+4249261313&4294967295,C=O+(k<<22&4294967295|k>>>10),k=T+(N^C&(O^N))+A[8]+1770035416&4294967295,T=C+(k<<7&4294967295|k>>>25),k=N+(O^T&(C^O))+A[9]+2336552879&4294967295,N=T+(k<<12&4294967295|k>>>20),k=O+(C^N&(T^C))+A[10]+4294925233&4294967295,O=N+(k<<17&4294967295|k>>>15),k=C+(T^O&(N^T))+A[11]+2304563134&4294967295,C=O+(k<<22&4294967295|k>>>10),k=T+(N^C&(O^N))+A[12]+1804603682&4294967295,T=C+(k<<7&4294967295|k>>>25),k=N+(O^T&(C^O))+A[13]+4254626195&4294967295,N=T+(k<<12&4294967295|k>>>20),k=O+(C^N&(T^C))+A[14]+2792965006&4294967295,O=N+(k<<17&4294967295|k>>>15),k=C+(T^O&(N^T))+A[15]+1236535329&4294967295,C=O+(k<<22&4294967295|k>>>10),k=T+(O^N&(C^O))+A[1]+4129170786&4294967295,T=C+(k<<5&4294967295|k>>>27),k=N+(C^O&(T^C))+A[6]+3225465664&4294967295,N=T+(k<<9&4294967295|k>>>23),k=O+(T^C&(N^T))+A[11]+643717713&4294967295,O=N+(k<<14&4294967295|k>>>18),k=C+(N^T&(O^N))+A[0]+3921069994&4294967295,C=O+(k<<20&4294967295|k>>>12),k=T+(O^N&(C^O))+A[5]+3593408605&4294967295,T=C+(k<<5&4294967295|k>>>27),k=N+(C^O&(T^C))+A[10]+38016083&4294967295,N=T+(k<<9&4294967295|k>>>23),k=O+(T^C&(N^T))+A[15]+3634488961&4294967295,O=N+(k<<14&4294967295|k>>>18),k=C+(N^T&(O^N))+A[4]+3889429448&4294967295,C=O+(k<<20&4294967295|k>>>12),k=T+(O^N&(C^O))+A[9]+568446438&4294967295,T=C+(k<<5&4294967295|k>>>27),k=N+(C^O&(T^C))+A[14]+3275163606&4294967295,N=T+(k<<9&4294967295|k>>>23),k=O+(T^C&(N^T))+A[3]+4107603335&4294967295,O=N+(k<<14&4294967295|k>>>18),k=C+(N^T&(O^N))+A[8]+1163531501&4294967295,C=O+(k<<20&4294967295|k>>>12),k=T+(O^N&(C^O))+A[13]+2850285829&4294967295,T=C+(k<<5&4294967295|k>>>27),k=N+(C^O&(T^C))+A[2]+4243563512&4294967295,N=T+(k<<9&4294967295|k>>>23),k=O+(T^C&(N^T))+A[7]+1735328473&4294967295,O=N+(k<<14&4294967295|k>>>18),k=C+(N^T&(O^N))+A[12]+2368359562&4294967295,C=O+(k<<20&4294967295|k>>>12),k=T+(C^O^N)+A[5]+4294588738&4294967295,T=C+(k<<4&4294967295|k>>>28),k=N+(T^C^O)+A[8]+2272392833&4294967295,N=T+(k<<11&4294967295|k>>>21),k=O+(N^T^C)+A[11]+1839030562&4294967295,O=N+(k<<16&4294967295|k>>>16),k=C+(O^N^T)+A[14]+4259657740&4294967295,C=O+(k<<23&4294967295|k>>>9),k=T+(C^O^N)+A[1]+2763975236&4294967295,T=C+(k<<4&4294967295|k>>>28),k=N+(T^C^O)+A[4]+1272893353&4294967295,N=T+(k<<11&4294967295|k>>>21),k=O+(N^T^C)+A[7]+4139469664&4294967295,O=N+(k<<16&4294967295|k>>>16),k=C+(O^N^T)+A[10]+3200236656&4294967295,C=O+(k<<23&4294967295|k>>>9),k=T+(C^O^N)+A[13]+681279174&4294967295,T=C+(k<<4&4294967295|k>>>28),k=N+(T^C^O)+A[0]+3936430074&4294967295,N=T+(k<<11&4294967295|k>>>21),k=O+(N^T^C)+A[3]+3572445317&4294967295,O=N+(k<<16&4294967295|k>>>16),k=C+(O^N^T)+A[6]+76029189&4294967295,C=O+(k<<23&4294967295|k>>>9),k=T+(C^O^N)+A[9]+3654602809&4294967295,T=C+(k<<4&4294967295|k>>>28),k=N+(T^C^O)+A[12]+3873151461&4294967295,N=T+(k<<11&4294967295|k>>>21),k=O+(N^T^C)+A[15]+530742520&4294967295,O=N+(k<<16&4294967295|k>>>16),k=C+(O^N^T)+A[2]+3299628645&4294967295,C=O+(k<<23&4294967295|k>>>9),k=T+(O^(C|~N))+A[0]+4096336452&4294967295,T=C+(k<<6&4294967295|k>>>26),k=N+(C^(T|~O))+A[7]+1126891415&4294967295,N=T+(k<<10&4294967295|k>>>22),k=O+(T^(N|~C))+A[14]+2878612391&4294967295,O=N+(k<<15&4294967295|k>>>17),k=C+(N^(O|~T))+A[5]+4237533241&4294967295,C=O+(k<<21&4294967295|k>>>11),k=T+(O^(C|~N))+A[12]+1700485571&4294967295,T=C+(k<<6&4294967295|k>>>26),k=N+(C^(T|~O))+A[3]+2399980690&4294967295,N=T+(k<<10&4294967295|k>>>22),k=O+(T^(N|~C))+A[10]+4293915773&4294967295,O=N+(k<<15&4294967295|k>>>17),k=C+(N^(O|~T))+A[1]+2240044497&4294967295,C=O+(k<<21&4294967295|k>>>11),k=T+(O^(C|~N))+A[8]+1873313359&4294967295,T=C+(k<<6&4294967295|k>>>26),k=N+(C^(T|~O))+A[15]+4264355552&4294967295,N=T+(k<<10&4294967295|k>>>22),k=O+(T^(N|~C))+A[6]+2734768916&4294967295,O=N+(k<<15&4294967295|k>>>17),k=C+(N^(O|~T))+A[13]+1309151649&4294967295,C=O+(k<<21&4294967295|k>>>11),k=T+(O^(C|~N))+A[4]+4149444226&4294967295,T=C+(k<<6&4294967295|k>>>26),k=N+(C^(T|~O))+A[11]+3174756917&4294967295,N=T+(k<<10&4294967295|k>>>22),k=O+(T^(N|~C))+A[2]+718787259&4294967295,O=N+(k<<15&4294967295|k>>>17),k=C+(N^(O|~T))+A[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+O&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,T){T===void 0&&(T=b.length);for(var C=T-this.blockSize,A=this.B,O=this.h,N=0;N<T;){if(O==0)for(;N<=C;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<T;)if(A[O++]=b.charCodeAt(N++),O==this.blockSize){i(this,A),O=0;break}}else for(;N<T;)if(A[O++]=b[N++],O==this.blockSize){i(this,A),O=0;break}}this.h=O,this.o+=T},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;var C=8*this.o;for(T=b.length-8;T<b.length;++T)b[T]=C&255,C/=256;for(this.u(b),b=Array(16),T=C=0;4>T;++T)for(var A=0;32>A;A+=8)b[C++]=this.g[T]>>>A&255;return b};function s(b,T){var C=a;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=T(b)}function o(b,T){this.h=T;for(var C=[],A=!0,O=b.length-1;0<=O;O--){var N=b[O]|0;A&&N==T||(C[O]=N,A=!1)}this.g=C}var a={};function u(b){return-128<=b&&128>b?s(b,function(T){return new o([T|0],0>T?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(l(-b));for(var T=[],C=1,A=0;b>=C;A++)T[A]=b/C|0,C*=4294967296;return new o(T,0)}function c(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return g(c(b.substring(1),T));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(T,8)),A=f,O=0;O<b.length;O+=8){var N=Math.min(8,b.length-O),k=parseInt(b.substring(O,O+N),T);8>N?(N=l(Math.pow(T,N)),A=A.j(N).add(l(k))):(A=A.j(C),A=A.add(l(k)))}return A}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var b=0,T=1,C=0;C<this.g.length;C++){var A=this.i(C);b+=(0<=A?A:4294967296+A)*T,T*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(p(this))return"0";if(m(this))return"-"+g(this).toString(b);for(var T=l(Math.pow(b,6)),C=this,A="";;){var O=w(C,T).g;C=y(C,O.j(T));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=O,p(C))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function p(b){if(b.h!=0)return!1;for(var T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function m(b){return b.h==-1}e.l=function(b){return b=y(this,b),m(b)?-1:p(b)?0:1};function g(b){for(var T=b.g.length,C=[],A=0;A<T;A++)C[A]=~b.g[A];return new o(C,~b.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(b){for(var T=Math.max(this.g.length,b.g.length),C=[],A=0,O=0;O<=T;O++){var N=A+(this.i(O)&65535)+(b.i(O)&65535),k=(N>>>16)+(this.i(O)>>>16)+(b.i(O)>>>16);A=k>>>16,N&=65535,k&=65535,C[O]=k<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(b,T){return b.add(g(T))}e.j=function(b){if(p(this)||p(b))return f;if(m(this))return m(b)?g(this).j(g(b)):g(g(this).j(b));if(m(b))return g(this.j(g(b)));if(0>this.l(h)&&0>b.l(h))return l(this.m()*b.m());for(var T=this.g.length+b.g.length,C=[],A=0;A<2*T;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var O=0;O<b.g.length;O++){var N=this.i(A)>>>16,k=this.i(A)&65535,L=b.i(O)>>>16,B=b.i(O)&65535;C[2*A+2*O]+=k*B,v(C,2*A+2*O),C[2*A+2*O+1]+=N*B,v(C,2*A+2*O+1),C[2*A+2*O+1]+=k*L,v(C,2*A+2*O+1),C[2*A+2*O+2]+=N*L,v(C,2*A+2*O+2)}for(A=0;A<T;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=T;A<2*T;A++)C[A]=0;return new o(C,0)};function v(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function _(b,T){this.g=b,this.h=T}function w(b,T){if(p(T))throw Error("division by zero");if(p(b))return new _(f,f);if(m(b))return T=w(g(b),T),new _(g(T.g),g(T.h));if(m(T))return T=w(b,g(T)),new _(g(T.g),T.h);if(30<b.g.length){if(m(b)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var C=d,A=T;0>=A.l(b);)C=x(C),A=x(A);var O=E(C,1),N=E(A,1);for(A=E(A,2),C=E(C,2);!p(A);){var k=N.add(A);0>=k.l(b)&&(O=O.add(C),N=k),A=E(A,1),C=E(C,1)}return T=y(b,O.j(T)),new _(O,T)}for(O=f;0<=b.l(T);){for(C=Math.max(1,Math.floor(b.m()/T.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=l(C),k=N.j(T);m(k)||0<k.l(b);)C-=A,N=l(C),k=N.j(T);p(N)&&(N=d),O=O.add(N),b=y(b,k)}return new _(O,b)}e.A=function(b){return w(this,b).h},e.and=function(b){for(var T=Math.max(this.g.length,b.g.length),C=[],A=0;A<T;A++)C[A]=this.i(A)&b.i(A);return new o(C,this.h&b.h)},e.or=function(b){for(var T=Math.max(this.g.length,b.g.length),C=[],A=0;A<T;A++)C[A]=this.i(A)|b.i(A);return new o(C,this.h|b.h)},e.xor=function(b){for(var T=Math.max(this.g.length,b.g.length),C=[],A=0;A<T;A++)C[A]=this.i(A)^b.i(A);return new o(C,this.h^b.h)};function x(b){for(var T=b.g.length+1,C=[],A=0;A<T;A++)C[A]=b.i(A)<<1|b.i(A-1)>>>31;return new o(C,b.h)}function E(b,T){var C=T>>5;T%=32;for(var A=b.g.length-C,O=[],N=0;N<A;N++)O[N]=0<T?b.i(N+C)>>>T|b.i(N+C+1)<<32-T:b.i(N+C);return new o(O,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,k6e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Xv=o}).apply(typeof Hge<"u"?Hge:typeof self<"u"?self:typeof window<"u"?window:{});var yk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $6e,R6e,BT,N6e,eR,NH,D6e,M6e,L6e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,R,F){return S==Array.prototype||S==Object.prototype||(S[R]=F.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof yk=="object"&&yk];for(var R=0;R<S.length;++R){var F=S[R];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(S,R){if(R)e:{var F=r;S=S.split(".");for(var Q=0;Q<S.length-1;Q++){var _e=S[Q];if(!(_e in F))break e;F=F[_e]}S=S[S.length-1],Q=F[S],R=R(Q),R!=Q&&R!=null&&t(F,S,{configurable:!0,writable:!0,value:R})}}function s(S,R){S instanceof String&&(S+="");var F=0,Q=!1,_e={next:function(){if(!Q&&F<S.length){var Ae=F++;return{value:R(Ae,S[Ae]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(S){return S||function(){return s(this,function(R,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(S){var R=typeof S;return R=R!="object"?R:S?Array.isArray(S)?"array":R:"null",R=="array"||R=="object"&&typeof S.length=="number"}function l(S){var R=typeof S;return R=="object"&&S!=null||R=="function"}function c(S,R,F){return S.call.apply(S.bind,arguments)}function f(S,R,F){if(!S)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),S.apply(R,_e)}}return function(){return S.apply(R,arguments)}}function d(S,R,F){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(S,R){var F=Array.prototype.slice.call(arguments,1);return function(){var Q=F.slice();return Q.push.apply(Q,arguments),S.apply(this,Q)}}function p(S,R){function F(){}F.prototype=R.prototype,S.aa=R.prototype,S.prototype=new F,S.prototype.constructor=S,S.Qb=function(Q,_e,Ae){for(var ut=Array(arguments.length-2),Zr=2;Zr<arguments.length;Zr++)ut[Zr-2]=arguments[Zr];return R.prototype[_e].apply(Q,ut)}}function m(S){const R=S.length;if(0<R){const F=Array(R);for(let Q=0;Q<R;Q++)F[Q]=S[Q];return F}return[]}function g(S,R){for(let F=1;F<arguments.length;F++){const Q=arguments[F];if(u(Q)){const _e=S.length||0,Ae=Q.length||0;S.length=_e+Ae;for(let ut=0;ut<Ae;ut++)S[_e+ut]=Q[ut]}else S.push(Q)}}class y{constructor(R,F){this.i=R,this.j=F,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function v(S){return/^[\s\xa0]*$/.test(S)}function _(){var S=a.navigator;return S&&(S=S.userAgent)?S:""}function w(S){return w[" "](S),S}w[" "]=function(){};var x=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function E(S,R,F){for(const Q in S)R.call(F,S[Q],Q,S)}function b(S,R){for(const F in S)R.call(void 0,S[F],F,S)}function T(S){const R={};for(const F in S)R[F]=S[F];return R}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(S,R){let F,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(F in Q)S[F]=Q[F];for(let Ae=0;Ae<C.length;Ae++)F=C[Ae],Object.prototype.hasOwnProperty.call(Q,F)&&(S[F]=Q[F])}}function O(S){var R=1;S=S.split(":");const F=[];for(;0<R&&S.length;)F.push(S.shift()),R--;return S.length&&F.push(S.join(":")),F}function N(S){a.setTimeout(()=>{throw S},0)}function k(){var S=Y;let R=null;return S.g&&(R=S.g,S.g=S.g.next,S.g||(S.h=null),R.next=null),R}class L{constructor(){this.h=this.g=null}add(R,F){const Q=B.get();Q.set(R,F),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var B=new y(()=>new U,S=>S.reset());class U{constructor(){this.next=this.g=this.h=null}set(R,F){this.h=R,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let G,H=!1,Y=new L,q=()=>{const S=a.Promise.resolve(void 0);G=()=>{S.then(D)}};var D=()=>{for(var S;S=k();){try{S.h.call(S.g)}catch(F){N(F)}var R=B;R.j(S),100>R.h&&(R.h++,S.next=R.g,R.g=S)}H=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(S,R){this.type=S,this.g=this.target=R,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var S=!1,R=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const F=()=>{};a.addEventListener("test",F,R),a.removeEventListener("test",F,R)}catch{}return S}();function V(S,R){if(W.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var F=this.type=S.type,Q=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=R,R=S.relatedTarget){if(x){e:{try{w(R.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(R=null)}}else F=="mouseover"?R=S.fromElement:F=="mouseout"&&(R=S.toElement);this.relatedTarget=R,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:te[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&V.aa.h.call(this)}}p(V,W);var te={2:"touch",3:"pen",4:"mouse"};V.prototype.h=function(){V.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),me=0;function ye(S,R,F,Q,_e){this.listener=S,this.proxy=null,this.src=R,this.type=F,this.capture=!!Q,this.ha=_e,this.key=++me,this.da=this.fa=!1}function de(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function we(S){this.src=S,this.g={},this.h=0}we.prototype.add=function(S,R,F,Q,_e){var Ae=S.toString();S=this.g[Ae],S||(S=this.g[Ae]=[],this.h++);var ut=Ve(S,R,Q,_e);return-1<ut?(R=S[ut],F||(R.fa=!1)):(R=new ye(R,this.src,Ae,!!Q,_e),R.fa=F,S.push(R)),R};function he(S,R){var F=R.type;if(F in S.g){var Q=S.g[F],_e=Array.prototype.indexOf.call(Q,R,void 0),Ae;(Ae=0<=_e)&&Array.prototype.splice.call(Q,_e,1),Ae&&(de(R),S.g[F].length==0&&(delete S.g[F],S.h--))}}function Ve(S,R,F,Q){for(var _e=0;_e<S.length;++_e){var Ae=S[_e];if(!Ae.da&&Ae.listener==R&&Ae.capture==!!F&&Ae.ha==Q)return _e}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),Ye={};function Fe(S,R,F,Q,_e){if(Q&&Q.once)return Qt(S,R,F,Q,_e);if(Array.isArray(R)){for(var Ae=0;Ae<R.length;Ae++)Fe(S,R[Ae],F,Q,_e);return null}return F=Ht(F),S&&S[le]?S.K(R,F,l(Q)?!!Q.capture:!!Q,_e):De(S,R,F,!1,Q,_e)}function De(S,R,F,Q,_e,Ae){if(!R)throw Error("Invalid event type");var ut=l(_e)?!!_e.capture:!!_e,Zr=ht(S);if(Zr||(S[Me]=Zr=new we(S)),F=Zr.add(R,F,Q,ut,Ae),F.proxy)return F;if(Q=He(),F.proxy=Q,Q.src=S,Q.listener=F,S.addEventListener)z||(_e=ut),_e===void 0&&(_e=!1),S.addEventListener(R.toString(),Q,_e);else if(S.attachEvent)S.attachEvent(Pt(R.toString()),Q);else if(S.addListener&&S.removeListener)S.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return F}function He(){function S(F){return R.call(S.src,S.listener,F)}const R=at;return S}function Qt(S,R,F,Q,_e){if(Array.isArray(R)){for(var Ae=0;Ae<R.length;Ae++)Qt(S,R[Ae],F,Q,_e);return null}return F=Ht(F),S&&S[le]?S.L(R,F,l(Q)?!!Q.capture:!!Q,_e):De(S,R,F,!0,Q,_e)}function nt(S,R,F,Q,_e){if(Array.isArray(R))for(var Ae=0;Ae<R.length;Ae++)nt(S,R[Ae],F,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,F=Ht(F),S&&S[le]?(S=S.i,R=String(R).toString(),R in S.g&&(Ae=S.g[R],F=Ve(Ae,F,Q,_e),-1<F&&(de(Ae[F]),Array.prototype.splice.call(Ae,F,1),Ae.length==0&&(delete S.g[R],S.h--)))):S&&(S=ht(S))&&(R=S.g[R.toString()],S=-1,R&&(S=Ve(R,F,Q,_e)),(F=-1<S?R[S]:null)&&qe(F))}function qe(S){if(typeof S!="number"&&S&&!S.da){var R=S.src;if(R&&R[le])he(R.i,S);else{var F=S.type,Q=S.proxy;R.removeEventListener?R.removeEventListener(F,Q,S.capture):R.detachEvent?R.detachEvent(Pt(F),Q):R.addListener&&R.removeListener&&R.removeListener(Q),(F=ht(R))?(he(F,S),F.h==0&&(F.src=null,R[Me]=null)):de(S)}}}function Pt(S){return S in Ye?Ye[S]:Ye[S]="on"+S}function at(S,R){if(S.da)S=!0;else{R=new V(R,this);var F=S.listener,Q=S.ha||S.src;S.fa&&qe(S),S=F.call(Q,R)}return S}function ht(S){return S=S[Me],S instanceof we?S:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(S){return typeof S=="function"?S:(S[vt]||(S[vt]=function(R){return S.handleEvent(R)}),S[vt])}function Xt(){M.call(this),this.i=new we(this),this.M=this,this.F=null}p(Xt,M),Xt.prototype[le]=!0,Xt.prototype.removeEventListener=function(S,R,F,Q){nt(this,S,R,F,Q)};function fe(S,R){var F,Q=S.F;if(Q)for(F=[];Q;Q=Q.F)F.push(Q);if(S=S.M,Q=R.type||R,typeof R=="string")R=new W(R,S);else if(R instanceof W)R.target=R.target||S;else{var _e=R;R=new W(Q,S),A(R,_e)}if(_e=!0,F)for(var Ae=F.length-1;0<=Ae;Ae--){var ut=R.g=F[Ae];_e=xe(ut,Q,!0,R)&&_e}if(ut=R.g=S,_e=xe(ut,Q,!0,R)&&_e,_e=xe(ut,Q,!1,R)&&_e,F)for(Ae=0;Ae<F.length;Ae++)ut=R.g=F[Ae],_e=xe(ut,Q,!1,R)&&_e}Xt.prototype.N=function(){if(Xt.aa.N.call(this),this.i){var S=this.i,R;for(R in S.g){for(var F=S.g[R],Q=0;Q<F.length;Q++)de(F[Q]);delete S.g[R],S.h--}}this.F=null},Xt.prototype.K=function(S,R,F,Q){return this.i.add(String(S),R,!1,F,Q)},Xt.prototype.L=function(S,R,F,Q){return this.i.add(String(S),R,!0,F,Q)};function xe(S,R,F,Q){if(R=S.i.g[String(R)],!R)return!0;R=R.concat();for(var _e=!0,Ae=0;Ae<R.length;++Ae){var ut=R[Ae];if(ut&&!ut.da&&ut.capture==F){var Zr=ut.listener,mo=ut.ha||ut.src;ut.fa&&he(S.i,ut),_e=Zr.call(mo,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function Le(S,R,F){if(typeof S=="function")F&&(S=d(S,F));else if(S&&typeof S.handleEvent=="function")S=d(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:a.setTimeout(S,R||0)}function ct(S){S.g=Le(()=>{S.g=null,S.i&&(S.i=!1,ct(S))},S.l);const R=S.h;S.h=null,S.m.apply(null,R)}class Je extends M{constructor(R,F){super(),this.m=R,this.l=F,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(S){M.call(this),this.h=S,this.g={}}p(lt,M);var st=[];function At(S){E(S.g,function(R,F){this.g.hasOwnProperty(F)&&qe(R)},S),S.g={}}lt.prototype.N=function(){lt.aa.N.call(this),At(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=a.JSON.stringify,Zt=a.JSON.parse,Jt=class{stringify(S){return a.JSON.stringify(S,void 0)}parse(S){return a.JSON.parse(S,void 0)}};function nr(){}nr.prototype.h=null;function Bn(S){return S.h||(S.h=S.i())}function Bo(){}var hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ni(){W.call(this,"d")}p(Ni,W);function jr(){W.call(this,"c")}p(jr,W);var Ir={},Ur=null;function rr(){return Ur=Ur||new Xt}Ir.La="serverreachability";function Et(S){W.call(this,Ir.La,S)}p(Et,W);function pr(S){const R=rr();fe(R,new Et(R))}Ir.STAT_EVENT="statevent";function fi(S,R){W.call(this,Ir.STAT_EVENT,S),this.stat=R}p(fi,W);function jn(S){const R=rr();fe(R,new fi(R,S))}Ir.Ma="timingevent";function fs(S,R){W.call(this,Ir.Ma,S),this.size=R}p(fs,W);function ds(S,R){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){S()},R)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function ne(S,R,F,Q,_e,Ae){S.info(function(){if(S.g)if(Ae)for(var ut="",Zr=Ae.split("&"),mo=0;mo<Zr.length;mo++){var mr=Zr[mo].split("=");if(1<mr.length){var Uo=mr[0];mr=mr[1];var zo=Uo.split("_");ut=2<=zo.length&&zo[1]=="type"?ut+(Uo+"="+mr+"&"):ut+(Uo+"=redacted&")}}else ut=null;else ut=Ae;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+R+`
`+F+`
`+ut})}function ue(S,R,F,Q,_e,Ae,ut){S.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+R+`
`+F+`
`+Ae+" "+ut})}function Ee(S,R,F,Q){S.info(function(){return"XMLHTTP TEXT ("+R+"): "+St(S,F)+(Q?" "+Q:"")})}function Se(S,R){S.info(function(){return"TIMEOUT: "+R})}oe.prototype.info=function(){};function St(S,R){if(!S.g)return R;if(!R)return null;try{var F=JSON.parse(R);if(F){for(S=0;S<F.length;S++)if(Array.isArray(F[S])){var Q=F[S];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var Ae=_e[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(var ut=1;ut<_e.length;ut++)_e[ut]=""}}}}return Tn(F)}catch{return R}}var ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ft;function Ct(){}p(Ct,nr),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},Ft=new Ct;function Bt(S,R,F,Q){this.j=S,this.i=R,this.l=F,this.R=Q||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Er={},qt={};function ir(S,R,F){S.L=1,S.v=Xr(Xe(R)),S.m=F,S.P=!0,en(S,null)}function en(S,R){S.F=Date.now(),wi(S),S.A=Xe(S.v);var F=S.A,Q=S.R;Array.isArray(Q)||(Q=[String(Q)]),KO(F.i,"t",Q),S.C=0,F=S.j.J,S.h=new un,S.g=Wie(S.j,F?R:null,!S.m),0<S.O&&(S.M=new Je(d(S.Y,S,S.g),S.O)),R=S.U,F=S.g,Q=S.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(st[0]=_e.toString()),_e=st);for(var Ae=0;Ae<_e.length;Ae++){var ut=Fe(F,_e[Ae],Q||R.handleEvent,!1,R.h||R);if(!ut)break;R.g[ut.key]=ut}R=S.H?T(S.H):{},S.m?(S.u||(S.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,R)):(S.u="GET",S.g.ea(S.A,S.u,null,R)),pr(),ne(S.i,S.u,S.A,S.l,S.R,S.m)}Bt.prototype.ca=function(S){S=S.target;const R=this.M;R&&zi(S)==3?R.j():this.Y(S)},Bt.prototype.Y=function(S){try{if(S==this.g)e:{const zo=zi(this.g);var R=this.g.Ba();const L_=this.g.Z();if(!(3>zo)&&(zo!=3||this.g&&(this.h.h||this.g.oa()||jo(this.g)))){this.J||zo!=4||R==7||(R==8||0>=L_?pr(3):pr(2)),Cs(this);var F=this.g.Z();this.X=F;t:if(Gn(this)){var Q=jo(this.g);S="";var _e=Q.length,Ae=zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),Di(this);var ut="";break t}this.h.i=new a.TextDecoder}for(R=0;R<_e;R++)this.h.h=!0,S+=this.h.i.decode(Q[R],{stream:!(Ae&&R==_e-1)});Q.length=0,this.h.g+=S,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=F==200,ue(this.i,this.u,this.A,this.l,this.R,zo,F),this.o){if(this.T&&!this.K){t:{if(this.g){var Zr,mo=this.g;if((Zr=mo.g?mo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Zr)){var mr=Zr;break t}}mr=null}if(F=mr)Ee(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wt(this,F);else{this.o=!1,this.s=3,jn(12),Sr(this),Di(this);break e}}if(this.P){F=!0;let Dc;for(;!this.J&&this.C<ut.length;)if(Dc=si(this,ut),Dc==qt){zo==4&&(this.s=4,jn(14),F=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Dc==Er){this.s=4,jn(15),Ee(this.i,this.l,ut,"[Invalid Chunk]"),F=!1;break}else Ee(this.i,this.l,Dc,null),wt(this,Dc);if(Gn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zo!=4||ut.length!=0||this.h.h||(this.s=1,jn(16),F=!1),this.o=this.o&&F,!F)Ee(this.i,this.l,ut,"[Invalid Chunked Response]"),Sr(this),Di(this);else if(0<ut.length&&!this.W){this.W=!0;var Uo=this.j;Uo.g==this&&Uo.ba&&!Uo.M&&(Uo.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),r9(Uo),Uo.M=!0,jn(11))}}else Ee(this.i,this.l,ut,null),wt(this,ut);zo==4&&Sr(this),this.o&&!this.J&&(zo==4?zie(this.j,this):(this.o=!1,wi(this)))}else Iy(this.g),F==400&&0<ut.indexOf("Unknown SID")?(this.s=3,jn(12)):(this.s=0,jn(13)),Sr(this),Di(this)}}}catch{}finally{}};function Gn(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function si(S,R){var F=S.C,Q=R.indexOf(`
`,F);return Q==-1?qt:(F=Number(R.substring(F,Q)),isNaN(F)?Er:(Q+=1,Q+F>R.length?qt:(R=R.slice(Q,Q+F),S.C=Q+F,R)))}Bt.prototype.cancel=function(){this.J=!0,Sr(this)};function wi(S){S.S=Date.now()+S.I,Ei(S,S.I)}function Ei(S,R){if(S.B!=null)throw Error("WatchDog timer not null");S.B=ds(d(S.ba,S),R)}function Cs(S){S.B&&(a.clearTimeout(S.B),S.B=null)}Bt.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Se(this.i,this.A),this.L!=2&&(pr(),jn(17)),Sr(this),this.s=2,Di(this)):Ei(this,this.S-S)};function Di(S){S.j.G==0||S.J||zie(S.j,S)}function Sr(S){Cs(S);var R=S.M;R&&typeof R.ma=="function"&&R.ma(),S.M=null,At(S.U),S.g&&(R=S.g,S.g=null,R.abort(),R.ma())}function wt(S,R){try{var F=S.j;if(F.G!=0&&(F.g==S||K(F.h,S))){if(!S.K&&K(F.h,S)&&F.G==3){try{var Q=F.Da.g.parse(R)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<S.F)nP(F),eP(F);else break e;n9(F),jn(18)}}else F.za=_e[1],0<F.za-F.T&&37500>_e[2]&&F.F&&F.v==0&&!F.C&&(F.C=ds(d(F.Za,F),6e3));if(1>=po(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else Oy(F,11)}else if((S.K||F.g==S)&&nP(F),!v(R))for(_e=F.Da.g.parse(R),R=0;R<_e.length;R++){let mr=_e[R];if(F.T=mr[0],mr=mr[1],F.G==2)if(mr[0]=="c"){F.K=mr[1],F.ia=mr[2];const Uo=mr[3];Uo!=null&&(F.la=Uo,F.j.info("VER="+F.la));const zo=mr[4];zo!=null&&(F.Aa=zo,F.j.info("SVER="+F.Aa));const L_=mr[5];L_!=null&&typeof L_=="number"&&0<L_&&(Q=1.5*L_,F.L=Q,F.j.info("backChannelRequestTimeoutMs_="+Q)),Q=F;const Dc=S.g;if(Dc){const iP=Dc.g?Dc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iP){var Ae=Q.h;Ae.g||iP.indexOf("spdy")==-1&&iP.indexOf("quic")==-1&&iP.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(se(Ae,Ae.h),Ae.h=null))}if(Q.D){const i9=Dc.g?Dc.g.getResponseHeader("X-HTTP-Session-Id"):null;i9&&(Q.ya=i9,Mt(Q.I,Q.D,i9))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-S.F,F.j.info("Handshake RTT: "+F.R+"ms")),Q=F;var ut=S;if(Q.qa=qie(Q,Q.J?Q.ia:null,Q.W),ut.K){Z(Q.h,ut);var Zr=ut,mo=Q.L;mo&&(Zr.I=mo),Zr.B&&(Cs(Zr),wi(Zr)),Q.g=ut}else jie(Q);0<F.i.length&&tP(F)}else mr[0]!="stop"&&mr[0]!="close"||Oy(F,7);else F.G==3&&(mr[0]=="stop"||mr[0]=="close"?mr[0]=="stop"?Oy(F,7):D_(F):mr[0]!="noop"&&F.l&&F.l.ta(mr),F.v=0)}}pr(4)}catch{}}var An=class{constructor(S,R){this.g=S,this.map=R}};function Rr(S){this.l=S||10,a.PerformanceNavigationTiming?(S=a.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ns(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function po(S){return S.h?1:S.g?S.g.size:0}function K(S,R){return S.h?S.h==R:S.g?S.g.has(R):!1}function se(S,R){S.g?S.g.add(R):S.h=R}function Z(S,R){S.h&&S.h==R?S.h=null:S.g&&S.g.has(R)&&S.g.delete(R)}Rr.prototype.cancel=function(){if(this.i=ge(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ge(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let R=S.i;for(const F of S.g.values())R=R.concat(F.D);return R}return m(S.i)}function ve(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(u(S)){for(var R=[],F=S.length,Q=0;Q<F;Q++)R.push(S[Q]);return R}R=[],F=0;for(Q in S)R[F++]=S[Q];return R}function pe(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(u(S)||typeof S=="string"){var R=[];S=S.length;for(var F=0;F<S;F++)R.push(F);return R}R=[],F=0;for(const Q in S)R[F++]=Q;return R}}}function Oe(S,R){if(S.forEach&&typeof S.forEach=="function")S.forEach(R,void 0);else if(u(S)||typeof S=="string")Array.prototype.forEach.call(S,R,void 0);else for(var F=pe(S),Q=ve(S),_e=Q.length,Ae=0;Ae<_e;Ae++)R.call(void 0,Q[Ae],F&&F[Ae],S)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function We(S,R){if(S){S=S.split("&");for(var F=0;F<S.length;F++){var Q=S[F].indexOf("="),_e=null;if(0<=Q){var Ae=S[F].substring(0,Q);_e=S[F].substring(Q+1)}else Ae=S[F];R(Ae,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Ue(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof Ue){this.h=S.h,xt(this,S.j),this.o=S.o,this.g=S.g,nn(this,S.s),this.l=S.l;var R=S.i,F=new Ml;F.i=R.i,R.g&&(F.g=new Map(R.g),F.h=R.h),Yn(this,F),this.m=S.m}else S&&(R=String(S).match(je))?(this.h=!1,xt(this,R[1]||"",!0),this.o=Or(R[2]||""),this.g=Or(R[3]||"",!0),nn(this,R[4]),this.l=Or(R[5]||"",!0),Yn(this,R[6]||"",!0),this.m=Or(R[7]||"")):(this.h=!1,this.i=new Ml(null,this.h))}Ue.prototype.toString=function(){var S=[],R=this.j;R&&S.push(hs(R,Nm,!0),":");var F=this.g;return(F||R=="file")&&(S.push("//"),(R=this.o)&&S.push(hs(R,Nm,!0),"@"),S.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&S.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&S.push("/"),S.push(hs(F,F.charAt(0)=="/"?xy:Sy,!0))),(F=this.i.toString())&&S.push("?",F),(F=this.m)&&S.push("#",hs(F,fx)),S.join("")};function Xe(S){return new Ue(S)}function xt(S,R,F){S.j=F?Or(R,!0):R,S.j&&(S.j=S.j.replace(/:$/,""))}function nn(S,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);S.s=R}else S.s=null}function Yn(S,R,F){R instanceof Ml?(S.i=R,dx(S.i,S.h)):(F||(R=hs(R,YO)),S.i=new Ml(R,S.h))}function Mt(S,R,F){S.i.set(R,F)}function Xr(S){return Mt(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function Or(S,R){return S?R?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function hs(S,R,F){return typeof S=="string"?(S=encodeURI(S).replace(R,Nh),F&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Nh(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Nm=/[#\/\?@]/g,Sy=/[#\?:]/g,xy=/[#\?]/g,YO=/[#\?@]/g,fx=/#/g;function Ml(S,R){this.h=this.g=null,this.i=S||null,this.j=!!R}function Ia(S){S.g||(S.g=new Map,S.h=0,S.i&&We(S.i,function(R,F){S.add(decodeURIComponent(R.replace(/\+/g," ")),F)}))}e=Ml.prototype,e.add=function(S,R){Ia(this),this.i=null,S=Dh(this,S);var F=this.g.get(S);return F||this.g.set(S,F=[]),F.push(R),this.h+=1,this};function $_(S,R){Ia(S),R=Dh(S,R),S.g.has(R)&&(S.i=null,S.h-=S.g.get(R).length,S.g.delete(R))}function R_(S,R){return Ia(S),R=Dh(S,R),S.g.has(R)}e.forEach=function(S,R){Ia(this),this.g.forEach(function(F,Q){F.forEach(function(_e){S.call(R,_e,Q,this)},this)},this)},e.na=function(){Ia(this);const S=Array.from(this.g.values()),R=Array.from(this.g.keys()),F=[];for(let Q=0;Q<R.length;Q++){const _e=S[Q];for(let Ae=0;Ae<_e.length;Ae++)F.push(R[Q])}return F},e.V=function(S){Ia(this);let R=[];if(typeof S=="string")R_(this,S)&&(R=R.concat(this.g.get(Dh(this,S))));else{S=Array.from(this.g.values());for(let F=0;F<S.length;F++)R=R.concat(S[F])}return R},e.set=function(S,R){return Ia(this),this.i=null,S=Dh(this,S),R_(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[R]),this.h+=1,this},e.get=function(S,R){return S?(S=this.V(S),0<S.length?String(S[0]):R):R};function KO(S,R,F){$_(S,R),0<F.length&&(S.i=null,S.g.set(Dh(S,R),m(F)),S.h+=F.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],R=Array.from(this.g.keys());for(var F=0;F<R.length;F++){var Q=R[F];const Ae=encodeURIComponent(String(Q)),ut=this.V(Q);for(Q=0;Q<ut.length;Q++){var _e=Ae;ut[Q]!==""&&(_e+="="+encodeURIComponent(String(ut[Q]))),S.push(_e)}}return this.i=S.join("&")};function Dh(S,R){return R=String(R),S.j&&(R=R.toLowerCase()),R}function dx(S,R){R&&!S.j&&(Ia(S),S.i=null,S.g.forEach(function(F,Q){var _e=Q.toLowerCase();Q!=_e&&($_(this,Q),KO(this,_e,F))},S)),S.j=R}function XO(S,R){const F=new oe;if(a.Image){const Q=new Image;Q.onload=h(iu,F,"TestLoadImage: loaded",!0,R,Q),Q.onerror=h(iu,F,"TestLoadImage: error",!1,R,Q),Q.onabort=h(iu,F,"TestLoadImage: abort",!1,R,Q),Q.ontimeout=h(iu,F,"TestLoadImage: timeout",!1,R,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=S}else R(!1)}function Mh(S,R){const F=new oe,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),iu(F,"TestPingServer: timeout",!1,R)},1e4);fetch(S,{signal:Q.signal}).then(Ae=>{clearTimeout(_e),Ae.ok?iu(F,"TestPingServer: ok",!0,R):iu(F,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(_e),iu(F,"TestPingServer: error",!1,R)})}function iu(S,R,F,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(F)}catch{}}function t9(){this.g=new Jt}function QO(S,R,F){const Q=F||"";try{Oe(S,function(_e,Ae){let ut=_e;l(_e)&&(ut=Tn(_e)),R.push(Q+Ae+"="+encodeURIComponent(ut))})}catch(_e){throw R.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function Ty(S){this.l=S.Ub||null,this.j=S.eb||!1}p(Ty,nr),Ty.prototype.g=function(){return new Ay(this.l,this.j)},Ty.prototype.i=function(S){return function(){return S}}({});function Ay(S,R){Xt.call(this),this.D=S,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ay,Xt),e=Ay.prototype,e.open=function(S,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=R,this.readyState=1,Dm(this)},e.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(R.body=S),(this.D||a).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cy(this)),this.readyState=0},e.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Dm(this)),this.g&&(this.readyState=3,Dm(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;JO(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function JO(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}e.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var R=S.value?S.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!S.done}))&&(this.response=this.responseText+=R)}S.done?Cy(this):Dm(this),this.readyState==3&&JO(this)}},e.Ra=function(S){this.g&&(this.response=this.responseText=S,Cy(this))},e.Qa=function(S){this.g&&(this.response=S,Cy(this))},e.ga=function(){this.g&&Cy(this)};function Cy(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Dm(S)}e.setRequestHeader=function(S,R){this.u.append(S,R)},e.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],R=this.h.entries();for(var F=R.next();!F.done;)F=F.value,S.push(F[0]+": "+F[1]),F=R.next();return S.join(`\r
`)};function Dm(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Ay.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function ZO(S){let R="";return E(S,function(F,Q){R+=Q,R+=":",R+=F,R+=`\r
`}),R}function re(S,R,F){e:{for(Q in F){var Q=!1;break e}Q=!0}Q||(F=ZO(F),typeof S=="string"?F!=null&&encodeURIComponent(String(F)):Mt(S,R,F))}function ce(S){Xt.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ce,Xt);var Te=/^https?$/i,Tt=["POST","PUT"];e=ce.prototype,e.Ha=function(S){this.J=S},e.ea=function(S,R,F,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);R=R?R.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ft.g(),this.v=this.o?Bn(this.o):Bn(Ft),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(R,String(S),!0),this.B=!1}catch(Ae){Fn(this,Ae);return}if(S=F||"",F=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)F.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ae of Q.keys())F.set(Ae,Q.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(F.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),_e=a.FormData&&S instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Tt,R,void 0))||Q||_e||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,ut]of F)this.g.setRequestHeader(Ae,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jr(this),this.u=!0,this.g.send(S),this.u=!1}catch(Ae){Fn(this,Ae)}};function Fn(S,R){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=R,S.m=5,Pr(S),On(S)}function Pr(S){S.A||(S.A=!0,fe(S,"complete"),fe(S,"error"))}e.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,fe(this,"complete"),fe(this,"abort"),On(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Qr(this):this.bb())},e.bb=function(){Qr(this)};function Qr(S){if(S.h&&typeof o<"u"&&(!S.v[1]||zi(S)!=4||S.Z()!=2)){if(S.u&&zi(S)==4)Le(S.Ea,0,S);else if(fe(S,"readystatechange"),zi(S)==4){S.h=!1;try{const ut=S.Z();e:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var F;if(!(F=R)){var Q;if(Q=ut===0){var _e=String(S.D).match(je)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Te.test(_e?_e.toLowerCase():"")}F=Q}if(F)fe(S,"complete"),fe(S,"success");else{S.m=6;try{var Ae=2<zi(S)?S.g.statusText:""}catch{Ae=""}S.l=Ae+" ["+S.Z()+"]",Pr(S)}}finally{On(S)}}}}function On(S,R){if(S.g){Jr(S);const F=S.g,Q=S.v[0]?()=>{}:null;S.g=null,S.v=null,R||fe(S,"ready");try{F.onreadystatechange=Q}catch{}}}function Jr(S){S.I&&(a.clearTimeout(S.I),S.I=null)}e.isActive=function(){return!!this.g};function zi(S){return S.g?S.g.readyState:0}e.Z=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(S){if(this.g){var R=this.g.responseText;return S&&R.indexOf(S)==0&&(R=R.substring(S.length)),Zt(R)}};function jo(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Iy(S){const R={};S=(S.g&&2<=zi(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<S.length;Q++){if(v(S[Q]))continue;var F=O(S[Q]);const _e=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const Ae=R[_e]||[];R[_e]=Ae,Ae.push(F)}b(R,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lh(S,R,F){return F&&F.internalChannelParams&&F.internalChannelParams[S]||R}function N_(S){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lh("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lh("baseRetryDelayMs",5e3,S),this.cb=Lh("retryDelaySeedMs",1e4,S),this.Wa=Lh("forwardChannelMaxRetries",2,S),this.wa=Lh("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Rr(S&&S.concurrentRequestLimit),this.Da=new t9,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=N_.prototype,e.la=8,e.G=1,e.connect=function(S,R,F,Q){jn(0),this.W=S,this.H=R||{},F&&Q!==void 0&&(this.H.OSID=F,this.H.OAID=Q),this.F=this.X,this.I=qie(this,null,this.W),tP(this)};function D_(S){if(Lie(S),S.G==3){var R=S.U++,F=Xe(S.I);if(Mt(F,"SID",S.K),Mt(F,"RID",R),Mt(F,"TYPE","terminate"),hx(S,F),R=new Bt(S,S.j,R),R.L=2,R.v=Xr(Xe(F)),F=!1,a.navigator&&a.navigator.sendBeacon)try{F=a.navigator.sendBeacon(R.v.toString(),"")}catch{}!F&&a.Image&&(new Image().src=R.v,F=!0),F||(R.g=Wie(R.j,null),R.g.ea(R.v)),R.F=Date.now(),wi(R)}Hie(S)}function eP(S){S.g&&(r9(S),S.g.cancel(),S.g=null)}function Lie(S){eP(S),S.u&&(a.clearTimeout(S.u),S.u=null),nP(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&a.clearTimeout(S.s),S.s=null)}function tP(S){if(!ns(S.h)&&!S.s){S.s=!0;var R=S.Ga;G||q(),H||(G(),H=!0),Y.add(R,S),S.B=0}}function sWe(S,R){return po(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=R.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=ds(d(S.Ga,S,R),Vie(S,S.B)),S.B++,!0)}e.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const _e=new Bt(this,this.j,S);let Ae=this.o;if(this.S&&(Ae?(Ae=T(Ae),A(Ae,this.S)):Ae=this.S),this.m!==null||this.O||(_e.H=Ae,Ae=null),this.P)e:{for(var R=0,F=0;F<this.i.length;F++){t:{var Q=this.i[F];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(R+=Q,4096<R){R=F;break e}if(R===4096||F===this.i.length-1){R=F+1;break e}}R=1e3}else R=1e3;R=Bie(this,_e,R),F=Xe(this.I),Mt(F,"RID",S),Mt(F,"CVER",22),this.D&&Mt(F,"X-HTTP-Session-Id",this.D),hx(this,F),Ae&&(this.O?R="headers="+encodeURIComponent(String(ZO(Ae)))+"&"+R:this.m&&re(F,this.m,Ae)),se(this.h,_e),this.Ua&&Mt(F,"TYPE","init"),this.P?(Mt(F,"$req",R),Mt(F,"SID","null"),_e.T=!0,ir(_e,F,null)):ir(_e,F,R),this.G=2}}else this.G==3&&(S?Fie(this,S):this.i.length==0||ns(this.h)||Fie(this))};function Fie(S,R){var F;R?F=R.l:F=S.U++;const Q=Xe(S.I);Mt(Q,"SID",S.K),Mt(Q,"RID",F),Mt(Q,"AID",S.T),hx(S,Q),S.m&&S.o&&re(Q,S.m,S.o),F=new Bt(S,S.j,F,S.B+1),S.m===null&&(F.H=S.o),R&&(S.i=R.D.concat(S.i)),R=Bie(S,F,1e3),F.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),se(S.h,F),ir(F,Q,R)}function hx(S,R){S.H&&E(S.H,function(F,Q){Mt(R,Q,F)}),S.l&&Oe({},function(F,Q){Mt(R,Q,F)})}function Bie(S,R,F){F=Math.min(S.i.length,F);var Q=S.l?d(S.l.Na,S.l,S):null;e:{var _e=S.i;let Ae=-1;for(;;){const ut=["count="+F];Ae==-1?0<F?(Ae=_e[0].g,ut.push("ofs="+Ae)):Ae=0:ut.push("ofs="+Ae);let Zr=!0;for(let mo=0;mo<F;mo++){let mr=_e[mo].g;const Uo=_e[mo].map;if(mr-=Ae,0>mr)Ae=Math.max(0,_e[mo].g-100),Zr=!1;else try{QO(Uo,ut,"req"+mr+"_")}catch{Q&&Q(Uo)}}if(Zr){Q=ut.join("&");break e}}}return S=S.i.splice(0,F),R.D=S,Q}function jie(S){if(!S.g&&!S.u){S.Y=1;var R=S.Fa;G||q(),H||(G(),H=!0),Y.add(R,S),S.v=0}}function n9(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=ds(d(S.Fa,S),Vie(S,S.v)),S.v++,!0)}e.Fa=function(){if(this.u=null,Uie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=ds(d(this.ab,this),S)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jn(10),eP(this),Uie(this))};function r9(S){S.A!=null&&(a.clearTimeout(S.A),S.A=null)}function Uie(S){S.g=new Bt(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var R=Xe(S.qa);Mt(R,"RID","rpc"),Mt(R,"SID",S.K),Mt(R,"AID",S.T),Mt(R,"CI",S.F?"0":"1"),!S.F&&S.ja&&Mt(R,"TO",S.ja),Mt(R,"TYPE","xmlhttp"),hx(S,R),S.m&&S.o&&re(R,S.m,S.o),S.L&&(S.g.I=S.L);var F=S.g;S=S.ia,F.L=1,F.v=Xr(Xe(R)),F.m=null,F.P=!0,en(F,S)}e.Za=function(){this.C!=null&&(this.C=null,eP(this),n9(this),jn(19))};function nP(S){S.C!=null&&(a.clearTimeout(S.C),S.C=null)}function zie(S,R){var F=null;if(S.g==R){nP(S),r9(S),S.g=null;var Q=2}else if(K(S.h,R))F=R.D,Z(S.h,R),Q=1;else return;if(S.G!=0){if(R.o)if(Q==1){F=R.m?R.m.length:0,R=Date.now()-R.F;var _e=S.B;Q=rr(),fe(Q,new fs(Q,F)),tP(S)}else jie(S);else if(_e=R.s,_e==3||_e==0&&0<R.X||!(Q==1&&sWe(S,R)||Q==2&&n9(S)))switch(F&&0<F.length&&(R=S.h,R.i=R.i.concat(F)),_e){case 1:Oy(S,5);break;case 4:Oy(S,10);break;case 3:Oy(S,6);break;default:Oy(S,2)}}}function Vie(S,R){let F=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(F*=2),F*R}function Oy(S,R){if(S.j.info("Error code "+R),R==2){var F=d(S.fb,S),Q=S.Xa;const _e=!Q;Q=new Ue(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xt(Q,"https"),Xr(Q),_e?XO(Q.toString(),F):Mh(Q.toString(),F)}else jn(2);S.G=0,S.l&&S.l.sa(R),Hie(S),Lie(S)}e.fb=function(S){S?(this.j.info("Successfully pinged google.com"),jn(2)):(this.j.info("Failed to ping google.com"),jn(1))};function Hie(S){if(S.G=0,S.ka=[],S.l){const R=ge(S.h);(R.length!=0||S.i.length!=0)&&(g(S.ka,R),g(S.ka,S.i),S.h.i.length=0,m(S.i),S.i.length=0),S.l.ra()}}function qie(S,R,F){var Q=F instanceof Ue?Xe(F):new Ue(F);if(Q.g!="")R&&(Q.g=R+"."+Q.g),nn(Q,Q.s);else{var _e=a.location;Q=_e.protocol,R=R?R+"."+_e.hostname:_e.hostname,_e=+_e.port;var Ae=new Ue(null);Q&&xt(Ae,Q),R&&(Ae.g=R),_e&&nn(Ae,_e),F&&(Ae.l=F),Q=Ae}return F=S.D,R=S.ya,F&&R&&Mt(Q,F,R),Mt(Q,"VER",S.la),hx(S,Q),Q}function Wie(S,R,F){if(R&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=S.Ca&&!S.pa?new ce(new Ty({eb:F})):new ce(S.pa),R.Ha(S.J),R}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gie(){}e=Gie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function rP(){}rP.prototype.g=function(S,R){return new Yu(S,R)};function Yu(S,R){Xt.call(this),this.g=new N_(R),this.l=S,this.h=R&&R.messageUrlParams||null,S=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(S?S["X-WebChannel-Content-Type"]=R.messageContentType:S={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(S?S["X-WebChannel-Client-Profile"]=R.va:S={"X-WebChannel-Client-Profile":R.va}),this.g.S=S,(S=R&&R.Sb)&&!v(S)&&(this.g.m=S),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!v(R)&&(this.g.D=R,S=this.h,S!==null&&R in S&&(S=this.h,R in S&&delete S[R])),this.j=new M_(this)}p(Yu,Xt),Yu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yu.prototype.close=function(){D_(this.g)},Yu.prototype.o=function(S){var R=this.g;if(typeof S=="string"){var F={};F.__data__=S,S=F}else this.u&&(F={},F.__data__=Tn(S),S=F);R.i.push(new An(R.Ya++,S)),R.G==3&&tP(R)},Yu.prototype.N=function(){this.g.l=null,delete this.j,D_(this.g),delete this.g,Yu.aa.N.call(this)};function Yie(S){Ni.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var R=S.__sm__;if(R){e:{for(const F in R){S=F;break e}S=void 0}(this.i=S)&&(S=this.i,R=R!==null&&S in R?R[S]:void 0),this.data=R}else this.data=S}p(Yie,Ni);function Kie(){jr.call(this),this.status=1}p(Kie,jr);function M_(S){this.g=S}p(M_,Gie),M_.prototype.ua=function(){fe(this.g,"a")},M_.prototype.ta=function(S){fe(this.g,new Yie(S))},M_.prototype.sa=function(S){fe(this.g,new Kie)},M_.prototype.ra=function(){fe(this.g,"b")},rP.prototype.createWebChannel=rP.prototype.g,Yu.prototype.send=Yu.prototype.o,Yu.prototype.open=Yu.prototype.m,Yu.prototype.close=Yu.prototype.close,L6e=function(){return new rP},M6e=function(){return rr()},D6e=Ir,NH={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,eR=ke,_t.COMPLETE="complete",N6e=_t,Bo.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",Xt.prototype.listen=Xt.prototype.K,BT=Bo,R6e=Ty,ce.prototype.listenOnce=ce.prototype.L,ce.prototype.getLastError=ce.prototype.Ka,ce.prototype.getLastErrorCode=ce.prototype.Ba,ce.prototype.getStatus=ce.prototype.Z,ce.prototype.getResponseJson=ce.prototype.Oa,ce.prototype.getResponseText=ce.prototype.oa,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Ha,$6e=ce}).apply(typeof yk<"u"?yk:typeof self<"u"?self:typeof window<"u"?window:{});const qge="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}cu.UNAUTHENTICATED=new cu(null),cu.GOOGLE_CREDENTIALS=new cu("google-credentials-uid"),cu.FIRST_PARTY=new cu("first-party-uid"),cu.MOCK_USER=new cu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MS="10.12.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new AJ("@firebase/firestore");function Yx(){return T1.logLevel}function $t(e,...t){if(T1.logLevel<=Xn.DEBUG){const n=t.map(HJ);T1.debug(`Firestore (${MS}): ${e}`,...n)}}function im(e,...t){if(T1.logLevel<=Xn.ERROR){const n=t.map(HJ);T1.error(`Firestore (${MS}): ${e}`,...n)}}function dC(e,...t){if(T1.logLevel<=Xn.WARN){const n=t.map(HJ);T1.warn(`Firestore (${MS}): ${e}`,...n)}}function HJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e="Unexpected state"){const t=`FIRESTORE (${MS}) INTERNAL ASSERTION FAILED: `+e;throw im(t),new Error(t)}function li(e,t){e||on()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends ly{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ht{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bHt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(cu.UNAUTHENTICATED))}shutdown(){}}class wHt{constructor(t){this.t=t,this.currentUser=cu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Np;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Np,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Np)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(li(typeof r.accessToken=="string"),new _Ht(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return li(t===null||typeof t=="string"),new cu(t)}}class EHt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=cu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class SHt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new EHt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(cu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xHt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class THt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(li(typeof n.token=="string"),this.R=n.token,new xHt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AHt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=AHt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Tr(e,t){return e<t?-1:e>t?1:0}function SE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return js.fromMillis(Date.now())}static fromDate(t){return js.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new js(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Tr(this.nanoseconds,t.nanoseconds):Tr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new fn(t)}static min(){return new fn(new js(0,0))}static max(){return new fn(new js(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n,r){n===void 0?n=0:n>t.length&&on(),r===void 0?r=t.length-n:r>t.length-n&&on(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return hC.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof hC?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class gi extends hC{construct(t,n,r){return new gi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gi(n)}static emptyPath(){return new gi([])}}const CHt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ao extends hC{construct(t,n,r){return new Ao(t,n,r)}static isValidIdentifier(t){return CHt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ao.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ao(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ao(n)}static emptyPath(){return new Ao([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.path=t}static fromPath(t){return new Gt(gi.fromString(t))}static fromName(t){return new Gt(gi.fromString(t).popFirst(5))}static empty(){return new Gt(gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&gi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return gi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Gt(new gi(t.slice()))}}function IHt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fn.fromTimestamp(r===1e9?new js(n+1,0):new js(n,r));return new O0(i,Gt.empty(),t)}function OHt(e){return new O0(e.readTime,e.key,-1)}class O0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new O0(fn.min(),Gt.empty(),-1)}static max(){return new O0(fn.max(),Gt.empty(),-1)}}function PHt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Gt.comparator(e.documentKey,t.documentKey),n!==0?n:Tr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kHt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $Ht{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==kHt)throw e;$t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ge((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ge?n:Ge.resolve(n)}catch(n){return Ge.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ge.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ge.reject(n)}static resolve(t){return new Ge((n,r)=>{n(t)})}static reject(t){return new Ge((n,r)=>{r(t)})}static waitFor(t){return new Ge((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ge.resolve(!1);for(const r of t)n=n.next(i=>i?Ge.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ge((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ge((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function RHt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function QI(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}qJ.oe=-1;function VF(e){return e==null}function vM(e){return e===0&&1/e==-1/0}function NHt(e){return typeof e=="number"&&Number.isInteger(e)&&!vM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wge(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function h_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function B6e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,n){this.comparator=t,this.root=n||Eo.EMPTY}insert(t,n){return new Ui(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(t){return new Ui(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vk(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vk(this.root,t,this.comparator,!1)}getReverseIterator(){return new vk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vk(this.root,t,this.comparator,!0)}}class vk{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Eo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Eo.RED,this.left=i??Eo.EMPTY,this.right=s??Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Eo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Eo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const t=this.left.check();if(t!==this.right.check())throw on();return t+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1;Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Eo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.comparator=t,this.data=new Ui(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gge(this.data.getIterator())}getIteratorFrom(t){return new Gge(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ko(this.comparator);return n.data=t,n}}class Gge{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this.fields=t,t.sort(Ao.comparator)}static empty(){return new fl([])}unionWith(t){let n=new ko(Ao.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new fl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return SE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new j6e("Invalid base64 string: "+s):s}}(t);return new ba(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ba(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ba.EMPTY_BYTE_STRING=new ba("");const DHt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function P0(e){if(li(!!e),typeof e=="string"){let t=0;const n=DHt.exec(e);if(li(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ys(e.seconds),nanos:ys(e.nanos)}}function ys(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function A1(e){return typeof e=="string"?ba.fromBase64String(e):ba.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function GJ(e){const t=e.mapValue.fields.__previous_value__;return WJ(t)?GJ(t):t}function pC(e){const t=P0(e.mapValue.fields.__local_write_time__.timestampValue);return new js(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MHt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class mC{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new mC("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof mC&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function C1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?WJ(e)?4:LHt(e)?9007199254740991:10:on()}function oh(e,t){if(e===t)return!0;const n=C1(e);if(n!==C1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pC(e).isEqual(pC(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=P0(i.timestampValue),a=P0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return A1(i.bytesValue).isEqual(A1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ys(i.geoPointValue.latitude)===ys(s.geoPointValue.latitude)&&ys(i.geoPointValue.longitude)===ys(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ys(i.integerValue)===ys(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ys(i.doubleValue),a=ys(s.doubleValue);return o===a?vM(o)===vM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return SE(e.arrayValue.values||[],t.arrayValue.values||[],oh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wge(o)!==Wge(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!oh(o[u],a[u])))return!1;return!0}(e,t);default:return on()}}function gC(e,t){return(e.values||[]).find(n=>oh(n,t))!==void 0}function xE(e,t){if(e===t)return 0;const n=C1(e),r=C1(t);if(n!==r)return Tr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ys(s.integerValue||s.doubleValue),u=ys(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Yge(e.timestampValue,t.timestampValue);case 4:return Yge(pC(e),pC(t));case 5:return Tr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=A1(s),u=A1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Tr(a[l],u[l]);if(c!==0)return c}return Tr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Tr(ys(s.latitude),ys(o.latitude));return a!==0?a:Tr(ys(s.longitude),ys(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=xE(a[l],u[l]);if(c)return c}return Tr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===_k.mapValue&&o===_k.mapValue)return 0;if(s===_k.mapValue)return 1;if(o===_k.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Tr(u[f],c[f]);if(d!==0)return d;const h=xE(a[u[f]],l[c[f]]);if(h!==0)return h}return Tr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw on()}}function Yge(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Tr(e,t);const n=P0(e),r=P0(t),i=Tr(n.seconds,r.seconds);return i!==0?i:Tr(n.nanos,r.nanos)}function TE(e){return DH(e)}function DH(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=P0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return A1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Gt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=DH(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${DH(n.fields[o])}`;return i+"}"}(e.mapValue):on()}function Kge(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function MH(e){return!!e&&"integerValue"in e}function YJ(e){return!!e&&"arrayValue"in e}function Xge(e){return!!e&&"nullValue"in e}function Qge(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tR(e){return!!e&&"mapValue"in e}function W2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return h_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=W2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=W2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function LHt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t){this.value=t}static empty(){return new bu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!tR(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=W2(n)}setAll(t){let n=Ao.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=W2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());tR(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return oh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];tR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){h_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new bu(W2(this.value))}}function U6e(e){const t=[];return h_(e.fields,(n,r)=>{const i=new Ao([n]);if(tR(r)){const s=U6e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new fl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new oa(t,0,fn.min(),fn.min(),fn.min(),bu.empty(),0)}static newFoundDocument(t,n,r,i){return new oa(t,1,n,fn.min(),r,i,0)}static newNoDocument(t,n){return new oa(t,2,n,fn.min(),fn.min(),bu.empty(),0)}static newUnknownDocument(t,n){return new oa(t,3,n,fn.min(),fn.min(),bu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(fn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof oa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _M=class{constructor(t,n){this.position=t,this.inclusive=n}};function Jge(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Gt.comparator(Gt.fromName(o.referenceValue),n.key):r=xE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zge(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!oh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,n="asc"){this.field=t,this.dir=n}}function FHt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z6e=class{};class ws extends z6e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new jHt(t,n,r):n==="array-contains"?new VHt(t,r):n==="in"?new HHt(t,r):n==="not-in"?new qHt(t,r):n==="array-contains-any"?new WHt(t,r):new ws(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new UHt(t,r):new zHt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xE(n,this.value)):n!==null&&C1(this.value)===C1(n)&&this.matchesComparison(xE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Af extends z6e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Af(t,n)}matches(t){return V6e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function V6e(e){return e.op==="and"}function H6e(e){return BHt(e)&&V6e(e)}function BHt(e){for(const t of e.filters)if(t instanceof Af)return!1;return!0}function LH(e){if(e instanceof ws)return e.field.canonicalString()+e.op.toString()+TE(e.value);if(H6e(e))return e.filters.map(t=>LH(t)).join(",");{const t=e.filters.map(n=>LH(n)).join(",");return`${e.op}(${t})`}}function q6e(e,t){return e instanceof ws?function(r,i){return i instanceof ws&&r.op===i.op&&r.field.isEqual(i.field)&&oh(r.value,i.value)}(e,t):e instanceof Af?function(r,i){return i instanceof Af&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&q6e(o,i.filters[a]),!0):!1}(e,t):void on()}function W6e(e){return e instanceof ws?function(n){return`${n.field.canonicalString()} ${n.op} ${TE(n.value)}`}(e):e instanceof Af?function(n){return n.op.toString()+" {"+n.getFilters().map(W6e).join(" ,")+"}"}(e):"Filter"}class jHt extends ws{constructor(t,n,r){super(t,n,r),this.key=Gt.fromName(r.referenceValue)}matches(t){const n=Gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class UHt extends ws{constructor(t,n){super(t,"in",n),this.keys=G6e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class zHt extends ws{constructor(t,n){super(t,"not-in",n),this.keys=G6e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function G6e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Gt.fromName(r.referenceValue))}class VHt extends ws{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return YJ(n)&&gC(n.arrayValue,this.value)}}class HHt extends ws{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&gC(this.value.arrayValue,n)}}class qHt extends ws{constructor(t,n){super(t,"not-in",n)}matches(t){if(gC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!gC(this.value.arrayValue,n)}}class WHt extends ws{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!YJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gC(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GHt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function e0e(e,t=null,n=[],r=[],i=null,s=null,o=null){return new GHt(e,t,n,r,i,s,o)}function KJ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>LH(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),VF(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>TE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>TE(r)).join(",")),t.ue=n}return t.ue}function XJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!FHt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!q6e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zge(e.startAt,t.startAt)&&Zge(e.endAt,t.endAt)}function FH(e){return Gt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YHt(e,t,n,r,i,s,o,a){return new LS(e,t,n,r,i,s,o,a)}function QJ(e){return new LS(e)}function t0e(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Y6e(e){return e.collectionGroup!==null}function G2(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ko(Ao.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new yC(s,r))}),n.has(Ao.keyField().canonicalString())||t.ce.push(new yC(Ao.keyField(),r))}return t.ce}function Vd(e){const t=hn(e);return t.le||(t.le=KHt(t,G2(e))),t.le}function KHt(e,t){if(e.limitType==="F")return e0e(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new yC(i.field,s)});const n=e.endAt?new _M(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _M(e.startAt.position,e.startAt.inclusive):null;return e0e(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function BH(e,t){const n=e.filters.concat([t]);return new LS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jH(e,t,n){return new LS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function HF(e,t){return XJ(Vd(e),Vd(t))&&e.limitType===t.limitType}function K6e(e){return`${KJ(Vd(e))}|lt:${e.limitType}`}function bb(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>W6e(i)).join(", ")}]`),VF(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>TE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>TE(i)).join(",")),`Target(${r})`}(Vd(e))}; limitType=${e.limitType})`}function qF(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Gt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of G2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Jge(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,G2(r),i)||r.endAt&&!function(o,a,u){const l=Jge(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,G2(r),i))}(e,t)}function XHt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function X6e(e){return(t,n)=>{let r=!1;for(const i of G2(e)){const s=QHt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QHt(e,t,n){const r=e.field.isKeyField()?Gt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?xE(u,l):on()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return on()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){h_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return B6e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JHt=new Ui(Gt.comparator);function sm(){return JHt}const Q6e=new Ui(Gt.comparator);function jT(...e){let t=Q6e;for(const n of e)t=t.insert(n.key,n);return t}function J6e(e){let t=Q6e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Rv(){return Y2()}function Z6e(){return Y2()}function Y2(){return new FS(e=>e.toString(),(e,t)=>e.isEqual(t))}const ZHt=new Ui(Gt.comparator),eqt=new ko(Gt.comparator);function Un(...e){let t=eqt;for(const n of e)t=t.add(n);return t}const tqt=new ko(Tr);function nqt(){return tqt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vM(t)?"-0":t}}function t4e(e){return{integerValue:""+e}}function rqt(e,t){return NHt(t)?t4e(t):e4e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this._=void 0}}function iqt(e,t,n){return e instanceof vC?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&WJ(s)&&(s=GJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof _C?r4e(e,t):e instanceof bC?i4e(e,t):function(i,s){const o=n4e(i,s),a=n0e(o)+n0e(i.Pe);return MH(o)&&MH(i.Pe)?t4e(a):e4e(i.serializer,a)}(e,t)}function sqt(e,t,n){return e instanceof _C?r4e(e,t):e instanceof bC?i4e(e,t):n}function n4e(e,t){return e instanceof bM?function(r){return MH(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class vC extends WF{}class _C extends WF{constructor(t){super(),this.elements=t}}function r4e(e,t){const n=s4e(t);for(const r of e.elements)n.some(i=>oh(i,r))||n.push(r);return{arrayValue:{values:n}}}class bC extends WF{constructor(t){super(),this.elements=t}}function i4e(e,t){let n=s4e(t);for(const r of e.elements)n=n.filter(i=>!oh(i,r));return{arrayValue:{values:n}}}class bM extends WF{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function n0e(e){return ys(e.integerValue||e.doubleValue)}function s4e(e){return YJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oqt{constructor(t,n){this.field=t,this.transform=n}}function aqt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof _C&&i instanceof _C||r instanceof bC&&i instanceof bC?SE(r.elements,i.elements,oh):r instanceof bM&&i instanceof bM?oh(r.Pe,i.Pe):r instanceof vC&&i instanceof vC}(e.transform,t.transform)}class uqt{constructor(t,n){this.version=t,this.transformResults=n}}class _f{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new _f}static exists(t){return new _f(void 0,t)}static updateTime(t){return new _f(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function nR(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class GF{}function o4e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new JJ(e.key,_f.none()):new JI(e.key,e.data,_f.none());{const n=e.data,r=bu.empty();let i=new ko(Ao.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fy(e.key,r,new fl(i.toArray()),_f.none())}}function lqt(e,t,n){e instanceof JI?function(i,s,o){const a=i.value.clone(),u=i0e(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof fy?function(i,s,o){if(!nR(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=i0e(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(a4e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function K2(e,t,n,r){return e instanceof JI?function(s,o,a,u){if(!nR(s.precondition,o))return a;const l=s.value.clone(),c=s0e(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof fy?function(s,o,a,u){if(!nR(s.precondition,o))return a;const l=s0e(s.fieldTransforms,u,o),c=o.data;return c.setAll(a4e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return nR(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function cqt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=n4e(r.transform,i||null);s!=null&&(n===null&&(n=bu.empty()),n.set(r.field,s))}return n||null}function r0e(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&SE(r,i,(s,o)=>aqt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class JI extends GF{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fy extends GF{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a4e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function i0e(e,t,n){const r=new Map;li(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,sqt(o,a,n[i]))}return r}function s0e(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,iqt(s,o,t))}return r}class JJ extends GF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fqt extends GF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dqt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&lqt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=K2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=K2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Z6e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=o4e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(fn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Un())}isEqual(t){return this.batchId===t.batchId&&SE(this.mutations,t.mutations,(n,r)=>r0e(n,r))&&SE(this.baseMutations,t.baseMutations,(n,r)=>r0e(n,r))}}class ZJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){li(t.mutations.length===r.length);let i=function(){return ZHt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ZJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hqt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pqt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps,sr;function mqt(e){switch(e){default:return on();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function u4e(e){if(e===void 0)return im("GRPC error has no .code"),Be.UNKNOWN;switch(e){case ps.OK:return Be.OK;case ps.CANCELLED:return Be.CANCELLED;case ps.UNKNOWN:return Be.UNKNOWN;case ps.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ps.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ps.INTERNAL:return Be.INTERNAL;case ps.UNAVAILABLE:return Be.UNAVAILABLE;case ps.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ps.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ps.NOT_FOUND:return Be.NOT_FOUND;case ps.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ps.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ps.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ps.ABORTED:return Be.ABORTED;case ps.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ps.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ps.DATA_LOSS:return Be.DATA_LOSS;default:return on()}}(sr=ps||(ps={}))[sr.OK=0]="OK",sr[sr.CANCELLED=1]="CANCELLED",sr[sr.UNKNOWN=2]="UNKNOWN",sr[sr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sr[sr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sr[sr.NOT_FOUND=5]="NOT_FOUND",sr[sr.ALREADY_EXISTS=6]="ALREADY_EXISTS",sr[sr.PERMISSION_DENIED=7]="PERMISSION_DENIED",sr[sr.UNAUTHENTICATED=16]="UNAUTHENTICATED",sr[sr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sr[sr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sr[sr.ABORTED=10]="ABORTED",sr[sr.OUT_OF_RANGE=11]="OUT_OF_RANGE",sr[sr.UNIMPLEMENTED=12]="UNIMPLEMENTED",sr[sr.INTERNAL=13]="INTERNAL",sr[sr.UNAVAILABLE=14]="UNAVAILABLE",sr[sr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gqt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yqt=new Xv([4294967295,4294967295],0);function o0e(e){const t=gqt().encode(e),n=new k6e;return n.update(t),new Uint8Array(n.digest())}function a0e(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Xv([n,r],0),new Xv([i,s],0)]}class eZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new UT(`Invalid padding: ${n}`);if(r<0)throw new UT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new UT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new UT(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Xv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Xv.fromNumber(r)));return i.compare(yqt)===1&&(i=new Xv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=o0e(t),[r,i]=a0e(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new eZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=o0e(t),[r,i]=a0e(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class UT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,ZI.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new YF(fn.min(),i,new Ui(Tr),sm(),Un())}}class ZI{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ZI(r,n,Un(),Un(),Un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class l4e{constructor(t,n){this.targetId=t,this.me=n}}class c4e{constructor(t,n,r=ba.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u0e{constructor(){this.fe=0,this.ge=c0e(),this.pe=ba.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Un(),n=Un(),r=Un();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:on()}}),new ZI(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=c0e()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,li(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vqt{constructor(t){this.Le=t,this.Be=new Map,this.ke=sm(),this.qe=l0e(),this.Qe=new Ui(Tr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:on()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(FH(s))if(r===0){const o=new Gt(s.path);this.Ue(n,o,oa.newNoDocument(o,fn.min()))}else li(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=A1(r).toUint8Array()}catch(u){if(u instanceof j6e)return dC("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new eZ(o,i,s)}catch(u){return dC(u instanceof UT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&FH(a.target)){const u=new Gt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,oa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Un();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new YF(t,n,this.Qe,this.ke,r);return this.ke=sm(),this.qe=l0e(),this.Qe=new Ui(Tr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new u0e,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new ko(Tr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||$t("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new u0e),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function l0e(){return new Ui(Gt.comparator)}function c0e(){return new Ui(Gt.comparator)}const _qt={asc:"ASCENDING",desc:"DESCENDING"},bqt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wqt={and:"AND",or:"OR"};class Eqt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function UH(e,t){return e.useProto3Json||VF(t)?t:{value:t}}function wM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function f4e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sqt(e,t){return wM(e,t.toTimestamp())}function Hd(e){return li(!!e),fn.fromTimestamp(function(n){const r=P0(n);return new js(r.seconds,r.nanos)}(e))}function tZ(e,t){return zH(e,t).canonicalString()}function zH(e,t){const n=function(i){return new gi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function d4e(e){const t=gi.fromString(e);return li(y4e(t)),t}function VH(e,t){return tZ(e.databaseId,t.path)}function Kj(e,t){const n=d4e(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Gt(p4e(n))}function h4e(e,t){return tZ(e.databaseId,t)}function xqt(e){const t=d4e(e);return t.length===4?gi.emptyPath():p4e(t)}function HH(e){return new gi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function p4e(e){return li(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function f0e(e,t,n){return{name:VH(e,t),fields:n.value.mapValue.fields}}function Tqt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:on()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(li(c===void 0||typeof c=="string"),ba.fromBase64String(c||"")):(li(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ba.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:u4e(l.code);return new bt(c,l.message||"")}(o);n=new c4e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kj(e,r.document.name),s=Hd(r.document.updateTime),o=r.document.createTime?Hd(r.document.createTime):fn.min(),a=new bu({mapValue:{fields:r.document.fields}}),u=oa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new rR(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Kj(e,r.document),s=r.readTime?Hd(r.readTime):fn.min(),o=oa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rR([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Kj(e,r.document),s=r.removedTargetIds||[];n=new rR([],s,i,null)}else{if(!("filter"in t))return on();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new pqt(i,s),a=r.targetId;n=new l4e(a,o)}}return n}function Aqt(e,t){let n;if(t instanceof JI)n={update:f0e(e,t.key,t.value)};else if(t instanceof JJ)n={delete:VH(e,t.key)};else if(t instanceof fy)n={update:f0e(e,t.key,t.data),updateMask:Dqt(t.fieldMask)};else{if(!(t instanceof fqt))return on();n={verify:VH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof vC)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _C)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bC)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw on()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Sqt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:on()}(e,t.precondition)),n}function Cqt(e,t){return e&&e.length>0?(li(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Hd(i.updateTime):Hd(s);return o.isEqual(fn.min())&&(o=Hd(s)),new uqt(o,i.transformResults||[])}(n,t))):[]}function Iqt(e,t){return{documents:[h4e(e,t.path)]}}function Oqt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h4e(e,i);const s=function(l){if(l.length!==0)return g4e(Af.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:wb(d.field),direction:$qt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=UH(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function Pqt(e){let t=xqt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){li(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=m4e(f);return d instanceof Af&&H6e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new yC(Eb(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,VF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new _M(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new _M(h,d)}(n.endAt)),YHt(t,i,o,s,a,"F",u,l)}function kqt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function m4e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Eb(n.unaryFilter.field);return ws.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Eb(n.unaryFilter.field);return ws.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eb(n.unaryFilter.field);return ws.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Eb(n.unaryFilter.field);return ws.create(o,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(e):e.fieldFilter!==void 0?function(n){return ws.create(Eb(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Af.create(n.compositeFilter.filters.map(r=>m4e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(e):on()}function $qt(e){return _qt[e]}function Rqt(e){return bqt[e]}function Nqt(e){return wqt[e]}function wb(e){return{fieldPath:e.canonicalString()}}function Eb(e){return Ao.fromServerFormat(e.fieldPath)}function g4e(e){return e instanceof ws?function(n){if(n.op==="=="){if(Qge(n.value))return{unaryFilter:{field:wb(n.field),op:"IS_NAN"}};if(Xge(n.value))return{unaryFilter:{field:wb(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qge(n.value))return{unaryFilter:{field:wb(n.field),op:"IS_NOT_NAN"}};if(Xge(n.value))return{unaryFilter:{field:wb(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wb(n.field),op:Rqt(n.op),value:n.value}}}(e):e instanceof Af?function(n){const r=n.getFilters().map(i=>g4e(i));return r.length===1?r[0]:{compositeFilter:{op:Nqt(n.op),filters:r}}}(e):on()}function Dqt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function y4e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t,n,r,i,s=fn.min(),o=fn.min(),a=ba.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Ag(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ag(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ag(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ag(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mqt{constructor(t){this.ct=t}}function Lqt(e){const t=Pqt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?jH(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fqt{constructor(){this._n=new Bqt}addToCollectionParentIndex(t,n){return this._n.add(n),Ge.resolve()}getCollectionParents(t,n){return Ge.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ge.resolve()}deleteFieldIndex(t,n){return Ge.resolve()}deleteAllFieldIndexes(t){return Ge.resolve()}createTargetIndexes(t,n){return Ge.resolve()}getDocumentsMatchingTarget(t,n){return Ge.resolve(null)}getIndexType(t,n){return Ge.resolve(0)}getFieldIndexes(t,n){return Ge.resolve([])}getNextCollectionGroupToUpdate(t){return Ge.resolve(null)}getMinOffset(t,n){return Ge.resolve(O0.min())}getMinOffsetFromCollectionGroup(t,n){return Ge.resolve(O0.min())}updateCollectionGroup(t,n,r){return Ge.resolve()}updateIndexEntries(t,n){return Ge.resolve()}}class Bqt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new ko(gi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ko(gi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new AE(0)}static Ln(){return new AE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jqt{constructor(){this.changes=new FS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,oa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ge.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uqt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zqt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&K2(r.mutation,i,fl.empty(),js.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Un()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Un()){const i=Rv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=jT();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Rv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Un()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=sm();const o=Y2(),a=function(){return Y2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof fy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),K2(c.mutation,l,c.mutation.getFieldMask(),js.now())):o.set(l.key,fl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Uqt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Y2();let i=new Ui((o,a)=>o-a),s=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||fl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Un()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Z6e();c.forEach(d=>{if(!s.has(d)){const h=o4e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ge.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Gt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Y6e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ge.resolve(Rv());let a=-1,u=s;return o.next(l=>Ge.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ge.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Un())).next(c=>({batchId:a,changes:J6e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Gt(n)).next(r=>{let i=jT();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=jT();return this.indexManager.getCollectionParents(t,s).next(a=>Ge.forEach(a,u=>{const l=function(f,d){return new LS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,oa.newInvalidDocument(c)))});let a=jT();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&K2(c.mutation,l,fl.empty(),js.now()),qF(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vqt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ge.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hd(i.createTime)}}(n)),Ge.resolve()}getNamedQuery(t,n){return Ge.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Lqt(i.bundledQuery),readTime:Hd(i.readTime)}}(n)),Ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hqt{constructor(){this.overlays=new Ui(Gt.comparator),this.hr=new Map}getOverlay(t,n){return Ge.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Rv();return Ge.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Ge.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ge.resolve()}getOverlaysForCollection(t,n,r){const i=Rv(),s=n.length+1,o=new Gt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ge.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ui((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Rv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Rv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ge.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hqt(n,r));let s=this.hr.get(n);s===void 0&&(s=Un(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(){this.Pr=new ko(Xs.Ir),this.Tr=new ko(Xs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Xs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Xs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Gt(new gi([])),r=new Xs(n,t),i=new Xs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Gt(new gi([])),r=new Xs(n,t),i=new Xs(n,t+1);let s=Un();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Xs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Xs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Gt.comparator(t.key,n.key)||Tr(t.pr,n.pr)}static Er(t,n){return Tr(t.pr,n.pr)||Gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qqt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ko(Xs.Ir)}checkEmpty(t){return Ge.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dqt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Xs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ge.resolve(o)}lookupMutationBatch(t,n){return Ge.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Xs(n,0),i=new Xs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ko(Tr);return n.forEach(i=>{const s=new Xs(i,0),o=new Xs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ge.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Gt.isDocumentKey(s)||(s=s.child(""));const o=new Xs(new Gt(s),0);let a=new ko(Tr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Ge.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){li(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ge.forEach(n.mutations,i=>{const s=new Xs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Xs(n,0),i=this.wr.firstAfterOrEqual(r);return Ge.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ge.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wqt{constructor(t){this.vr=t,this.docs=function(){return new Ui(Gt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ge.resolve(r?r.document.mutableCopy():oa.newInvalidDocument(n))}getEntries(t,n){let r=sm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():oa.newInvalidDocument(i))}),Ge.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=sm();const o=n.path,a=new Gt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||PHt(OHt(c),r)<=0||(i.has(c.key)||qF(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ge.resolve(s)}getAllFromCollectionGroup(t,n,r,i){on()}Fr(t,n){return Ge.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Gqt(this)}getSize(t){return Ge.resolve(this.size)}}class Gqt extends jqt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ge.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yqt{constructor(t){this.persistence=t,this.Mr=new FS(n=>KJ(n),XJ),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new nZ,this.targetCount=0,this.Lr=AE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ge.resolve()}getLastRemoteSnapshotVersion(t){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ge.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ge.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new AE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ge.resolve()}updateTargetData(t,n){return this.qn(n),Ge.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ge.waitFor(s).next(()=>i)}getTargetCount(t){return Ge.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ge.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ge.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ge.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ge.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ge.resolve(r)}containsKey(t,n){return Ge.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kqt{constructor(t,n){this.Br={},this.overlays={},this.kr=new qJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Yqt(this),this.indexManager=new Fqt,this.remoteDocumentCache=function(i){return new Wqt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Mqt(n),this.$r=new Vqt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Hqt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new qqt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){$t("MemoryPersistence","Starting transaction:",t);const i=new Xqt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Ge.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class Xqt extends $Ht{constructor(t){super(),this.currentSequenceNumber=t}}class rZ{constructor(t){this.persistence=t,this.zr=new nZ,this.jr=null}static Hr(t){return new rZ(t)}get Jr(){if(this.jr)return this.jr;throw on()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ge.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ge.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ge.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.Jr,r=>{const i=Gt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,fn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ge.or([()=>Ge.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Un(),i=Un();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new iZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qqt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jqt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Bjt()?8:RHt(Do())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Qqt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(Yx()<=Xn.DEBUG&&$t("QueryEngine","SDK will not create cache indexes for query:",bb(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ge.resolve()):(Yx()<=Xn.DEBUG&&$t("QueryEngine","Query:",bb(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Yx()<=Xn.DEBUG&&$t("QueryEngine","The SDK decides to create cache indexes for query:",bb(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vd(n))):Ge.resolve())}ji(t,n){if(t0e(n))return Ge.resolve(null);let r=Vd(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jH(n,null,"F"),r=Vd(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Un(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,jH(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return t0e(n)||i.isEqual(fn.min())?Ge.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ge.resolve(null):(Yx()<=Xn.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bb(n)),this.es(t,o,n,IHt(i,-1)).next(a=>a))})}Zi(t,n){let r=new ko(X6e(t));return n.forEach((i,s)=>{qF(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return Yx()<=Xn.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",bb(n)),this.zi.getDocumentsMatchingQuery(t,n,O0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zqt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ui(Tr),this.rs=new FS(s=>KJ(s),XJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zqt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function eWt(e,t,n,r){return new Zqt(e,t,n,r)}async function v4e(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Un();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function tWt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ge.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);li(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function _4e(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function nWt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ba.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=sm(),l=Un();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(rWt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(fn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ge.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function rWt(e,t,n){let r=Un(),i=Un();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=sm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(fn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):$t("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function iWt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function sWt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Ge.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ag(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function qH(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!QI(o))throw o;$t("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function d0e(e,t,n){const r=hn(e);let i=fn.min(),s=Un();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Ge.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Vd(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:fn.min(),n?s:Un())).next(a=>(oWt(r,XHt(t),a),{documents:a,hs:s})))}function oWt(e,t,n){let r=e.ss.get(t)||fn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class h0e{constructor(){this.activeTargetIds=nqt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class aWt{constructor(){this.no=new h0e,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new h0e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uWt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0e{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bk=null;function Xj(){return bk===null?bk=function(){return 268435456+Math.round(2147483648*Math.random())}():bk++,"0x"+bk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lWt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cWt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="WebChannelConnection";class fWt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Xj(),u=this.vo(n,r.toUriEncodedString());$t("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>($t("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw dC("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+MS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=lWt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Xj();return new Promise((o,a)=>{const u=new $6e;u.setWithCredentials(!0),u.listenOnce(N6e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eR.NO_ERROR:const c=u.getResponseJson();$t(Xo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case eR.TIMEOUT:$t(Xo,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case eR.HTTP_ERROR:const f=u.getStatus();if($t(Xo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{$t(Xo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);$t(Xo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Xj(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=L6e(),a=M6e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new R6e({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");$t(Xo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new cWt({lo:g=>{h?$t(Xo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||($t(Xo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),$t(Xo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,BT.EventType.OPEN,()=>{h||($t(Xo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,BT.EventType.CLOSE,()=>{h||(h=!0,$t(Xo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,BT.EventType.ERROR,g=>{h||(h=!0,dC(Xo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,BT.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];li(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){$t(Xo,`RPC '${t}' stream ${i} received error:`,w);const x=w.status;let E=function(C){const A=ps[C];if(A!==void 0)return u4e(A)}(x),b=w.message;E===void 0&&(E=Be.INTERNAL,b="Unknown error status: "+x+" with message "+w.message),h=!0,p.po(new bt(E,b)),f.close()}else $t(Xo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,D6e.STAT_EVENT,g=>{g.stat===NH.PROXY?$t(Xo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===NH.NOPROXY&&$t(Xo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Qj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(e){return new Eqt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&$t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new b4e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(im(n.toString()),im("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return $t("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dWt extends w4e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=Tqt(this.serializer,t),r=function(s){if(!("targetChange"in s))return fn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fn.min():o.readTime?Hd(o.readTime):fn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=HH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=FH(u)?{documents:Iqt(s,u)}:{query:Oqt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=f4e(s,o.resumeToken);const l=UH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(fn.min())>0){a.readTime=wM(s,o.snapshotVersion.toTimestamp());const l=UH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=kqt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=HH(this.serializer),n.removeTarget=t,this.i_(n)}}class hWt extends w4e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(li(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=Cqt(t.writeResults,t.commitTime),r=Hd(t.commitTime);return this.listener.A_(r,n)}return li(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=HH(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Aqt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pWt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,zH(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,zH(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class mWt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(im(n),this.y_=!1):$t("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gWt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{p_(this)&&($t("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await tO(l),l.N_.set("Unknown"),l.M_.delete(4),await eO(l)}(this))})}),this.N_=new mWt(r,i)}}async function eO(e){if(p_(e))for(const t of e.x_)await t(!0)}async function tO(e){for(const t of e.x_)await t(!1)}function E4e(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),uZ(n)?aZ(n):BS(n).Xo()&&oZ(n,t))}function sZ(e,t){const n=hn(e),r=BS(n);n.F_.delete(t),r.Xo()&&S4e(n,t),n.F_.size===0&&(r.Xo()?r.n_():p_(n)&&n.N_.set("Unknown"))}function oZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}BS(e).P_(t)}function S4e(e,t){e.L_.xe(t),BS(e).I_(t)}function aZ(e){e.L_=new vqt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),BS(e).start(),e.N_.w_()}function uZ(e){return p_(e)&&!BS(e).Zo()&&e.F_.size>0}function p_(e){return hn(e).M_.size===0}function x4e(e){e.L_=void 0}async function yWt(e){e.N_.set("Online")}async function vWt(e){e.F_.forEach((t,n)=>{oZ(e,t)})}async function _Wt(e,t){x4e(e),uZ(e)?(e.N_.D_(t),aZ(e)):e.N_.set("Unknown")}async function bWt(e,t,n){if(e.N_.set("Online"),t instanceof c4e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){$t("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await EM(e,r)}else if(t instanceof rR?e.L_.Ke(t):t instanceof l4e?e.L_.He(t):e.L_.We(t),!n.isEqual(fn.min()))try{const r=await _4e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ba.EMPTY_BYTE_STRING,c.snapshotVersion)),S4e(s,u);const f=new Ag(c.target,u,l,c.sequenceNumber);oZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){$t("RemoteStore","Failed to raise snapshot:",r),await EM(e,r)}}async function EM(e,t,n){if(!QI(t))throw t;e.M_.add(1),await tO(e),e.N_.set("Offline"),n||(n=()=>_4e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{$t("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await eO(e)})}function T4e(e,t){return t().catch(n=>EM(e,n,t))}async function XF(e){const t=hn(e),n=k0(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;wWt(t);)try{const i=await iWt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,EWt(t,i)}catch(i){await EM(t,i)}A4e(t)&&C4e(t)}function wWt(e){return p_(e)&&e.v_.length<10}function EWt(e,t){e.v_.push(t);const n=k0(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function A4e(e){return p_(e)&&!k0(e).Zo()&&e.v_.length>0}function C4e(e){k0(e).start()}async function SWt(e){k0(e).V_()}async function xWt(e){const t=k0(e);for(const n of e.v_)t.d_(n.mutations)}async function TWt(e,t,n){const r=e.v_.shift(),i=ZJ.from(r,t,n);await T4e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await XF(e)}async function AWt(e,t){t&&k0(e).E_&&await async function(r,i){if(function(o){return mqt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();k0(r).t_(),await T4e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await XF(r)}}(e,t),A4e(e)&&C4e(e)}async function m0e(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const r=p_(n);n.M_.add(3),await tO(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await eO(n)}async function CWt(e,t){const n=hn(e);t?(n.M_.delete(2),await eO(n)):t||(n.M_.add(2),await tO(n),n.N_.set("Unknown"))}function BS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new dWt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:yWt.bind(null,e),To:vWt.bind(null,e),Ao:_Wt.bind(null,e),h_:bWt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),uZ(e)?aZ(e):e.N_.set("Unknown")):(await e.B_.stop(),x4e(e))})),e.B_}function k0(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new hWt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:SWt.bind(null,e),Ao:AWt.bind(null,e),R_:xWt.bind(null,e),A_:TWt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await XF(e)):(await e.k_.stop(),e.v_.length>0&&($t("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Np,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new lZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cZ(e,t){if(im("AsyncQueue",`${t}: ${e}`),QI(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Gt.comparator(n.key,r.key):(n,r)=>Gt.comparator(n.key,r.key),this.keyedMap=jT(),this.sortedSet=new Ui(this.comparator)}static emptySet(t){return new Tw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Tw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Tw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0e{constructor(){this.q_=new Ui(Gt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):on():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class CE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new CE(t,n,Tw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&HF(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IWt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class OWt{constructor(){this.queries=new FS(t=>K6e(t),HF),this.onlineState="Unknown",this.z_=new Set}}async function I4e(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new IWt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=cZ(o,`Initialization of query '${bb(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&fZ(n)}async function O4e(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PWt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&fZ(n)}function kWt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function fZ(e){e.z_.forEach(t=>{t.next()})}var WH,y0e;(y0e=WH||(WH={})).J_="default",y0e.Cache="cache";class P4e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new CE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=CE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==WH.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4e{constructor(t){this.key=t}}class $4e{constructor(t){this.key=t}}class $Wt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Un(),this.mutatedKeys=Un(),this.Ia=X6e(t),this.Ta=new Tw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new g0e,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=qF(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new CE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new g0e,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Un(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new $4e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new k4e(r))}),n}pa(t){this.la=t.hs,this.Pa=Un();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return CE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class RWt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class NWt{constructor(t){this.key=t,this.wa=!1}}class DWt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new FS(a=>K6e(a),HF),this.Da=new Map,this.Ca=new Set,this.va=new Ui(Gt.comparator),this.Fa=new Map,this.Ma=new nZ,this.xa={},this.Oa=new Map,this.Na=AE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function MWt(e,t,n=!0){const r=F4e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await R4e(r,t,n,!0),i}async function LWt(e,t){const n=F4e(e);await R4e(n,t,!0,!1)}async function R4e(e,t,n,r){const i=await sWt(e.localStore,Vd(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await FWt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&E4e(e.remoteStore,i),a}async function FWt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await d0e(m.localStore,g.query,!1).then(({documents:b})=>g.view.da(b,_)));const w=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,E=g.view.applyChanges(_,m.isPrimaryClient,w,x);return _0e(m,g.targetId,E.fa),E.snapshot}(e,f,d,h);const s=await d0e(e.localStore,t,!0),o=new $Wt(t,s.hs),a=o.da(s.documents),u=ZI.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);_0e(e,n,l.fa);const c=new RWt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function BWt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!HF(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qH(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sZ(r.remoteStore,i.targetId),GH(r,i.targetId)}).catch(XI)):(GH(r,i.targetId),await qH(r.localStore,i.targetId,!0))}async function jWt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sZ(n.remoteStore,r.targetId))}async function UWt(e,t,n){const r=YWt(e);try{const i=await function(o,a){const u=hn(o),l=js.now(),c=a.reduce((h,p)=>h.add(p.key),Un());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=sm(),m=Un();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=cqt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new fy(v.key,_,U6e(_.value.mapValue),_f.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:J6e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ui(Tr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await nO(r,i.changes),await XF(r.remoteStore)}catch(i){const s=cZ(i,"Failed to persist write");n.reject(s)}}async function N4e(e,t){const n=hn(e);try{const r=await nWt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(li(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?li(o.wa):i.removedDocuments.size>0&&(li(o.wa),o.wa=!1))}),await nO(n,r,t)}catch(r){await XI(r)}}function v0e(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&fZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zWt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ui(Gt.comparator);o=o.insert(s,oa.newNoDocument(s,fn.min()));const a=Un().add(s),u=new YF(fn.min(),new Map,new Ui(Tr),o,a);await N4e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),dZ(r)}else await qH(r.localStore,t,!1).then(()=>GH(r,t,n)).catch(XI)}async function VWt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await tWt(n.localStore,t);M4e(n,r,null),D4e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nO(n,i)}catch(i){await XI(i)}}async function HWt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(li(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);M4e(r,t,n),D4e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nO(r,i)}catch(i){await XI(i)}}function D4e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function M4e(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function GH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||L4e(e,r)})}function L4e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(sZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),dZ(e))}function _0e(e,t,n){for(const r of n)r instanceof k4e?(e.Ma.addReference(r.key,t),qWt(e,r)):r instanceof $4e?($t("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||L4e(e,r.key)):on()}function qWt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||($t("SyncEngine","New document in limbo: "+n),e.Ca.add(r),dZ(e))}function dZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Gt(gi.fromString(t)),r=e.Na.next();e.Fa.set(r,new NWt(n)),e.va=e.va.insert(n,r),E4e(e.remoteStore,new Ag(Vd(QJ(n.path)),r,"TargetPurposeLimboResolution",qJ.oe))}}async function nO(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=iZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ge.forEach(l,d=>Ge.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ge.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!QI(f))throw f;$t("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function WWt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){$t("SyncEngine","User change. New user:",t.toKey());const r=await v4e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await nO(n,r.us)}}function GWt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return Un().add(r.key);{let i=Un();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function F4e(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=N4e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GWt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zWt.bind(null,t),t.Sa.h_=PWt.bind(null,t.eventManager),t.Sa.ka=kWt.bind(null,t.eventManager),t}function YWt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=VWt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HWt.bind(null,t),t}class b0e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=KF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return eWt(this.persistence,new Jqt,t.initialUser,this.serializer)}createPersistence(t){return new Kqt(rZ.Hr,this.serializer)}createSharedClientState(t){return new aWt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class KWt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>v0e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WWt.bind(null,this.syncEngine),await CWt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new OWt}()}createDatastore(t){const n=KF(t.databaseInfo.databaseId),r=function(s){return new fWt(s)}(t.databaseInfo);return function(s,o,a,u){return new pWt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new gWt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>v0e(this.syncEngine,n,0),function(){return p0e.D()?new p0e:new uWt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new DWt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);$t("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await tO(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):im("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XWt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cu.UNAUTHENTICATED,this.clientId=F6e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{$t("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($t("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Np;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=cZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Jj(e,t){e.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await v4e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function w0e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await j4e(e);$t("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>m0e(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>m0e(t.remoteStore,i)),e._onlineComponents=t}function QWt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function j4e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){$t("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jj(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!QWt(n))throw n;dC("Error using user provided cache. Falling back to memory cache: "+n),await Jj(e,new b0e)}}else $t("FirestoreClient","Using default OfflineComponentProvider"),await Jj(e,new b0e);return e._offlineComponents}async function hZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?($t("FirestoreClient","Using user provided OnlineComponentProvider"),await w0e(e,e._uninitializedComponentsProvider._online)):($t("FirestoreClient","Using default OnlineComponentProvider"),await w0e(e,new KWt))),e._onlineComponents}function JWt(e){return j4e(e).then(t=>t.persistence)}function ZWt(e){return hZ(e).then(t=>t.remoteStore)}function eGt(e){return hZ(e).then(t=>t.syncEngine)}async function U4e(e){const t=await hZ(e),n=t.eventManager;return n.onListen=MWt.bind(null,t.syncEngine),n.onUnlisten=BWt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=LWt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jWt.bind(null,t.syncEngine),n}function tGt(e){return e.asyncQueue.enqueue(async()=>{const t=await JWt(e),n=await ZWt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),eO(s)}(n)})}function nGt(e,t,n={}){const r=new Np;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new B4e({next:d=>{o.enqueueAndForget(()=>O4e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new P4e(QJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return I4e(s,f)}(await U4e(e),e.asyncQueue,t,n,r)),r.promise}function rGt(e,t,n={}){const r=new Np;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new B4e({next:d=>{o.enqueueAndForget(()=>O4e(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new P4e(a,c,{includeMetadataChanges:!0,ra:!0});return I4e(s,f)}(await U4e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4e(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function iGt(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function S0e(e){if(!Gt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function x0e(e){if(Gt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function QF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":on()}function ah(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=QF(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0e{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}iGt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z4e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class pZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T0e({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T0e(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bHt;switch(r.type){case"firstParty":return new SHt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=E0e.get(n);r&&($t("ComponentProvider","Removing Datastore"),E0e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new m_(this.firestore,t,this._query)}}class za{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new e0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new za(this.firestore,t,this._key)}}class e0 extends m_{constructor(t,n,r){super(t,n,QJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new za(this.firestore,null,new Gt(t))}withConverter(t){return new e0(this.firestore,t,this._path)}}function Ry(e,t,...n){if(e=Zi(e),V4e("collection","path",t),e instanceof pZ){const r=gi.fromString(t,...n);return x0e(r),new e0(e,null,r)}{if(!(e instanceof za||e instanceof e0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(gi.fromString(t,...n));return x0e(r),new e0(e.firestore,null,r)}}function Os(e,t,...n){if(e=Zi(e),arguments.length===1&&(t=F6e.newId()),V4e("doc","path",t),e instanceof pZ){const r=gi.fromString(t,...n);return S0e(r),new za(e,null,new Gt(r))}{if(!(e instanceof za||e instanceof e0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(gi.fromString(t,...n));return S0e(r),new za(e.firestore,e instanceof e0?e.converter:null,new Gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sGt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new b4e(this,"async_queue_retry"),this.hu=()=>{const n=Qj();n&&$t("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Qj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Qj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Np;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!QI(t))throw t;$t("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw im("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=lZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&on()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class g_ extends pZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new sGt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||H4e(this),this._firestoreClient.terminate()}}function oGt(e,t,n){n||(n="(default)");const r=cy(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(lC(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function JF(e){return e._firestoreClient||H4e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function H4e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new MHt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,z4e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new XWt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function aGt(e){return tGt(JF(e=ah(e,g_)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new IE(ba.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new IE(ba.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ao(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Tr(this._lat,t._lat)||Tr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uGt=/^__.*__$/;class lGt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new fy(t,this.data,this.fieldMask,n,this.fieldTransforms):new JI(t,this.data,n,this.fieldTransforms)}}class q4e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new fy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function W4e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class gZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new gZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return SM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(W4e(this.fu)&&uGt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class cGt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||KF(t)}Fu(t,n,r,i=!1){return new gZ({fu:t,methodName:n,vu:r,path:Ao.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yZ(e){const t=e._freezeSettings(),n=KF(e._databaseId);return new cGt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fGt(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);_Z("Data must be an object, but it was:",o,r);const a=G4e(r,o);let u,l;if(s.merge)u=new fl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=YH(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);K4e(c,d)||c.push(d)}u=new fl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new lGt(new bu(a),u,l)}class t5 extends e5{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof t5}}class vZ extends e5{_toFieldTransform(t){return new oqt(t.path,new vC)}isEqual(t){return t instanceof vZ}}function dGt(e,t,n,r){const i=e.Fu(1,t,n);_Z("Data must be an object, but it was:",i,r);const s=[],o=bu.empty();h_(r,(u,l)=>{const c=bZ(t,u,n);l=Zi(l);const f=i.Su(c);if(l instanceof t5)s.push(c);else{const d=rO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new fl(s);return new q4e(o,a,i.fieldTransforms)}function hGt(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[YH(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(YH(t,s[d])),u.push(s[d+1]);const l=[],c=bu.empty();for(let d=a.length-1;d>=0;--d)if(!K4e(l,a[d])){const h=a[d];let p=u[d];p=Zi(p);const m=o.Su(h);if(p instanceof t5)l.push(h);else{const g=rO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new fl(l);return new q4e(c,f,o.fieldTransforms)}function pGt(e,t,n,r=!1){return rO(n,e.Fu(r?4:3,t))}function rO(e,t){if(Y4e(e=Zi(e)))return _Z("Unsupported field value:",t,e),G4e(e,t);if(e instanceof e5)return function(r,i){if(!W4e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=rO(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Zi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rqt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=js.fromDate(r);return{timestampValue:wM(i.serializer,s)}}if(r instanceof js){const s=new js(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wM(i.serializer,s)}}if(r instanceof mZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof IE)return{bytesValue:f4e(i.serializer,r._byteString)};if(r instanceof za){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${QF(r)}`)}(e,t)}function G4e(e,t){const n={};return B6e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):h_(e,(r,i)=>{const s=rO(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Y4e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof js||e instanceof mZ||e instanceof IE||e instanceof za||e instanceof e5)}function _Z(e,t,n){if(!Y4e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=QF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function YH(e,t,n){if((t=Zi(t))instanceof ZF)return t._internalPath;if(typeof t=="string")return bZ(e,t);throw SM("Field path arguments must be of type string or ",e,!1,void 0,n)}const mGt=new RegExp("[~\\*/\\[\\]]");function bZ(e,t,n){if(t.search(mGt)>=0)throw SM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ZF(...t.split("."))._internalPath}catch{throw SM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function SM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function K4e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new za(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gGt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(n5("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gGt extends X4e{data(){return super.data()}}function n5(e,t){return typeof t=="string"?bZ(e,t):t instanceof ZF?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yGt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wZ{}class Q4e extends wZ{}function A0e(e,t,...n){let r=[];t instanceof wZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof EZ).length,a=s.filter(u=>u instanceof r5).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class r5 extends Q4e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new r5(t,n,r)}_apply(t){const n=this._parse(t);return J4e(t._query,n),new m_(t.firestore,t.converter,BH(t._query,n))}_parse(t){const n=yZ(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){I0e(f,c);const h=[];for(const p of f)h.push(C0e(u,s,p));d={arrayValue:{values:h}}}else d=C0e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||I0e(f,c),d=pGt(a,o,f,c==="in"||c==="not-in");return ws.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function vGt(e,t,n){const r=t,i=n5("where",e);return r5._create(i,r,n)}class EZ extends wZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new EZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Af.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)J4e(o,u),o=BH(o,u)}(t._query,n),new m_(t.firestore,t.converter,BH(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class SZ extends Q4e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new SZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yC(s,o)}(t._query,this._field,this._direction);return new m_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new LS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function _Gt(e,t="asc"){const n=t,r=n5("orderBy",e);return SZ._create(r,n)}function C0e(e,t,n){if(typeof(n=Zi(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y6e(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(gi.fromString(n));if(!Gt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kge(e,new Gt(r))}if(n instanceof za)return Kge(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QF(n)}.`)}function I0e(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function J4e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class bGt{convertValue(t,n="none"){switch(C1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ys(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(A1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw on()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return h_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new mZ(ys(t.latitude),ys(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=GJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pC(t));default:return null}}convertTimestamp(t){const n=P0(t);return new js(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=gi.fromString(t);li(y4e(r));const i=new mC(r.get(1),r.get(3)),s=new Gt(r.popFirst(5));return i.isEqual(n)||im(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wGt(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Z4e extends X4e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new iR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(n5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iR extends Z4e{data(t={}){return super.data(t)}}class EGt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new zT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new iR(this._firestore,this._userDataWriter,r.key,r,new zT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new iR(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new iR(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:SGt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SGt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(e){e=ah(e,za);const t=ah(e.firestore,g_);return nGt(JF(t),e._key).then(n=>TGt(t,e,n))}class eFe extends bGt{constructor(t){super(),this.firestore=t}convertBytes(t){return new IE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new za(this.firestore,null,n)}}function Xx(e){e=ah(e,m_);const t=ah(e.firestore,g_),n=JF(t),r=new eFe(t);return yGt(e._query),rGt(n,e._query).then(i=>new EGt(t,r,e,i))}function jl(e,t,n){e=ah(e,za);const r=ah(e.firestore,g_),i=wGt(e.converter,t,n);return xZ(r,[fGt(yZ(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,_f.none())])}function O0e(e,t,n,...r){e=ah(e,za);const i=ah(e.firestore,g_),s=yZ(i);let o;return o=typeof(t=Zi(t))=="string"||t instanceof ZF?hGt(s,"updateDoc",e._key,t,n,r):dGt(s,"updateDoc",e._key,t),xZ(i,[o.toMutation(e._key,_f.exists(!0))])}function xGt(e){return xZ(ah(e.firestore,g_),[new JJ(e._key,_f.none())])}function xZ(e,t){return function(r,i){const s=new Np;return r.asyncQueue.enqueueAndForget(async()=>UWt(await eGt(r),i,s)),s.promise}(JF(e),t)}function TGt(e,t,n){const r=n.docs.get(t._key),i=new eFe(e);return new Z4e(e,i,t._key,r,new zT(n.hasPendingWrites,n.fromCache),t.converter)}function AGt(){return new vZ("serverTimestamp")}(function(t,n=!0){(function(i){MS=i})(kc),Tf(new I0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new g_(new wHt(r.getProvider("auth-internal")),new THt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mC(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gl(qge,"4.6.2",t),gl(qge,"4.6.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CGt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},IGt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},OGt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(CGt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):IGt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new PGt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let PGt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kGt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function tFe(){try{return typeof indexedDB=="object"}catch{return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Gt="FirebaseError";let RGt=class nFe extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=$Gt,Object.setPrototypeOf(this,nFe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rFe.prototype.create)}},rFe=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?NGt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new RGt(i,a,r)}};function NGt(e,t){return e.replace(DGt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const DGt=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MGt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LGt=1e3,FGt=2,BGt=4*60*60*1e3,jGt=.5;function UGt(e,t=LGt,n=FGt){const r=t*Math.pow(n,e),i=Math.round(jGt*r*(Math.random()-.5)*2);return Math.min(BGt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zGt(e){return e&&e._delegate?e._delegate:e}let P0e=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(pi||(pi={}));const VGt={debug:pi.DEBUG,verbose:pi.VERBOSE,info:pi.INFO,warn:pi.WARN,error:pi.ERROR,silent:pi.SILENT},HGt=pi.INFO,qGt={[pi.DEBUG]:"log",[pi.VERBOSE]:"log",[pi.INFO]:"info",[pi.WARN]:"warn",[pi.ERROR]:"error"},WGt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=qGt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let GGt=class{constructor(t){this.name=t,this._logLevel=HGt,this._logHandler=WGt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?VGt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pi.DEBUG,...t),this._logHandler(this,pi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pi.VERBOSE,...t),this._logHandler(this,pi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pi.INFO,...t),this._logHandler(this,pi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pi.WARN,...t),this._logHandler(this,pi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pi.ERROR,...t),this._logHandler(this,pi.ERROR,...t)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=new Map,iFe={activated:!1,tokenObservers:[]},YGt={initialized:!1,enabled:!1};function Us(e){return KH.get(e)||Object.assign({},iFe)}function KGt(e,t){return KH.set(e,t),KH.get(e)}function i5(){return YGt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sFe="https://content-firebaseappcheck.googleapis.com/v1",XGt="exchangeRecaptchaV3Token",QGt="exchangeDebugToken",k0e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},JGt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZGt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new xM,await eYt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new xM,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function eYt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tYt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Cu=new rFe("appCheck","AppCheck",tYt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function TZ(e){if(!Us(e).activated)throw Cu.create("use-before-activation",{appName:e.name})}function oFe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=wk(n)+"d:"),r&&(o+=wk(r)+"h:"),o+=wk(i)+"m:"+wk(s)+"s",o}function wk(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Cu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Cu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Cu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Cu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function nYt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${sFe}/projects/${n}/apps/${r}:${XGt}?key=${i}`,body:{recaptcha_v3_token:t}}}function aFe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${sFe}/projects/${n}/apps/${r}:${QGt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rYt="firebase-app-check-database",iYt=1,wC="firebase-app-check-store",uFe="debug-token";let Ek=null;function lFe(){return Ek||(Ek=new Promise((e,t)=>{try{const n=indexedDB.open(rYt,iYt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Cu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wC,{keyPath:"compositeKey"})}}}catch(n){t(Cu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Ek)}function sYt(e){return fFe(dFe(e))}function oYt(e,t){return cFe(dFe(e),t)}function aYt(e){return cFe(uFe,e)}function uYt(){return fFe(uFe)}async function cFe(e,t){const r=(await lFe()).transaction(wC,"readwrite"),s=r.objectStore(wC).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Cu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function fFe(e){const n=(await lFe()).transaction(wC,"readonly"),i=n.objectStore(wC).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Cu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function dFe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new GGt("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lYt(e){if(tFe()){let t;try{t=await sYt(e)}catch(n){EC.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Zj(e,t){return tFe()?oYt(e,t).catch(n=>{EC.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function cYt(){let e;try{e=await uYt()}catch{}if(e)return e;{const t=MGt();return aYt(t).catch(n=>EC.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CZ(){return i5().enabled}async function IZ(){const e=i5();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function fYt(){const e=kGt(),t=i5();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new xM;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(cYt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dYt={error:"UNKNOWN_ERROR"};function hYt(e){return OGt.encodeString(JSON.stringify(e),!1)}async function XH(e,t=!1){const n=e.app;TZ(n);const r=Us(n);let i=r.token,s;if(i&&!qb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(qb(u)?i=u:await Zj(n,void 0))}if(!t&&i&&qb(i))return{token:i.token};let o=!1;if(CZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=AZ(aFe(n,await IZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Zj(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?EC.warn(u.message):EC.error(u),s=u}let a;return i?s?qb(i)?a={token:i.token,internalError:s}:a=N0e(s):(a={token:i.token},r.token=i,await Zj(n,i)):a=N0e(s),o&&mFe(n,a),a}async function pYt(e){const t=e.app;TZ(t);const{provider:n}=Us(t);if(CZ()){const r=await IZ(),{token:i}=await AZ(aFe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function hFe(e,t,n,r){const{app:i}=e,s=Us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&qb(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),R0e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>R0e(e))}function pFe(e,t){const n=Us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function R0e(e){const{app:t}=e,n=Us(t);let r=n.tokenRefresher;r||(r=mYt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function mYt(e){const{app:t}=e;return new ZGt(async()=>{const n=Us(t);let r;if(n.token?r=await XH(e,!0):r=await XH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},k0e.RETRIAL_MIN_WAIT,k0e.RETRIAL_MAX_WAIT)}function mFe(e,t){const n=Us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function qb(e){return e.expireTimeMillis-Date.now()>0}function N0e(e){return{token:hYt(dYt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gYt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Us(this.app);for(const n of t)pFe(this.app,n.next);return Promise.resolve()}}function yYt(e,t){return new gYt(e,t)}function vYt(e){return{getToken:t=>XH(e,t),getLimitedUseToken:()=>pYt(e),addTokenListener:t=>hFe(e,"INTERNAL",t),removeTokenListener:t=>pFe(e.app,t)}}const _Yt="@firebase/app-check",bYt="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wYt="https://www.google.com/recaptcha/api.js";function EYt(e,t){const n=new xM,r=Us(e);r.reCAPTCHAState={initialized:n};const i=SYt(e),s=$0e(!1);return s?D0e(e,t,s,i,n):AYt(()=>{const o=$0e(!1);if(!o)throw new Error("no recaptcha");D0e(e,t,o,i,n)}),n.promise}function D0e(e,t,n,r,i){n.ready(()=>{TYt(e,t,n,r),i.resolve(n)})}function SYt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function xYt(e){TZ(e);const n=await Us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function TYt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Us(e).reCAPTCHAState.succeeded=!1}}),s=Us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function AYt(e){const t=document.createElement("script");t.src=wYt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;IYt(this._throttleData);const i=await xYt(this._app).catch(o=>{throw Cu.create("recaptcha-error")});if(!(!((t=Us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Cu.create("recaptcha-error");let s;try{s=await AZ(nYt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=CYt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Cu.create("throttled",{time:oFe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=cy(t,"heartbeat"),EYt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof OZ?this._siteKey===t._siteKey:!1}}function CYt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+JGt,httpStatus:e};{const n=t?t.backoffCount:0,r=UGt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function IYt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Cu.create("throttled",{time:oFe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OYt(e=FF(),t){e=zGt(e);const n=cy(e,"app-check");if(i5().initialized||fYt(),CZ()&&IZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Cu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return PYt(e,t.provider,t.isTokenAutoRefreshEnabled),Us(e).isTokenAutoRefreshEnabled&&hFe(r,"INTERNAL",()=>{}),r}function PYt(e,t,n){const r=KGt(e,Object.assign({},iFe));r.activated=!0,r.provider=t,r.cachedTokenPromise=lYt(e).then(i=>(i&&qb(i)&&(r.token=i,mFe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const kYt="app-check",M0e="app-check-internal";function $Yt(){Tf(new P0e(kYt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return yYt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(M0e).initialize()})),Tf(new P0e(M0e,e=>{const t=e.getProvider("app-check").getImmediate();return vYt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),gl(_Yt,bYt)}$Yt();var L0e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RYt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},NYt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},DYt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(RYt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):NYt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new MYt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class MYt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gFe=function(e){try{return DYt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LYt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FYt=()=>LYt().__FIREBASE_DEFAULTS__,BYt=()=>{if(typeof process>"u"||typeof L0e>"u")return;const e=L0e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},jYt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&gFe(e[1]);return t&&JSON.parse(t)},yFe=()=>{try{return FYt()||BYt()||jYt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},UYt=e=>{var t,n;return(n=(t=yFe())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},vFe=e=>{var t;return(t=yFe())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zYt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wa())}function VYt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function HYt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qYt(){const e=wa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WYt="FirebaseError";class jS extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=WYt,Object.setPrototypeOf(this,jS.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,s5.prototype.create)}}class s5{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?GYt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jS(i,a,r)}}function GYt(e,t){return e.replace(YYt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const YYt=/\{\$([^}]+)}/g;function KYt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _Fe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(F0e(s)&&F0e(o)){if(!_Fe(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function F0e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function XYt(e,t){const n=new QYt(e,t);return n.subscribe.bind(n)}class QYt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JYt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=eU),i.error===void 0&&(i.error=eU),i.complete===void 0&&(i.complete=eU);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JYt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function eU(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ei;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ei||(ei={}));const ZYt={debug:ei.DEBUG,verbose:ei.VERBOSE,info:ei.INFO,warn:ei.WARN,error:ei.ERROR,silent:ei.SILENT},eKt=ei.INFO,tKt={[ei.DEBUG]:"log",[ei.VERBOSE]:"log",[ei.INFO]:"info",[ei.WARN]:"warn",[ei.ERROR]:"error"},nKt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=tKt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rKt{constructor(t){this.name=t,this._logLevel=eKt,this._logHandler=nKt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ei))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ZYt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ei.DEBUG,...t),this._logHandler(this,ei.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ei.VERBOSE,...t),this._logHandler(this,ei.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ei.INFO,...t),this._logHandler(this,ei.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ei.WARN,...t),this._logHandler(this,ei.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ei.ERROR,...t),this._logHandler(this,ei.ERROR,...t)}}class B0e{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}function bFe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iKt=bFe,wFe=new s5("auth","Firebase",bFe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new rKt("@firebase/auth");function sKt(e,...t){TM.logLevel<=ei.WARN&&TM.warn(`Auth (${kc}): ${e}`,...t)}function sR(e,...t){TM.logLevel<=ei.ERROR&&TM.error(`Auth (${kc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(e,...t){throw PZ(e,...t)}function qd(e,...t){return PZ(e,...t)}function EFe(e,t,n){const r=Object.assign(Object.assign({},iKt()),{[t]:n});return new s5("auth","Firebase",r).create(t,{appName:e.name})}function oKt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&uh(e,"argument-error"),EFe(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function PZ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return wFe.create(e,...t)}function dn(e,t,...n){if(!e)throw PZ(t,...n)}function bp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw sR(t),new Error(t)}function om(e,t){e||bp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function aKt(){return j0e()==="http:"||j0e()==="https:"}function j0e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uKt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aKt()||VYt()||"connection"in navigator)?navigator.onLine:!0}function lKt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t,n){this.shortDelay=t,this.longDelay=n,om(n>t,"Short delay should be less than long delay!"),this.isMobile=zYt()||HYt()}get(){return uKt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(e,t){om(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SFe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cKt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fKt=new sO(3e4,6e4);function o5(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zS(e,t,n,r,i={}){return xFe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=iO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),SFe.fetch()(AFe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function xFe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},cKt),t);try{const i=new dKt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sk(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sk(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sk(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw EFe(e,c,l);uh(e,c)}}catch(i){if(i instanceof jS)throw i;uh(e,"network-request-failed",{message:String(i)})}}async function TFe(e,t,n,r,i={}){const s=await zS(e,t,n,r,i);return"mfaPendingCredential"in s&&uh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function AFe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?kZ(e.config,i):`${e.config.apiScheme}://${i}`}class dKt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qd(this.auth,"network-request-failed")),fKt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hKt(e,t){return zS(e,"POST","/v1/accounts:delete",t)}async function pKt(e,t){return zS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mKt(e,t=!1){const n=US(e),r=await n.getIdToken(t),i=$Z(r);dn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:X2(tU(i.auth_time)),issuedAtTime:X2(tU(i.iat)),expirationTime:X2(tU(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tU(e){return Number(e)*1e3}function $Z(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return sR("JWT malformed, contained fewer than 3 sections"),null;try{const i=gFe(n);return i?JSON.parse(i):(sR("Failed to decode base64 JWT payload"),null)}catch(i){return sR("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gKt(e){const t=$Z(e);return dn(t,"internal-error"),dn(typeof t.exp<"u","internal-error"),dn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof jS&&yKt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function yKt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vKt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CFe{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=X2(this.lastLoginAt),this.creationTime=X2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await SC(e,pKt(n,{idToken:r}));dn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?wKt(s.providerUserInfo):[],a=bKt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new CFe(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function _Kt(e){const t=US(e);await AM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function bKt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function wKt(e){return e.map(t=>{var{providerId:n}=t,r=SS(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EKt(e,t){const n=await xFe(e,{},async()=>{const r=iO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=AFe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",SFe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SKt(e,t){return zS(e,"POST","/v2/accounts:revokeToken",o5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){dn(t.idToken,"internal-error"),dn(typeof t.idToken<"u","internal-error"),dn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):gKt(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return dn(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await EKt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xC;return r&&(dn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(dn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(dn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xC,this.toJSON())}_performRefresh(){return bp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(e,t){dn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Qv{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=SS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vKt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CFe(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await SC(this,this.stsTokenManager.getToken(this.auth,t));return dn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return mKt(this,t)}reload(){return _Kt(this)}_assign(t){this!==t&&(dn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Qv(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){dn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await AM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await SC(this,hKt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:b}=n;dn(_&&b,t,"internal-error");const T=xC.fromJSON(this.name,b);dn(typeof _=="string",t,"internal-error"),Vm(f,t.name),Vm(d,t.name),dn(typeof w=="boolean",t,"internal-error"),dn(typeof x=="boolean",t,"internal-error"),Vm(h,t.name),Vm(p,t.name),Vm(m,t.name),Vm(g,t.name),Vm(y,t.name),Vm(v,t.name);const C=new Qv({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(C.providerData=E.map(A=>Object.assign({},A))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new xC;i.updateFromServerResponse(n);const s=new Qv({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await AM(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0e=new Map;function wp(e){om(e instanceof Function,"Expected a class definition");let t=U0e.get(e);return t?(om(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,U0e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IFe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}IFe.type="NONE";const z0e=IFe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(e,t,n){return`firebase:${e}:${t}:${n}`}class Aw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=oR(this.userKey,i.apiKey,s),this.fullPersistenceKey=oR("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Qv._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Aw(wp(z0e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||wp(z0e);const o=oR(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Qv._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Aw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Aw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kFe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(OFe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(RFe(t))return"Blackberry";if(NFe(t))return"Webos";if(RZ(t))return"Safari";if((t.includes("chrome/")||PFe(t))&&!t.includes("edge/"))return"Chrome";if($Fe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OFe(e=wa()){return/firefox\//i.test(e)}function RZ(e=wa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function PFe(e=wa()){return/crios\//i.test(e)}function kFe(e=wa()){return/iemobile/i.test(e)}function $Fe(e=wa()){return/android/i.test(e)}function RFe(e=wa()){return/blackberry/i.test(e)}function NFe(e=wa()){return/webos/i.test(e)}function a5(e=wa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function xKt(e=wa()){var t;return a5(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function TKt(){return qYt()&&document.documentMode===10}function DFe(e=wa()){return a5(e)||$Fe(e)||NFe(e)||RFe(e)||/windows phone/i.test(e)||kFe(e)}function AKt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MFe(e,t=[]){let n;switch(e){case"Browser":n=V0e(wa());break;case"Worker":n=`${V0e(wa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CKt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IKt(e,t={}){return zS(e,"GET","/v2/passwordPolicy",o5(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OKt=6;class PKt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OKt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kKt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H0e(this),this.idTokenSubscription=new H0e(this),this.beforeStateQueue=new CKt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wFe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=wp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Aw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return dn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await AM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lKt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?US(t):null;return n&&dn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&dn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(wp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await IKt(this),n=new PKt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new s5("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SKt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&wp(t)||this._popupRedirectResolver;dn(n,this,"argument-error"),this.redirectPersistenceManager=await Aw.create(this,[wp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(dn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return dn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=MFe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&sKt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oO(e){return US(e)}class H0e{constructor(t){this.auth=t,this.observer=null,this.addObserver=XYt(n=>this.observer=n)}get next(){return dn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Kt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function RKt(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=qd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$Kt().appendChild(r)})}function NKt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DKt(e,t){const n=cy(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(_Fe(s,t??{}))return i;uh(i,"already-initialized")}return n.initialize({options:t})}function MKt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function LKt(e,t,n){const r=oO(e);dn(r._canInitEmulator,r,"emulator-config-failed"),dn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=LFe(t),{host:o,port:a}=FKt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||BKt()}function LFe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function FKt(e){const t=LFe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:q0e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:q0e(o)}}}function q0e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function BKt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FFe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return bp("not implemented")}_getIdTokenResponse(t){return bp("not implemented")}_linkToIdToken(t,n){return bp("not implemented")}_getReauthenticationResolver(t){return bp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(e,t){return TFe(e,"POST","/v1/accounts:signInWithIdp",o5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jKt="http://localhost";class I1 extends FFe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new I1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):uh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=SS(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new I1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Cw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Cw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Cw(t,n)}buildRequest(){const t={requestUri:jKt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=iO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO extends NZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg extends aO{constructor(){super("facebook.com")}static credential(t){return I1._fromParams({providerId:hg.PROVIDER_ID,signInMethod:hg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hg.credentialFromTaggedObject(t)}static credentialFromError(t){return hg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hg.credential(t.oauthAccessToken)}catch{return null}}}hg.FACEBOOK_SIGN_IN_METHOD="facebook.com";hg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends aO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return I1._fromParams({providerId:up.PROVIDER_ID,signInMethod:up.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return up.credentialFromTaggedObject(t)}static credentialFromError(t){return up.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return up.credential(n,r)}catch{return null}}}up.GOOGLE_SIGN_IN_METHOD="google.com";up.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends aO{constructor(){super("github.com")}static credential(t){return I1._fromParams({providerId:pg.PROVIDER_ID,signInMethod:pg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return pg.credentialFromTaggedObject(t)}static credentialFromError(t){return pg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return pg.credential(t.oauthAccessToken)}catch{return null}}}pg.GITHUB_SIGN_IN_METHOD="github.com";pg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends aO{constructor(){super("twitter.com")}static credential(t,n){return I1._fromParams({providerId:mg.PROVIDER_ID,signInMethod:mg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return mg.credentialFromTaggedObject(t)}static credentialFromError(t){return mg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return mg.credential(n,r)}catch{return null}}}mg.TWITTER_SIGN_IN_METHOD="twitter.com";mg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UKt(e,t){return TFe(e,"POST","/v1/accounts:signUp",o5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Qv._fromIdTokenResponse(t,r,i),o=W0e(r);return new $0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=W0e(r);return new $0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function W0e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zKt(e){var t;const n=oO(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new $0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await UKt(n,{returnSecureToken:!0}),i=await $0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM extends jS{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,CM.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new CM(t,n,r,i)}}function BFe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?CM._fromErrorAndOperation(e,s,t,r):s})}async function VKt(e,t,n=!1){const r=await SC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HKt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await SC(e,BFe(r,i,t,e),n);dn(s.idToken,r,"internal-error");const o=$Z(s.idToken);dn(o,r,"internal-error");const{sub:a}=o;return dn(e.uid===a,r,"user-mismatch"),$0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&uh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qKt(e,t,n=!1){const r="signIn",i=await BFe(e,r,t),s=await $0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function WKt(e,t,n,r){return US(e).onIdTokenChanged(t,n,r)}function GKt(e,t,n){return US(e).beforeAuthStateChanged(t,n)}const IM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jFe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(IM,"1"),this.storage.removeItem(IM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YKt(){const e=wa();return RZ(e)||a5(e)}const KKt=1e3,XKt=10;class UFe extends jFe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=YKt()&&AKt(),this.fallbackToPolling=DFe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);TKt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,XKt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},KKt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}UFe.type="LOCAL";const QKt=UFe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zFe extends jFe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}zFe.type="SESSION";const VFe=zFe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JKt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new u5(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await JKt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}u5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DZ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZKt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=DZ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(){return window}function eXt(e){Wd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HFe(){return typeof Wd().WorkerGlobalScope<"u"&&typeof Wd().importScripts=="function"}async function tXt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nXt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function rXt(){return HFe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qFe="firebaseLocalStorageDb",iXt=1,OM="firebaseLocalStorage",WFe="fbase_key";class uO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function l5(e,t){return e.transaction([OM],t?"readwrite":"readonly").objectStore(OM)}function sXt(){const e=indexedDB.deleteDatabase(qFe);return new uO(e).toPromise()}function JH(){const e=indexedDB.open(qFe,iXt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(OM,{keyPath:WFe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(OM)?t(r):(r.close(),await sXt(),t(await JH()))})})}async function G0e(e,t,n){const r=l5(e,!0).put({[WFe]:t,value:n});return new uO(r).toPromise()}async function oXt(e,t){const n=l5(e,!1).get(t),r=await new uO(n).toPromise();return r===void 0?null:r.value}function Y0e(e,t){const n=l5(e,!0).delete(t);return new uO(n).toPromise()}const aXt=800,uXt=3;class GFe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await JH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>uXt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HFe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=u5._getInstance(rXt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await tXt(),!this.activeServiceWorker)return;this.sender=new ZKt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nXt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await JH();return await G0e(t,IM,"1"),await Y0e(t,IM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G0e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>oXt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Y0e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=l5(i,!1).getAll();return new uO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aXt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GFe.type="LOCAL";const lXt=GFe;new sO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YFe(e,t){return t?wp(t):(dn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ extends FFe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Cw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Cw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Cw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function cXt(e){return qKt(e.auth,new MZ(e),e.bypassAuthState)}function fXt(e){const{auth:t,user:n}=e;return dn(n,t,"internal-error"),HKt(n,new MZ(e),e.bypassAuthState)}async function dXt(e){const{auth:t,user:n}=e;return dn(n,t,"internal-error"),VKt(n,new MZ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KFe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return cXt;case"linkViaPopup":case"linkViaRedirect":return dXt;case"reauthViaPopup":case"reauthViaRedirect":return fXt;default:uh(this.auth,"internal-error")}}resolve(t){om(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){om(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hXt=new sO(2e3,1e4);async function pXt(e,t,n){const r=oO(e);oKt(e,t,NZ);const i=YFe(r,n);return new Nv(r,"signInViaPopup",t,i).executeNotNull()}class Nv extends KFe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Nv.currentPopupAction&&Nv.currentPopupAction.cancel(),Nv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return dn(t,this.auth,"internal-error"),t}async onExecution(){om(this.filter.length===1,"Popup operations only handle one event");const t=DZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(qd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,hXt.get())};t()}}Nv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mXt="pendingRedirect",aR=new Map;class gXt extends KFe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=aR.get(this.auth._key());if(!t){try{const r=await yXt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}aR.set(this.auth._key(),t)}return this.bypassAuthState||aR.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yXt(e,t){const n=bXt(t),r=_Xt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function vXt(e,t){aR.set(e._key(),t)}function _Xt(e){return wp(e._redirectPersistence)}function bXt(e){return oR(mXt,e.config.apiKey,e.name)}async function wXt(e,t,n=!1){const r=oO(e),i=YFe(r,t),o=await new gXt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EXt=10*60*1e3;class SXt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!xXt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!XFe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=EXt&&this.cachedEventUids.clear(),this.cachedEventUids.has(K0e(t))}saveEventToCache(t){this.cachedEventUids.add(K0e(t)),this.lastProcessedEventTime=Date.now()}}function K0e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XFe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function xXt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XFe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TXt(e,t={}){return zS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AXt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CXt=/^https?/;async function IXt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await TXt(e);for(const n of t)try{if(OXt(n))return}catch{}uh(e,"unauthorized-domain")}function OXt(e){const t=QH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CXt.test(n))return!1;if(AXt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PXt=new sO(3e4,6e4);function X0e(){const e=Wd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function kXt(e){return new Promise((t,n)=>{var r,i,s;function o(){X0e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{X0e(),n(qd(e,"network-request-failed"))},timeout:PXt.get()})}if(!((i=(r=Wd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Wd().gapi)===null||s===void 0)&&s.load)o();else{const a=NKt("iframefcb");return Wd()[a]=()=>{gapi.load?o():n(qd(e,"network-request-failed"))},RKt(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw uR=null,t})}let uR=null;function $Xt(e){return uR=uR||kXt(e),uR}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RXt=new sO(5e3,15e3),NXt="__/auth/iframe",DXt="emulator/auth/iframe",MXt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LXt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FXt(e){const t=e.config;dn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kZ(t,DXt):`https://${e.config.authDomain}/${NXt}`,r={apiKey:t.apiKey,appName:e.name,v:kc},i=LXt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${iO(r).slice(1)}`}async function BXt(e){const t=await $Xt(e),n=Wd().gapi;return dn(n,e,"internal-error"),t.open({where:document.body,url:FXt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MXt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qd(e,"network-request-failed"),a=Wd().setTimeout(()=>{s(o)},RXt.get());function u(){Wd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jXt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UXt=500,zXt=600,VXt="_blank",HXt="http://localhost";class Q0e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qXt(e,t,n,r=UXt,i=zXt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},jXt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=wa().toLowerCase();n&&(a=PFe(l)?VXt:n),OFe(l)&&(t=t||HXt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(xKt(l)&&a!=="_self")return WXt(t||"",a),new Q0e(null);const f=window.open(t||"",a,c);dn(f,e,"popup-blocked");try{f.focus()}catch{}return new Q0e(f)}function WXt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GXt="__/auth/handler",YXt="emulator/auth/handler",KXt=encodeURIComponent("fac");async function J0e(e,t,n,r,i,s){dn(e.config.authDomain,e,"auth-domain-config-required"),dn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kc,eventId:i};if(t instanceof NZ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",KYt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof aO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${KXt}=${encodeURIComponent(u)}`:"";return`${XXt(e)}?${iO(a).slice(1)}${l}`}function XXt({config:e}){return e.emulator?kZ(e,YXt):`https://${e.authDomain}/${GXt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="webStorageSupport";class QXt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VFe,this._completeRedirectFn=wXt,this._overrideRedirectResult=vXt}async _openPopup(t,n,r,i){var s;om((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await J0e(t,n,r,QH(),i);return qXt(t,o,DZ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await J0e(t,n,r,QH(),i);return eXt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(om(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await BXt(t),r=new SXt(t);return n.register("authEvent",i=>(dn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(nU,{type:nU},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[nU];o!==void 0&&n(!!o),uh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IXt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return DFe()||RZ()||a5()}}const QFe=QXt;var Z0e="@firebase/auth",eye="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JXt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZXt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function eQt(e){Tf(new B0e("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;dn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MFe(e)},l=new kKt(r,i,s,u);return MKt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Tf(new B0e("auth-internal",t=>{const n=oO(t.getProvider("auth").getImmediate());return(r=>new JXt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gl(Z0e,eye,ZXt(e)),gl(Z0e,eye,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQt=5*60,nQt=vFe("authIdTokenMaxAge")||tQt;let tye=null;const rQt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nQt)return;const i=n==null?void 0:n.token;tye!==i&&(tye=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JFe(e=FF()){const t=cy(e,"auth");if(t.isInitialized())return t.getImmediate();const n=DKt(e,{popupRedirectResolver:QFe,persistence:[lXt,QKt,VFe]}),r=vFe("authTokenSyncURL");if(r){const s=rQt(r);GKt(n,s,()=>s(n.currentUser)),WKt(n,o=>s(o))}const i=UYt("auth");return i&&LKt(n,`http://${i}`),n}eQt("Browser");function xk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ZFe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof xk=="function"&&xk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof xk=="function"&&xk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,E){if(typeof x!="function"&&this.state===l||typeof E!="function"&&this.state===u)return this;var b=new this.constructor(o);if(this.state!==c){var T=this.state===l?x:E;h(b,T,this.outcome)}else this.queue.push(new d(b,x,E));return b};function d(x,E,b){this.promise=x,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,E,b){s(function(){var T;try{T=E(b)}catch(C){return a.reject(x,C)}T===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,T)})}a.resolve=function(x,E){var b=g(p,E);if(b.status==="error")return a.reject(x,b.value);var T=b.value;if(T)m(x,T);else{x.state=l,x.outcome=E;for(var C=-1,A=x.queue.length;++C<A;)x.queue[C].callFulfilled(E)}return x},a.reject=function(x,E){x.state=u,x.outcome=E;for(var b=-1,T=x.queue.length;++b<T;)x.queue[b].callRejected(E);return x};function p(x){var E=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof E=="function")return function(){E.apply(x,arguments)}}function m(x,E){var b=!1;function T(N){b||(b=!0,a.reject(x,N))}function C(N){b||(b=!0,a.resolve(x,N))}function A(){E(C,T)}var O=g(A);O.status==="error"&&T(O.value)}function g(x,E){var b={};try{b.value=x(E),b.status="success"}catch(T){b.status="error",b.value=T}return b}f.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=v;function v(x){var E=new this(o);return a.reject(E,x)}f.all=_;function _(x){var E=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=x.length,T=!1;if(!b)return this.resolve([]);for(var C=new Array(b),A=0,O=-1,N=new this(o);++O<b;)k(x[O],O);return N;function k(L,B){E.resolve(L).then(U,function(G){T||(T=!0,a.reject(N,G))});function U(G){C[B]=G,++A===b&&!T&&(T=!0,a.resolve(N,C))}}}f.race=w;function w(x){var E=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=x.length,T=!1;if(!b)return this.resolve([]);for(var C=-1,A=new this(o);++C<b;)O(x[C]);return A;function O(N){E.resolve(N).then(function(k){T||(T=!0,a.resolve(A,k))},function(k){T||(T=!0,a.reject(A,k))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,se){if(!(K instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,se){K=K||[],se=se||{};try{return new Blob(K,se)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ge=new Z,ve=0;ve<K.length;ve+=1)ge.append(K[ve]);return ge.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(K,se){se&&K.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(K,se,Z){typeof se=="function"&&K.then(se),typeof Z=="function"&&K.catch(Z)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",x="readwrite";function E(K){for(var se=K.length,Z=new ArrayBuffer(se),ge=new Uint8Array(Z),ve=0;ve<se;ve++)ge[ve]=K.charCodeAt(ve);return Z}function b(K){return new f(function(se){var Z=K.transaction(g,x),ge=c([""]);Z.objectStore(g).put(ge,"key"),Z.onabort=function(ve){ve.preventDefault(),ve.stopPropagation(),se(!1)},Z.oncomplete=function(){var ve=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);se(pe||!ve||parseInt(ve[1],10)>=43)}}).catch(function(){return!1})}function T(K){return typeof y=="boolean"?f.resolve(y):b(K).then(function(se){return y=se,y})}function C(K){var se=v[K.name],Z={};Z.promise=new f(function(ge,ve){Z.resolve=ge,Z.reject=ve}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function A(K){var se=v[K.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function O(K,se){var Z=v[K.name],ge=Z.deferredOperations.pop();if(ge)return ge.reject(se),ge.promise}function N(K,se){return new f(function(Z,ge){if(v[K.name]=v[K.name]||M(),K.db)if(se)C(K),K.db.close();else return Z(K.db);var ve=[K.name];se&&ve.push(K.version);var pe=u.open.apply(u,ve);se&&(pe.onupgradeneeded=function(Oe){var je=pe.result;try{je.createObjectStore(K.storeName),Oe.oldVersion<=1&&je.createObjectStore(g)}catch(We){if(We.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw We}}),pe.onerror=function(Oe){Oe.preventDefault(),ge(pe.error)},pe.onsuccess=function(){var Oe=pe.result;Oe.onversionchange=function(je){je.target.close()},Z(Oe),A(K)}})}function k(K){return N(K,!1)}function L(K){return N(K,!0)}function B(K,se){if(!K.db)return!0;var Z=!K.db.objectStoreNames.contains(K.storeName),ge=K.version<K.db.version,ve=K.version>K.db.version;if(ge&&(K.version!==se&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),ve||Z){if(Z){var pe=K.db.version+1;pe>K.version&&(K.version=pe)}return!0}return!1}function U(K){return new f(function(se,Z){var ge=new FileReader;ge.onerror=Z,ge.onloadend=function(ve){var pe=btoa(ve.target.result||"");se({__local_forage_encoded_blob:!0,data:pe,type:K.type})},ge.readAsBinaryString(K)})}function G(K){var se=E(atob(K.data));return c([se],{type:K.type})}function H(K){return K&&K.__local_forage_encoded_blob}function Y(K){var se=this,Z=se._initReady().then(function(){var ge=v[se._dbInfo.name];if(ge&&ge.dbReady)return ge.dbReady});return h(Z,K,K),Z}function q(K){C(K);for(var se=v[K.name],Z=se.forages,ge=0;ge<Z.length;ge++){var ve=Z[ge];ve._dbInfo.db&&(ve._dbInfo.db.close(),ve._dbInfo.db=null)}return K.db=null,k(K).then(function(pe){return K.db=pe,B(K)?L(K):pe}).then(function(pe){K.db=se.db=pe;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=pe}).catch(function(pe){throw O(K,pe),pe})}function D(K,se,Z,ge){ge===void 0&&(ge=1);try{var ve=K.db.transaction(K.storeName,se);Z(null,ve)}catch(pe){if(ge>0&&(!K.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!K.db||pe.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),L(K)}).then(function(){return q(K).then(function(){D(K,se,Z,ge-1)})}).catch(Z);Z(pe)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(K){var se=this,Z={db:null};if(K)for(var ge in K)Z[ge]=K[ge];var ve=v[Z.name];ve||(ve=M(),v[Z.name]=ve),ve.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=Y);var pe=[];function Oe(){return f.resolve()}for(var je=0;je<ve.forages.length;je++){var We=ve.forages[je];We!==se&&pe.push(We._initReady().catch(Oe))}var Ue=ve.forages.slice(0);return f.all(pe).then(function(){return Z.db=ve.db,k(Z)}).then(function(Xe){return Z.db=Xe,B(Z,se._defaultConfig.version)?L(Z):Xe}).then(function(Xe){Z.db=ve.db=Xe,se._dbInfo=Z;for(var xt=0;xt<Ue.length;xt++){var nn=Ue[xt];nn!==se&&(nn._dbInfo.db=Z.db,nn._dbInfo.version=Z.version)}})}function z(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){D(Z._dbInfo,w,function(Oe,je){if(Oe)return pe(Oe);try{var We=je.objectStore(Z._dbInfo.storeName),Ue=We.get(K);Ue.onsuccess=function(){var Xe=Ue.result;Xe===void 0&&(Xe=null),H(Xe)&&(Xe=G(Xe)),ve(Xe)},Ue.onerror=function(){pe(Ue.error)}}catch(Xe){pe(Xe)}})}).catch(pe)});return d(ge,se),ge}function V(K,se){var Z=this,ge=new f(function(ve,pe){Z.ready().then(function(){D(Z._dbInfo,w,function(Oe,je){if(Oe)return pe(Oe);try{var We=je.objectStore(Z._dbInfo.storeName),Ue=We.openCursor(),Xe=1;Ue.onsuccess=function(){var xt=Ue.result;if(xt){var nn=xt.value;H(nn)&&(nn=G(nn));var Yn=K(nn,xt.key,Xe++);Yn!==void 0?ve(Yn):xt.continue()}else ve()},Ue.onerror=function(){pe(Ue.error)}}catch(xt){pe(xt)}})}).catch(pe)});return d(ge,se),ge}function te(K,se,Z){var ge=this;K=p(K);var ve=new f(function(pe,Oe){var je;ge.ready().then(function(){return je=ge._dbInfo,_.call(se)==="[object Blob]"?T(je.db).then(function(We){return We?se:U(se)}):se}).then(function(We){D(ge._dbInfo,x,function(Ue,Xe){if(Ue)return Oe(Ue);try{var xt=Xe.objectStore(ge._dbInfo.storeName);We===null&&(We=void 0);var nn=xt.put(We,K);Xe.oncomplete=function(){We===void 0&&(We=null),pe(We)},Xe.onabort=Xe.onerror=function(){var Yn=nn.error?nn.error:nn.transaction.error;Oe(Yn)}}catch(Yn){Oe(Yn)}})}).catch(Oe)});return d(ve,Z),ve}function le(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){D(Z._dbInfo,x,function(Oe,je){if(Oe)return pe(Oe);try{var We=je.objectStore(Z._dbInfo.storeName),Ue=We.delete(K);je.oncomplete=function(){ve()},je.onerror=function(){pe(Ue.error)},je.onabort=function(){var Xe=Ue.error?Ue.error:Ue.transaction.error;pe(Xe)}}catch(Xe){pe(Xe)}})}).catch(pe)});return d(ge,se),ge}function me(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){D(se._dbInfo,x,function(pe,Oe){if(pe)return ve(pe);try{var je=Oe.objectStore(se._dbInfo.storeName),We=je.clear();Oe.oncomplete=function(){ge()},Oe.onabort=Oe.onerror=function(){var Ue=We.error?We.error:We.transaction.error;ve(Ue)}}catch(Ue){ve(Ue)}})}).catch(ve)});return d(Z,K),Z}function ye(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){D(se._dbInfo,w,function(pe,Oe){if(pe)return ve(pe);try{var je=Oe.objectStore(se._dbInfo.storeName),We=je.count();We.onsuccess=function(){ge(We.result)},We.onerror=function(){ve(We.error)}}catch(Ue){ve(Ue)}})}).catch(ve)});return d(Z,K),Z}function de(K,se){var Z=this,ge=new f(function(ve,pe){if(K<0){ve(null);return}Z.ready().then(function(){D(Z._dbInfo,w,function(Oe,je){if(Oe)return pe(Oe);try{var We=je.objectStore(Z._dbInfo.storeName),Ue=!1,Xe=We.openKeyCursor();Xe.onsuccess=function(){var xt=Xe.result;if(!xt){ve(null);return}K===0||Ue?ve(xt.key):(Ue=!0,xt.advance(K))},Xe.onerror=function(){pe(Xe.error)}}catch(xt){pe(xt)}})}).catch(pe)});return d(ge,se),ge}function we(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){D(se._dbInfo,w,function(pe,Oe){if(pe)return ve(pe);try{var je=Oe.objectStore(se._dbInfo.storeName),We=je.openKeyCursor(),Ue=[];We.onsuccess=function(){var Xe=We.result;if(!Xe){ge(Ue);return}Ue.push(Xe.key),Xe.continue()},We.onerror=function(){ve(We.error)}}catch(Xe){ve(Xe)}})}).catch(ve)});return d(Z,K),Z}function he(K,se){se=m.apply(this,arguments);var Z=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||Z.name,K.storeName=K.storeName||Z.storeName);var ge=this,ve;if(!K.name)ve=f.reject("Invalid arguments");else{var pe=K.name===Z.name&&ge._dbInfo.db,Oe=pe?f.resolve(ge._dbInfo.db):k(K).then(function(je){var We=v[K.name],Ue=We.forages;We.db=je;for(var Xe=0;Xe<Ue.length;Xe++)Ue[Xe]._dbInfo.db=je;return je});K.storeName?ve=Oe.then(function(je){if(je.objectStoreNames.contains(K.storeName)){var We=je.version+1;C(K);var Ue=v[K.name],Xe=Ue.forages;je.close();for(var xt=0;xt<Xe.length;xt++){var nn=Xe[xt];nn._dbInfo.db=null,nn._dbInfo.version=We}var Yn=new f(function(Mt,Xr){var Or=u.open(K.name,We);Or.onerror=function(hs){var Nh=Or.result;Nh.close(),Xr(hs)},Or.onupgradeneeded=function(){var hs=Or.result;hs.deleteObjectStore(K.storeName)},Or.onsuccess=function(){var hs=Or.result;hs.close(),Mt(hs)}});return Yn.then(function(Mt){Ue.db=Mt;for(var Xr=0;Xr<Xe.length;Xr++){var Or=Xe[Xr];Or._dbInfo.db=Mt,A(Or._dbInfo)}}).catch(function(Mt){throw(O(K,Mt)||f.resolve()).catch(function(){}),Mt})}}):ve=Oe.then(function(je){C(K);var We=v[K.name],Ue=We.forages;je.close();for(var Xe=0;Xe<Ue.length;Xe++){var xt=Ue[Xe];xt._dbInfo.db=null}var nn=new f(function(Yn,Mt){var Xr=u.deleteDatabase(K.name);Xr.onerror=function(){var Or=Xr.result;Or&&Or.close(),Mt(Xr.error)},Xr.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},Xr.onsuccess=function(){var Or=Xr.result;Or&&Or.close(),Yn(Or)}});return nn.then(function(Yn){We.db=Yn;for(var Mt=0;Mt<Ue.length;Mt++){var Xr=Ue[Mt];A(Xr._dbInfo)}}).catch(function(Yn){throw(O(K,Yn)||f.resolve()).catch(function(){}),Yn})})}return d(ve,se),ve}var Ve={_driver:"asyncStorage",_initStorage:W,_support:l(),iterate:V,getItem:z,setItem:te,removeItem:le,clear:me,length:ye,key:de,keys:we,dropInstance:he};function Me(){return typeof openDatabase=="function"}var Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fe="~~local_forage_type~",De=/^~~local_forage_type~([^~]+)~/,He="__lfsc__:",Qt=He.length,nt="arbf",qe="blob",Pt="si08",at="ui08",ht="uic8",vt="si16",Ht="si32",Xt="ur16",fe="ui32",xe="fl32",Le="fl64",ct=Qt+nt.length,Je=Object.prototype.toString;function lt(K){var se=K.length*.75,Z=K.length,ge,ve=0,pe,Oe,je,We;K[K.length-1]==="="&&(se--,K[K.length-2]==="="&&se--);var Ue=new ArrayBuffer(se),Xe=new Uint8Array(Ue);for(ge=0;ge<Z;ge+=4)pe=Ye.indexOf(K[ge]),Oe=Ye.indexOf(K[ge+1]),je=Ye.indexOf(K[ge+2]),We=Ye.indexOf(K[ge+3]),Xe[ve++]=pe<<2|Oe>>4,Xe[ve++]=(Oe&15)<<4|je>>2,Xe[ve++]=(je&3)<<6|We&63;return Ue}function st(K){var se=new Uint8Array(K),Z="",ge;for(ge=0;ge<se.length;ge+=3)Z+=Ye[se[ge]>>2],Z+=Ye[(se[ge]&3)<<4|se[ge+1]>>4],Z+=Ye[(se[ge+1]&15)<<2|se[ge+2]>>6],Z+=Ye[se[ge+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function At(K,se){var Z="";if(K&&(Z=Je.call(K)),K&&(Z==="[object ArrayBuffer]"||K.buffer&&Je.call(K.buffer)==="[object ArrayBuffer]")){var ge,ve=He;K instanceof ArrayBuffer?(ge=K,ve+=nt):(ge=K.buffer,Z==="[object Int8Array]"?ve+=Pt:Z==="[object Uint8Array]"?ve+=at:Z==="[object Uint8ClampedArray]"?ve+=ht:Z==="[object Int16Array]"?ve+=vt:Z==="[object Uint16Array]"?ve+=Xt:Z==="[object Int32Array]"?ve+=Ht:Z==="[object Uint32Array]"?ve+=fe:Z==="[object Float32Array]"?ve+=xe:Z==="[object Float64Array]"?ve+=Le:se(new Error("Failed to get type for BinaryArray"))),se(ve+st(ge))}else if(Z==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Oe=Fe+K.type+"~"+st(this.result);se(He+qe+Oe)},pe.readAsArrayBuffer(K)}else try{se(JSON.stringify(K))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",K),se(null,Oe)}}function Tn(K){if(K.substring(0,Qt)!==He)return JSON.parse(K);var se=K.substring(ct),Z=K.substring(Qt,ct),ge;if(Z===qe&&De.test(se)){var ve=se.match(De);ge=ve[1],se=se.substring(ve[0].length)}var pe=lt(se);switch(Z){case nt:return pe;case qe:return c([pe],{type:ge});case Pt:return new Int8Array(pe);case at:return new Uint8Array(pe);case ht:return new Uint8ClampedArray(pe);case vt:return new Int16Array(pe);case Xt:return new Uint16Array(pe);case Ht:return new Int32Array(pe);case fe:return new Uint32Array(pe);case xe:return new Float32Array(pe);case Le:return new Float64Array(pe);default:throw new Error("Unkown type: "+Z)}}var Zt={serialize:At,deserialize:Tn,stringToBuffer:lt,bufferToString:st};function Jt(K,se,Z,ge){K.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,ge)}function nr(K){var se=this,Z={db:null};if(K)for(var ge in K)Z[ge]=typeof K[ge]!="string"?K[ge].toString():K[ge];var ve=new f(function(pe,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(je){return Oe(je)}Z.db.transaction(function(je){Jt(je,Z,function(){se._dbInfo=Z,pe()},function(We,Ue){Oe(Ue)})},Oe)});return Z.serializer=Zt,ve}function Bn(K,se,Z,ge,ve,pe){K.executeSql(Z,ge,ve,function(Oe,je){je.code===je.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(We,Ue){Ue.rows.length?pe(We,je):Jt(We,se,function(){We.executeSql(Z,ge,ve,pe)},pe)},pe):pe(Oe,je)},pe)}function Bo(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(je){Bn(je,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[K],function(We,Ue){var Xe=Ue.rows.length?Ue.rows.item(0).value:null;Xe&&(Xe=Oe.serializer.deserialize(Xe)),ve(Xe)},function(We,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function hr(K,se){var Z=this,ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(je){Bn(je,Oe,"SELECT * FROM "+Oe.storeName,[],function(We,Ue){for(var Xe=Ue.rows,xt=Xe.length,nn=0;nn<xt;nn++){var Yn=Xe.item(nn),Mt=Yn.value;if(Mt&&(Mt=Oe.serializer.deserialize(Mt)),Mt=K(Mt,Yn.key,nn+1),Mt!==void 0){ve(Mt);return}}ve()},function(We,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function Ni(K,se,Z,ge){var ve=this;K=p(K);var pe=new f(function(Oe,je){ve.ready().then(function(){se===void 0&&(se=null);var We=se,Ue=ve._dbInfo;Ue.serializer.serialize(se,function(Xe,xt){xt?je(xt):Ue.db.transaction(function(nn){Bn(nn,Ue,"INSERT OR REPLACE INTO "+Ue.storeName+" (key, value) VALUES (?, ?)",[K,Xe],function(){Oe(We)},function(Yn,Mt){je(Mt)})},function(nn){if(nn.code===nn.QUOTA_ERR){if(ge>0){Oe(Ni.apply(ve,[K,We,Z,ge-1]));return}je(nn)}})})}).catch(je)});return d(pe,Z),pe}function jr(K,se,Z){return Ni.apply(this,[K,se,Z,1])}function Ir(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(je){Bn(je,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[K],function(){ve()},function(We,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function Ur(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){var pe=se._dbInfo;pe.db.transaction(function(Oe){Bn(Oe,pe,"DELETE FROM "+pe.storeName,[],function(){ge()},function(je,We){ve(We)})})}).catch(ve)});return d(Z,K),Z}function rr(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){var pe=se._dbInfo;pe.db.transaction(function(Oe){Bn(Oe,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(je,We){var Ue=We.rows.item(0).c;ge(Ue)},function(je,We){ve(We)})})}).catch(ve)});return d(Z,K),Z}function Et(K,se){var Z=this,ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(je){Bn(je,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[K+1],function(We,Ue){var Xe=Ue.rows.length?Ue.rows.item(0).key:null;ve(Xe)},function(We,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function pr(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){var pe=se._dbInfo;pe.db.transaction(function(Oe){Bn(Oe,pe,"SELECT key FROM "+pe.storeName,[],function(je,We){for(var Ue=[],Xe=0;Xe<We.rows.length;Xe++)Ue.push(We.rows.item(Xe).key);ge(Ue)},function(je,We){ve(We)})})}).catch(ve)});return d(Z,K),Z}function fi(K){return new f(function(se,Z){K.transaction(function(ge){ge.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ve,pe){for(var Oe=[],je=0;je<pe.rows.length;je++)Oe.push(pe.rows.item(je).name);se({db:K,storeNames:Oe})},function(ve,pe){Z(pe)})},function(ge){Z(ge)})})}function jn(K,se){se=m.apply(this,arguments);var Z=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||Z.name,K.storeName=K.storeName||Z.storeName);var ge=this,ve;return K.name?ve=new f(function(pe){var Oe;K.name===Z.name?Oe=ge._dbInfo.db:Oe=openDatabase(K.name,"","",0),K.storeName?pe({db:Oe,storeNames:[K.storeName]}):pe(fi(Oe))}).then(function(pe){return new f(function(Oe,je){pe.db.transaction(function(We){function Ue(Yn){return new f(function(Mt,Xr){We.executeSql("DROP TABLE IF EXISTS "+Yn,[],function(){Mt()},function(Or,hs){Xr(hs)})})}for(var Xe=[],xt=0,nn=pe.storeNames.length;xt<nn;xt++)Xe.push(Ue(pe.storeNames[xt]));f.all(Xe).then(function(){Oe()}).catch(function(Yn){je(Yn)})},function(We){je(We)})})}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var fs={_driver:"webSQLStorage",_initStorage:nr,_support:Me(),iterate:hr,getItem:Bo,setItem:jr,removeItem:Ir,clear:Ur,length:rr,key:Et,keys:pr,dropInstance:jn};function ds(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(K,se){var Z=K.name+"/";return K.storeName!==se.storeName&&(Z+=K.storeName+"/"),Z}function ne(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function ue(){return!ne()||localStorage.length>0}function Ee(K){var se=this,Z={};if(K)for(var ge in K)Z[ge]=K[ge];return Z.keyPrefix=oe(K,se._defaultConfig),ue()?(se._dbInfo=Z,Z.serializer=Zt,f.resolve()):f.reject()}function Se(K){var se=this,Z=se.ready().then(function(){for(var ge=se._dbInfo.keyPrefix,ve=localStorage.length-1;ve>=0;ve--){var pe=localStorage.key(ve);pe.indexOf(ge)===0&&localStorage.removeItem(pe)}});return d(Z,K),Z}function St(K,se){var Z=this;K=p(K);var ge=Z.ready().then(function(){var ve=Z._dbInfo,pe=localStorage.getItem(ve.keyPrefix+K);return pe&&(pe=ve.serializer.deserialize(pe)),pe});return d(ge,se),ge}function ke(K,se){var Z=this,ge=Z.ready().then(function(){for(var ve=Z._dbInfo,pe=ve.keyPrefix,Oe=pe.length,je=localStorage.length,We=1,Ue=0;Ue<je;Ue++){var Xe=localStorage.key(Ue);if(Xe.indexOf(pe)===0){var xt=localStorage.getItem(Xe);if(xt&&(xt=ve.serializer.deserialize(xt)),xt=K(xt,Xe.substring(Oe),We++),xt!==void 0)return xt}}});return d(ge,se),ge}function _t(K,se){var Z=this,ge=Z.ready().then(function(){var ve=Z._dbInfo,pe;try{pe=localStorage.key(K)}catch{pe=null}return pe&&(pe=pe.substring(ve.keyPrefix.length)),pe});return d(ge,se),ge}function Ft(K){var se=this,Z=se.ready().then(function(){for(var ge=se._dbInfo,ve=localStorage.length,pe=[],Oe=0;Oe<ve;Oe++){var je=localStorage.key(Oe);je.indexOf(ge.keyPrefix)===0&&pe.push(je.substring(ge.keyPrefix.length))}return pe});return d(Z,K),Z}function Ct(K){var se=this,Z=se.keys().then(function(ge){return ge.length});return d(Z,K),Z}function Bt(K,se){var Z=this;K=p(K);var ge=Z.ready().then(function(){var ve=Z._dbInfo;localStorage.removeItem(ve.keyPrefix+K)});return d(ge,se),ge}function un(K,se,Z){var ge=this;K=p(K);var ve=ge.ready().then(function(){se===void 0&&(se=null);var pe=se;return new f(function(Oe,je){var We=ge._dbInfo;We.serializer.serialize(se,function(Ue,Xe){if(Xe)je(Xe);else try{localStorage.setItem(We.keyPrefix+K,Ue),Oe(pe)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&je(xt),je(xt)}})})});return d(ve,Z),ve}function Er(K,se){if(se=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var Z=this.config();K.name=K.name||Z.name,K.storeName=K.storeName||Z.storeName}var ge=this,ve;return K.name?ve=new f(function(pe){K.storeName?pe(oe(K,ge._defaultConfig)):pe(K.name+"/")}).then(function(pe){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var je=localStorage.key(Oe);je.indexOf(pe)===0&&localStorage.removeItem(je)}}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var qt={_driver:"localStorageWrapper",_initStorage:Ee,_support:ds(),iterate:ke,getItem:St,setItem:un,removeItem:Bt,clear:Se,length:Ct,key:_t,keys:Ft,dropInstance:Er},ir=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},en=function(se,Z){for(var ge=se.length,ve=0;ve<ge;){if(ir(se[ve],Z))return!0;ve++}return!1},Gn=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},si={},wi={},Ei={INDEXEDDB:Ve,WEBSQL:fs,LOCALSTORAGE:qt},Cs=[Ei.INDEXEDDB._driver,Ei.WEBSQL._driver,Ei.LOCALSTORAGE._driver],Di=["dropInstance"],Sr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Di),wt={description:"",driver:Cs.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function An(K,se){K[se]=function(){var Z=arguments;return K.ready().then(function(){return K[se].apply(K,Z)})}}function Rr(){for(var K=1;K<arguments.length;K++){var se=arguments[K];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Gn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var ns=function(){function K(se){o(this,K);for(var Z in Ei)if(Ei.hasOwnProperty(Z)){var ge=Ei[Z],ve=ge._driver;this[Z]=ve,si[ve]||this.defineDriver(ge)}this._defaultConfig=Rr({},wt),this._config=Rr({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ge in Z){if(ge==="storeName"&&(Z[ge]=Z[ge].replace(/\W/g,"_")),ge==="version"&&typeof Z[ge]!="number")return new Error("Database version must be a number.");this._config[ge]=Z[ge]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},K.prototype.defineDriver=function(Z,ge,ve){var pe=new f(function(Oe,je){try{var We=Z._driver,Ue=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){je(Ue);return}for(var Xe=Sr.concat("_initStorage"),xt=0,nn=Xe.length;xt<nn;xt++){var Yn=Xe[xt],Mt=!en(Di,Yn);if((Mt||Z[Yn])&&typeof Z[Yn]!="function"){je(Ue);return}}var Xr=function(){for(var Nh=function(fx){return function(){var Ml=new Error("Method "+fx+" is not implemented by the current driver"),Ia=f.reject(Ml);return d(Ia,arguments[arguments.length-1]),Ia}},Nm=0,Sy=Di.length;Nm<Sy;Nm++){var xy=Di[Nm];Z[xy]||(Z[xy]=Nh(xy))}};Xr();var Or=function(Nh){si[We]&&console.info("Redefining LocalForage driver: "+We),si[We]=Z,wi[We]=Nh,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Or,je):Or(!!Z._support):Or(!0)}catch(hs){je(hs)}});return h(pe,ge,ve),pe},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(Z,ge,ve){var pe=si[Z]?f.resolve(si[Z]):f.reject(new Error("Driver not found."));return h(pe,ge,ve),pe},K.prototype.getSerializer=function(Z){var ge=f.resolve(Zt);return h(ge,Z),ge},K.prototype.ready=function(Z){var ge=this,ve=ge._driverSet.then(function(){return ge._ready===null&&(ge._ready=ge._initDriver()),ge._ready});return h(ve,Z,Z),ve},K.prototype.setDriver=function(Z,ge,ve){var pe=this;Gn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function je(){pe._config.driver=pe.driver()}function We(xt){return pe._extend(xt),je(),pe._ready=pe._initStorage(pe._config),pe._ready}function Ue(xt){return function(){var nn=0;function Yn(){for(;nn<xt.length;){var Mt=xt[nn];return nn++,pe._dbInfo=null,pe._ready=null,pe.getDriver(Mt).then(We).catch(Yn)}je();var Xr=new Error("No available storage method found.");return pe._driverSet=f.reject(Xr),pe._driverSet}return Yn()}}var Xe=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Xe.then(function(){var xt=Oe[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(xt).then(function(nn){pe._driver=nn._driver,je(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=Ue(Oe)})}).catch(function(){je();var xt=new Error("No available storage method found.");return pe._driverSet=f.reject(xt),pe._driverSet}),h(this._driverSet,ge,ve),this._driverSet},K.prototype.supports=function(Z){return!!wi[Z]},K.prototype._extend=function(Z){Rr(this,Z)},K.prototype._getSupportedDrivers=function(Z){for(var ge=[],ve=0,pe=Z.length;ve<pe;ve++){var Oe=Z[ve];this.supports(Oe)&&ge.push(Oe)}return ge},K.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,ge=Sr.length;Z<ge;Z++)An(this,Sr[Z])},K.prototype.createInstance=function(Z){return new K(Z)},K}(),po=new ns;r.exports=po},{3:3}]},{},[4])(4)})})(ZFe);var iQt=ZFe.exports;const ZH=Pl(iQt);class e5e{constructor(t){Ku(this,"engine");Ku(this,"connected",!1);Ku(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Iw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class fd extends e5e{constructor(){super("firebase");Ku(this,"RECAPTCHAV3TOKEN","6LcoLeIpAAAAAFvL4FMjROebfEEYkWq4LyHHkA7O");Ku(this,"firestore");Ku(this,"collectionPrefix","prod-");Ku(this,"studyCollection");Ku(this,"studyId","");Ku(this,"localForage",ZH.createInstance({name:"currentParticipantId"}));Ku(this,"localProvenanceCopy",{});Ku(this,"localWindowEvents",{});const n=UQ.parse(`
{
  apiKey: "AIzaSyDks0KPmUNFtOPDsOHFAuQY6XSMksNecWE",
  authDomain: "revisit-fb-db.firebaseapp.com",
  projectId: "revisit-fb-db",
  storageBucket: "revisit-fb-db.appspot.com",
  messagingSenderId: "329639127561",
  appId: "1:329639127561:web:346fc2d58229c9ba2ae6d8"
}
`),r=OLe(n);this.firestore=oGt(r,{});try{OYt(r,{provider:new OZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await aGt(this.firestore);const n=await Os(this.firestore,".info/connected");await Kx(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=JFe();if(!i.currentUser&&(await zKt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Iw(JSON.stringify(r));this.studyCollection=Ry(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const a=Os(this.studyCollection,"configs"),u=Ry(a,"configs"),l=Os(u,o);return s&&s!==o&&(this._deleteFromFirebaseStorage("","sequenceArray"),await this.clearCurrentParticipantId()),await this.localForage.setItem("currentConfigHash",o),await jl(l,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=Os(this.studyCollection,this.currentParticipantId),a=(await Kx(o)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([c,f])=>{a!==null&&(f===void 0||f.length===0?a.answers[c].windowEvents=[]:a.answers[c].windowEvents=f)}),a)return a;const u=await Iw(JSON.stringify(r)),l={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await jl(o,l),l}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Os(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=Os(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await jl(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=Os(this.studyCollection,"sequenceAssignment"),i=Ry(r,"sequenceAssignment"),s=Os(i,this.currentParticipantId),o=A0e(i,vGt("participantId","==","")),a=await Xx(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await xGt(h.ref),await jl(s,{participantId:this.currentParticipantId,timestamp:p})}else await jl(s,{participantId:this.currentParticipantId,timestamp:AGt()});const u=A0e(i,_Gt("timestamp","asc")),f=(await Xx(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await Xx(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let n=null;if(this.currentParticipantId!==null){const r=Os(this.studyCollection,this.currentParticipantId);if(n=(await Kx(r)).data(),n!==null){const i=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),s=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents");Object.entries(n.answers).forEach(([o,a])=>{a!==void 0&&(a.provenanceGraph=i[o],a.windowEvents=s[o])})}}return n}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Os(this.studyCollection),s=i.id;await this.localForage.setItem("currentParticipantId",s),this.currentParticipantId=s;let o=null;if(this.currentParticipantId!==null&&(o=(await Kx(i)).data()),!o){const a=await Iw(JSON.stringify(n)),u={participantId:s,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await jl(i,u),o=u}return o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=Os(this.studyCollection,this.currentParticipantId);return await jl(r,{completed:!0},{merge:!0}),n.completed=!0,!0}async getUserManagementData(n){const r=Ry(this.firestore,"user-management"),i=await Xx(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await jl(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await jl(Os(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await jl(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await jl(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await jl(Os(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Ry(this.firestore,`${this.collectionPrefix}${n}`),i=await Xx(r),s=[],o=i.docs.map(async a=>{if(a.id==="config"||a.id==="sequenceArray")return;const u=a.data(),l=await this._getFromFirebaseStorage(u.participantId,"provenance"),c=await this._getFromFirebaseStorage(u.participantId,"windowEvents");u.answers=Object.fromEntries(Object.entries(u.answers).map(([f,d])=>{if(d===void 0)return[f,d];const h=l[f],p=c[f];return[f,{...d,provenanceGraph:h,windowEvents:p}]})),s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Ry(this.firestore,`${this.collectionPrefix}${n}`),s=Os(i,r),o=(await Kx(s)).data();try{if(!o||o.rejected)return;await O0e(s,{rejected:!0});const a=Os(i,"sequenceAssignment"),u=Ry(a,"sequenceAssignment"),l=Os(u,r);await O0e(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Yj(),s=Gj(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await pHt(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=Yj(),o=Gj(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await hHt(o,a)}}async _deleteFromFirebaseStorage(n,r){const i=Yj(),s=Gj(i,`${this.studyId}/${n}_${r}`);await mHt(s)}}const t5e=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),VS=()=>P.useContext(t5e);function sQt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=P.useState(t),[o,a]=P.useState(!1),{storageEngine:u}=xa(),l=async()=>{const h=Fge();try{await V7t(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;P.useEffect(()=>{s(t);let h;if(u instanceof fd)try{h=Fge()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof fd){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=z7t(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return $.jsx(t5e.Provider,{value:d,children:i.determiningStatus?$.jsx(_m,{visible:!0}):e})}function oQt(){const{config:e,metadata:t}=Nf(v=>v),n=vh(),r=yh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=gh(),{storageEngine:o}=xa(),a=Ic(),u=VS(),l=n.length-1,c=a/l*100,[f,d]=P.useState(!1),h=e==null?void 0:e.uiConfig.logoPath,p=e==null?void 0:e.uiConfig.withProgressBar,m=R4(),g=vKe(`/${m}`);function y(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=g}).catch(v=>{console.error(v)})}return $.jsx(_Y,{height:"70",p:"md",children:$.jsxs(xu,{mt:-7,align:"center",children:[$.jsx(xu.Col,{span:4,children:$.jsxs(Ii,{align:"center",children:[$.jsx(t_,{maw:40,src:`${Ec}${h}`,alt:"Study Logo"}),$.jsx(n4,{w:"md"}),$.jsx(sa,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e==null?void 0:e.studyMetadata.title})]})}),$.jsx(xu.Col,{span:4,children:p&&$.jsx(iIe,{radius:"md",size:"lg",value:c})}),$.jsx(xu.Col,{span:4,children:$.jsxs(va,{noWrap:!0,position:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&$.jsx(Hr,{variant:"outline",onClick:()=>r(i()),children:"Help"}),u.user.isAdmin&&$.jsxs(Kl,{shadow:"md",width:200,zIndex:1,opened:f,onChange:d,children:[$.jsx(Kl.Target,{children:$.jsx(NA,{size:"lg",className:"studyBrowserMenuDropdown",children:$.jsx(cgt,{})})}),$.jsxs(Kl.Dropdown,{children:[$.jsx(Kl.Item,{icon:$.jsx(hfe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),$.jsx(Kl.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:$.jsx(dgt,{size:14}),children:"Contact"}),$.jsx(Kl.Item,{icon:$.jsx(hfe,{size:14}),onClick:()=>y(),children:"Next Participant"})]})]})]})})]})})}function aQt(){var l;const e=(l=m0())==null?void 0:l.uiConfig.sidebar,t=m0(),n=Ic(),r=vh()[n],i=t.components[r],s=P.useMemo(()=>{var c;return i?MF(i)&&t.baseComponents?TK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i,t.baseComponents]),o=AK(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?$.jsxs(b2,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&$.jsx(b2.Section,{bg:"gray.3",p:"xl",children:$.jsxs(gt,{c:"gray.9",children:[$.jsx(gt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),$.jsx(Wa,{text:a})]})}),$.jsx(b2.Section,{p:"xl",children:$.jsx(c3,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):$.jsx(c3,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function uQt(){const{showHelpText:e,config:t}=Nf(o=>o),n=yh(),{toggleShowHelpText:r}=gh(),[i,s]=P.useState("");return P.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${Ec}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),$.jsx(Ip,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:$.jsx(Wa,{text:i})})}function lQt(){const{alertModal:e}=Nf(o=>o),{setAlertModal:t}=gh(),n=yh(),[r,i]=P.useState(e.show),s=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),$.jsx(Ip,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:$.jsxs(nTe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:$.jsx(Qmt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[$.jsx(gt,{my:"md",children:e.message}),$.jsx(pt,{style:{float:"right"},color:"red",children:$.jsx(Hr,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function cQt(){const e=P.useRef([]),n=m0().uiConfig.windowEventDebounceTime??100;return P.useEffect(()=>{const r=Qf(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=Qf(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=Qf(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=Qf(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=Qf(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=Qf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=Qf(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=Qf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=Qf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),$.jsx(mke.Provider,{value:e,children:$.jsxs(uI,{navbar:$.jsx(aQt,{}),aside:$.jsx(Sjt,{}),header:$.jsx(oQt,{}),children:[$.jsx(uQt,{}),$.jsx(lQt,{}),$.jsx(PKe,{})]})})}function fQt(e,t=!1){return typeof e=="number"?nye(e,t):nye(e.length,t).map(r=>r.map(i=>e[i]))}function nye(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function n5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=n5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function dQt(e,t){const n=Vv(e);return n5e(n,t,"root")}function r5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&r5e(s,t,i,o)})}function hQt(e){const t=[];return r5e(e,t,"",0),t}function rye(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return fQt(i.sort(()=>.5-Math.random()),!0)}function pQt(e){const n=hQt(e.sequence).map(s=>({[s]:rye(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=dQt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=rye(e,o))})}),i}async function mQt(e,t){const n=await(await fetch(`${Ec}${e}`)).text();return hLe(n,t)}async function LZ(e,t){const n=t.configsList.find(r=>KY(r)===e);if(n){const r=t.configs[n];return await mQt(`${r.path}`,n)}return null}function gQt(){return $.jsx(vm,{pt:100,children:$.jsx(qp,{children:$.jsxs(sa,{order:3,children:[$.jsx(gt,{span:!0,c:"orange",children:"Study ID"})," ","not Found, please check valid Study ID on your global config, or contact the administrator."]})})})}function yQt({globalConfig:e}){const t=R4(),[n,r]=P.useState(null),i=e.configsList.find(p=>KY(p)===t),s=VS();P.useEffect(()=>{LZ(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=P.useState([]),[u,l]=P.useState(null),{storageEngine:c}=xa(),[f]=nY();P.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await pQt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(b=>""),_=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:_.ip},x=await c.initializeParticipantSession(y,n,w,g),E=await DSt(t,n,x.sequence,w,x.answers,s.user.isAdmin);l(E),a([{element:$.jsx(cQt,{}),children:[{path:"/",element:$.jsx(_H,{to:"0",replace:!0})},{path:"/:index",element:n.errors?$.jsxs($.Fragment,{children:[$.jsx(sa,{order:2,mb:8,children:"Error loading config"}),$.jsx(RPe,{errors:n.errors})]}):$.jsx(yjt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=jSe(o),h=!d||!u?$.jsx(_m,{visible:!0}):$.jsx(pke.Provider,{value:u,children:$.jsx(PEt,{store:u.store,children:d})});return i?h:$.jsx(gQt,{})}function Q2({studyIds:e}){const t=hm(),{studyId:n}=qw(),r=iI(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=xa(),{user:o,logout:a}=VS(),[u,l]=P.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:$.jsx(fgt,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:$.jsx(rgt,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:$.jsx(ggt,{}),href:"/settings",needAdmin:!0}];return $.jsx(_Y,{height:70,p:"md",children:$.jsxs(xu,{mt:-7,align:"center",children:[$.jsx(xu.Col,{span:6,children:$.jsxs(Ii,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),sx:{cursor:"pointer"},children:[$.jsx(t_,{maw:40,src:`${Ec}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),$.jsx(n4,{w:"md"}),$.jsx(sa,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),$.jsx(xu.Col,{span:6,children:$.jsxs(Ii,{justify:"flex-end",direction:"row",children:[c&&$.jsx(t4,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),$.jsx(H2e,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),$.jsx($Ae,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:$.jsxs(Ii,{direction:"column",mt:20,children:[$.jsx(gt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?$.jsx(Hr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:$.jsx(Hr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),$.jsxs(pt,{ml:10,children:[$.jsx(TN,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?$.jsx(gt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):$.jsx(gt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function vQt({cellData:e}){return $.jsx("td",{children:$.jsx(Td,{miw:100,children:Object.entries(e.answer).map(([t,n])=>$.jsxs(pt,{children:[$.jsxs(gt,{fw:700,span:!0,children:[" ",`${t}: `]}),$.jsx(gt,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function iye({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return $.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function _Qt(e){const{metaData:t}=e;return $.jsx("td",{children:$.jsx(OIe,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:$.jsxs(Td,{spacing:"xs",children:[$.jsxs(pt,{children:["IP:"," ",t.ip]}),$.jsxs(pt,{children:["Language:"," ",t.language]}),$.jsxs(pt,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),$.jsxs(pt,{children:["User Agent:"," ",t.userAgent]})]})})})}function bQt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=xa(),{studyId:s}=qw(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),r())},[a,u]=P.useState([]),[l,c]=P.useState(!1),f=()=>Nmt({title:"Confirm rejecting participants",children:$.jsxs(gt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",$.jsx(gt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=hke(n.sequence),p=[$.jsx("th",{children:$.jsx(Ii,{justify:"center",children:$.jsx(Kw,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),$.jsx("th",{children:"ID"},"ID"),$.jsx("th",{children:"Status"},"status"),$.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[$.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),$.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),$.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>$.jsxs("tr",{children:[$.jsx("td",{children:$.jsx(Ii,{justify:"center",children:$.jsx(Kw,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),$.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),$.jsx("td",{children:g.rejected?$.jsx(aw,{label:"Rejected",children:$.jsx(bgt,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?$.jsx(aw,{label:"Completed",children:$.jsx(ogt,{size:16,color:"teal",style:{marginBottom:-3}})}):$.jsx(aw,{label:"In Progress",children:$.jsx(pgt,{size:16,color:"orange",style:{marginBottom:-3}})})}),g.metadata?$.jsx(_Qt,{metaData:g.metadata}):$.jsx("td",{children:"N/A"}),h.map(y=>{const v=fke(g.sequence,y.orderPath),_=v&&Object.entries(g.answers).sort((w,x)=>{const E=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),b=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return E-b}).filter(([w])=>{const x=w.slice(0,w.lastIndexOf("_")),E=parseInt(w.slice(w.lastIndexOf("_")+1),10);return x===y.componentName&&E<=v[0].lastIndex&&E>=v[0].firstIndex});return _!==null&&_.length>=y.timesSeenInBlock+1?$.jsxs(j.Fragment,{children:[$.jsx(vQt,{cellData:_[y.timesSeenInBlock][1]}),$.jsx(iye,{cellData:_[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):$.jsxs(j.Fragment,{children:[$.jsx("td",{children:"N/A"}),$.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),$.jsx(iye,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?$.jsxs($.Fragment,{children:[$.jsx(_m,{visible:l,overlayBlur:2}),$.jsxs(Ii,{justify:"space-between",mb:8,p:8,children:[$.jsx(va,{children:$.jsx(t4,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,icon:$.jsx(mgt,{size:14}),onChange:g=>g&&d(g)})}),$.jsx(va,{children:$.jsx(Hr,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),$.jsxs($Ie,{striped:!0,children:[$.jsx("thead",{children:$.jsx("tr",{children:p})}),$.jsx("tbody",{children:m})]})]}):$.jsx(Ii,{justify:"center",align:"center",style:{height:"100%"},children:$.jsx(gt,{children:"No data available"})})}function wQt(e){const{globalConfig:t}=e,{studyId:n}=qw(),[r,i]=P.useState([]),[s,o]=P.useState(void 0),[a,u]=P.useState(!1),{storageEngine:l}=xa(),c=hm(),{tab:f}=qw(),d=P.useCallback(async()=>{if(u(!0),n){const m=await LZ(n,t);if(!m||!l)return;await l.initializeStudyDb(n,m);const g=await l.getAllParticipantsData();i(g),o(m),u(!1)}},[t,l,n]);P.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=P.useMemo(()=>{const m=r.filter(y=>y.completed),g=r.filter(y=>!y.completed);return[m,g]},[r]);return $.jsxs(uI,{children:[$.jsx(Q2,{studyIds:e.globalConfig.configsList}),$.jsxs(vm,{fluid:!0,style:{height:"100%"},children:[$.jsx(_m,{visible:a}),$.jsxs(ql,{variant:"outline",value:f,onTabChange:m=>c(`./../${m}`),style:{height:"100%"},children:[$.jsxs(ql.List,{children:[$.jsx(ql.Tab,{value:"table",icon:$.jsx(YY,{size:16}),children:"Table View"}),$.jsx(ql.Tab,{value:"stats",icon:$.jsx(igt,{size:16}),children:"Trial Stats"}),$.jsx(ql.Tab,{value:"settings",icon:$.jsx(hgt,{size:16}),children:"Individual Replay"})]}),$.jsx(ql.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&$.jsx(bQt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),$.jsx(ql.Panel,{value:"stats",pt:"xs",children:"statsboard"}),$.jsx(ql.Panel,{value:"settings",pt:"xs",children:"Settings tab content"})]})]})]})}function rU({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=VS(),{storageEngine:i}=xa();return P.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?$.jsx(_m,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?$.jsx(tY,{to:"/login"}):$.jsx($.Fragment,{children:e})}async function i5e(e,t,n){if(e instanceof fd){t(!0);const r=new up,i=JFe();try{await pXt(i,r,QFe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function EQt(){const{user:e}=VS(),[t,n]=P.useState(null),[r,i]=P.useState(!1),{storageEngine:s}=xa();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?$.jsx(tY,{to:"/"}):$.jsx(vm,{children:$.jsx(J6,{p:"lg",children:$.jsxs(Ii,{align:"center",direction:"column",justify:"center",children:[$.jsx(t_,{maw:200,mt:50,mb:100,src:`${Ec}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),$.jsxs($.Fragment,{children:[$.jsx(gt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),$.jsx(Hr,{onClick:()=>i5e(s,i,n),leftIcon:$.jsx(ngt,{}),variant:"filled",children:"Sign In With Google"})]}),t?$.jsx(ow,{size:"lg",color:"red",mt:30,children:t}):null,$.jsx(_m,{visible:r})]})})})}function SQt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function s5e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function xQt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=SQt(i,t),o=s5e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var o5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Eu,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(L){var B=["th","st","nd","rd"],U=L%100;return"["+L+(B[(U-20)%10]||B[U]||B[0])+"]"}},_=function(L,B,U){var G=String(L);return!G||G.length>=B?L:""+Array(B+1-G.length).join(U)+L},w={s:_,z:function(L){var B=-L.utcOffset(),U=Math.abs(B),G=Math.floor(U/60),H=U%60;return(B<=0?"+":"-")+_(G,2,"0")+":"+_(H,2,"0")},m:function L(B,U){if(B.date()<U.date())return-L(U,B);var G=12*(U.year()-B.year())+(U.month()-B.month()),H=B.clone().add(G,f),Y=U-H<0,q=B.clone().add(G+(Y?-1:1),f);return+(-(G+(U-H)/(Y?H-q:q-H))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},x="en",E={};E[x]=v;var b="$isDayjsObject",T=function(L){return L instanceof N||!(!L||!L[b])},C=function L(B,U,G){var H;if(!B)return x;if(typeof B=="string"){var Y=B.toLowerCase();E[Y]&&(H=Y),U&&(E[Y]=U,H=Y);var q=B.split("-");if(!H&&q.length>1)return L(q[0])}else{var D=B.name;E[D]=B,H=D}return!G&&H&&(x=H),H||!G&&x},A=function(L,B){if(T(L))return L.clone();var U=typeof B=="object"?B:{};return U.date=L,U.args=arguments,new N(U)},O=w;O.l=C,O.i=T,O.w=function(L,B){return A(L,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var N=function(){function L(U){this.$L=C(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[b]=!0}var B=L.prototype;return B.parse=function(U){this.$d=function(G){var H=G.date,Y=G.utc;if(H===null)return new Date(NaN);if(O.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var q=H.match(g);if(q){var D=q[2]-1||0,M=(q[7]||"0").substring(0,3);return Y?new Date(Date.UTC(q[1],D,q[3]||1,q[4]||0,q[5]||0,q[6]||0,M)):new Date(q[1],D,q[3]||1,q[4]||0,q[5]||0,q[6]||0,M)}}return new Date(H)}(U),this.init()},B.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},B.$utils=function(){return O},B.isValid=function(){return this.$d.toString()!==m},B.isSame=function(U,G){var H=A(U);return this.startOf(G)<=H&&H<=this.endOf(G)},B.isAfter=function(U,G){return A(U)<this.startOf(G)},B.isBefore=function(U,G){return this.endOf(G)<A(U)},B.$g=function(U,G,H){return O.u(U)?this[G]:this.set(H,U)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(U,G){var H=this,Y=!!O.u(G)||G,q=O.p(U),D=function(ye,de){var we=O.w(H.$u?Date.UTC(H.$y,de,ye):new Date(H.$y,de,ye),H);return Y?we:we.endOf(l)},M=function(ye,de){return O.w(H.toDate()[ye].apply(H.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(de)),H)},W=this.$W,z=this.$M,V=this.$D,te="set"+(this.$u?"UTC":"");switch(q){case h:return Y?D(1,0):D(31,11);case f:return Y?D(1,z):D(0,z+1);case c:var le=this.$locale().weekStart||0,me=(W<le?W+7:W)-le;return D(Y?V-me:V+(6-me),z);case l:case p:return M(te+"Hours",0);case u:return M(te+"Minutes",1);case a:return M(te+"Seconds",2);case o:return M(te+"Milliseconds",3);default:return this.clone()}},B.endOf=function(U){return this.startOf(U,!1)},B.$set=function(U,G){var H,Y=O.p(U),q="set"+(this.$u?"UTC":""),D=(H={},H[l]=q+"Date",H[p]=q+"Date",H[f]=q+"Month",H[h]=q+"FullYear",H[u]=q+"Hours",H[a]=q+"Minutes",H[o]=q+"Seconds",H[s]=q+"Milliseconds",H)[Y],M=Y===l?this.$D+(G-this.$W):G;if(Y===f||Y===h){var W=this.clone().set(p,1);W.$d[D](M),W.init(),this.$d=W.set(p,Math.min(this.$D,W.daysInMonth())).$d}else D&&this.$d[D](M);return this.init(),this},B.set=function(U,G){return this.clone().$set(U,G)},B.get=function(U){return this[O.p(U)]()},B.add=function(U,G){var H,Y=this;U=Number(U);var q=O.p(G),D=function(z){var V=A(Y);return O.w(V.date(V.date()+Math.round(z*U)),Y)};if(q===f)return this.set(f,this.$M+U);if(q===h)return this.set(h,this.$y+U);if(q===l)return D(1);if(q===c)return D(7);var M=(H={},H[a]=r,H[u]=i,H[o]=n,H)[q]||1,W=this.$d.getTime()+U*M;return O.w(W,this)},B.subtract=function(U,G){return this.add(-1*U,G)},B.format=function(U){var G=this,H=this.$locale();if(!this.isValid())return H.invalidDate||m;var Y=U||"YYYY-MM-DDTHH:mm:ssZ",q=O.z(this),D=this.$H,M=this.$m,W=this.$M,z=H.weekdays,V=H.months,te=H.meridiem,le=function(de,we,he,Ve){return de&&(de[we]||de(G,Y))||he[we].slice(0,Ve)},me=function(de){return O.s(D%12||12,de,"0")},ye=te||function(de,we,he){var Ve=de<12?"AM":"PM";return he?Ve.toLowerCase():Ve};return Y.replace(y,function(de,we){return we||function(he){switch(he){case"YY":return String(G.$y).slice(-2);case"YYYY":return O.s(G.$y,4,"0");case"M":return W+1;case"MM":return O.s(W+1,2,"0");case"MMM":return le(H.monthsShort,W,V,3);case"MMMM":return le(V,W);case"D":return G.$D;case"DD":return O.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return le(H.weekdaysMin,G.$W,z,2);case"ddd":return le(H.weekdaysShort,G.$W,z,3);case"dddd":return z[G.$W];case"H":return String(D);case"HH":return O.s(D,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return ye(D,M,!0);case"A":return ye(D,M,!1);case"m":return String(M);case"mm":return O.s(M,2,"0");case"s":return String(G.$s);case"ss":return O.s(G.$s,2,"0");case"SSS":return O.s(G.$ms,3,"0");case"Z":return q}return null}(de)||q.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(U,G,H){var Y,q=this,D=O.p(G),M=A(U),W=(M.utcOffset()-this.utcOffset())*r,z=this-M,V=function(){return O.m(q,M)};switch(D){case h:Y=V()/12;break;case f:Y=V();break;case d:Y=V()/3;break;case c:Y=(z-W)/6048e5;break;case l:Y=(z-W)/864e5;break;case u:Y=z/i;break;case a:Y=z/r;break;case o:Y=z/n;break;default:Y=z}return H?Y:O.a(Y)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return E[this.$L]},B.locale=function(U,G){if(!U)return this.$L;var H=this.clone(),Y=C(U,G,!0);return Y&&(H.$L=Y),H},B.clone=function(){return O.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},L}(),k=N.prototype;return A.prototype=k,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(L){k[L[1]]=function(B){return this.$g(B,L[0],L[1])}}),A.extend=function(L,B){return L.$i||(L(B,N,A),L.$i=!0),A},A.locale=C,A.isDayjs=T,A.unix=function(L){return A(1e3*L)},A.en=E[x],A.Ls=E,A.p={},A})})(o5e);var TQt=o5e.exports;const Rn=Pl(TQt);function AQt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(Rn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function CQt(e,t="monday",n="dd"){const r=[],i=s5e(new Date,t);for(let s=0;s<7;s+=1)r.push(Rn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function a5e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function am(e,t){return a5e(e,t)&&e.getDate()===t.getDate()}function IQt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var OQt=Object.defineProperty,PQt=Object.defineProperties,kQt=Object.getOwnPropertyDescriptors,PM=Object.getOwnPropertySymbols,u5e=Object.prototype.hasOwnProperty,l5e=Object.prototype.propertyIsEnumerable,sye=(e,t,n)=>t in e?OQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oye=(e,t)=>{for(var n in t||(t={}))u5e.call(t,n)&&sye(e,n,t[n]);if(PM)for(var n of PM(t))l5e.call(t,n)&&sye(e,n,t[n]);return e},$Qt=(e,t)=>PQt(e,kQt(t)),RQt=(e,t)=>{var n={};for(var r in e)u5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PM)for(var r of PM(e))t.indexOf(r)<0&&l5e.call(e,r)&&(n[r]=e[r]);return n};function eq(e){var t=e,{direction:n,style:r}=t,i=RQt(t,["direction","style"]);const s=As();return j.createElement("svg",oye({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:$Qt(oye({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),j.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}eq.displayName="@mantine/dates/ArrowIcon";var NQt=Object.defineProperty,DQt=Object.defineProperties,MQt=Object.getOwnPropertyDescriptors,aye=Object.getOwnPropertySymbols,LQt=Object.prototype.hasOwnProperty,FQt=Object.prototype.propertyIsEnumerable,uye=(e,t,n)=>t in e?NQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BQt=(e,t)=>{for(var n in t||(t={}))LQt.call(t,n)&&uye(e,n,t[n]);if(aye)for(var n of aye(t))FQt.call(t,n)&&uye(e,n,t[n]);return e},jQt=(e,t)=>DQt(e,MQt(t));const iU={xs:32,sm:40,md:44,lg:50,xl:54};var UQt=yt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:iU}),height:e.fn.size({size:t,sizes:iU}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:jQt(BQt({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:iU}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),zQt=Object.defineProperty,kM=Object.getOwnPropertySymbols,c5e=Object.prototype.hasOwnProperty,f5e=Object.prototype.propertyIsEnumerable,lye=(e,t,n)=>t in e?zQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VQt=(e,t)=>{for(var n in t||(t={}))c5e.call(t,n)&&lye(e,n,t[n]);if(kM)for(var n of kM(t))f5e.call(t,n)&&lye(e,n,t[n]);return e},HQt=(e,t)=>{var n={};for(var r in e)c5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kM)for(var r of kM(e))t.indexOf(r)<0&&f5e.call(e,r)&&(n[r]=e[r]);return n};const qQt={xs:12,sm:14,md:18,lg:22,xl:28};function c5(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,w=HQt(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:x,cx:E,theme:b}=UQt({size:c},{classNames:f,styles:d,unstyled:v,name:h}),T=b.fn.size({size:c,sizes:qQt});return j.createElement("div",VQt({className:E(x.calendarHeader,a)},w),j.createElement(NA,{className:x.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:C=>y&&C.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},j.createElement(eq,{direction:"left",width:T,height:T})),j.createElement(pm,{unstyled:v,className:x.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:C=>y&&C.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&j.createElement(ICe,{error:!1,size:c,className:x.calendarHeaderLevelIcon})),j.createElement(NA,{className:x.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:C=>y&&C.preventDefault(),"data-mantine-stop-propagation":_||void 0},j.createElement(eq,{direction:"right",width:T,height:T})))}c5.displayName="@mantine/dates/CalendarHeader";function lR(e,t){return Rn(new Date(e,1,1)).format(t)}var WQt=Object.defineProperty,GQt=Object.defineProperties,YQt=Object.getOwnPropertyDescriptors,cye=Object.getOwnPropertySymbols,KQt=Object.prototype.hasOwnProperty,XQt=Object.prototype.propertyIsEnumerable,fye=(e,t,n)=>t in e?WQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sU=(e,t)=>{for(var n in t||(t={}))KQt.call(t,n)&&fye(e,n,t[n]);if(cye)for(var n of cye(t))XQt.call(t,n)&&fye(e,n,t[n]);return e},QQt=(e,t)=>GQt(e,YQt(t));const JQt={xs:32,sm:40,md:46,lg:52,xl:56};var ZQt=yt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:QQt(sU({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:JQt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":sU({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:sU({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),eJt=Object.defineProperty,$M=Object.getOwnPropertySymbols,d5e=Object.prototype.hasOwnProperty,h5e=Object.prototype.propertyIsEnumerable,dye=(e,t,n)=>t in e?eJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tJt=(e,t)=>{for(var n in t||(t={}))d5e.call(t,n)&&dye(e,n,t[n]);if($M)for(var n of $M(t))h5e.call(t,n)&&dye(e,n,t[n]);return e},nJt=(e,t)=>{var n={};for(var r in e)d5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$M)for(var r of $M(e))t.indexOf(r)<0&&h5e.call(e,r)&&(n[r]=e[r]);return n};function p5e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=nJt(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=ZQt({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[w,x]=P.useState(s),E=IQt(w),b=E.map(T=>j.createElement(pm,{key:T,unstyled:p,onClick:()=>o(T),disabled:T<u||T>l,onMouseDown:C=>h&&C.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:T===s})},lR(T,m)));return j.createElement("div",tJt({className:_(v.yearPicker,n)},y),j.createElement(c5,{unstyled:p,label:`${lR(E[0],m)}  ${lR(E[E.length-1],m)}`,hasPrevious:typeof u=="number"?u<E[0]:!0,hasNext:typeof l=="number"?l>E[E.length-1]:!0,onNext:()=>x(T=>T+10),onPrevious:()=>x(T=>T-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),j.createElement("div",{className:v.yearPickerControls},b))}p5e.displayName="@mantine/dates/YearPicker";function tq({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=Rn(e).endOf("month"),o=Rn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var rJt=Object.defineProperty,iJt=Object.defineProperties,sJt=Object.getOwnPropertyDescriptors,hye=Object.getOwnPropertySymbols,oJt=Object.prototype.hasOwnProperty,aJt=Object.prototype.propertyIsEnumerable,pye=(e,t,n)=>t in e?rJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oU=(e,t)=>{for(var n in t||(t={}))oJt.call(t,n)&&pye(e,n,t[n]);if(hye)for(var n of hye(t))aJt.call(t,n)&&pye(e,n,t[n]);return e},uJt=(e,t)=>iJt(e,sJt(t));const lJt={xs:32,sm:40,md:46,lg:52,xl:56};var cJt=yt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:uJt(oU({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:lJt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":oU({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:oU({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),fJt=Object.defineProperty,RM=Object.getOwnPropertySymbols,m5e=Object.prototype.hasOwnProperty,g5e=Object.prototype.propertyIsEnumerable,mye=(e,t,n)=>t in e?fJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dJt=(e,t)=>{for(var n in t||(t={}))m5e.call(t,n)&&mye(e,n,t[n]);if(RM)for(var n of RM(t))g5e.call(t,n)&&mye(e,n,t[n]);return e},hJt=(e,t)=>{var n={};for(var r in e)m5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RM)for(var r of RM(e))t.indexOf(r)<0&&g5e.call(e,r)&&(n[r]=e[r]);return n};function y5e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:w}=t,x=hJt(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:E,cx:b}=cJt({size:f},{classNames:i,styles:r,unstyled:v,name:p}),T=AQt(a),C=d instanceof Date?d.getFullYear():void 0,A=h instanceof Date?h.getFullYear():void 0,O=T.map((N,k)=>j.createElement(pm,{key:N,unstyled:v,onClick:()=>o(k),className:b(E.monthPickerControl,{[E.monthPickerControlActive]:k===s.month&&u===s.year}),disabled:!tq({date:new Date(u,k),minDate:d,maxDate:h}),onMouseDown:L=>y&&L.preventDefault(),"data-mantine-stop-propagation":w||void 0},N));return j.createElement("div",dJt({className:b(E.monthPicker,n)},x),j.createElement(c5,{label:lR(u,_),hasNext:typeof A=="number"?u<A:!0,hasPrevious:typeof C=="number"?u>C:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:w}),j.createElement("div",{className:E.monthPickerControls},O))}y5e.displayName="@mantine/dates/MonthPicker";function pJt({month:e,locale:t,format:n}){return wg(Rn(e).locale(t).format(n))}function mJt({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function gJt({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var yJt=Object.defineProperty,vJt=Object.defineProperties,_Jt=Object.getOwnPropertyDescriptors,gye=Object.getOwnPropertySymbols,bJt=Object.prototype.hasOwnProperty,wJt=Object.prototype.propertyIsEnumerable,yye=(e,t,n)=>t in e?yJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aU=(e,t)=>{for(var n in t||(t={}))bJt.call(t,n)&&yye(e,n,t[n]);if(gye)for(var n of gye(t))wJt.call(t,n)&&yye(e,n,t[n]);return e},vye=(e,t)=>vJt(e,_Jt(t));const cR={xs:34,sm:38,md:46,lg:58,xl:66};var EJt=yt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:vye(aU(vye(aU(aU({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:cR}),height:e.fn.size({size:t,sizes:cR}),lineHeight:`${e.fn.size({size:t,sizes:cR})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),SJt=Object.defineProperty,xJt=Object.defineProperties,TJt=Object.getOwnPropertyDescriptors,NM=Object.getOwnPropertySymbols,v5e=Object.prototype.hasOwnProperty,_5e=Object.prototype.propertyIsEnumerable,_ye=(e,t,n)=>t in e?SJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AJt=(e,t)=>{for(var n in t||(t={}))v5e.call(t,n)&&_ye(e,n,t[n]);if(NM)for(var n of NM(t))_5e.call(t,n)&&_ye(e,n,t[n]);return e},CJt=(e,t)=>xJt(e,TJt(t)),IJt=(e,t)=>{var n={};for(var r in e)v5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NM)for(var r of NM(e))t.indexOf(r)<0&&_5e.call(e,r)&&(n[r]=e[r]);return n};const b5e=P.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:w,renderDay:x,unstyled:E,disabled:b,stopPropagation:T}=n,C=IJt(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:A,cx:O}=EJt({size:g,fullWidth:y,hideOutsideDates:w},{classNames:l,styles:c,unstyled:E,name:p});return j.createElement("button",CJt(AJt({},C),{type:"button",ref:t,disabled:b,onMouseEnter:N=>u(i,N),tabIndex:mJt({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":gJt({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":T||void 0,"data-outside":a&&!b||void 0,"data-weekend":o&&!b||void 0,"data-selected":s&&!b||void 0,"data-in-range":m&&!b||void 0,"data-first-in-range":d&&!b||void 0,"data-last-in-range":h&&!b||void 0,className:O(A.day,r)}),typeof x=="function"?x(i):i.getDate())});b5e.displayName="@mantine/core/Day";function OJt(e,t=[0,6]){return t.includes(e.getDay())}function PJt(e,t){return!a5e(e,t)}function kJt({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&Rn(t).isBefore(i,"day"),a=e instanceof Date&&Rn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function $Jt(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[Rn(t[0]).subtract(1,"day"),Rn(t[1]).add(1,"day")],i=n&&am(e,t[0]),s=n&&am(e,t[1]),o=n&&Rn(e).isAfter(r[0],"day")&&Rn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function bye({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=PJt(e,t),f=n&&(Array.isArray(s)?s.some(g=>am(g,e)):am(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=$Jt(e,u);return{disabled:kJt({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:OJt(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var RJt=Object.defineProperty,NJt=Object.defineProperties,DJt=Object.getOwnPropertyDescriptors,wye=Object.getOwnPropertySymbols,MJt=Object.prototype.hasOwnProperty,LJt=Object.prototype.propertyIsEnumerable,Eye=(e,t,n)=>t in e?RJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FJt=(e,t)=>{for(var n in t||(t={}))MJt.call(t,n)&&Eye(e,n,t[n]);if(wye)for(var n of wye(t))LJt.call(t,n)&&Eye(e,n,t[n]);return e},BJt=(e,t)=>NJt(e,DJt(t)),jJt=yt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:BJt(FJt({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),UJt=Object.defineProperty,DM=Object.getOwnPropertySymbols,w5e=Object.prototype.hasOwnProperty,E5e=Object.prototype.propertyIsEnumerable,Sye=(e,t,n)=>t in e?UJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zJt=(e,t)=>{for(var n in t||(t={}))w5e.call(t,n)&&Sye(e,n,t[n]);if(DM)for(var n of DM(t))E5e.call(t,n)&&Sye(e,n,t[n]);return e},VJt=(e,t)=>{var n={};for(var r in e)w5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DM)for(var r of DM(e))t.indexOf(r)<0&&E5e.call(e,r)&&(n[r]=e[r]);return n};const Tk=()=>!1,HJt={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},S5e=P.forwardRef((e,t)=>{const n=Ot("Month",HJt,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:w,fullWidth:x,preventFocus:E,focusable:b,firstDayOfWeek:T,onDayKeyDown:C,daysRefs:A,hideOutsideDates:O,isDateInRange:N=Tk,isDateFirstInRange:k=Tk,isDateLastInRange:L=Tk,renderDay:B,weekdayLabelFormat:U,unstyled:G,weekendDays:H,__stopPropagation:Y}=n,q=VJt(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:D,cx:M,theme:W}=jJt({fullWidth:x},{classNames:f,styles:d,unstyled:G,name:_}),z=u||W.datesLocale,V=xQt(i,T),te=CQt(z,T,U).map(we=>j.createElement("th",{className:D.weekdayCell,key:we},j.createElement(gt,{size:w,className:D.weekday},we.length>=2?wg(we):we))),le=Array.isArray(s)?s.every(we=>we instanceof Date):s instanceof Date,me=s instanceof Date&&Rn(s).isAfter(Rn(i).startOf("month"))&&Rn(s).isBefore(Rn(i).endOf("month")),ye=P.useMemo(()=>V.flatMap(we=>we).find(we=>{const he=bye({date:we,month:i,hasValue:le,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:H});return!he.disabled&&!he.outside})||Rn(i).startOf("month").toDate(),[]),de=V.map((we,he)=>{const Ve=we.map((Me,Ye)=>{const Fe=bye({date:Me,month:i,hasValue:le,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:H}),De={rowIndex:he,cellIndex:Ye,date:Me};return j.createElement("td",{className:D.cell,key:Ye},j.createElement(b5e,{unstyled:G,ref:He=>{A&&(Array.isArray(A[he])||(A[he]=[]),A[he][Ye]=He)},onClick:()=>typeof o=="function"&&o(Me),onMouseDown:He=>E&&He.preventDefault(),value:Me,outside:Fe.outside,weekend:Fe.weekend,inRange:Fe.inRange||N(Me,Fe),firstInRange:Fe.firstInRange||k(Me,Fe),lastInRange:Fe.lastInRange||L(Me,Fe),firstInMonth:am(Me,ye),selected:Fe.selected||Fe.selectedInRange,hasValue:me,onKeyDown:He=>typeof C=="function"&&C(De,He),className:typeof l=="function"?l(Me,Fe):null,style:typeof c=="function"?c(Me,Fe):null,disabled:Fe.disabled,onMouseEnter:typeof g=="function"?g:Tk,size:w,fullWidth:x,focusable:b,hideOutsideDates:O,__staticSelector:_,styles:d,classNames:f,renderDay:B,stopPropagation:Y}))});return j.createElement("tr",{key:he},Ve)});return j.createElement(pt,zJt({component:"table",className:M(D.month,r),ref:t},q),!v&&j.createElement("thead",null,j.createElement("tr",null,te)),j.createElement("tbody",null,de))});S5e.displayName="@mantine/dates/Month";var qJt=Object.defineProperty,MM=Object.getOwnPropertySymbols,x5e=Object.prototype.hasOwnProperty,T5e=Object.prototype.propertyIsEnumerable,xye=(e,t,n)=>t in e?qJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WJt=(e,t)=>{for(var n in t||(t={}))x5e.call(t,n)&&xye(e,n,t[n]);if(MM)for(var n of MM(t))T5e.call(t,n)&&xye(e,n,t[n]);return e},GJt=(e,t)=>{var n={};for(var r in e)x5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MM)for(var r of MM(e))t.indexOf(r)<0&&T5e.call(e,r)&&(n[r]=e[r]);return n};function A5e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:w,preventFocus:x,renderDay:E,unstyled:b,__stopPropagation:T}=t,C=GJt(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const A=Rn(i).add(n,"months").toDate(),O=Rn(i).subtract(1,"months").toDate(),N=Array(n).fill(0).map((k,L)=>{const B=Rn(i).add(L,"months").toDate();return j.createElement("div",{key:L},j.createElement(c5,{hasNext:L+1===n&&tq({date:A,minDate:o,maxDate:a}),hasPrevious:L===0&&tq({date:O,minDate:o,maxDate:a}),label:pJt({month:B,locale:s,format:_}),onNext:()=>f(Rn(i).add(r,"months").toDate()),onPrevious:()=>f(Rn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:L>0,preventFocus:x,unstyled:b,__stopPropagation:T}),j.createElement(S5e,WJt({month:B,daysRefs:c.current[L],onDayKeyDown:(...U)=>h(L,...U),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:L===0,preventFocus:x,renderDay:E,weekdayLabelFormat:w,unstyled:b,__stopPropagation:T},C)))});return j.createElement(j.Fragment,null,N)}A5e.displayName="@mantine/dates/MonthsList";var YJt=yt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:cR})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),KJt=Object.defineProperty,LM=Object.getOwnPropertySymbols,C5e=Object.prototype.hasOwnProperty,I5e=Object.prototype.propertyIsEnumerable,Tye=(e,t,n)=>t in e?KJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XJt=(e,t)=>{for(var n in t||(t={}))C5e.call(t,n)&&Tye(e,n,t[n]);if(LM)for(var n of LM(t))I5e.call(t,n)&&Tye(e,n,t[n]);return e},QJt=(e,t)=>{var n={};for(var r in e)C5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LM)for(var r of LM(e))t.indexOf(r)<0&&I5e.call(e,r)&&(n[r]=e[r]);return n};const FZ=P.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:x,hideWeekdays:E,fullWidth:b,preventFocus:T,firstDayOfWeek:C="monday",value:A,onChange:O,onDayMouseEnter:N,range:k,nextDecadeLabel:L,nextMonthLabel:B,nextYearLabel:U,previousDecadeLabel:G,previousMonthLabel:H,previousYearLabel:Y,labelFormat:q="MMMM YYYY",weekdayLabelFormat:D,hideOutsideDates:M,isDateInRange:W,isDateFirstInRange:z,isDateLastInRange:V,renderDay:te,unstyled:le,weekendDays:me,__stopPropagation:ye,yearLabelFormat:de="YYYY"}=n,we=QJt(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[he,Ve]=P.useState(p),{classes:Me,cx:Ye,theme:Fe}=YJt({size:d,fullWidth:b,amountOfMonths:he==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:le}),De=l||Fe.datesLocale,He=P.useRef(Array(c).fill(0).map(()=>[])),[Qt,nt]=ya({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[qe,Pt]=P.useState(Qt.getFullYear()),at=m instanceof Date?m.getFullYear():100,ht=g instanceof Date?g.getFullYear():1e4,vt=6,Ht=(fe,xe,Le,ct=1)=>{var Je;const lt=["down","up"].includes(fe),st=lt?Le.rowIndex+(fe==="down"?ct:-ct):Le.rowIndex,At=lt?Le.cellIndex:Le.cellIndex+(fe==="right"?ct:-ct),Tn=(Je=He.current[xe][st])==null?void 0:Je[At];Tn&&(Tn.disabled?Ht(fe,xe,Le,ct+1):Tn.focus())},Xt=(fe,xe,Le)=>{var ct;switch(Le.key){case"ArrowDown":{Le.preventDefault(),xe.rowIndex+1<He.current[fe].length&&Ht("down",fe,xe);break}case"ArrowUp":{Le.preventDefault(),xe.rowIndex>0&&Ht("up",fe,xe);break}case"ArrowRight":{Le.preventDefault(),xe.cellIndex!==vt?Ht("right",fe,xe):fe+1<c&&He.current[fe+1][xe.rowIndex]&&((ct=He.current[fe+1][xe.rowIndex][0])==null||ct.focus());break}case"ArrowLeft":Le.preventDefault(),xe.cellIndex!==0?Ht("left",fe,xe):fe>0&&He.current[fe-1][xe.rowIndex]&&He.current[fe-1][xe.rowIndex][vt].focus()}};return j.createElement(pt,XJt({className:Ye(Me.calendarBase,r),ref:t},we),he==="year"&&j.createElement(p5e,{size:d,value:qe,minYear:at,maxYear:ht,onChange:fe=>{Pt(fe),Ve("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ye,nextDecadeLabel:L,previousDecadeLabel:G,preventFocus:T,unstyled:le,yearLabelFormat:de}),he==="month"&&j.createElement(y5e,{size:d,value:{month:Qt.getMonth(),year:Qt.getFullYear()},year:qe,onYearChange:Pt,onNextLevel:()=>Ve("year"),locale:De,minDate:m,maxDate:g,onChange:fe=>{nt(new Date(qe,fe,1)),Ve("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ye,nextYearLabel:U,previousYearLabel:Y,preventFocus:T,unstyled:le,yearLabelFormat:de}),he==="date"&&j.createElement(A5e,{amountOfMonths:c,paginateBy:f,month:Qt,locale:De,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:He,onMonthChange:nt,onNextLevel:()=>Ve("month"),onDayKeyDown:Xt,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:x,hideWeekdays:E,fullWidth:b,preventFocus:T,firstDayOfWeek:C,value:A,range:k,onChange:O,nextMonthLabel:B,previousMonthLabel:H,labelFormat:q,weekdayLabelFormat:D,onDayMouseEnter:N,renderDay:te,hideOutsideDates:M,isDateInRange:W,isDateFirstInRange:z,isDateLastInRange:V,unstyled:le,weekendDays:me,__stopPropagation:ye}))});FZ.displayName="@mantine/dates/CalendarBase";var JJt=Object.defineProperty,FM=Object.getOwnPropertySymbols,O5e=Object.prototype.hasOwnProperty,P5e=Object.prototype.propertyIsEnumerable,Aye=(e,t,n)=>t in e?JJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZJt=(e,t)=>{for(var n in t||(t={}))O5e.call(t,n)&&Aye(e,n,t[n]);if(FM)for(var n of FM(t))P5e.call(t,n)&&Aye(e,n,t[n]);return e},eZt=(e,t)=>{var n={};for(var r in e)O5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FM)for(var r of FM(e))t.indexOf(r)<0&&P5e.call(e,r)&&(n[r]=e[r]);return n};const tZt={__staticSelector:"Calendar"};function k5e(e){const t=Ot("Calendar",tZt,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=eZt(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>am(c,u));return s(l?i.filter(c=>!am(c,u)):[...i,u])};return j.createElement(FZ,ZJt({__staticSelector:n,onChange:a,value:i},o))}k5e.displayName="@mantine/dates/Calendar";var nZt=Object.defineProperty,rZt=Object.defineProperties,iZt=Object.getOwnPropertyDescriptors,Cye=Object.getOwnPropertySymbols,sZt=Object.prototype.hasOwnProperty,oZt=Object.prototype.propertyIsEnumerable,Iye=(e,t,n)=>t in e?nZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aZt=(e,t)=>{for(var n in t||(t={}))sZt.call(t,n)&&Iye(e,n,t[n]);if(Cye)for(var n of Cye(t))oZt.call(t,n)&&Iye(e,n,t[n]);return e},uZt=(e,t)=>rZt(e,iZt(t)),lZt=yt(e=>({wrapper:uZt(aZt({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),cZt=Object.defineProperty,fZt=Object.defineProperties,dZt=Object.getOwnPropertyDescriptors,BM=Object.getOwnPropertySymbols,$5e=Object.prototype.hasOwnProperty,R5e=Object.prototype.propertyIsEnumerable,Oye=(e,t,n)=>t in e?cZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qx=(e,t)=>{for(var n in t||(t={}))$5e.call(t,n)&&Oye(e,n,t[n]);if(BM)for(var n of BM(t))R5e.call(t,n)&&Oye(e,n,t[n]);return e},Pye=(e,t)=>fZt(e,dZt(t)),hZt=(e,t)=>{var n={};for(var r in e)$5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BM)for(var r of BM(e))t.indexOf(r)<0&&R5e.call(e,r)&&(n[r]=e[r]);return n};const pZt={xs:24,sm:30,md:34,lg:40,xl:44},mZt={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},BZ=P.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=mZt,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:w,inputLabel:x,__staticSelector:E="DatePickerBase",dropdownOpened:b,setDropdownOpened:T,dropdownType:C="popover",dropdownPosition:A="flip",clearable:O=!0,clearButtonLabel:N,onClear:k,positionDependencies:L=[],zIndex:B,withinPortal:U=!1,onBlur:G,onFocus:H,onChange:Y,onKeyDown:q,name:D="date",sx:M,amountOfMonths:W=1,onDropdownClose:z,onDropdownOpen:V,clickOutsideEvents:te=["mousedown","touchstart"],modalZIndex:le,errorProps:me,labelProps:ye,descriptionProps:de,clearButtonTabIndex:we=0,unstyled:he,inputContainer:Ve,inputWrapperOrder:Me,modalProps:Ye,withAsterisk:Fe}=n,De=hZt(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:He,cx:Qt,theme:nt}=lZt(null,{classNames:r,styles:o,unstyled:he,name:E}),{systemStyles:qe,rest:Pt}=$f(De),at=Vu(d),ht=P.useRef(),vt=()=>{T(!1),z==null||z()},Ht=()=>{T(!0),V==null||V()},Xt=()=>{T(!b),b?z==null||z():V==null||V()},fe=lt=>{lt.key==="Escape"&&(vt(),window.setTimeout(()=>{var st;return(st=ht.current)==null?void 0:st.focus()},0))},xe=O?j.createElement(mm,{variant:"transparent","aria-label":N,onClick:k,size:_,tabIndex:we,unstyled:he}):null,Le=lt=>{typeof G=="function"&&G(lt),l&&vt()},ct=lt=>{typeof H=="function"&&H(lt),l&&Ht()},Je=lt=>{typeof q=="function"&&q(lt),(lt.key==="Space"||lt.key==="Enter")&&!l&&(lt.preventDefault(),Ht())};return j.createElement(Ss.Wrapper,Qx(Qx({required:u,id:at,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:E,sx:M,errorProps:me,descriptionProps:de,labelProps:ye,inputContainer:Ve,inputWrapperOrder:Me,unstyled:he,withAsterisk:Fe},qe),a),j.createElement(Ci,{__staticSelector:E,withinPortal:U,offset:10,opened:b,transitionDuration:y,transition:g,positionDependencies:L,middlewares:{flip:A==="flip",shift:!1},position:A==="flip"?"bottom-start":A,shadow:m,onClose:vt,trapFocus:!l,withRoles:!1,clickOutsideEvents:te,zIndex:B,classNames:r,styles:o,unstyled:he},j.createElement(Ci.Target,null,j.createElement("div",{className:He.wrapper},j.createElement(Ss,Qx({classNames:Pye(Qx({},r),{input:Qt(He.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?Ht():Xt(),onKeyDown:Je,id:at,ref:Hs(t,ht),__staticSelector:E,size:_,name:D,placeholder:p,value:x,required:u,invalid:!!f,readOnly:!l,rightSection:xe,rightSectionWidth:nt.fn.size({size:_,sizes:pZt}),onBlur:Le,onFocus:ct,onChange:Y,autoComplete:"off",unstyled:he},Pt)))),C==="popover"?j.createElement(Ci.Dropdown,null,j.createElement("div",{"data-mantine-stop-propagation":b,onKeyDownCapture:fe,"aria-hidden":l||void 0},w)):j.createElement(Ip,Pye(Qx({},Ye),{opened:b,onClose:vt,withCloseButton:!1,size:W*400,zIndex:le,unstyled:he}),w)))});BZ.displayName="@mantine/dates/DatePickerBase";var gZt=Object.defineProperty,jM=Object.getOwnPropertySymbols,N5e=Object.prototype.hasOwnProperty,D5e=Object.prototype.propertyIsEnumerable,kye=(e,t,n)=>t in e?gZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yZt=(e,t)=>{for(var n in t||(t={}))N5e.call(t,n)&&kye(e,n,t[n]);if(jM)for(var n of jM(t))D5e.call(t,n)&&kye(e,n,t[n]);return e},vZt=(e,t)=>{var n={};for(var r in e)N5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jM)for(var r of jM(e))t.indexOf(r)<0&&D5e.call(e,r)&&(n[r]=e[r]);return n};const _Zt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},bZt=P.forwardRef((e,t)=>{const n=Ot("DatePicker",_Zt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,initialMonth:b,initiallyOpened:T,name:C,size:A,dropdownType:O,dropdownPosition:N,clearable:k,disabled:L,clearButtonLabel:B,fixOnBlur:U,allowFreeInput:G,withinPortal:H,dateParser:Y,firstDayOfWeek:q,onFocus:D,onBlur:M,amountOfMonths:W,allowLevelChange:z,initialLevel:V,onDropdownClose:te,onDropdownOpen:le,hideOutsideDates:me,hideWeekdays:ye,renderDay:de,type:we,openDropdownOnClear:he,unstyled:Ve,weekendDays:Me,yearLabelFormat:Ye,nextDecadeLabel:Fe,nextYearLabel:De,previousDecadeLabel:He,previousYearLabel:Qt}=n,nt=vZt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),qe=As(),Pt=l||qe.datesLocale,at=we==="date"?"YYYY-MM-DD":c||qe.dateFormat,[ht,vt]=P.useState(T),Ht=A==="lg"||A==="xl"?"md":"sm",Xt=P.useRef(),[fe,xe]=P.useState(s??null),[Le,ct]=ya({value:r,defaultValue:s,finalValue:null,onChange:i}),[Je,lt]=P.useState(Le||b||new Date),[st,At]=P.useState(!1),[Tn,Zt]=P.useState(Le instanceof Date?wg(Rn(Le).locale(Pt).format(at)):""),Jt=()=>{vt(!1),te==null||te()},nr=()=>{vt(!0),le==null||le()};P.useEffect(()=>{r===null&&!st&&Zt(""),r instanceof Date&&!st&&Zt(wg(Rn(r).locale(Pt).format(at)))},[r,st]);const Bn=Et=>{ct(Et),Zt(wg(Rn(Et).locale(Pt).format(at))),m&&Jt(),window.setTimeout(()=>{var pr;return(pr=Xt.current)==null?void 0:pr.focus()},0)},Bo=()=>{var Et;ct(null),xe(null),Zt(""),he&&nr(),(Et=Xt.current)==null||Et.focus()},hr=Et=>Y?Y(Et):Rn(Et,at,Pt).toDate(),Ni=()=>{let Et=typeof Le=="string"?hr(Le):Le;x&&Rn(Et).isAfter(x)&&(Et=x),w&&Rn(Et).isBefore(w)&&(Et=w),Rn(Et).isValid()?(ct(Et),xe(Et),Zt(wg(Rn(Et).locale(Pt).format(at))),lt(Et)):U&&ct(fe)},jr=Et=>{typeof M=="function"&&M(Et),At(!1),G&&Ni()},Ir=Et=>{Et.key==="Enter"&&G&&(Jt(),Ni())},Ur=Et=>{typeof D=="function"&&D(Et),At(!0)},rr=Et=>{nr();const pr=hr(Et.target.value);Rn(pr).isValid()?(ct(pr),xe(pr),Zt(Et.target.value),lt(pr)):Zt(Et.target.value)};return j.createElement(BZ,yZt({allowFreeInput:G,dropdownOpened:ht,setDropdownOpened:vt,shadow:u,transitionDuration:f,ref:Hs(t,Xt),size:A,styles:a,classNames:o,onChange:rr,onBlur:jr,onFocus:Ur,onKeyDown:Ir,name:C,inputLabel:Tn,__staticSelector:"DatePicker",dropdownType:O,dropdownPosition:N,clearable:we==="date"?!1:k&&!!Le&&!L,clearButtonLabel:B,onClear:Bo,disabled:L,withinPortal:H,amountOfMonths:W,onDropdownClose:te,onDropdownOpen:le,type:we,unstyled:Ve},nt),j.createElement(k5e,{classNames:o,styles:a,locale:Pt,nextMonthLabel:h,previousMonthLabel:p,month:G?Je:void 0,initialMonth:b||(Le instanceof Date?Le:new Date),onMonthChange:lt,value:Le instanceof Date?Le:Rn(Le).toDate(),onChange:Bn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,__staticSelector:"DatePicker",fullWidth:O==="modal",__stopPropagation:O!=="modal",size:O==="modal"?"lg":Ht,firstDayOfWeek:q,preventFocus:G,amountOfMonths:W,allowLevelChange:z,initialLevel:V,hideOutsideDates:me,hideWeekdays:ye,renderDay:de,unstyled:Ve,weekendDays:Me,yearLabelFormat:Ye,nextDecadeLabel:Fe,nextYearLabel:De,previousDecadeLabel:He,previousYearLabel:Qt}))});bZt.displayName="@mantine/dates/DatePicker";var wZt=Object.defineProperty,UM=Object.getOwnPropertySymbols,M5e=Object.prototype.hasOwnProperty,L5e=Object.prototype.propertyIsEnumerable,$ye=(e,t,n)=>t in e?wZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EZt=(e,t)=>{for(var n in t||(t={}))M5e.call(t,n)&&$ye(e,n,t[n]);if(UM)for(var n of UM(t))L5e.call(t,n)&&$ye(e,n,t[n]);return e},SZt=(e,t)=>{var n={};for(var r in e)M5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UM)for(var r of UM(e))t.indexOf(r)<0&&L5e.call(e,r)&&(n[r]=e[r]);return n};const xZt={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},F5e=P.forwardRef((e,t)=>{const n=Ot("RangeCalendar",xZt,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=SZt(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=P.useState(null),[p,m]=P.useState(null),g=x=>{if(p instanceof Date){if(am(x,p)&&!u)return m(null),h(null),null;const E=[x,p];return E.sort((b,T)=>b.getTime()-T.getTime()),i(E),m(null),null}return r[0]&&am(x,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([x,null]),m(x),null)},y=x=>{typeof o=="function"&&o(x),h(null)},v=(x,E)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,C)=>T.getTime()-C.getTime()),!E.selected&&Rn(x).subtract(1,"day").isBefore(b[1])&&Rn(x).add(1,"day").isAfter(b[0])}return!1},_=(x,E)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,C)=>T.getTime()-C.getTime()),E.selected&&Rn(x).isBefore(b[1])}return!1},w=(x,E)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,C)=>T.getTime()-C.getTime()),E.selected&&Rn(x).isAfter(b[0])}return!1};return j.createElement(FZ,EZt({dayStyle:s,onMouseLeave:y,onDayMouseEnter:x=>h(x),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:w},f))});F5e.displayName="@mantine/dates/RangeCalendar";var TZt=Object.defineProperty,zM=Object.getOwnPropertySymbols,B5e=Object.prototype.hasOwnProperty,j5e=Object.prototype.propertyIsEnumerable,Rye=(e,t,n)=>t in e?TZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AZt=(e,t)=>{for(var n in t||(t={}))B5e.call(t,n)&&Rye(e,n,t[n]);if(zM)for(var n of zM(t))j5e.call(t,n)&&Rye(e,n,t[n]);return e},CZt=(e,t)=>{var n={};for(var r in e)B5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zM)for(var r of zM(e))t.indexOf(r)<0&&j5e.call(e,r)&&(n[r]=e[r]);return n};const Nye=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),IZt=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,OZt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},U5e=P.forwardRef((e,t)=>{const n=Ot("DateRangePicker",OZt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,initialMonth:b,initiallyOpened:T,size:C,dropdownType:A,labelSeparator:O,clearable:N,clearButtonLabel:k,firstDayOfWeek:L,allowLevelChange:B,allowSingleDateInRange:U,amountOfMonths:G,withinPortal:H,initialLevel:Y,onDropdownClose:q,onDropdownOpen:D,hideOutsideDates:M,hideWeekdays:W,renderDay:z,openDropdownOnClear:V,unstyled:te,weekendDays:le,yearLabelFormat:me,nextDecadeLabel:ye,nextYearLabel:de,previousDecadeLabel:we,previousYearLabel:he}=n,Ve=CZt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Me=As(),Ye=l||Me.datesLocale,Fe=c||Me.dateFormat,[De,He]=P.useState(T),Qt=C==="lg"||C==="xl"?"md":"sm",nt=P.useRef(),[qe,Pt]=ya({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),at=Le=>{Pt(Le),m&&Nye(Le)&&(He(!1),q==null||q(),window.setTimeout(()=>{var ct;return(ct=nt.current)==null?void 0:ct.focus()},0))},ht=Nye(qe),vt=IZt(qe),Ht=qe[0]?wg(Rn(qe[0]).locale(Ye).format(Fe)):"",Xt=qe[1]?wg(Rn(qe[1]).locale(Ye).format(Fe)):"",fe=()=>{var Le;Pt([null,null]),He(!0),V&&(D==null||D()),(Le=nt.current)==null||Le.focus()},xe=Le=>{!Le&&vt&&qe[1]===null&&fe(),He(Le)};return j.createElement(BZ,AZt({dropdownOpened:De,setDropdownOpened:xe,shadow:u,transitionDuration:f,ref:Hs(t,nt),size:C,styles:a,classNames:o,inputLabel:vt?`${Ht} ${O} ${Xt}`:"",__staticSelector:"DateRangePicker",dropdownType:A,clearable:N&&vt,clearButtonLabel:k,onClear:fe,withinPortal:H,amountOfMonths:G,onDropdownClose:q,onDropdownOpen:D,unstyled:te},Ve),j.createElement(F5e,{classNames:o,styles:a,locale:Ye,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ht?qe[0]:b,value:qe,onChange:at,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,__staticSelector:"DateRangePicker",fullWidth:A==="modal",firstDayOfWeek:L,size:A==="modal"?"lg":Qt,allowLevelChange:B,allowSingleDateInRange:U,amountOfMonths:G,initialLevel:Y,hideOutsideDates:M,hideWeekdays:W,renderDay:z,unstyled:te,weekendDays:le,yearLabelFormat:me,nextDecadeLabel:ye,nextYearLabel:de,previousDecadeLabel:we,previousYearLabel:he}))});U5e.displayName="@mantine/dates/DateRangePicker";function t0(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var PZt=Object.defineProperty,kZt=Object.defineProperties,$Zt=Object.getOwnPropertyDescriptors,Dye=Object.getOwnPropertySymbols,RZt=Object.prototype.hasOwnProperty,NZt=Object.prototype.propertyIsEnumerable,Mye=(e,t,n)=>t in e?PZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DZt=(e,t)=>{for(var n in t||(t={}))RZt.call(t,n)&&Mye(e,n,t[n]);if(Dye)for(var n of Dye(t))NZt.call(t,n)&&Mye(e,n,t[n]);return e},MZt=(e,t)=>kZt(e,$Zt(t));const LZt={xs:20,sm:23,md:25,lg:27,xl:29};var z5e=yt((e,{size:t,hasValue:n})=>({timeInput:MZt(DZt({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:LZt}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),FZt=Object.defineProperty,VM=Object.getOwnPropertySymbols,V5e=Object.prototype.hasOwnProperty,H5e=Object.prototype.propertyIsEnumerable,Lye=(e,t,n)=>t in e?FZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BZt=(e,t)=>{for(var n in t||(t={}))V5e.call(t,n)&&Lye(e,n,t[n]);if(VM)for(var n of VM(t))H5e.call(t,n)&&Lye(e,n,t[n]);return e},jZt=(e,t)=>{var n={};for(var r in e)V5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VM)for(var r of VM(e))t.indexOf(r)<0&&H5e.call(e,r)&&(n[r]=e[r]);return n};const fR=P.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=jZt(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=P.useState(0),{classes:y,cx:v,theme:_}=z5e({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),w=P.useRef(),x=A=>{typeof i=="function"&&i(A),w.current.select(),g(0)},E=A=>{typeof s=="function"&&s(A),m===1&&typeof o=="function"&&o(A.currentTarget.value,!1)},b=A=>{A.stopPropagation(),w.current.select()},T=A=>{if(A.key==="ArrowUp"){A.preventDefault();const O=t0(gf(parseInt(A.currentTarget.value,10)+1,f,c).toString());d!==O&&o(O,!1)}if(A.key==="ArrowDown"){A.preventDefault();const O=t0(gf(parseInt(A.currentTarget.value,10)-1,f,c).toString());d!==O&&o(O,!1)}},C=A=>{g(m+1);const O=parseInt(A.currentTarget.value,10).toString();if(O==="0"&&m===0){a("00");return}o(O,!0,m>0)};return j.createElement(j.Fragment,null,j.createElement("input",BZt({type:"text",inputMode:"numeric",ref:Hs(w,t),onChange:C,onClick:b,onFocus:x,onBlur:E,onKeyDown:T,value:d,className:v(y.timeInput,r)},p)),u&&j.createElement(gt,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});fR.displayName="@mantine/dates/TimeField";function uU(e){return Math.floor(e/10)}function lU({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>uU(r)||a){const f=c%10;let d,h;c>r&&i&&f<=uU(i)?(d=t0(uU(c).toString()),h=t0(f.toString())):d=t0(gf(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var UZt=yt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:na})-2}})),zZt=Object.defineProperty,HM=Object.getOwnPropertySymbols,q5e=Object.prototype.hasOwnProperty,W5e=Object.prototype.propertyIsEnumerable,Fye=(e,t,n)=>t in e?zZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VZt=(e,t)=>{for(var n in t||(t={}))q5e.call(t,n)&&Fye(e,n,t[n]);if(HM)for(var n of HM(t))W5e.call(t,n)&&Fye(e,n,t[n]);return e},HZt=(e,t)=>{var n={};for(var r in e)q5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HM)for(var r of HM(e))t.indexOf(r)<0&&W5e.call(e,r)&&(n[r]=e[r]);return n};const G5e=P.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=HZt(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=z5e({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=P.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const w=_.target.value.slice(-1).toLowerCase();if(w==="p"){_.preventDefault(),i(c,!0);return}if(w==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return j.createElement("input",VZt({type:"text",ref:Hs(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});G5e.displayName="@mantine/dates/AmPmInput";function qZt({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function WZt(e,t,n,r,i,s){const o=Rn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function Bye(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:t0(i.toString()),minutes:t0(e.getMinutes().toString()),seconds:t0(e.getSeconds().toString()),amPm:s?r:n}}var GZt=Object.defineProperty,YZt=Object.defineProperties,KZt=Object.getOwnPropertyDescriptors,qM=Object.getOwnPropertySymbols,Y5e=Object.prototype.hasOwnProperty,K5e=Object.prototype.propertyIsEnumerable,jye=(e,t,n)=>t in e?GZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hm=(e,t)=>{for(var n in t||(t={}))Y5e.call(t,n)&&jye(e,n,t[n]);if(qM)for(var n of qM(t))K5e.call(t,n)&&jye(e,n,t[n]);return e},cU=(e,t)=>YZt(e,KZt(t)),XZt=(e,t)=>{var n={};for(var r in e)Y5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qM)for(var r of qM(e))t.indexOf(r)<0&&K5e.call(e,r)&&(n[r]=e[r]);return n};const QZt={xs:24,sm:30,md:34,lg:40,xl:44},JZt={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},nq=P.forwardRef((e,t)=>{const n=Ot("TimeInput",JZt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,amLabel:x,pmLabel:E,name:b,hoursLabel:T,minutesLabel:C,secondsLabel:A,amPmLabel:O,timePlaceholder:N,amPmPlaceholder:k,disabled:L,sx:B,nextRef:U,labelProps:G,descriptionProps:H,errorProps:Y,unstyled:q,withAsterisk:D}=n,M=XZt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:W,cx:z,theme:V}=UZt({size:l},{classNames:f,styles:d,unstyled:q,name:"TimeInput"}),{systemStyles:te,rest:le}=$f(M),me=Vu(h),ye=P.useRef(),de=P.useRef(),we=P.useRef(),he=P.useRef(),[Ve,Me]=P.useState(Bye(p||m,w,x,E)),[Ye,Fe]=P.useState(p||m);Fs(()=>{Me(Bye(Ye,w,x,E))},[Ye,w,x,E]),Fs(()=>{(p==null?void 0:p.getTime())!==(Ye==null?void 0:Ye.getTime())&&Fe(p)},[p]);const De=ht=>{const vt=Hm(Hm({},Ve),ht),Ht=WZt(vt.hours,vt.minutes,vt.seconds,w,E,vt.amPm);Fe(Ht),typeof g=="function"&&g(Ht)},He=lU({onChange:(ht,vt)=>{De({hours:ht,minutes:vt??Ve.minutes})},min:w==="12"?1:0,max:w==="12"?12:23,nextRef:de,nextMax:59}),Qt=lU({onChange:(ht,vt)=>{De({minutes:ht,seconds:vt??Ve.seconds})},min:0,max:59,nextRef:y?we:w==="12"?he:U,nextMax:y?59:void 0}),nt=lU({onChange:ht=>{De({seconds:ht})},min:0,max:59,nextRef:w==="12"?he:U}),qe=qZt({amLabel:x,pmLabel:E,onChange:ht=>{De({amPm:ht})},nextRef:U}),Pt=()=>{Me({hours:"",minutes:"",seconds:"",amPm:""}),Fe(null),g==null||g(null),ye.current.focus()},at=v&&Ye&&!L?j.createElement(mm,{variant:"transparent","aria-label":_,onClick:Pt,size:l,unstyled:q}):null;return j.createElement(Ss.Wrapper,Hm(Hm({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:me,sx:B,errorProps:Y,descriptionProps:H,labelProps:G,unstyled:q,withAsterisk:D},te),c),j.createElement(Ss,Hm({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ye.current.focus(),size:l,className:z({[W.disabled]:L}),classNames:f,styles:d,disabled:L,rightSection:at,rightSectionWidth:V.fn.size({size:l,sizes:QZt}),unstyled:q},le),j.createElement("div",{className:W.controls},j.createElement(fR,{ref:Hs(ye,t),value:Ve.hours,onChange:He,setValue:ht=>Me(vt=>cU(Hm({},vt),{hours:ht})),id:me,className:W.timeInput,withSeparator:!0,size:l,max:w==="12"?12:23,placeholder:N,"aria-label":T,disabled:L,name:b,unstyled:q}),j.createElement(fR,{ref:de,value:Ve.minutes,onChange:Qt,setValue:ht=>Me(vt=>cU(Hm({},vt),{minutes:ht})),className:W.timeInput,withSeparator:y,size:l,max:59,placeholder:N,"aria-label":C,disabled:L,unstyled:q}),y&&j.createElement(fR,{ref:we,value:Ve.seconds,onChange:nt,setValue:ht=>Me(vt=>cU(Hm({},vt),{seconds:ht})),className:W.timeInput,size:l,max:59,placeholder:N,"aria-label":A,disabled:L,unstyled:q}),w==="12"&&j.createElement(G5e,{ref:he,value:Ve.amPm,onChange:qe,placeholder:k,amLabel:x,pmLabel:E,size:l,"aria-label":O,disabled:L,unstyled:q}))))});nq.displayName="@mantine/dates/TimeInput";var ZZt=yt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:na})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),een=Object.defineProperty,WM=Object.getOwnPropertySymbols,X5e=Object.prototype.hasOwnProperty,Q5e=Object.prototype.propertyIsEnumerable,Uye=(e,t,n)=>t in e?een(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jx=(e,t)=>{for(var n in t||(t={}))X5e.call(t,n)&&Uye(e,n,t[n]);if(WM)for(var n of WM(t))Q5e.call(t,n)&&Uye(e,n,t[n]);return e},ten=(e,t)=>{var n={};for(var r in e)X5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WM)for(var r of WM(e))t.indexOf(r)<0&&Q5e.call(e,r)&&(n[r]=e[r]);return n};const nen={xs:24,sm:30,md:34,lg:40,xl:44},ren={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},ien=P.forwardRef((e,t)=>{const n=Ot("TimeRangeInput",ren,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,name:x,hoursLabel:E,minutesLabel:b,secondsLabel:T,amPmLabel:C,timePlaceholder:A,amPmPlaceholder:O,labelSeparator:N,disabled:k,sx:L,labelProps:B,descriptionProps:U,errorProps:G,unstyled:H,withAsterisk:Y}=n,q=ten(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:D,cx:M,theme:W}=ZZt({size:l},{classNames:f,styles:d,unstyled:H,name:"TimeRangeInput"}),{systemStyles:z,rest:V}=$f(q),te=Vu(h),le=P.useRef(),me=P.useRef(),[ye,de]=P.useState(p??m);Fs(()=>{typeof g=="function"&&g(ye)},[ye]),Fs(()=>{var Me,Ye,Fe,De;(((Me=p[0])==null?void 0:Me.getTime())!==((Ye=ye[0])==null?void 0:Ye.getTime())||((Fe=p[1])==null?void 0:Fe.getTime())!==((De=ye[1])==null?void 0:De.getTime()))&&de(p)},[p]);const we=()=>{var Me;de([null,null]),(Me=le.current)==null||Me.focus()},he=v&&ye.filter(Me=>!!Me).length>0?j.createElement(mm,{variant:"transparent","aria-label":_,onClick:we,size:l,unstyled:H}):null,Ve={amPmLabel:C,amPmPlaceholder:O,disabled:k,format:w,hoursLabel:E,minutesLabel:b,secondsLabel:T,size:l,timePlaceholder:A,withSeconds:y};return j.createElement(Ss.Wrapper,Jx(Jx({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:te,sx:L,errorProps:G,descriptionProps:U,labelProps:B,unstyled:H,withAsterisk:Y},z),c),j.createElement(Ss,Jx({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var Me;(Me=le.current)==null||Me.focus()},size:l,className:M({[D.disabled]:k}),classNames:f,styles:d,disabled:k,rightSection:he,rightSectionWidth:W.fn.size({size:l,sizes:nen}),unstyled:H},V),j.createElement("div",{className:D.inputWrapper},j.createElement(nq,Jx({ref:Hs(le,t),variant:"unstyled",value:ye[0],onChange:Me=>de([Me,ye[1]]),name:x,nextRef:me,id:te,unstyled:H},Ve)),j.createElement("span",{className:D.separator,style:{color:W.colorScheme==="dark"?W.colors.dark[2]:W.colors.gray[7]}},N),j.createElement(nq,Jx({ref:me,variant:"unstyled",value:ye[1],onChange:Me=>de([ye[0],Me]),unstyled:H},Ve)))))});ien.displayName="@mantine/dates/TimeRangeInput";const zye={};function rq(e,t){e===void 0&&(e=zye),t===void 0&&(t=zye);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var sen=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oen=Object.prototype.hasOwnProperty;function iq(e,t){return oen.call(e,t)}function sq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)iq(e,i)&&r.push(i);return r}function dl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function oq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function nv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function J5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function aq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(aq(e[t]))return!0}else if(typeof e=="object"){for(var r=sq(e),i=r.length,s=0;s<i;s++)if(aq(e[r[s]]))return!0}}return!1}function Vye(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Z5e=function(e){sen(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Vye(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Vye(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=Z5e,aen=dl,Wb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=GM(n,this.path);r&&(r=dl(r));var i=Jv(n,{op:"remove",path:this.from}).removed;return Jv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=GM(n,this.from);return Jv(n,{op:"add",path:this.path,value:dl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:TC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uen={add:function(e,t,n){return oq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Wb.move,copy:Wb.copy,test:Wb.test,_get:Wb._get};function GM(e,t){if(t=="")return e;var n={op:"_get",path:t};return Jv(e,n),n.value}function Jv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):YM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=GM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=TC(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=dl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=YM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=J5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!oq(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);oq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=uen[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Wb[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function f5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=dl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Jv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function len(e,t,n){var r=Jv(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function YM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Wb[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&aq(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=e8e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function e8e(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)f5(dl(t),dl(e),n||!0);else{n=n||YM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function TC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!TC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!TC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const cen=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:TC,applyOperation:Jv,applyPatch:f5,applyReducer:len,deepClone:aen,getValueByPointer:GM,validate:e8e,validator:YM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var jZ=new WeakMap,fen=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),den=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function hen(e){return jZ.get(e)}function pen(e,t){return e.observers.get(t)}function men(e,t){e.observers.delete(t.callback)}function gen(e,t){t.unobserve()}function yen(e,t){var n=[],r,i=hen(e);if(!i)i=new fen(e),jZ.set(e,i);else{var s=pen(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=dl(e),t){r.callback=t,r.next=null;var o=function(){uq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){uq(r),clearTimeout(r.next),men(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new den(t,r)),r}function uq(e,t){t===void 0&&(t=!1);var n=jZ.get(e.object);UZ(n.value,e.object,e.patches,"",t),e.patches.length&&f5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function UZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=sq(t),o=sq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(iq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?UZ(c,f,n,r+"/"+nv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+nv(l),value:dl(c)}),n.push({op:"replace",path:r+"/"+nv(l),value:dl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+nv(l),value:dl(c)}),n.push({op:"remove",path:r+"/"+nv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!iq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+nv(l),value:dl(t[l])})}}}function ven(e,t,n){n===void 0&&(n=!1);var r=[];return UZ(e,t,r,"",n),r}const _en=Object.freeze(Object.defineProperty({__proto__:null,compare:ven,generate:uq,observe:yen,unobserve:gen},Symbol.toStringTag,{value:"Module"}));Object.assign({},cen,_en,{JsonPatchError:Z5e,deepClone:dl,escapePathComponent:nv,unescapePathComponent:J5e});var ben=/("(?:[^\\"]|\\.)*")|[:,]/g,wen=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(ben,function(E,b){return b||E+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(f===g-1?0:1)),x!==void 0&&d.push(p+x);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const fU=Pl(wen);function Wu(e,t,n){return e.fields=t||[],e.fname=n,e}function Ji(e){return e==null?null:e.fname}function da(e){return e==null?null:e.fields}function t8e(e){return e.length===1?Een(e[0]):Sen(e)}const Een=e=>function(t){return t[e]},Sen=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function $e(e){throw Error(e)}function Sh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||$e("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&$e("Access path missing closing bracket: "+e),r&&$e("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function pc(e,t,n){const r=Sh(e);return e=r.length===1?r[0]:e,Wu((n&&n.get||t8e)(r),[e],t||e)}const lO=pc("id"),Ea=Wu(e=>e,[],"identity"),gg=Wu(()=>0,[],"zero"),HS=Wu(()=>1,[],"one"),mc=Wu(()=>!0,[],"true"),Km=Wu(()=>!1,[],"false");function xen(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const n8e=0,zZ=1,VZ=2,r8e=3,i8e=4;function HZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xen,r=e||n8e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=zZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=VZ&&n(t||"warn","WARN",arguments),this},info(){return r>=r8e&&n(t||"log","INFO",arguments),this},debug(){return r>=i8e&&n(t||"log","DEBUG",arguments),this}}}var Ne=Array.isArray;function mt(e){return e===Object(e)}const Hye=e=>e!=="__proto__";function qS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Ten(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;WS(r,s,i[s],o)}return r},{})}function WS(e,t,n,r){if(!Hye(t))return;let i,s;if(mt(n)&&!Ne(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?WS(s,i,n[i]):Hye(i)&&(s[i]=n[i])}else e[t]=n}function Ten(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function er(e){return e[e.length-1]}function la(e){return e==null||e===""?null:+e}const s8e=e=>t=>e*Math.exp(t),o8e=e=>t=>Math.log(e*t),a8e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),u8e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,KM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function d5(e,t,n,r){const i=n(e[0]),s=n(er(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function l8e(e,t){return d5(e,t,la,Ea)}function c8e(e,t){var n=Math.sign(e[0]);return d5(e,t,o8e(n),s8e(n))}function f8e(e,t,n){return d5(e,t,KM(n),KM(1/n))}function d8e(e,t,n){return d5(e,t,a8e(n),u8e(n))}function h5(e,t,n,r,i){const s=r(e[0]),o=r(er(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function qZ(e,t,n){return h5(e,t,n,la,Ea)}function WZ(e,t,n){const r=Math.sign(e[0]);return h5(e,t,n,o8e(r),s8e(r))}function XM(e,t,n,r){return h5(e,t,n,KM(r),KM(1/r))}function GZ(e,t,n,r){return h5(e,t,n,a8e(r),u8e(r))}function h8e(e){return 1+~~(new Date(e).getMonth()/3)}function p8e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ft(e){return e!=null?Ne(e)?e:[e]:[]}function m8e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Sn(e){return typeof e=="function"}const Aen="descending";function YZ(e,t,n){n=n||{},t=ft(t)||[];const r=[],i=[],s={},o=n.comparator||Cen;return ft(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Aen?-1:1),i.push(a=Sn(a)?a:pc(a,null,n)),(da(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Wu(o(i,r),Object.keys(s))}const p5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Cen=(e,t)=>e.length===1?Ien(e[0],t[0]):Oen(e,t,e.length),Ien=(e,t)=>function(n,r){return p5(e(n),e(r))*t},Oen=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=p5(s(r),s(i));return o*t[a]});function Sa(e){return Sn(e)?e:()=>e}function KZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function En(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function lh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function g8e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Pen=Object.prototype.hasOwnProperty;function Vt(e,t){return Pen.call(e,t)}const Ak={};function GS(e){let t={},n;function r(s){return Vt(t,s)&&t[s]!==Ak}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Ak&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Ak),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==Ak&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function y8e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=er(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function tt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),En(r,n)}function Gb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function dy(e){return typeof e=="boolean"}function n0(e){return Object.prototype.toString.call(e)==="[object Date]"}function v8e(e){return e&&Sn(e[Symbol.iterator])}function fr(e){return typeof e=="number"}function _8e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function dt(e){return typeof e=="string"}function XZ(e,t,n){e&&(e=t?ft(e).map(a=>a.replace(/\\(.)/g,"$1")):ft(e));const r=e&&e.length,i=n&&n.get||t8e,s=a=>i(t?[a]:Sh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Wu(o,e,"key")}function b8e(e,t){const n=e[0],r=er(e),i=+t;return i?i===1?r:n+i*(r-n):n}const ken=1e4;function w8e(e){e=+e||ken;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Vt(t,o)||Vt(n,o),get:o=>Vt(t,o)?t[o]:Vt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Vt(t,o)?t[o]=a:s(o,a)}}function E8e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function VT(e,t){let n="";for(;--t>=0;)n+=e;return n}function S8e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?VT(i,o)+s:r==="center"?VT(i,~~(o/2))+s+VT(i,Math.ceil(o/2)):s+VT(i,o)}function cO(e){return e&&er(e)-e[0]||0}function it(e){return Ne(e)?"["+e.map(it)+"]":mt(e)||dt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function QZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const $en=e=>fr(e)||n0(e)?e:Date.parse(e);function JZ(e,t){return t=t||$en,e==null||e===""?null:t(e)}function ZZ(e){return e==null||e===""?null:e+""}function Cf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function x8e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function rg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Ren(e){return e}function Nen(e){if(e==null)return Ren;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Den(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Men(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return qye(e,n)})}:qye(e,t)}function qye(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=T8e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function T8e(e,t){var n=Nen(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Den(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Len(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Fen(e){return T8e(e,Ben.apply(this,arguments))}function Ben(e,t,n){var r,i,s;if(arguments.length>1)r=jen(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Len(e,r)}}function jen(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function r0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Uen(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fO(e){let t,n,r;e.length!==2?(t=r0,n=(a,u)=>r0(e(a),u),r=(a,u)=>e(a)-u):(t=e===r0||e===Uen?e:zen,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function zen(){return 0}function A8e(e){return e===null?NaN:+e}function*Ven(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const C8e=fO(r0),QM=C8e.right,Hen=C8e.left;fO(A8e).center;const qen=QM;function Wen(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Gen(e,t){const n=Wen(e,t);return n&&Math.sqrt(n)}function Yen(e,t){return Array.from(t,n=>e[n])}function Ken(e=r0){if(e===r0)return I8e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function I8e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xen=Math.sqrt(50),Qen=Math.sqrt(10),Jen=Math.sqrt(2);function O8e(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Xen?10:s>=Qen?5:s>=Jen?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?O8e(e,t,n*2):[a,u,l]}function Wye(e,t,n){return t=+t,e=+e,n=+n,O8e(e,t,n)[2]}function AC(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Wye(t,e,n):Wye(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Zv(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function lq(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function P8e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?I8e:Ken(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));P8e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(Zx(e,n,t),i(e[r],s)>0&&Zx(e,n,r);o<a;){for(Zx(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?Zx(e,n,a):(++a,Zx(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Zx(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function cq(e,t,n){if(e=Float64Array.from(Ven(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return lq(e);if(t>=1)return Zv(e);var r,i=(r-1)*t,s=Math.floor(i),o=Zv(P8e(e,s).subarray(0,s+1)),a=lq(e.subarray(s+1));return o+(a-o)*(i-s)}}function Zen(e,t,n=A8e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function etn(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function k8e(e,t){return cq(e,.5,t)}function y_(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function $8e(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function ttn(e,...t){e=new f3(e),t=t.map(ntn);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function ntn(e){return e instanceof f3?e:new f3(e)}function rtn(...e){const t=new f3;for(const n of e)for(const r of n)t.add(r);return t}const $o="year",Lu="quarter",ha="month",Ms="week",Fu="date",ua="day",ch="dayofyear",Tl="hours",Al="minutes",gc="seconds",If="milliseconds",eee=[$o,Lu,ha,Ms,Fu,ua,ch,Tl,Al,gc,If],dU=eee.reduce((e,t,n)=>(e[t]=1+n,e),{});function tee(e){const t=ft(e).slice(),n={};return t.length||$e("Missing time unit."),t.forEach(i=>{Vt(dU,i)?n[i]=1:$e(`Invalid time unit: ${i}.`)}),(n[Ms]||n[ua]?1:0)+(n[Lu]||n[ha]||n[Fu]?1:0)+(n[ch]?1:0)>1&&$e(`Incompatible time units: ${e}`),t.sort((i,s)=>dU[i]-dU[s]),t}const itn={[$o]:"%Y ",[Lu]:"Q%q ",[ha]:"%b ",[Fu]:"%d ",[Ms]:"W%U ",[ua]:"%a ",[ch]:"%j ",[Tl]:"%H:00",[Al]:"00:%M",[gc]:":%S",[If]:".%L",[`${$o}-${ha}`]:"%Y-%m ",[`${$o}-${ha}-${Fu}`]:"%Y-%m-%d ",[`${Tl}-${Al}`]:"%H:%M"};function R8e(e,t){const n=En({},itn,t),r=tee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const hv=new Date;function nee(e){return hv.setFullYear(e),hv.setMonth(0),hv.setDate(1),hv.setHours(0,0,0,0),hv}function N8e(e){return M8e(new Date(e))}function D8e(e){return fq(new Date(e))}function M8e(e){return Pp.count(nee(e.getFullYear())-1,e)}function fq(e){return _S.count(nee(e.getFullYear())-1,e)}function dq(e){return nee(e).getDay()}function stn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function L8e(e){return B8e(new Date(e))}function F8e(e){return hq(new Date(e))}function B8e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Yg.count(t-1,e)}function hq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return bS.count(t-1,e)}function pq(e){return hv.setTime(Date.UTC(e,0,1)),hv.getUTCDay()}function otn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function j8e(e,t,n,r,i){const s=t||1,o=er(e),a=(y,v,_)=>(_=_||y,atn(n[_],r[_],y===o&&s,v)),u=new Date,l=Cf(e),c=l[$o]?a($o):Sa(2012),f=l[ha]?a(ha):l[Lu]?a(Lu):gg,d=l[Ms]&&l[ua]?a(ua,1,Ms+ua):l[Ms]?a(Ms,1):l[ua]?a(ua,1):l[Fu]?a(Fu,1):l[ch]?a(ch,1):HS,h=l[Tl]?a(Tl):gg,p=l[Al]?a(Al):gg,m=l[gc]?a(gc):gg,g=l[If]?a(If):gg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function atn(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function OE(e,t,n){return t+e*7-(n+6)%7}const utn={[$o]:e=>e.getFullYear(),[Lu]:e=>Math.floor(e.getMonth()/3),[ha]:e=>e.getMonth(),[Fu]:e=>e.getDate(),[Tl]:e=>e.getHours(),[Al]:e=>e.getMinutes(),[gc]:e=>e.getSeconds(),[If]:e=>e.getMilliseconds(),[ch]:e=>M8e(e),[Ms]:e=>fq(e),[Ms+ua]:(e,t)=>OE(fq(e),e.getDay(),dq(t)),[ua]:(e,t)=>OE(1,e.getDay(),dq(t))},ltn={[Lu]:e=>3*e,[Ms]:(e,t)=>OE(e,0,dq(t))};function U8e(e,t){return j8e(e,t||1,utn,ltn,stn)}const ctn={[$o]:e=>e.getUTCFullYear(),[Lu]:e=>Math.floor(e.getUTCMonth()/3),[ha]:e=>e.getUTCMonth(),[Fu]:e=>e.getUTCDate(),[Tl]:e=>e.getUTCHours(),[Al]:e=>e.getUTCMinutes(),[gc]:e=>e.getUTCSeconds(),[If]:e=>e.getUTCMilliseconds(),[ch]:e=>B8e(e),[Ms]:e=>hq(e),[ua]:(e,t)=>OE(1,e.getUTCDay(),pq(t)),[Ms+ua]:(e,t)=>OE(hq(e),e.getUTCDay(),pq(t))},ftn={[Lu]:e=>3*e,[Ms]:(e,t)=>OE(e,0,pq(t))};function z8e(e,t){return j8e(e,t||1,ctn,ftn,otn)}const dtn={[$o]:Jd,[Lu]:YA.every(3),[ha]:YA,[Ms]:_S,[Fu]:Pp,[ua]:Pp,[ch]:Pp,[Tl]:Q4,[Al]:K4,[gc]:yp,[If]:rE},htn={[$o]:Zd,[Lu]:KA.every(3),[ha]:KA,[Ms]:bS,[Fu]:Yg,[ua]:Yg,[ch]:Yg,[Tl]:J4,[Al]:X4,[gc]:yp,[If]:rE};function YS(e){return dtn[e]}function KS(e){return htn[e]}function V8e(e,t,n){return e?e.offset(t,n):void 0}function H8e(e,t,n){return V8e(YS(e),t,n)}function q8e(e,t,n){return V8e(KS(e),t,n)}function W8e(e,t,n,r){return e?e.range(t,n,r):void 0}function G8e(e,t,n,r){return W8e(YS(e),t,n,r)}function Y8e(e,t,n,r){return W8e(KS(e),t,n,r)}const HT=1e3,qT=HT*60,WT=qT*60,m5=WT*24,ptn=m5*7,Gye=m5*30,mq=m5*365,K8e=[$o,ha,Fu,Tl,Al,gc,If],GT=K8e.slice(0,-1),YT=GT.slice(0,-1),KT=YT.slice(0,-1),mtn=KT.slice(0,-1),gtn=[$o,Ms],Yye=[$o,ha],X8e=[$o],eT=[[GT,1,HT],[GT,5,5*HT],[GT,15,15*HT],[GT,30,30*HT],[YT,1,qT],[YT,5,5*qT],[YT,15,15*qT],[YT,30,30*qT],[KT,1,WT],[KT,3,3*WT],[KT,6,6*WT],[KT,12,12*WT],[mtn,1,m5],[gtn,1,ptn],[Yye,1,Gye],[Yye,3,3*Gye],[X8e,1,mq]];function Q8e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(cO(t))/n;let i=fO(a=>a[2]).right(eT,r),s,o;return i===eT.length?(s=X8e,o=AC(t[0]/mq,t[1]/mq,n)):i?(i=eT[r/eT[i-1][2]<eT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=K8e,o=Math.max(AC(t[0],t[1],n),1)),{units:s,step:o}}function XT(e){const t={};return n=>t[n]||(t[n]=e(n))}function ytn(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=vtn(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function vtn(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function J8e(e){const t=XT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=y1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return ytn(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=y1(o??",f");const a=AC(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=E$e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=S$e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=w$e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let gq;Z8e();function Z8e(){return gq=J8e({format:yS,formatPrefix:qK})}function e9e(e){return J8e(b$e(e))}function JM(e){return arguments.length?gq=e9e(e):gq}function Kye(e,t,n){n=n||{},mt(n)||$e(`Invalid time multi-format specifier: ${n}`);const r=t(gc),i=t(Al),s=t(Tl),o=t(Fu),a=t(Ms),u=t(ha),l=t(Lu),c=t($o),f=e(n[If]||".%L"),d=e(n[gc]||":%S"),h=e(n[Al]||"%I:%M"),p=e(n[Tl]||"%I %p"),m=e(n[Fu]||n[ua]||"%a %d"),g=e(n[Ms]||"%b %d"),y=e(n[ha]||"%B"),v=e(n[Lu]||"%B"),_=e(n[$o]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function t9e(e){const t=XT(e.format),n=XT(e.utcFormat);return{timeFormat:r=>dt(r)?t(r):Kye(t,YS,r),utcFormat:r=>dt(r)?n(r):Kye(n,KS,r),timeParse:XT(e.parse),utcParse:XT(e.utcParse)}}let yq;n9e();function n9e(){return yq=t9e({format:QK,parse:J$e,utcFormat:Z4,utcParse:Z$e})}function r9e(e){return t9e(G$e(e))}function CC(e){return arguments.length?yq=r9e(e):yq}const vq=(e,t)=>En({},e,t);function i9e(e,t){const n=e?e9e(e):JM(),r=t?r9e(t):CC();return vq(n,r)}function ree(e,t){const n=arguments.length;return n&&n!==2&&$e("defaultLocale expects either zero or two arguments."),n?vq(JM(e),CC(t)):vq(JM(),CC())}function _tn(){return Z8e(),n9e(),ree()}const btn=/^(data:|([A-Za-z]+:)?\/\/)/,wtn=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Etn=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Xye="file://";function Stn(e,t){return n=>({options:n||{},sanitize:Ttn,load:xtn,fileAccess:!!t,file:Atn(t),http:Itn(e)})}async function xtn(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Ttn(e,t){t=En({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=wtn.test(e.replace(Etn,""));(e==null||typeof e!="string"||!a)&&$e("Sanitize failure, invalid URI: "+it(e));const u=btn.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Xye))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Xye.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Atn(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Ctn}async function Ctn(){$e("No file system access.")}function Itn(e){return e?async function(t,n){const r=En({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Sn(s[i])?s[i]():s.text():$e(s.status+""+s.statusText)}:Otn}async function Otn(){$e("No HTTP fetch method available.")}const Ptn=e=>e!=null&&e===e,ktn=e=>e==="true"||e==="false"||e===!0||e===!1,$tn=e=>!Number.isNaN(Date.parse(e)),s9e=e=>!Number.isNaN(+e)&&!(e instanceof Date),Rtn=e=>s9e(e)&&Number.isInteger(+e),_q={boolean:QZ,integer:la,number:la,date:JZ,string:ZZ,unknown:Ea},Ck=[ktn,Rtn,s9e,$tn],Ntn=["boolean","integer","number","date"];function o9e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Ck.length,i=Ck.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Ptn(u)&&!Ck[a](u)&&(i[a]=0,++o,o===Ck.length))return"string";return Ntn[i.reduce((s,o)=>s===0?o:s,0)-1]}function a9e(e,t){return t.reduce((n,r)=>(n[r]=o9e(e,r),n),{})}function Qye(e){const t=function(n,r){const i={delimiter:e};return iee(n,r?En(r,i):i)};return t.responseType="text",t}function iee(e,t){return t.header&&(e=t.header.map(it).join(t.delimiter)+`
`+e),y$e(t.delimiter).parse(e+"")}iee.responseType="text";function Dtn(e){return typeof Buffer=="function"&&Sn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function see(e,t){const n=t&&t.property?pc(t.property):Ea;return mt(e)&&!Dtn(e)?Mtn(n(e),t):n(JSON.parse(e))}see.responseType="json";function Mtn(e,t){return!Ne(e)&&v8e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Ltn={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function u9e(e,t){let n,r,i,s;return e=see(e,t),t&&t.feature?(n=Men,i=t.feature):t&&t.mesh?(n=Fen,i=t.mesh,s=Ltn[t.filter]):$e("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):$e("Invalid TopoJSON object: "+i),r&&r.features||[r]}u9e.responseType="json";const dR={dsv:iee,csv:Qye(","),tsv:Qye("	"),json:see,topojson:u9e};function oee(e,t){return arguments.length>1?(dR[e]=t,this):Vt(dR,e)?dR[e]:null}function l9e(e){const t=oee(e);return t&&t.responseType||"text"}function c9e(e,t,n,r){t=t||{};const i=oee(t.type||"json");return i||$e("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Ftn(e,t.parse,n,r),Vt(e,"columns")&&delete e.columns,e}function Ftn(e,t,n,r){if(!e.length)return;const i=CC();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=a9e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!_q[p])throw Error("Illegal format pattern: "+h+":"+p);return _q[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const g5=Stn(typeof fetch<"u"&&fetch,null);function y5(e){const t=e||Ea,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function hR(e,t){try{await t(e)}catch(n){e.error(n)}}const f9e=Symbol("vega_id");let Btn=1;function v5(e){return!!(e&&Ut(e))}function Ut(e){return e[f9e]}function d9e(e,t){return e[f9e]=t,e}function Cr(e){const t=e===Object(e)?e:{data:e};return Ut(t)?t:d9e(t,Btn++)}function aee(e){return _5(e,Cr({}))}function _5(e,t){for(const n in e)t[n]=e[n];return t}function h9e(e,t){return d9e(t,Ut(e))}function v_(e,t){return e?t?(n,r)=>e(n,r)||Ut(t(n))-Ut(t(r)):(n,r)=>e(n,r)||Ut(n)-Ut(r):null}function p9e(e){return e&&e.constructor===__}function __(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:__,insert(a){const u=ft(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Sn(a)?r:t,l=ft(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Sa(l)};return Sn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Sn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ut(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ut(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Ut(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ut(m),l[g]?l[g]=1:a.add.push(Cr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ut(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[Ut(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ut(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Ut(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Ut(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const pR="_:mod:_";function b5(){Object.defineProperty(this,pR,{writable:!0,value:{}})}b5.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[pR];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ne(n)?1+n.length:-1),i},modified(e,t){const n=this[pR];if(arguments.length){if(Ne(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[pR]={},this}};let jtn=0;const Utn="pulse",ztn=new b5,Vtn=1,Htn=2;function ni(e,t,n,r){this.id=++jtn,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Jye(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ni.prototype={targets(){return this._targets||(this._targets=y5(lO))},set(e){return this.value!==e?(this.value=e,1):0},skip:Jye(Vtn),modified:Jye(Htn),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new b5,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof ni?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Utn)ft(a).forEach(f=>{f instanceof ni?f!==this&&(f.targets().add(this),s.push(f)):$e("Pulse parameters must be operator instances.")}),this.source=a;else if(Ne(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||ztn,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function qtn(e,t,n,r){let i=1,s;return e instanceof ni?s=e:e&&e.prototype instanceof ni?s=new e:Sn(e)?s=new ni(null,e):(i=0,s=new ni(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Wtn(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Gtn=0;function w5(e,t,n){this.id=++Gtn,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Xm(e,t,n){return new w5(e,t,n)}w5.prototype={_filter:mc,_apply:Ea,targets(){return this._targets||(this._targets=y5(lO))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Xm(e);return this.targets().add(t),t},apply(e){const t=Xm(null,e);return this.targets().add(t),t},merge(){const e=Xm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Xm();return this.targets().add(Xm(null,null,KZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Xm(null,null,()=>n=!0)),t.targets().add(Xm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=mc,this._targets=null}};function Ytn(e,t,n,r){const i=this,s=Xm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ft(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Ktn(e,t){const n=this.locale();return c9e(e,t,n.timeParse,n.utcParse)}function Xtn(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Qtn(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:l9e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Jtn(e,t,n){const r=this,i=r._pending||Ztn(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(mc).insert(s.data||[])),i.done(),s}function Ztn(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const enn={skip:!0};function tnn(e,t,n,r,i){return(e instanceof ni?rnn:nnn)(this,e,t,n,r,i),this}function nnn(e,t,n,r,i,s){const o=En({},s,enn);let a,u;Sn(n)||(n=Sa(n)),r===void 0?a=l=>e.touch(n(l)):Sn(r)?(u=new ni(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;p9e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function rnn(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new ni(null,inn(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function inn(e,t){return t=Sn(t)?t:Sa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function snn(e){e.rank=++this._rank}function onn(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&$e("Cycle detected in dataflow graph.")}const ZM={},ad=1,ig=2,Xh=4,ann=ad|ig,Zye=ad|Xh,X_=ad|ig|Xh,eve=8,tT=16,tve=32,nve=64;function i0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function hU(e,t){const n=[];return rg(e,t,r=>n.push(r)),n}function rve(e,t){const n={};return e.visit(t,r=>{n[Ut(r)]=1}),r=>n[Ut(r)]?null:r}function Ik(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}i0.prototype={StopPropagation:ZM,ADD:ad,REM:ig,MOD:Xh,ADD_REM:ann,ADD_MOD:Zye,ALL:X_,REFLOW:eve,SOURCE:tT,NO_SOURCE:tve,NO_FIELDS:nve,fork(e){return new i0(this.dataflow).init(this,e)},clone(){const e=this.fork(X_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(X_|tT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new i0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&nve)&&(n.fields=e.fields),t&ad?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ig?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Xh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&tve?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||X_;return t&ad&&this.add.length||t&ig&&this.rem.length||t&Xh&&this.mod.length},reflow(e){if(e)return this.fork(X_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Xh,rve(this,ad))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ne(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ne(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ad&&(n.addF=Ik(n.addF,t)),e&ig&&(n.remF=Ik(n.remF,t)),e&Xh&&(n.modF=Ik(n.modF,t)),e&tT&&(n.srcF=Ik(n.srcF,t)),n},materialize(e){e=e||X_;const t=this;return e&ad&&t.addF&&(t.add=hU(t.add,t.addF),t.addF=null),e&ig&&t.remF&&(t.rem=hU(t.rem,t.remF),t.remF=null),e&Xh&&t.modF&&(t.mod=hU(t.mod,t.modF),t.modF=null),e&tT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&tT)return rg(n.source,n.srcF,r),n;e&ad&&rg(n.add,n.addF,r),e&ig&&rg(n.rem,n.remF,r),e&Xh&&rg(n.mod,n.modF,r);const i=n.source;if(e&eve&&i){const s=n.add.length+n.mod.length;s===i.length||(s?rg(i,rve(n,Zye),r):rg(i,n.srcF,r))}return n}};function uee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}tt(uee,i0,{fork(e){const t=new i0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ne(e)?e.some(r=>n[r]):n[e]:0},filter(){$e("MultiPulse does not support filtering.")},materialize(){$e("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function unn(e,t,n){const r=this,i=[];if(r._pulse)return m9e(r);if(r._pending&&await r._pending,t&&await hR(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new i0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=y5(lO);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=ZM),u!==ZM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await hR(r,c[f].callback)}return n&&await hR(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function lnn(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function cnn(e,t,n){return this._pulse?m9e(this):(this.evaluate(e,t,n),this)}function fnn(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function m9e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function dnn(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function hnn(e,t){const n=e.source,r=this._clock;return n&&Ne(n)?new uee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||pnn(this._pulse,n&&n.pulse)}function pnn(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ZM&&(e.source=t.source),e)}const lee={skip:!1,force:!1};function mnn(e,t){const n=t||lee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function gnn(e,t,n){const r=n||lee;return(e.set(t)||r.force)&&this.touch(e,r),this}function ynn(e,t,n){this.touch(e,n||lee);const r=new i0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function vnn(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),g9e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,_nn(t,0,e)):r=n,r}}}function g9e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function _nn(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,g9e(e,r,t,n)}function Ow(){this.logger(HZ()),this.logLevel(zZ),this._clock=0,this._rank=0,this._locale=ree();try{this._loader=g5()}catch{}this._touched=y5(lO),this._input={},this._pulse=null,this._heap=vnn((e,t)=>e.qrank-t.qrank),this._postrun=[]}function nT(e){return function(){return this._log[e].apply(this,arguments)}}Ow.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:nT("error"),warn:nT("warn"),info:nT("info"),debug:nT("debug"),logLevel:nT("level"),cleanThreshold:1e4,add:qtn,connect:Wtn,rank:snn,rerank:onn,pulse:ynn,touch:mnn,update:gnn,changeset:__,ingest:Xtn,parse:Ktn,preload:Jtn,request:Qtn,events:Ytn,on:tnn,evaluate:unn,run:cnn,runAsync:lnn,runAfter:fnn,_enqueue:dnn,_getPulse:hnn};function Ie(e,t){ni.call(this,e,null,t)}tt(Ie,ni,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const PE={};function y9e(e){const t=v9e(e);return t&&t.Definition||null}function v9e(e){return e=e&&e.toLowerCase(),Vt(PE,e)?PE[e]:null}function*_9e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function cee(e,t,n){const r=Float64Array.from(_9e(e,n));return r.sort(r0),t.map(i=>Zen(r,i))}function fee(e,t){return cee(e,[.25,.5,.75],t)}function dee(e,t){const n=e.length,r=Gen(e,t),i=fee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function b9e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var yc=Math.random;function bnn(e){yc=e}function w9e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(_9e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(yc()*s)];c[l]=a/s}return c.sort(r0),[cq(c,n/2),cq(c,1-n/2)]}function E9e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?wnn(s,t+t/4):s}function wnn(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Enn(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Snn(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*yc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const S9e=Math.sqrt(2*Math.PI),xnn=Math.SQRT2;let rT=NaN;function E5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(rT===rT)n=rT,rT=NaN;else{do n=yc()*2-1,r=yc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,rT=r*s}return e+n*t}function hee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*S9e)}function S5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function x5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*xnn*Tnn(2*e-1)}function Tnn(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>E5(n,r),pdf:s=>hee(s,n,r),cdf:s=>S5(s,n,r),icdf:s=>x5(s,n,r)};return i.mean(e).stdev(t)}function mee(e,t){const n=pee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=dee(e)),i):t},sample(){return e[~~(yc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function gee(e,t){return e=e||0,t=t??1,Math.exp(e+E5()*t)}function yee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*S9e*e)}function vee(e,t,n){return S5(Math.log(e),t,n)}function _ee(e,t,n){return Math.exp(x5(e,t,n))}function x9e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>gee(n,r),pdf:s=>yee(s,n,r),cdf:s=>vee(s,n,r),icdf:s=>_ee(s,n,r)};return i.mean(e).stdev(t)}function T9e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=yc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function bee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*yc()}function wee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Eee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function See(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function A9e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>bee(n,r),pdf:s=>wee(s,n,r),cdf:s=>Eee(s,n,r),icdf:s=>See(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function xee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function dO(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function T5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function hO(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function XS(e,t,n,r,i){let s=0,o=0;return hO(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Tee(e,t,n){let r=0,i=0,s=0,o=0,a=0;hO(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=dO(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:XS(e,t,n,i,l)}}function C9e(e,t,n){let r=0,i=0,s=0,o=0,a=0;hO(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=dO(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:XS(e,t,n,i,l)}}function I9e(e,t,n){const[r,i,s,o]=T5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;hO(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=dO(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:XS(e,t,n,o,y)}}function O9e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;hO(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=dO(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:XS(e,t,n,a,c)}}function Aee(e,t,n){const[r,i,s,o]=T5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,x=-_*u,E=b=>(b=b-s,_*b*b+w*b+x+o);return{coef:[x-w*s+_*s*s+o,w-2*_*s,_],predict:E,rSquared:XS(e,t,n,o,E)}}function P9e(e,t,n,r){if(r===0)return xee(e,t,n);if(r===1)return Tee(e,t,n);if(r===2)return Aee(e,t,n);const[i,s,o,a]=T5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=Cnn(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:Ann(f,y,-o,a),predict:v,rSquared:XS(e,t,n,a,v)}}function Ann(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Cnn(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const ive=2,sve=1e-12;function k9e(e,t,n,r){const[i,s,o,a]=T5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=ive;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let x=0,E=0,b=0,T=0,C=0;const A=1/Math.abs(i[w]-y||1);for(let k=v;k<=_;++k){const L=i[k],B=s[k],U=Inn(Math.abs(y-L)*A)*d[k],G=L*U;x+=U,E+=G,b+=B*U,T+=B*G,C+=L*G}const[O,N]=dO(E/x,b/x,T/x,C/x);c[g]=O+N*y,f[g]=Math.abs(s[g]-c[g]),Onn(i,g+1,p)}if(h===ive)break;const m=k8e(f);if(Math.abs(m)<sve)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?sve:(v=1-y*y)*v}return Pnn(i,c,o,a)}function Inn(e){return(e=1-e*e*e)*e*e}function Onn(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Pnn(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const knn=.5*Math.PI/180;function A5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=$nn(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&Rnn(f,m,d,h,p)>knn?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function $nn(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Rnn(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Nnn(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function bq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Nnn(e)}function $9e(e,t,n){return n||e+(t?"_"+t:"")}const pU=()=>{},Dnn={init:pU,add:pU,rem:pU,idx:0},IC={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},pO=Object.keys(IC).filter(e=>e!=="__count__");function Mnn(e,t){return(n,r)=>En({name:e,aggregate_param:r,out:n||e},Dnn,t)}[...pO,"__count__"].forEach(e=>{IC[e]=Mnn(e,IC[e])});function R9e(e,t,n){return IC[e](n,t)}function N9e(e,t){return e.idx-t.idx}function Lnn(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=IC[i]())})};return e.forEach(n),Object.values(t).sort(N9e)}function Fnn(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Bnn(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function jnn(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Unn(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function D9e(e,t){const n=t||Ea,r=Lnn(e),i=e.slice().sort(N9e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Fnn,s.prototype.add=Bnn,s.prototype.rem=jnn,s.prototype.set=Unn,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Cee(e){this._key=e?pc(e):Ut,this.reset()}const Fo=Cee.prototype;Fo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Fo.add=function(e){this._add.push(e)};Fo.rem=function(e){this._rem.push(e)};Fo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Fo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Vt(n,s)||(n[s]=1,++i);return i};Fo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=g8e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Fo.argmin=function(e){return this.extent(e)[0]||{}};Fo.argmax=function(e){return this.extent(e)[1]||{}};Fo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Fo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Fo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fee(this.values(),e),this._get=e),this._q};Fo.q1=function(e){return this.quartile(e)[0]};Fo.q2=function(e){return this.quartile(e)[1]};Fo.q3=function(e){return this.quartile(e)[2]};Fo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=w9e(this.values(),1e3,.05,e),this._get=e),this._ci};Fo.ci0=function(e){return this.ci(e)[0]};Fo.ci1=function(e){return this.ci(e)[1]};function R0(e){Ie.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}R0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:pO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};tt(R0,Ie,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=ft(da(v)),w=_.length;let x=0,E;for(;x<w;++x)r[E=_[x]]||(r[E]=1,t.push(E))}this._dims=ft(e.groupby),this._dnames=this._dims.map(v=>{const _=Ji(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:bq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&$e("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&$e("Null aggregate field specified."),m=Ji(f),g=$9e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(R9e(d,h,g))}return this._measures=this._measures.map(v=>D9e(v,v.field)),Object.create(null)},cellkey:bq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Cee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?h9e(t.tuple,s):Cr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const znn=1e-14;function Iee(e){Ie.call(this,null,e)}Iee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};tt(Iee,Ie,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(da(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=b9e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=la(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(znn+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Wu(u,da(t),e.name||"bin_"+Ji(t))}});function M9e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?E8e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Oee(e){Ie.call(this,[],e)}Oee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};tt(Oee,Ie,{transform(e,t){const n=t.fork(t.ALL),r=M9e(Ut,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(v_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function L9e(e){ni.call(this,null,Vnn,e)}tt(L9e,ni);function Vnn(e){return this.value&&!e.modified()?this.value:YZ(e.fields,e.orders)}function Pee(e){Ie.call(this,null,e)}Pee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Hnn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}tt(Pee,Ie,{transform(e,t){const n=f=>d=>{for(var h=Hnn(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Cr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function kee(e){Ie.call(this,null,e)}kee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};tt(kee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=qnn(a,i,s,e.filter||mc)):n.mod=a,n.source=this.value,n.modifies(r)}});function qnn(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Cr(s)),s={},s[t]=l);return i}const ove={kde:mee,mixture:T9e,normal:pee,lognormal:x9e,uniform:A9e},Wnn="distributions",ave="function",Gnn="field";function F9e(e,t){const n=e[ave];Vt(ove,n)||$e("Unknown distribution function: "+n);const r=ove[n]();for(const i in e)i===Gnn?r.data((e.from||t()).map(e[i])):i===Wnn?r[i](e[i].map(s=>F9e(s,t))):typeof r[i]===ave&&r[i](e[i]);return r}function $ee(e){Ie.call(this,null,e)}const B9e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Ynn={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:B9e},{name:"weights",type:"number",array:!0}]};$ee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:B9e.concat(Ynn)},{name:"as",type:"string",array:!0,default:["value","density"]}]};tt($ee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=F9e(e.distribution,Knn(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&$e("Invalid density method: "+o),!e.extent&&!r.data&&$e("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||lh(r.data()),l=A5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Cr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Knn(e){return()=>e.materialize(e.SOURCE).source}function j9e(e,t){return e?e.map((n,r)=>t[r]||Ji(n)):null}function Ree(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const U9e="bin";function Nee(e){Ie.call(this,null,e)}Nee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:U9e}]};const Xnn=(e,t)=>cO(lh(e,t))/30;tt(Nee,Ie,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Ree(t.source,e.groupby,Ea),i=e.smooth||!1,s=e.field,o=e.step||Xnn(n,s),a=v_((p,m)=>s(p)-s(m)),u=e.as||U9e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of E9e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function z9e(e){ni.call(this,null,Qnn,e),this.modified(!0)}tt(z9e,ni);function Qnn(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Wu(n=>t(n,e),da(t),Ji(t))}function Dee(e){Ie.call(this,[void 0,void 0],e)}Dee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};tt(Dee,Ie,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=la(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ji(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Mee(e,t){ni.call(this,e),this.parent=t,this.count=0}tt(Mee,ni,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function C5(e){Ie.call(this,{},e),this._keys=GS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}tt(C5,Ie,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Vt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Mee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ut(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ut(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ut(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ut(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ut(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function V9e(e){ni.call(this,null,Jnn,e)}tt(V9e,ni);function Jnn(e){return this.value&&!e.modified()?this.value:Ne(e.name)?ft(e.name).map(t=>pc(t)):pc(e.name,e.as)}function Lee(e){Ie.call(this,GS(),e)}Lee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};tt(Lee,Ie,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ut(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ut(f),1)});function c(f){const d=Ut(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Fee(e){Ie.call(this,[],e)}Fee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};tt(Fee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=j9e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=aee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Bee(e){Ie.call(this,[],e)}Bee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};tt(Bee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ji),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=aee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function jee(e){Ie.call(this,null,e)}jee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};tt(jee,Ie,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function H9e(e){Ie.call(this,[],e)}tt(H9e,Ie,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Cr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const Ok={value:"value",median:k8e,mean:etn,min:lq,max:Zv},Znn=[];function Uee(e){Ie.call(this,[],e)}Uee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ern(e){var t=e.method||Ok.value,n;if(Ok[t]==null)$e("Unrecognized imputation method: "+t);else return t===Ok.value?(n=e.value!==void 0?e.value:0,()=>n):Ok[t]}function trn(e){const t=e.field;return n=>n?t(n):NaN}tt(Uee,Ie,{transform(e,t){var n=t.fork(t.ALL),r=ern(e),i=trn(e),s=Ji(e.field),o=Ji(e.key),a=(e.groupby||[]).map(Ji),u=nrn(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,x;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],x={_impute:!0},y=0,w=p.length;y<w;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Cr(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function nrn(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Znn)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function zee(e){R0.call(this,e)}zee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:pO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};tt(zee,R0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{En(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Vee(e){Ie.call(this,null,e)}Vee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};tt(Vee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Ree(r,e.groupby,e.field),s=(e.groupby||[]).map(Ji),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&$e("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=lh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=mee(h,o)[a],m=e.counts?h.length:1,g=c||lh(h);A5(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Cr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function q9e(e){ni.call(this,null,rrn,e)}tt(q9e,ni);function rrn(e){return this.value&&!e.modified()?this.value:XZ(e.fields,e.flat)}function W9e(e){Ie.call(this,[],e),this._pending=null}tt(W9e,Ie,{transform(e,t){const n=t.dataflow;return this._pending?mU(this,t,this._pending):irn(e)?t.StopPropagation:e.values?mU(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ft(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>mU(this,t,ft(r.data)))}});function irn(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function mU(e,t,n){n.forEach(Cr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Hee(e){Ie.call(this,{},e)}Hee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};tt(Hee,Ie,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&$e('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&$e('The "as" parameter has too few output field names.'),c=c||i.map(Ji),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||$e("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function G9e(e){ni.call(this,null,srn,e)}tt(G9e,ni);function srn(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function Y9e(e){ni.call(this,null,orn,e)}tt(Y9e,ni);function orn(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function K9e(e){Ie.call(this,null,e)}tt(K9e,Ie,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qee(e){R0.call(this,e)}qee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:pO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};tt(qee,R0,{_transform:R0.prototype.transform,transform(e,t){return this._transform(arn(e,t),t)}});function arn(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=da(n).concat(da(r)),o=lrn(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>urn(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function urn(e,t,n,r){return Wu(i=>t(i)===e?n(i):NaN,r,e+"")}function lrn(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(p5),t?i.slice(0,t):i}function X9e(e){C5.call(this,e)}tt(X9e,C5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ut(s),n,t,s);return(e.modified("field")||r&&t.modified(da(r)))&&$e("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Cr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Wee(e){Ie.call(this,null,e)}Wee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};tt(Wee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=j9e(e.fields,e.as||[]),s=r?(a,u)=>crn(a,u,r,i):_5;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ut(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Cr({}));o[Ut(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ut(a)]))}),n}});function crn(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function Q9e(e){Ie.call(this,null,e)}tt(Q9e,Ie,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Gee(e){Ie.call(this,null,e)}Gee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const frn=1e-14;tt(Gee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Ree(i,e.groupby,e.field),o=(e.groupby||[]).map(Ji),a=[],u=e.step||.01,l=e.probs||y_(u/2,1-frn,u),c=l.length;return s.forEach(f=>{const d=cee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Cr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function J9e(e){Ie.call(this,null,e)}tt(J9e,Ie,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ut(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=aee(i);r[Ut(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ut(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Yee(e){Ie.call(this,[],e),this.count=0}Yee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};tt(Yee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ut(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*yc()),d<o.length&&d>=u&&(f=o[d],s[Ut(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ut(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ut(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ut(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ut(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ut(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ut(c)])),this.count=a,this.value=n.source=o,n}});function Kee(e){Ie.call(this,null,e)}Kee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};tt(Kee,Ie,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=y_(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Cr(s)}),n.add=t.add.concat(this.value),n}});function Z9e(e){Ie.call(this,null,e),this.modified(!0)}tt(Z9e,Ie,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Xee(e){Ie.call(this,null,e)}const eBe=["unit0","unit1"];Xee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:eee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:eBe}]};tt(Xee,Ie,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?KS:YS)(s.unit).offset,a=e.as||eBe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(da(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Q8e({extent:e.extent||lh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=tee(r),o=this.value||{},a=(n?z8e:U8e)(s,i);return a.unit=er(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function tBe(e){Ie.call(this,GS(),e)}tt(tBe,Ie,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function nBe(e){Ie.call(this,null,e)}tt(nBe,Ie,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(v_(e.sort)):t.source).map(e.field))}});function drn(e,t,n,r){const i=OC[e](t,n);return{init:i.init||gg,update:function(s,o){o[r]=i.next(s)}}}const OC={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=OC.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||$e("ntile num must be greater than zero.");const n=OC.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||$e("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=hrn(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function hrn(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const prn=Object.keys(OC);function rBe(e){const t=ft(e.ops),n=ft(e.fields),r=ft(e.params),i=ft(e.aggregate_params),s=ft(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ft(da(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ji(g),w=$9e(p,_,s[m]);if(h(g),o.push(w),Vt(OC,p))a.push(drn(p,g,y,w));else{if(g==null&&p!=="count"&&$e("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let x=l[_];x||(x=l[_]=[],x.field=g,f.push(x)),x.push(R9e(p,v,w))}}),(c.length||f.length)&&(this.cell=mrn(f,c,d)),this.inputs=Object.keys(u)}const iBe=rBe.prototype;iBe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};iBe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function mrn(e,t,n){e=e.map(u=>D9e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Cee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Qee(e){Ie.call(this,{},e),this._mlen=0,this._mods=[]}Qee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:prn.concat(pO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};tt(Qee,Ie,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=v_(e.sort),i=bq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new rBe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)grn(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=M9e(Ut),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function grn(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?fO(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Sa(-1)};t.init();for(let f=0;f<u;++f)yrn(c,o,f,u),s&&vrn(c,l),t.update(c,a[f])}function yrn(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function vrn(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const _rn=Object.freeze(Object.defineProperty({__proto__:null,aggregate:R0,bin:Iee,collect:Oee,compare:L9e,countpattern:Pee,cross:kee,density:$ee,dotbin:Nee,expression:z9e,extent:Dee,facet:C5,field:V9e,filter:Lee,flatten:Fee,fold:Bee,formula:jee,generate:H9e,impute:Uee,joinaggregate:zee,kde:Vee,key:q9e,load:W9e,lookup:Hee,multiextent:G9e,multivalues:Y9e,params:K9e,pivot:qee,prefacet:X9e,project:Wee,proxy:Q9e,quantile:Gee,relay:J9e,sample:Yee,sequence:Kee,sieve:Z9e,subflow:Mee,timeunit:Xee,tupleindex:tBe,values:nBe,window:Qee},Symbol.toStringTag,{value:"Module"}));function s0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const brn=()=>typeof Image<"u"?Image:null;function Jee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const wrn="identity",kE="linear",um="log",mO="pow",gO="sqrt",I5="symlog",O1="time",P1="utc",Gd="sequential",QS="diverging",$E="quantile",O5="quantize",P5="threshold",Zee="ordinal",wq="point",sBe="band",ete="bin-ordinal",Ws="continuous",yO="discrete",vO="discretizing",$c="interpolating",tte="temporal";function Ern(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Srn(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function nte(){const e=vS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Jee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=y_(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,QM(h,m)-1),v=m===g?y:QM(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return nte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function oBe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return oBe(t())},e}function xrn(){return oBe(nte().paddingInner(1))}var Trn=Array.prototype.map;function Arn(e){return Trn.call(e,la)}const Crn=Array.prototype.slice;function aBe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(qen(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Arn(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Crn.call(r),n):t.slice()},n.tickFormat=function(r,i){return M$e(e[0],er(e),r??10,i)},n.copy=function(){return aBe().domain(n.domain()).range(n.range())},n}const eL=new Map,uBe=Symbol("vega_scale");function lBe(e){return e[uBe]=!0,e}function Irn(e){return e&&e[uBe]===!0}function Orn(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Ern(s):s.invertExtent?Srn(s):void 0),s.type=e,lBe(s)};return r.metadata=Cf(ft(n)),r}function br(e,t,n){return arguments.length>1?(eL.set(e,Orn(e,t,n)),this):cBe(e)?eL.get(e):void 0}br(wrn,L$e);br(kE,Yp,Ws);br(um,B$e,[Ws,um]);br(mO,KK,Ws);br(gO,XOt,Ws);br(I5,j$e,Ws);br(O1,eRe,[Ws,tte]);br(P1,ykt,[Ws,tte]);br(Gd,ZK,[Ws,$c]);br(`${Gd}-${kE}`,ZK,[Ws,$c]);br(`${Gd}-${um}`,tRe,[Ws,$c,um]);br(`${Gd}-${mO}`,eX,[Ws,$c]);br(`${Gd}-${gO}`,vkt,[Ws,$c]);br(`${Gd}-${I5}`,nRe,[Ws,$c]);br(`${QS}-${kE}`,rRe,[Ws,$c]);br(`${QS}-${um}`,iRe,[Ws,$c,um]);br(`${QS}-${mO}`,tX,[Ws,$c]);br(`${QS}-${gO}`,_kt,[Ws,$c]);br(`${QS}-${I5}`,sRe,[Ws,$c]);br($E,U$e,[vO,$E]);br(O5,z$e,vO);br(P5,V$e,vO);br(ete,aBe,[yO,vO]);br(Zee,vS,yO);br(sBe,nte,yO);br(wq,xrn,yO);function cBe(e){return eL.has(e)}function b_(e,t){const n=eL.get(e);return n&&n.metadata[t]}function rte(e){return b_(e,Ws)}function RE(e){return b_(e,yO)}function Eq(e){return b_(e,vO)}function fBe(e){return b_(e,um)}function Prn(e){return b_(e,tte)}function dBe(e){return b_(e,$c)}function hBe(e){return b_(e,$E)}const krn=["clamp","base","constant","exponent"];function pBe(e,t){const n=t[0],r=er(t)-n;return function(i){return e(n+i*r)}}function k5(e,t,n){return MK(ite(t||"rgb",n),e)}function mBe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function gBe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Sa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=br(s)().domain([t,n]).range([0,1]),krn.forEach(a=>e[a]?o[a](e[a]()):0),o)}function ite(e,t){const n=K2t[$rn(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function $rn(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Rrn={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Nrn={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function yBe(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function vBe(e,t){for(const n in e)ste(n,t(e[n]))}const uve={};vBe(Nrn,yBe);vBe(Rrn,e=>k5(yBe(e)));function ste(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(uve[e]=t,this):uve[e]}const mR="symbol",Drn="discrete",Mrn="gradient",Lrn=e=>Ne(e)?e.map(t=>String(t)):String(e),Frn=(e,t)=>e[1]-t[1],Brn=(e,t)=>t[1]-e[1];function ote(e,t,n){let r;return fr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(cO(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),dt(t)&&(t=e.type===O1?YS(t):e.type==P1?KS(t):$e("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function _Be(e,t,n){let r=e.range(),i=r[0],s=er(r),o=Frn;if(i>s&&(r=s,s=i,i=r,o=Brn),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],er(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function ate(e,t){return e.bins?_Be(e,e.bins):e.ticks?e.ticks(t):e.domain()}function bBe(e,t,n,r,i,s){const o=t.type;let a=Lrn;if(o===O1||i===O1)a=e.timeFormat(r);else if(o===P1||i===P1)a=e.utcFormat(r);else if(fBe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=wBe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function wBe(e,t,n){const r=ate(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const Sq={[$E]:"quantiles",[O5]:"thresholds",[P5]:"domain"},EBe={[$E]:"quantiles",[O5]:"domain"};function SBe(e,t){return e.bins?zrn(e.bins):e.type===um?wBe(e,t,!0):Sq[e.type]?Urn(e[Sq[e.type]]()):ate(e,t)}function jrn(e,t,n){const r=t[EBe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Urn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function zrn(e){const t=e.slice(0,-1);return t.max=er(e),t}const Vrn=e=>Sq[e.type]||e.bins;function xBe(e,t,n,r,i,s,o){const a=EBe[t.type]&&s!==O1&&s!==P1?jrn(e,t,i):bBe(e,t,n,i,s,o);return r===mR&&Vrn(t)?Hrn(a):r===Drn?qrn(a):Wrn(a)}const Hrn=e=>(t,n,r)=>{const i=lve(r[n+1],lve(r.max,1/0)),s=cve(t,e),o=cve(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},lve=(e,t)=>e??t,qrn=e=>(t,n)=>n?e(t):null,Wrn=e=>t=>e(t),cve=(e,t)=>Number.isFinite(e)?t(e):null;function Grn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+er(t),s=i-r;if(e.type===P5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Yrn(e,t,n,r){const i=r||t.type;return dt(n)&&Prn(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===O1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===P1?e.utcFormat("%A, %d %B %Y, %X UTC"):xBe(e,t,5,null,n,r,!0)}function TBe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Yrn(e,t,n.format,n.formatType);if(Eq(t.type)){const s=SBe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(RE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(er(s))}`}}let ABe=0;function Krn(){ABe=0}const tL="p_";function ute(e){return e&&e.gradient}function CBe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?tL:"";return i||(i=e.id="gradient_"+ABe++,r==="radial"?(e.x1=Kf(e.x1,.5),e.y1=Kf(e.y1,.5),e.r1=Kf(e.r1,0),e.x2=Kf(e.x2,.5),e.y2=Kf(e.y2,.5),e.r2=Kf(e.r2,.5),s=tL):(e.x1=Kf(e.x1,0),e.y1=Kf(e.y1,0),e.x2=Kf(e.x2,1),e.y2=Kf(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Kf(e,t){return e??t}function IBe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const fve={basis:{curve:Nkt},"basis-closed":{curve:Dkt},"basis-open":{curve:Mkt},bundle:{curve:Lkt,tension:"beta",value:.85},cardinal:{curve:Fkt,tension:"tension",value:0},"cardinal-open":{curve:jkt,tension:"tension",value:0},"cardinal-closed":{curve:Bkt,tension:"tension",value:0},"catmull-rom":{curve:Ukt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:zkt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Vkt,tension:"alpha",value:.5},linear:{curve:nX},"linear-closed":{curve:Hkt},monotone:{horizontal:Wkt,vertical:qkt},natural:{curve:Gkt},step:{curve:Ykt},"step-after":{curve:Xkt},"step-before":{curve:Kkt}};function lte(e,t,n){var r=Vt(fve,e)&&fve[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Xrn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Qrn=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Jrn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Zrn=/^((\s+,?\s*)|(,\s*))/,ein=/^[01]/;function NE(e){const t=[];return(e.match(Qrn)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Xrn[s],a=tin(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function tin(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?ein:Jrn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Zrn);u!==null&&(i+=u[0].length)}return r}const N0=Math.PI/180,nin=1e-14,pv=Math.PI/2,Ed=Math.PI*2,Q_=Math.sqrt(3)/2;var gU={},yU={},OBe=[].join;function rin(e,t,n,r,i,s,o,a,u){const l=OBe.call(arguments);if(gU[l])return gU[l];const c=o*N0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,x=v*a+_*u,E=g*e+y*t,b=v*e+_*t;let C=1/((E-w)*(E-w)+(b-x)*(b-x))-.25;C<0&&(C=0);let A=Math.sqrt(C);s==i&&(A=-A);const O=.5*(w+E)-A*(b-x),N=.5*(x+b)+A*(E-w),k=Math.atan2(x-N,w-O);let B=Math.atan2(b-N,E-O)-k;B<0&&s===1?B+=Ed:B>0&&s===0&&(B-=Ed);const U=Math.ceil(Math.abs(B/(pv+.001))),G=[];for(let H=0;H<U;++H){const Y=k+H*B/U,q=k+(H+1)*B/U;G[H]=[O,N,Y,q,n,r,f,d]}return gU[l]=G}function iin(e){const t=OBe.call(e);if(yU[t])return yU[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),x=n+p-w*m,E=r+m+w*p,b=n+g,T=r+y,C=b+w*y,A=T-w*g;return yU[t]=[c*x+f*E,d*x+h*E,c*C+f*A,d*C+h*A,c*b+f*T,d*b+h*T]}const Ul=["l",0,0,0,0,0,0,0];function sin(e,t,n){const r=Ul[0]=e[0];if(r==="a"||r==="A")Ul[1]=t*e[1],Ul[2]=n*e[2],Ul[3]=e[3],Ul[4]=e[4],Ul[5]=e[5],Ul[6]=t*e[6],Ul[7]=n*e[7];else if(r==="h"||r==="H")Ul[1]=t*e[1];else if(r==="v"||r==="V")Ul[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Ul[i]=(i%2==1?t:n)*e[i];return Ul}function PC(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=sin(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":dve(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":dve(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function dve(e,t,n,r){const i=rin(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=iin(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const hve=.5773502691896257,pve={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ed)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Q_*n,i=r-n*hve,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Q_*n,i=r-n*hve;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Q_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Q_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Q_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Q_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function PBe(e){return Vt(pve,e)?pve[e]:oin(e)}var vU={};function oin(e){if(!Vt(vU,e)){const t=NE(e);vU[e]={draw:function(n,r){PC(n,t,0,0,Math.sqrt(r)/2)}}}return vU[e]}const qm=.448084975506;function ain(e){return e.x}function uin(e){return e.y}function lin(e){return e.width}function cin(e){return e.height}function Uh(e){return typeof e=="function"?e:()=>+e}function Pk(e,t,n){return Math.max(t,Math.min(e,n))}function kBe(){var e=ain,t=uin,n=lin,r=cin,i=Uh(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=Pk(+i.call(this,c),0,v),w=Pk(+s.call(this,c),0,v),x=Pk(+o.call(this,c),0,v),E=Pk(+a.call(this,c),0,v);if(u||(u=h=H4()),_<=0&&w<=0&&x<=0&&E<=0)u.rect(p,m,g,y);else{var b=p+g,T=m+y;u.moveTo(p+_,m),u.lineTo(b-w,m),u.bezierCurveTo(b-qm*w,m,b,m+qm*w,b,m+w),u.lineTo(b,T-E),u.bezierCurveTo(b,T-qm*E,b-qm*E,T,b-E,T),u.lineTo(p+x,T),u.bezierCurveTo(p+qm*x,T,p,T-qm*x,p,T-x),u.lineTo(p,m+_),u.bezierCurveTo(p,m+qm*_,p+qm*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Uh(c),l):e},l.y=function(c){return arguments.length?(t=Uh(c),l):t},l.width=function(c){return arguments.length?(n=Uh(c),l):n},l.height=function(c){return arguments.length?(r=Uh(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Uh(c),s=f!=null?Uh(f):i,a=d!=null?Uh(d):i,o=h!=null?Uh(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function $Be(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Ed);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=H4()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function _O(e,t){return e??t}const bO=e=>e.x||0,wO=e=>e.y||0,fin=e=>e.width||0,din=e=>e.height||0,hin=e=>(e.x||0)+(e.width||0),pin=e=>(e.y||0)+(e.height||0),min=e=>e.startAngle||0,gin=e=>e.endAngle||0,yin=e=>e.padAngle||0,vin=e=>e.innerRadius||0,_in=e=>e.outerRadius||0,bin=e=>e.cornerRadius||0,win=e=>_O(e.cornerRadiusTopLeft,e.cornerRadius)||0,Ein=e=>_O(e.cornerRadiusTopRight,e.cornerRadius)||0,Sin=e=>_O(e.cornerRadiusBottomRight,e.cornerRadius)||0,xin=e=>_O(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Tin=e=>_O(e.size,64),Ain=e=>e.size||1,$5=e=>e.defined!==!1,Cin=e=>PBe(e.shape||"circle"),Iin=AV().startAngle(min).endAngle(gin).padAngle(yin).innerRadius(vin).outerRadius(_in).cornerRadius(bin),Oin=fRe().x(bO).y1(wO).y0(pin).defined($5),Pin=fRe().y(wO).x1(bO).x0(hin).defined($5),kin=cRe().x(bO).y(wO).defined($5),$in=kBe().x(bO).y(wO).width(fin).height(din).cornerRadius(win,Ein,Sin,xin),Rin=Rkt().type(Cin).size(Tin),Nin=$Be().x(bO).y(wO).defined($5).size(Ain);function cte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Din(e,t){return Iin.context(e)(t)}function Min(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Pin:Oin).curve(lte(r,n.orient,n.tension)).context(e)(t)}function Lin(e,t){const n=t[0],r=n.interpolate||"linear";return kin.curve(lte(r,n.orient,n.tension)).context(e)(t)}function JS(e,t,n,r){return $in.context(e)(t,n,r)}function Fin(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Bin(e,t){return Rin.context(e)(t)}function jin(e,t){return Nin.context(e)(t)}var RBe=1;function NBe(){RBe=1}function fte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+RBe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Sn(r)?o.path=r(null):cte(n)?o.path=JS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function R5(e){this.mark=e,this.bounds=this.bounds||new Ts}function N5(e){R5.call(this,e),this.items=this.items||[]}tt(N5,R5);function dte(e){this._pending=0,this._loader=e||g5()}function mve(e){e._pending+=1}function iT(e){e._pending-=1}dte.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return mve(t),t._loader.sanitize(e,{context:"href"}).then(n=>(iT(t),n)).catch(()=>(iT(t),null))},loadImage(e){const t=this,n=brn();return mve(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Vt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>iT(t),s.onerror=()=>iT(t),s.src=i,s}).catch(r=>(iT(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Tm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Uin(t,r):0))}return e}function Uin(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const zin=Ed-1e-8;let D5,gR,yR,Dv,xq,vR,Tq,Aq;const Cg=(e,t)=>D5.add(e,t),_R=(e,t)=>Cg(gR=e,yR=t),gve=e=>Cg(e,D5.y1),yve=e=>Cg(D5.x1,e),mv=(e,t)=>xq*e+Tq*t,gv=(e,t)=>vR*e+Aq*t,_U=(e,t)=>Cg(mv(e,t),gv(e,t)),bU=(e,t)=>_R(mv(e,t),gv(e,t));function EO(e,t){return D5=e,t?(Dv=t*N0,xq=Aq=Math.cos(Dv),vR=Math.sin(Dv),Tq=-vR):(xq=Aq=1,Dv=vR=Tq=0),Vin}const Vin={beginPath(){},closePath(){},moveTo:bU,lineTo:bU,rect(e,t,n,r){Dv?(_U(e+n,t),_U(e+n,t+r),_U(e,t+r),bU(e,t)):(Cg(e+n,t+r),_R(e,t))},quadraticCurveTo(e,t,n,r){const i=mv(e,t),s=gv(e,t),o=mv(n,r),a=gv(n,r);vve(gR,i,o,gve),vve(yR,s,a,yve),_R(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=mv(e,t),a=gv(e,t),u=mv(n,r),l=gv(n,r),c=mv(i,s),f=gv(i,s);_ve(gR,o,u,c,gve),_ve(yR,a,l,f,yve),_R(c,f)},arc(e,t,n,r,i,s){if(r+=Dv,i+=Dv,gR=n*Math.cos(i)+e,yR=n*Math.sin(i)+t,Math.abs(i-r)>zin)Cg(e-n,t-n),Cg(e+n,t+n);else{const o=l=>Cg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Ed,r<0&&(r+=Ed),i=i%Ed,i<0&&(i+=Ed),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Ed,a=r-r%pv,u=0;u<4&&a>i;++u,a-=pv)o(a);else for(a=r-r%pv+pv,u=0;u<4&&a<i;++u,a=a+pv)o(a)}}};function vve(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function _ve(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>nin?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(bve(u,e,t,n,r)),0<l&&l<1&&i(bve(l,e,t,n,r))}function bve(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var o0=(o0=s0(1,1))?o0.getContext("2d"):null;const Cq=new Ts;function hte(e){return function(t,n){if(!o0)return!0;e(o0,t),Cq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=Cq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(o0.isPointInPath(u,a))return!0;return!1}}function pte(e,t){return t.contains(e.x||0,e.y||0)}function DBe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(Cq.set(n,r,n+i,r+s))}function MBe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Yb(t,n,r,i,s)}function Yb(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function DE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vc(e,t){return e??t}function wve(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Hin(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Vc(t.x1,.5)*r,n.y1+Vc(t.y1,.5)*i,Math.max(r,i)*Vc(t.r1,0),n.x1+Vc(t.x2,.5)*r,n.y1+Vc(t.y2,.5)*i,Math.max(r,i)*Vc(t.r2,.5));else{const o=Vc(t.x1,0),a=Vc(t.y1,0),u=Vc(t.x2,1),l=Vc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=s0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=wve(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return wve(s,t.stops)}function LBe(e,t,n){return ute(n)?Hin(e,n,t.bounds):n}function nL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=LBe(e,t,t.fill),!0):!1}var qin=[];function ME(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=LBe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||qin),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Win(e,t){return e.zindex-t.zindex||e.index-t.index}function mte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Win)}function Of(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=mte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function rL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=mte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function gte(e){return function(t,n,r){Of(n,i=>{(!r||r.intersects(i.bounds))&&FBe(e,t,i,i)})}}function Gin(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&FBe(e,t,n.items[0],n.items)}}function FBe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(DE(t,n),n.fill&&nL(t,n,i)&&t.fill(),n.stroke&&ME(t,n,i)&&t.stroke()))}function M5(e){return e=e||mc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,rL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function SO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function yte(e){return M5(SO(e))}function e1(e,t){return"translate("+e+","+t+")"}function vte(e){return"rotate("+e+")"}function Yin(e,t){return"scale("+e+","+t+")"}function BBe(e){return e1(e.x||0,e.y||0)}function Kin(e){return e1(e.x||0,e.y||0)+(e.angle?" "+vte(e.angle):"")}function Xin(e){return e1(e.x||0,e.y||0)+(e.angle?" "+vte(e.angle):"")+(e.scaleX||e.scaleY?" "+Yin(e.scaleX||1,e.scaleY||1):"")}function _te(e,t,n){function r(o,a){o("transform",Kin(a)),o("d",t(null,a))}function i(o,a){return t(EO(o,a.angle),a),Tm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=N0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:gte(s),pick:yte(s),isect:n||hte(s)}}var Qin=_te("arc",Din);function Jin(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Zin(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function esn(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function bte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(EO(u),c),Tm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=SO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Gin(s),pick:a,isect:pte,tip:n}}var tsn=bte("area",Min,Jin);function nsn(e,t){var n=t.clip;e.save(),Sn(n)?(e.beginPath(),n(e),e.clip()):jBe(e,t.group)}function jBe(e,t){e.beginPath(),cte(t)?JS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function UBe(e){const t=Vc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function rsn(e,t){e("transform",BBe(t))}function zBe(e,t){const n=UBe(t);e("d",JS(null,t,n,n))}function isn(e,t){e("class","background"),e("aria-hidden",!0),zBe(e,t)}function ssn(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?zBe(e,t):e("d","")}function osn(e,t,n){const r=t.clip?fte(n,t,t):null;e("clip-path",r)}function asn(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Tm(e,t),e.translate(t.x||0,t.y||0)}function kC(e,t,n,r){const i=UBe(t);e.beginPath(),JS(e,t,(n||0)+i,(r||0)+i)}const usn=SO(kC),lsn=SO(kC,!1),csn=SO(kC,!0);function fsn(e,t,n,r){Of(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(kC(e,i,s,o),DE(e,i),i.fill&&nL(e,i,u)&&e.fill(),i.stroke&&!a&&ME(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&jBe(e,i),n&&n.translate(-s,-o),Of(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(kC(e,i,s,o),DE(e,i),ME(e,i,u)&&e.stroke())})}function dsn(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return rL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&cte(u)&&!csn(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&lsn(e,u,o,a)?(e.restore(),u):(l=rL(u,v=>hsn(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&usn(e,u,o,a)&&(l=u),e.restore(),l||null)})}function hsn(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var psn={type:"group",tag:"g",nested:!1,attr:rsn,bound:asn,draw:fsn,pick:dsn,isect:DBe,content:osn,background:isn,foreground:ssn},$C={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function wte(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Ete(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Ste(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function L5(e,t){return e==="center"?t/2:e==="right"?t:0}function F5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function msn(e,t,n){const r=wte(t,n),i=Ete(t,r),s=Ste(t,r),o=(t.x||0)-L5(t.align,i),a=(t.y||0)-F5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,$C["xmlns:xlink"],"xlink:href"),e("transform",e1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function gsn(e,t){const n=t.image,r=Ete(t,n),i=Ste(t,n),s=(t.x||0)-L5(t.align,r),o=(t.y||0)-F5(t.baseline,i);return e.set(s,o,s+r,o+i)}function ysn(e,t,n){Of(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=wte(r,this);let s=Ete(r,i),o=Ste(r,i);if(s===0||o===0)return;let a=(r.x||0)-L5(r.align,s),u=(r.y||0)-F5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(DE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var vsn={type:"image",tag:"image",nested:!1,attr:msn,bound:gsn,draw:ysn,pick:M5(),isect:mc,get:wte,xOffset:L5,yOffset:F5},_sn=bte("line",Lin,Zin);function bsn(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Xin(t)),e("d",t.path)}function bR(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*N0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=NE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),PC(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):PC(e,u,r,i,s,o)}function wsn(e,t){return bR(EO(e,t.angle),t)?e.set(0,0,0,0):Tm(e,t,!0)}var Esn={type:"path",tag:"path",nested:!1,attr:bsn,bound:wsn,draw:gte(bR),pick:yte(bR),isect:hte(bR)};function Ssn(e,t){e("d",JS(null,t))}function xsn(e,t){var n,r;return Tm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Eve(e,t){e.beginPath(),JS(e,t)}var Tsn={type:"rect",tag:"path",nested:!1,attr:Ssn,bound:xsn,draw:gte(Eve),pick:yte(Eve),isect:DBe};function Asn(e,t){e("transform",BBe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Csn(e,t){var n,r;return Tm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function VBe(e,t,n){var r,i,s,o;return t.stroke&&ME(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Isn(e,t,n){Of(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&VBe(e,r,i)&&(DE(e,r),e.stroke())}})}function Osn(e,t,n,r){return e.isPointInStroke?VBe(e,t,1)&&e.isPointInStroke(n,r):!1}var Psn={type:"rule",tag:"line",nested:!1,attr:Asn,bound:Csn,draw:Isn,pick:M5(Osn),isect:MBe},ksn=_te("shape",Fin),$sn=_te("symbol",Bin,pte);const Sve=w8e();var yl={height:xh,measureWidth:xte,estimateWidth:iL,width:iL,canvas:HBe};HBe(!0);function HBe(e){yl.width=e&&o0?xte:iL}function iL(e,t){return qBe(M0(e,t),xh(e))}function qBe(e,t){return~~(.8*e.length*t)}function xte(e,t){return xh(e)<=0||!(t=M0(e,t))?0:WBe(t,B5(e))}function WBe(e,t){const n=`(${t}) ${e}`;let r=Sve.get(n);return r===void 0&&(o0.font=t,r=o0.measureText(e).width,Sve.set(n,r)),r}function xh(e){return e.fontSize!=null?+e.fontSize||0:11}function D0(e){return e.lineHeight!=null?e.lineHeight:xh(e)+2}function Rsn(e){return Ne(e)?e.length>1?e:e[0]:e}function xO(e){return Rsn(e.lineBreak&&e.text&&!Ne(e.text)?e.text.split(e.lineBreak):e.text)}function Tte(e){const t=xO(e);return(Ne(t)?t.length-1:0)*D0(e)}function M0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Dsn(e,n):n}function Nsn(e){if(yl.width===xte){const t=B5(e);return n=>WBe(n,t)}else if(yl.width===iL){const t=xh(e);return n=>qBe(n,t)}else return t=>yl.width(e,t)}function Dsn(e,t){var n=+e.limit,r=Nsn(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function TO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function B5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+xh(e)+"px "+TO(e,t)}function Ate(e){var t=e.baseline,n=xh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*D0(e):t==="line-bottom"?.29*n-.5*D0(e):0)}const Msn={left:"start",center:"middle",right:"end"},J2=new Ts;function j5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-pv,t+=r*Math.cos(i),n+=r*Math.sin(i)),J2.x1=t,J2.y1=n,J2}function Lsn(e,t){var n=t.dx||0,r=(t.dy||0)+Ate(t),i=j5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Msn[t.align]||"start"),a?(u=e1(s,o)+" "+vte(a),(n||r)&&(u+=" "+e1(n,r))):u=e1(s+n,o+r),e("transform",u)}function Cte(e,t,n){var r=yl.height(t),i=t.align,s=j5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Ate(t)-Math.round(.8*r),c=xO(t),f;if(Ne(c)?(r+=D0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,yl.width(t,h)),0)):f=yl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*N0,o,a);else if(n===2)return e.rotatedPoints(t.angle*N0,o,a);return e}function Fsn(e,t,n){Of(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=B5(r),e.textAlign=r.align||"left",s=j5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*N0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Ate(r),c=xO(r),DE(e,r),Ne(c))for(l=D0(r),u=0;u<c.length;++u)f=M0(r,c[u]),r.fill&&nL(e,r,i)&&e.fillText(f,o,a),r.stroke&&ME(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=M0(r,c),r.fill&&nL(e,r,i)&&e.fillText(f,o,a),r.stroke&&ME(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Bsn(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=j5(t),a=o.x1,u=o.y1,l=Cte(J2,t,1),c=-t.angle*N0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function jsn(e,t){const n=Cte(J2,e,2);return Yb(t,n[0],n[1],n[2],n[3])||Yb(t,n[0],n[1],n[4],n[5])||Yb(t,n[4],n[5],n[6],n[7])||Yb(t,n[2],n[3],n[6],n[7])}var Usn={type:"text",tag:"text",nested:!1,attr:Lsn,bound:Cte,draw:Fsn,pick:M5(Bsn),isect:jsn},zsn=bte("trail",jin,esn),Cl={arc:Qin,area:tsn,group:psn,image:vsn,line:_sn,path:Esn,rect:Tsn,rule:Psn,shape:ksn,symbol:$sn,text:Usn,trail:zsn};function Iq(e,t,n){var r=Cl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var xve={mark:null};function GBe(e,t,n){var r=Cl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(xve.mark=e,l=xve),c=Iq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(Iq(s[a],i,n));return e.bounds=t}const Vsn=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function YBe(e,t){return JSON.stringify(e,Vsn,t)}function KBe(e){const t=typeof e=="string"?JSON.parse(e):e;return XBe(t)}function XBe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&XBe(n[i]);return t&&GBe(e),e}function Ite(e){arguments.length?this.root=KBe(e):(this.root=QBe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new N5(this.root)])}Ite.prototype={toJSON(e){return YBe(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=QBe(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function QBe(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ig(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Ote(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ns(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Ig(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Zl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function JBe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function U5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Hsn(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Cl[i.marktype]).tip){for(o=U5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function L0(e,t){this._active=null,this._handlers={},this._loader=e||g5(),this._tooltip=t||qsn}function qsn(e,t,n,r){e.element().setAttribute("title",r||"")}L0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=Ig(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Hsn(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function Dl(e){this._el=null,this._bgcolor=null,this._loader=new dte(e)}Dl.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Wsn="keydown",Gsn="keypress",Ysn="keyup",ZBe="dragenter",wR="dragleave",eje="dragover",Oq="pointerdown",Ksn="pointerup",sL="pointermove",Z2="pointerout",tje="pointerover",Pq="mousedown",Xsn="mouseup",nje="mousemove",kq="mouseout",rje="mouseover",oL="click",Qsn="dblclick",Jsn="wheel",ije="mousewheel",aL="touchstart",uL="touchmove",lL="touchend",Zsn=[Wsn,Gsn,Ysn,ZBe,wR,eje,Oq,Ksn,sL,Z2,tje,Pq,Xsn,nje,kq,rje,oL,Qsn,Jsn,ije,aL,uL,lL],$q=sL,RC=Z2,Rq=oL;function F0(e,t){L0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const eon=e=>e===aL||e===uL||e===lL?[aL,uL,lL]:[e];function Tve(e,t){eon(t).forEach(n=>ton(e,n))}function ton(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function QT(e,t,n){t.forEach(r=>e.fire(r,n))}function Ave(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?QT(this,e,r):((!i||!i.exit)&&QT(this,n,r),this._active=s,QT(this,t,r),QT(this,e,r))}}function Cve(e){return function(t){QT(this,e,t),this._active=null}}tt(F0,L0,{initialize(e,t,n){return this._canvas=e&&Ote(e,"canvas"),[oL,Pq,Oq,sL,Z2,wR].forEach(r=>Tve(this,r)),L0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Zsn,DOMMouseScroll(e){this.fire(ije,e)},pointermove:Ave([sL,nje],[tje,rje],[Z2,kq]),dragover:Ave([eje],[ZBe],[wR]),pointerout:Cve([Z2,kq]),dragleave:Cve([wR]),pointerdown(e){this._down=this._active,this.fire(Oq,e)},mousedown(e){this._down=this._active,this.fire(Pq,e)},click(e){this._down===this._active&&(this.fire(oL,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(aL,e,!0)},touchmove(e){this.fire(uL,e,!0)},touchend(e){this.fire(lL,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===Rq&&r&&r.href?this.handleHref(t,r,r.href):(e===$q||e===RC)&&this.handleTooltip(t,r,e!==RC),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Tve(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=U5(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return Cl[e.marktype].pick.call(this,s,e,t,n,r,i)}});function non(){return typeof window<"u"&&window.devicePixelRatio||1}function ron(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?non():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function NC(e){Dl.call(this,e),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}const Ive=Dl.prototype,ion=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function son(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}tt(NC,Dl,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:s0(1,1,this._options.type),e&&this._canvas&&(Zl(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Ive.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(Ive.resize.call(this,e,t,n,r),this._canvas)ron(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||$e("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=ion(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):son(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=Cl[t.marktype];t.clip&&nsn(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function Pte(e,t){L0.call(this,e,t);const n=this;n._hrefHandler=Nq(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=Nq(n,(r,i)=>{n.handleTooltip(r,i,r.type!==RC)})}const Nq=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};tt(Pte,L0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(Rq,this._hrefHandler),r.removeEventListener($q,this._tooltipHandler),r.removeEventListener(RC,this._tooltipHandler)),this._svg=r=e&&Ote(e,"svg"),r&&(r.addEventListener(Rq,this._hrefHandler),r.addEventListener($q,this._tooltipHandler),r.addEventListener(RC,this._tooltipHandler)),L0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:Nq(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const sje="aria-hidden",kte="aria-label",$te="role",Rte="aria-roledescription",oje="graphics-object",Nte="graphics-symbol",aje=(e,t,n)=>({[$te]:e,[Rte]:t,[kte]:n||void 0}),oon=Cf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ove={axis:{desc:"axis",caption:lon},legend:{desc:"legend",caption:con},"title-text":{desc:"title",caption:e=>`Title text '${kve(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${kve(e)}'`}},Pve={ariaRole:$te,ariaRoleDescription:Rte,description:kte};function uje(e,t){const n=t.aria===!1;if(e(sje,n||void 0),n||t.description==null)for(const r in Pve)e(Pve[r],void 0);else{const r=t.mark.marktype;e(kte,t.description),e($te,t.ariaRole||(r==="group"?oje:Nte)),e(Rte,t.ariaRoleDescription||`${r} mark`)}}function lje(e){return e.aria===!1?{[sje]:!0}:oon[e.role]?null:Ove[e.role]?uon(e,Ove[e.role]):aon(e)}function aon(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return aje(n?oje:Nte,`${t} mark container`,e.description)}function uon(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return aje(t.role||Nte,t.desc,n.description||r(n))}catch{return null}}function kve(e){return ft(e.text).join(" ")}function lon(e){const t=e.datum,n=e.orient,r=t.title?cje(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${RE(a)?"discrete":a} scale with ${TBe(o,s,e)}`}function con(e){const t=e.datum,n=t.title?cje(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return don(r)+(n?` titled '${n}'`:"")+` for ${fon(s)} with ${TBe(u,a,e)}`}function cje(e){try{return ft(er(e.items).items[0].text).join(" ")}catch{return null}}function fon(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+er(e)}function don(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const fje=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),hon=e=>fje(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Dte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${hon(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=fje(u),a),toString:()=>e};return a}const dje=e=>hje(Dte(),e)+"";function hje(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):hje(e,r)}return e.close()}const cL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},fL={blend:"mix-blend-mode"},pje={fill:"none","stroke-miterlimit":10},sT=0,$ve="http://www.w3.org/2000/xmlns/",$s=$C.xmlns;function z5(e){Dl.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const wU=Dl.prototype;tt(z5,Dl,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Ns(e,0,"svg",$s),this._svg.setAttributeNS($ve,"xmlns",$s),this._svg.setAttributeNS($ve,"xmlns:xlink",$C["xmlns:xlink"]),this._svg.setAttribute("version",$C.version),this._svg.setAttribute("class","marks"),Zl(e,1),this._root=Ns(this._svg,sT,"g",$s),Og(this._root,pje),Zl(this._svg,sT+1)),this.background(this._bgcolor),wU.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),wU.background.apply(this,arguments)},resize(e,t,n,r){return wU.resize.call(this,e,t,n,r),this._svg&&(Og(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Ns(e,sT,"rect",$s),Og(n,{width:this._width,height:this._height,fill:t}));const r=dje(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Zl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=Cl[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Rve(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Rve(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=Cl[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=Nve(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Zl(l,0),t._svg;l.setAttribute("class",JBe(t));const c=lje(t);for(const p in c)$a(l,p,c[p]);u||$a(l,"pointer-events",a),$a(l,"clip-path",t.clip?fte(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=Nve(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&gon(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):Of(t,h),Zl(l,d),l},_update(e,t,n){Ep=t,ta=t.__values__,uje(eA,n),e.attr(eA,n,this);const r=von[e.type];r&&r.call(this,e,t,n),Ep&&this.style(Ep,n)},style(e,t){if(t!=null){for(const n in cL){let r=n==="font"?TO(t):t[n];if(r===ta[n])continue;const i=cL[n];r==null?e.removeAttribute(i):(ute(r)&&(r=CBe(r,this._defs.gradient,mje())),e.setAttribute(i,r+"")),ta[n]=r}for(const n in fL)ER(e,fL[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Ns(e,sT+1,"defs",$s)),r=pon(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Ns(e,sT+1,"defs",$s)),r=mon(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Zl(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function Rve(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function pon(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ns(e,n++,"pattern",$s);Og(o,{id:tL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ns(o,0,"rect",$s),Og(o,{width:1,height:1,fill:`url(${mje()}#${t.id})`}),e=Ns(e,n++,"radialGradient",$s),Og(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ns(e,n++,"linearGradient",$s),Og(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ns(e,r,"stop",$s),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Zl(e,r),n}function mon(e,t,n){let r;return e=Ns(e,n,"clipPath",$s),e.setAttribute("id",t.id),t.path?(r=Ns(e,0,"path",$s),r.setAttribute("d",t.path)):(r=Ns(e,0,"rect",$s),Og(r,{x:0,y:0,width:t.width,height:t.height})),Zl(e,1),n+1}function gon(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Of(n,o=>{i=e.mark(t,o,i,r),++s}),Zl(t,1+s)}function Nve(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Ig(o,r,$s),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Ig(o,"path",$s);s.appendChild(a),a.__data__=e;const u=Ig(o,"g",$s);s.appendChild(u),u.__data__=e;const l=Ig(o,"path",$s);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||yon(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function yon(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ep=null,ta=null;const von={group(e,t,n){const r=Ep=t.childNodes[2];ta=r.__values__,e.foreground(eA,n,this),ta=t.__values__,Ep=t.childNodes[1],e.content(eA,n,this);const i=Ep=t.childNodes[0];e.background(eA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ta.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),ta.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),ta=r.__values__,this.style(r,n),o&&(n.fill=o),Ep=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(ER(t,"image-rendering","optimizeSpeed"),ER(t,"image-rendering","pixelated")):ER(t,"image-rendering",null)},text(e,t,n){const r=xO(n);let i,s,o,a;Ne(r)?(s=r.map(u=>M0(n,u)),i=s.join(`
`),i!==ta.text&&(Zl(t,0),o=t.ownerDocument,a=D0(n),s.forEach((u,l)=>{const c=Ig(o,"tspan",$s);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ta.text=i)):(s=M0(n,r),s!==ta.text&&(t.textContent=s,ta.text=s)),$a(t,"font-family",TO(n)),$a(t,"font-size",xh(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function eA(e,t,n){t!==ta[e]&&(n?_on(Ep,e,t,n):$a(Ep,e,t),ta[e]=t)}function ER(e,t,n){n!==ta[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ta[t]=n)}function Og(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function _on(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function mje(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Mte(e){Dl.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}tt(Mte,Dl,{svg(){return this._text},_render(e){const t=Dte();t.open("svg",En({},$C,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",pje,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Cl[t.marktype],r=n.tag,i=[uje,n.attr];e.open("g",{class:JBe(t),"clip-path":t.clip?fte(this,t,t.group):null},lje(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=xO(o);if(Ne(u)){const l={x:0,dy:D0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(M0(o,u[c])).close()}else e.text(M0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),Of(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):Of(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&bon(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:tL+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function bon(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=TO(t),e["font-size"]=xh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in cL){let a=t[o];const u=cL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(ute(a)&&(a=CBe(a,i.gradient,"")),e[u]=a)}for(const o in fL){const a=t[o];a!=null&&(s=s||[],s.push(`${fL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Xc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function won(e){Xc.svgMarkTypes=e.svgMarkTypes??["text"],Xc.svgOnTop=e.svgOnTop??!0,Xc.debug=e.debug??!1}function dL(e){Dl.call(this,e),this._svgRenderer=new z5(e),this._canvasRenderer=new NC(e)}const Dve=Dl.prototype;tt(dL,Dl,{initialize(e,t,n,r,i){this._root_el=Ns(e,0,"div");const s=Ns(this._root_el,0,"div"),o=Ns(this._root_el,1,"div");return this._root_el.style.position="relative",Xc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Xc.svgOnTop?o:s,this._canvasEl=Xc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),Dve.initialize.call(this,e,t,n,r,i)},dirty(e){return Xc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Xc.svgMarkTypes.includes(i));this._svgRenderer.render(e,Xc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return Dve.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Xc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function Lte(e,t){F0.call(this,e,t)}tt(Lte,F0,{initialize(e,t,n){const r=Ns(Ns(e,0,"div"),Xc.svgOnTop?0:1,"div");return F0.prototype.initialize.call(this,r,t,n)}});const gje="canvas",yje="hybrid",vje="png",_je="svg",bje="none",Pg={Canvas:gje,PNG:vje,SVG:_je,Hybrid:yje,None:bje},k1={};k1[gje]=k1[vje]={renderer:NC,headless:NC,handler:F0};k1[_je]={renderer:z5,headless:Mte,handler:Pte};k1[yje]={renderer:dL,headless:dL,handler:Lte};k1[bje]={};function V5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(k1[e]=t,this):k1[e]}function wje(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?Eje(e,i,n,r):s==="group"?Sje(e,i,n,r):$e("Intersect scene must be mark node or group item.")}function Eje(e,t,n,r){if(Eon(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)Sje(i[a],t,n,r);else for(const u=Cl[s].isect;a<o;++a){const l=i[a];xje(l,t,u)&&r.push(l)}}return r}function Eon(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Sje(e,t,n,r){n&&n(e.mark)&&xje(e,t,Cl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)Eje(i[u],t,n,r);t.translate(o,a)}return r}function xje(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const EU=new Ts;function Tje(e){const t=e.clip;if(Sn(t))t(EO(EU.clear()));else if(t)EU.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(EU)}const Son=1e-9;function Fte(e,t,n){return e===t?!0:n==="path"?Aje(e,t):e instanceof Date&&t instanceof Date?+e==+t:fr(e)&&fr(t)?Math.abs(e-t)<=Son:!e||!t||!mt(e)&&!mt(t)?e==t:xon(e,t)}function Aje(e,t){return Fte(NE(e),NE(t))}function xon(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Fte(e[i],t[i],i))return!1;return typeof e==typeof t}function Ton(){NBe(),Krn()}const LE="top",of="left",lf="right",B0="bottom",Aon="top-left",Con="top-right",Ion="bottom-left",Oon="bottom-right",Bte="start",Dq="middle",Da="end",Pon="x",kon="y",H5="group",jte="axis",Ute="title",$on="frame",Ron="scope",zte="legend",Cje="row-header",Ije="row-footer",Oje="row-title",Pje="column-header",kje="column-footer",$je="column-title",Non="padding",Don="symbol",Rje="fit",Nje="fit-x",Dje="fit-y",Mon="pad",Vte="none",kk="all",Mq="each",Hte="flush",kg="column",$g="row";function Mje(e){Ie.call(this,null,e)}tt(Mje,Ie,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Cl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=$k(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===H5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union($k(l,o))),r.role){case jte:case zte:case Ute:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union($k(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union($k(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return Tje(r),t.modifies("bounds")}});function $k(e,t,n){return t(e.bounds.clear(),e,n)}const Mve=":vega_identifier:";function qte(e){Ie.call(this,0,e)}qte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};tt(qte,Ie,{transform(e,t){const n=Lon(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Lon(e){return e._signals[Mve]||(e._signals[Mve]=e.add(0))}function Lje(e){Ie.call(this,null,e)}tt(Lje,Ie,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Fon(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===H5?N5:R5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Fon(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Fje(e){Ie.call(this,null,e)}const Lve={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Bje(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Bje=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Fve=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(Bje(i,s=e[n].bounds,t))return!0},Bon=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},jon=(e,t,n)=>{var r=e.range(),i=new Ts;return t===LE||t===B0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Bve=e=>(e.forEach(t=>t.opacity=1),e),jve=(e,t)=>e.reflow(t.modified()).modifies("opacity");tt(Fje,Ie,{transform(e,t){const n=Lve[e.method]||Lve.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Bve(i),t=jve(t,e)),t;if(i=i.filter(Bon),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Bve(i),t=jve(t,e),s.length>=3&&Fve(s,r)){do s=n(s,r);while(s.length>=3&&Fve(s,r));s.length<3&&!er(i).opacity&&(s.length>1&&(er(s).opacity=0),er(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=jon(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function jje(e){Ie.call(this,null,e)}tt(jje,Ie,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Zo=new Ts;function Kb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Uon(e){var t=e.items[0].orient;return t===of||t===lf}function zon(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Von(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=zon(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Tte(p),v=0,_=0,w,x;switch(Zo.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case LE:v=f||0,_=-c,x=Math.max(d,Math.min(h,-g.y1)),g.add(0,-x).add(l,0),p&&Rk(e,p,x,m,y,0,-1,g);break;case of:v=-c,_=f||0,x=Math.max(d,Math.min(h,-g.x1)),g.add(-x,0).add(0,l),p&&Rk(e,p,x,m,y,1,-1,g);break;case lf:v=n+c,_=f||0,x=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(x,l),p&&Rk(e,p,x,m,y,1,1,g);break;case B0:v=f||0,_=r+c,x=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,x),p&&Rk(e,p,x,m,0,0,1,g);break;default:v=i.x,_=i.y}return Tm(g.translate(v,_),i),Kb(i,"x",v+o)|Kb(i,"y",_+o)&&(i.bounds=Zo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Rk(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Uve=(e,t)=>Math.floor(Math.min(e,t)),zve=(e,t)=>Math.ceil(Math.max(e,t));function Hon(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===H5)switch(i.role){case jte:case zte:case Ute:break;case Cje:o.rowheaders.push(...s);break;case Ije:o.rowfooters.push(...s);break;case Pje:o.colheaders.push(...s);break;case kje:o.colfooters.push(...s);break;case Oje:o.rowtitle=s[0];break;case $je:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function qon(e){return new Ts().set(0,0,e.width||0,e.height||0)}function Won(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ti(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Vve(e){return e<0?Math.ceil(-e):0}function Uje(e,t,n){var r=!n.nodirty,i=n.bounds===Hte?qon:Won,s=Zo.set(0,0,0,0),o=Ti(n.align,kg),a=Ti(n.align,$g),u=Ti(n.padding,kg),l=Ti(n.padding,$g),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),x=Array(d),E,b,T,C,A,O,N,k,L,B,U;for(b=0;b<c;++b)p[b]=0;for(b=0;b<f;++b)y[b]=0;for(b=0;b<d;++b)O=t[b],A=x[b]=i(O),O.x=O.x||0,_[b]=0,O.y=O.y||0,w[b]=0,T=b%c,C=~~(b/c),m=Math.max(m,N=Math.ceil(A.x2)),v=Math.max(v,k=Math.ceil(A.y2)),p[T]=Math.max(p[T],N),y[C]=Math.max(y[C],k),h[b]=u+Vve(A.x1),g[b]=l+Vve(A.y1),r&&e.dirty(t[b]);for(b=0;b<d;++b)b%c===0&&(h[b]=0),b<c&&(g[b]=0);if(o===Mq)for(T=1;T<c;++T){for(U=0,b=T;b<d;b+=c)U<h[b]&&(U=h[b]);for(b=T;b<d;b+=c)h[b]=U+p[T-1]}else if(o===kk){for(U=0,b=0;b<d;++b)b%c&&U<h[b]&&(U=h[b]);for(b=0;b<d;++b)b%c&&(h[b]=U+m)}else for(o=!1,T=1;T<c;++T)for(b=T;b<d;b+=c)h[b]+=p[T-1];if(a===Mq)for(C=1;C<f;++C){for(U=0,b=C*c,E=b+c;b<E;++b)U<g[b]&&(U=g[b]);for(b=C*c;b<E;++b)g[b]=U+y[C-1]}else if(a===kk){for(U=0,b=c;b<d;++b)U<g[b]&&(U=g[b]);for(b=c;b<d;++b)g[b]=U+v}else for(a=!1,C=1;C<f;++C)for(b=C*c,E=b+c;b<E;++b)g[b]+=y[C-1];for(L=0,b=0;b<d;++b)L=h[b]+(b%c?L:0),_[b]+=L-t[b].x;for(T=0;T<c;++T)for(B=0,b=T;b<d;b+=c)B+=g[b],w[b]+=B-t[b].y;if(o&&Ti(n.center,kg)&&f>1)for(b=0;b<d;++b)A=o===kk?m:p[b%c],L=A-x[b].x2-t[b].x-_[b],L>0&&(_[b]+=L/2);if(a&&Ti(n.center,$g)&&c!==1)for(b=0;b<d;++b)A=a===kk?v:y[~~(b/c)],B=A-x[b].y2-t[b].y-w[b],B>0&&(w[b]+=B/2);for(b=0;b<d;++b)s.union(x[b].translate(_[b],w[b]));switch(L=Ti(n.anchor,Pon),B=Ti(n.anchor,kon),Ti(n.anchor,kg)){case Da:L-=s.width();break;case Dq:L-=s.width()/2}switch(Ti(n.anchor,$g)){case Da:B-=s.height();break;case Dq:B-=s.height()/2}for(L=Math.round(L),B=Math.round(B),s.clear(),b=0;b<d;++b)t[b].mark.bounds.clear();for(b=0;b<d;++b)O=t[b],O.x+=_[b]+=L,O.y+=w[b]+=B,s.union(O.mark.bounds.union(O.bounds.translate(_[b],w[b]))),r&&e.dirty(O);return s}function Gon(e,t,n){var r=Hon(t),i=r.marks,s=n.bounds===Hte?Yon:Kon,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=Uje(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Ti(n.headerBand,$g,null),c=Nk(e,r.rowheaders,i,a,u,-Ti(o,"rowHeader"),Uve,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Ti(n.headerBand,kg,null),f=Nk(e,r.colheaders,i,a,a,-Ti(o,"columnHeader"),Uve,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Ti(n.footerBand,$g,null),d=Nk(e,r.rowfooters,i,a,u,Ti(o,"rowFooter"),zve,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Ti(n.footerBand,kg,null),h=Nk(e,r.colfooters,i,a,a,Ti(o,"columnFooter"),zve,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Ti(n.titleAnchor,$g),g=Ti(o,"rowTitle"),g=p===Da?d+g:c-g,m=Ti(n.titleBand,$g,.5),Hve(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Ti(n.titleAnchor,kg),g=Ti(o,"columnTitle"),g=p===Da?h+g:f-g,m=Ti(n.titleBand,kg,.5),Hve(e,r.coltitle,g,1,y,m))}function Yon(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Kon(e,t){return e.bounds[t]}function Nk(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,x,E,b,T,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(E=t[v],x=E.mark.bounds,_=y;_>=0&&(b=n[_])==null;_-=d);a?(T=h==null?b.x:Math.round(b.bounds.x1+h*b.bounds.width()),C=m):(T=m,C=h==null?b.y:Math.round(b.bounds.y1+h*b.bounds.height())),x.union(E.bounds.translate(T-(E.x||0),C-(E.y||0))),E.x=T,E.y=C,e.dirty(E),g=o(g,x[l])}return g}function Hve(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Xon(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Qon(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Jon(e,t,n,r,i,s,o){const a=Xon(n,t),u=Qon(e,a("offset",0)),l=a("anchor",Bte),c=l===Da?1:l===Dq?.5:0,f={align:Mq,bounds:a("bounds",Hte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case of:f.anchor={x:Math.floor(r.x1)-u,column:Da,y:c*(o||r.height()+2*r.y1),row:l};break;case lf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case LE:f.anchor={y:Math.floor(i.y1)-u,row:Da,x:c*(s||i.width()+2*i.x1),column:l};break;case B0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Aon:f.anchor={x:u,y:u};break;case Con:f.anchor={x:s-u,y:u,column:Da};break;case Ion:f.anchor={x:u,y:o-u,row:Da};break;case Oon:f.anchor={x:s-u,y:o-u,column:Da,row:Da};break}return f}function Zon(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),tan(e,n,n.items[0].items[0]),s=ean(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Don&&nan(n.items[0].items[0].items[0].items),i!==Vte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Tm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function ean(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function tan(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&oT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case of:i+=Math.ceil(o.bounds.width())+u;break;case lf:case B0:break;default:s+=o.bounds.height()+u}switch((i||s)&&oT(e,n,i,s),o.orient){case of:c+=J_(t,n,o,a,1,1);break;case lf:l+=J_(t,n,o,Da,0,0)+u,c+=J_(t,n,o,a,1,1);break;case B0:l+=J_(t,n,o,a,0,0),c+=J_(t,n,o,Da,-1,0,1)+u;break;default:l+=J_(t,n,o,a,0,0)}(l||c)&&oT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(oT(e,n,-l,0),oT(e,o,-l,0))}}function J_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Tte(n);return Math.round(r===Bte?f:r===Da?d-h:.5*(c-h))}function oT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function nan(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function ran(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===of||a===lf?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==H5?a===of?(p=i.y2,h=i.y1):a===lf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===of&&(p=r,h=0),_=u===Bte?p:u===Da?h:(p+h)/2,d&&d.text){switch(a){case LE:case B0:v=f.bounds.height()+c;break;case of:y=f.bounds.width()+c;break;case lf:y=-f.bounds.width()-c;break}Zo.clear().union(d.bounds),Zo.translate(y-(d.x||0),v-(d.y||0)),Kb(d,"x",y)|Kb(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Zo),d.mark.bounds.clear().union(Zo),e.dirty(d)),Zo.clear().union(d.bounds)}else Zo.clear();switch(Zo.union(f.bounds),a){case LE:m=_,g=i.y1-Zo.height()-l;break;case of:m=i.x1-Zo.width()-l,g=_;break;case lf:m=i.x2+Zo.width()+l,g=_;break;case B0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return Kb(s,"x",m)|Kb(s,"y",g)&&(Zo.translate(m,g),e.dirty(s),s.bounds.clear().union(Zo),t.bounds.clear().union(Zo),e.dirty(s)),s.bounds}function zje(e){Ie.call(this,null,e)}tt(zje,Ie,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Gon(n,r,e.layout),san(n,r,e)}),ian(e.mark.group)?t.reflow():t}});function ian(e){return e&&e.mark.role!=="legend-entry"}function san(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case jte:h=Uon(f)?a:u,h.union(Von(e,f,i,s));break;case Ute:c=f;break;case zte:l.push(Zon(e,f));break;case $on:case Ron:case Cje:case Ije:case Oje:case Pje:case kje:case $je:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||lf,d!==Vte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];Uje(e,v,Jon(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===Rje||n.autosize.type===Nje||n.autosize.type===Dje))switch(y.orient){case of:case lf:o.add(v.x1,0).add(v.x2,0);break;case LE:case B0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(ran(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),oan(e,t,o,n)}function oan(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Non){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Vte?(l=0,f=0,u=o,c=a):s===Rje?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Nje?(u=Math.max(0,o-l-d),a=c+f+h):s===Dje?(o=u+l+d,c=Math.max(0,a-f-h)):s===Mon&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const aan=Object.freeze(Object.defineProperty({__proto__:null,bound:Mje,identifier:qte,mark:Lje,overlap:Fje,render:jje,viewlayout:zje},Symbol.toStringTag,{value:"Module"}));function Vje(e){Ie.call(this,null,e)}tt(Vje,Ie,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=ote(s,o,e.minstep),u=e.format||bBe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?_Be(s,e.values,a):ate(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Cr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Cr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Hje(e){Ie.call(this,null,e)}function uan(){return Cr({})}function lan(e){const t=GS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}tt(Hje,Ie,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||uan,s=e.key||Ut,o=this.value;return Ne(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&$e("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=lan(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function qje(e){Ie.call(this,null,e)}tt(qje,Ie,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ne(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Km,u=i.enter||Km,l=i.exit||Km,c=(s&&!o?i[s]:a)||Km;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Km&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Km&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Km){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Wje(e){Ie.call(this,[],e)}tt(Wje,Ie,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||mR,o=e.scale,a=+e.limit,u=ote(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===mR,c=e.format||xBe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||SBe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===mR?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Sn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Sa(m=p||8),i=i.map((y,v)=>Cr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Cr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Mrn?(d=o.domain(),h=gBe(o,d[0],er(d)),f.length<3&&!e.values&&d[0]!==er(d)&&(f=[d[0],er(d)]),i=f.map((y,v)=>Cr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=Grn(o),i=f.map((y,v)=>Cr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const can=e=>e.source.x,fan=e=>e.source.y,dan=e=>e.target.x,han=e=>e.target.y;function Wte(e){Ie.call(this,{},e)}Wte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};tt(Wte,Ie,{transform(e,t){var n=e.sourceX||can,r=e.sourceY||fan,i=e.targetX||dan,s=e.targetY||han,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=qve.get(u+"-"+a)||qve.get(u);return l||$e("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const Gje=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,pan=(e,t,n,r)=>Gje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Yje=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},man=(e,t,n,r)=>Yje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Kje=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},gan=(e,t,n,r)=>Kje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),yan=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,van=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,_an=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},ban=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},wan=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Ean=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},qve=GS({line:Gje,"line-radial":pan,arc:Yje,"arc-radial":man,curve:Kje,"curve-radial":gan,"orthogonal-horizontal":yan,"orthogonal-vertical":van,"orthogonal-radial":_an,"diagonal-horizontal":ban,"diagonal-vertical":wan,"diagonal-radial":Ean});function Gte(e){Ie.call(this,null,e)}Gte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};tt(Gte,Ie,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||HS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/$8e(l),h=y_(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const San=5;function xan(e){const t=e.type;return!e.bins&&(t===kE||t===mO||t===gO)}function Xje(e){return rte(e)&&e!==Gd}const Tan=Cf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Qje(e){Ie.call(this,null,e),this.modified(!0)}tt(Qje,Ie,{transform(e,t){var n=t.dataflow,r=this.value,i=Aan(e);(!r||i!==r.type)&&(this.value=r=br(i)());for(i in e)if(!Tan[i]){if(i==="padding"&&Xje(r.type))continue;Sn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return $an(r,e,kan(r,e,Ian(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Aan(e){var t=e.type,n="",r;return t===Gd?Gd+"-"+kE:(Can(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Gd+"-":r===3?QS+"-":""),(n+t||kE).toLowerCase())}function Can(e){const t=e.type;return rte(t)&&t!==O1&&t!==P1&&(e.scheme||e.range&&e.range.length&&e.range.every(dt))}function Ian(e,t,n){const r=Oan(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&xan(e),a,u;if(!i)return 0;if(Xje(s)&&t.padding&&i[0]!==er(i)&&(i=Pan(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(Jje(s,i,n)),s===Zee&&e.unknown(t.domainImplicit?SV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&ote(e,t.nice)||null),i.length}function Oan(e,t,n){return t?(e.domain(Jje(e.type,t,n)),t.length):-1}function Pan(e,t,n,r,i,s){var o=Math.abs(er(n)-n[0]),a=o/(o-2*r),u=e===um?WZ(t,null,a):e===gO?XM(t,null,a,.5):e===mO?XM(t,null,a,i||1):e===I5?GZ(t,null,a,s||1):qZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Jje(e,t,n){if(fBe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+it(t))}return t}function kan(e,t,n){let r=t.bins;if(r&&!Ne(r)){const i=e.domain(),s=i[0],o=er(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||$e("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=y_(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ete&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function $an(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Ran(r,t,n);else if(t.scheme&&(s=Nan(r,t,n),Sn(s))){if(e.interpolator)return e.interpolator(s);$e(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&dBe(r))return e.interpolator(k5(Lq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(ite(t.interpolate,t.interpolateGamma)):Sn(e.round)?e.round(i):Sn(e.rangeRound)&&e.interpolate(i?TI:bm),s&&e.range(Lq(s,t.reverse))}function Ran(e,t,n){e!==sBe&&e!==wq&&$e("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===wq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Jee(n,i,r)]}function Nan(e,t,n){var r=t.schemeExtent,i,s;return Ne(t.scheme)?s=k5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=ste(i),s||$e(`Unrecognized scheme name: ${t.scheme}`)),n=e===P5?n+1:e===ete?n-1:e===$E||e===O5?+t.schemeCount||San:n,dBe(e)?Wve(s,r,t.reverse):Sn(s)?mBe(Wve(s,r),n):e===Zee?s:s.slice(0,n)}function Wve(e,t,n){return Sn(e)&&(t||n)?pBe(e,Lq(t||[0,1],n)):e}function Lq(e,t){return t?e.slice().reverse():e}function Zje(e){Ie.call(this,null,e)}tt(Zje,Ie,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(v_(e.sort)),this.modified(n),t}});const Gve="zero",eUe="center",tUe="normalize",nUe=["y0","y1"];function Yte(e){Ie.call(this,null,e)}Yte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Gve,values:[Gve,eUe,tUe]},{name:"as",type:"string",array:!0,length:2,default:nUe}]};tt(Yte,Ie,{transform(e,t){var n=e.as||nUe,r=n[0],i=n[1],s=v_(e.sort),o=e.field||HS,a=e.offset===eUe?Dan:e.offset===tUe?Man:Lan,u,l,c,f;for(u=Fan(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Dan(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Man(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Lan(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Fan(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Ban=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Vje,datajoin:Hje,encode:qje,legendentries:Wje,linkpath:Wte,pie:Gte,scale:Qje,sortitems:Zje,stack:Yte},Symbol.toStringTag,{value:"Module"}));class Va{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*jan(e){for(const t of e)yield*t}function rUe(e){return Array.from(jan(e))}function Xb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Wt=1e-6,hL=1e-12,Mn=Math.PI,Qi=Mn/2,pL=Mn/4,Xa=Mn*2,ss=180/Mn,Nn=Mn/180,Zn=Math.abs,ZS=Math.atan,vc=Math.atan2,Kt=Math.cos,Dk=Math.ceil,iUe=Math.exp,Fq=Math.hypot,mL=Math.log,SU=Math.pow,zt=Math.sin,rc=Math.sign||function(e){return e>0?1:e<0?-1:0},Qa=Math.sqrt,Kte=Math.tan;function sUe(e){return e>1?0:e<-1?Mn:Math.acos(e)}function Bu(e){return e>1?Qi:e<-1?-Qi:Math.asin(e)}function Co(){}function gL(e,t){e&&Kve.hasOwnProperty(e.type)&&Kve[e.type](e,t)}var Yve={Feature:function(e,t){gL(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)gL(n[r].geometry,t)}},Kve={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Bq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Bq(n[r],t,0)},Polygon:function(e,t){Xve(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Xve(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)gL(n[r],t)}};function Bq(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Xve(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Bq(e[n],t,1);t.polygonEnd()}function lp(e,t){e&&Yve.hasOwnProperty(e.type)?Yve[e.type](e,t):gL(e,t)}var yL=new Va,vL=new Va,oUe,aUe,jq,Uq,zq,fh={point:Co,lineStart:Co,lineEnd:Co,polygonStart:function(){yL=new Va,fh.lineStart=Uan,fh.lineEnd=zan},polygonEnd:function(){var e=+yL;vL.add(e<0?Xa+e:e),this.lineStart=this.lineEnd=this.point=Co},sphere:function(){vL.add(Xa)}};function Uan(){fh.point=Van}function zan(){uUe(oUe,aUe)}function Van(e,t){fh.point=uUe,oUe=e,aUe=t,e*=Nn,t*=Nn,jq=e,Uq=Kt(t=t/2+pL),zq=zt(t)}function uUe(e,t){e*=Nn,t*=Nn,t=t/2+pL;var n=e-jq,r=n>=0?1:-1,i=r*n,s=Kt(t),o=zt(t),a=zq*o,u=Uq*s+a*Kt(i),l=a*r*zt(i);yL.add(vc(l,u)),jq=e,Uq=s,zq=o}function Han(e){return vL=new Va,lp(e,fh),vL*2}function _L(e){return[vc(e[1],e[0]),Bu(e[2])]}function $1(e){var t=e[0],n=e[1],r=Kt(n);return[r*Kt(t),r*zt(t),zt(n)]}function Mk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function FE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xU(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Lk(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bL(e){var t=Qa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Li,gu,Vi,sl,rv,lUe,cUe,Pw,tA,sg,lm,ep={point:Vq,lineStart:Qve,lineEnd:Jve,polygonStart:function(){ep.point=dUe,ep.lineStart=qan,ep.lineEnd=Wan,tA=new Va,fh.polygonStart()},polygonEnd:function(){fh.polygonEnd(),ep.point=Vq,ep.lineStart=Qve,ep.lineEnd=Jve,yL<0?(Li=-(Vi=180),gu=-(sl=90)):tA>Wt?sl=90:tA<-Wt&&(gu=-90),lm[0]=Li,lm[1]=Vi},sphere:function(){Li=-(Vi=180),gu=-(sl=90)}};function Vq(e,t){sg.push(lm=[Li=e,Vi=e]),t<gu&&(gu=t),t>sl&&(sl=t)}function fUe(e,t){var n=$1([e*Nn,t*Nn]);if(Pw){var r=FE(Pw,n),i=[r[1],-r[0],0],s=FE(i,r);bL(s),s=_L(s);var o=e-rv,a=o>0?1:-1,u=s[0]*ss*a,l,c=Zn(o)>180;c^(a*rv<u&&u<a*e)?(l=s[1]*ss,l>sl&&(sl=l)):(u=(u+360)%360-180,c^(a*rv<u&&u<a*e)?(l=-s[1]*ss,l<gu&&(gu=l)):(t<gu&&(gu=t),t>sl&&(sl=t))),c?e<rv?tl(Li,e)>tl(Li,Vi)&&(Vi=e):tl(e,Vi)>tl(Li,Vi)&&(Li=e):Vi>=Li?(e<Li&&(Li=e),e>Vi&&(Vi=e)):e>rv?tl(Li,e)>tl(Li,Vi)&&(Vi=e):tl(e,Vi)>tl(Li,Vi)&&(Li=e)}else sg.push(lm=[Li=e,Vi=e]);t<gu&&(gu=t),t>sl&&(sl=t),Pw=n,rv=e}function Qve(){ep.point=fUe}function Jve(){lm[0]=Li,lm[1]=Vi,ep.point=Vq,Pw=null}function dUe(e,t){if(Pw){var n=e-rv;tA.add(Zn(n)>180?n+(n>0?360:-360):n)}else lUe=e,cUe=t;fh.point(e,t),fUe(e,t)}function qan(){fh.lineStart()}function Wan(){dUe(lUe,cUe),fh.lineEnd(),Zn(tA)>Wt&&(Li=-(Vi=180)),lm[0]=Li,lm[1]=Vi,Pw=null}function tl(e,t){return(t-=e)<0?t+360:t}function Gan(e,t){return e[0]-t[0]}function Zve(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Yan(e){var t,n,r,i,s,o,a;if(sl=Vi=-(Li=gu=1/0),sg=[],lp(e,ep),n=sg.length){for(sg.sort(Gan),t=1,r=sg[0],s=[r];t<n;++t)i=sg[t],Zve(r,i[0])||Zve(r,i[1])?(tl(r[0],i[1])>tl(r[0],r[1])&&(r[1]=i[1]),tl(i[0],r[1])>tl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=tl(r[1],i[0]))>o&&(o=a,Li=i[0],Vi=r[1])}return sg=lm=null,Li===1/0||gu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Li,gu],[Vi,sl]]}var JT,wL,EL,SL,xL,TL,AL,CL,Hq,qq,Wq,hUe,pUe,Ma,La,Fa,cf={sphere:Co,point:Xte,lineStart:e1e,lineEnd:t1e,polygonStart:function(){cf.lineStart=Qan,cf.lineEnd=Jan},polygonEnd:function(){cf.lineStart=e1e,cf.lineEnd=t1e}};function Xte(e,t){e*=Nn,t*=Nn;var n=Kt(t);AO(n*Kt(e),n*zt(e),zt(t))}function AO(e,t,n){++JT,EL+=(e-EL)/JT,SL+=(t-SL)/JT,xL+=(n-xL)/JT}function e1e(){cf.point=Kan}function Kan(e,t){e*=Nn,t*=Nn;var n=Kt(t);Ma=n*Kt(e),La=n*zt(e),Fa=zt(t),cf.point=Xan,AO(Ma,La,Fa)}function Xan(e,t){e*=Nn,t*=Nn;var n=Kt(t),r=n*Kt(e),i=n*zt(e),s=zt(t),o=vc(Qa((o=La*s-Fa*i)*o+(o=Fa*r-Ma*s)*o+(o=Ma*i-La*r)*o),Ma*r+La*i+Fa*s);wL+=o,TL+=o*(Ma+(Ma=r)),AL+=o*(La+(La=i)),CL+=o*(Fa+(Fa=s)),AO(Ma,La,Fa)}function t1e(){cf.point=Xte}function Qan(){cf.point=Zan}function Jan(){mUe(hUe,pUe),cf.point=Xte}function Zan(e,t){hUe=e,pUe=t,e*=Nn,t*=Nn,cf.point=mUe;var n=Kt(t);Ma=n*Kt(e),La=n*zt(e),Fa=zt(t),AO(Ma,La,Fa)}function mUe(e,t){e*=Nn,t*=Nn;var n=Kt(t),r=n*Kt(e),i=n*zt(e),s=zt(t),o=La*s-Fa*i,a=Fa*r-Ma*s,u=Ma*i-La*r,l=Fq(o,a,u),c=Bu(l),f=l&&-c/l;Hq.add(f*o),qq.add(f*a),Wq.add(f*u),wL+=c,TL+=c*(Ma+(Ma=r)),AL+=c*(La+(La=i)),CL+=c*(Fa+(Fa=s)),AO(Ma,La,Fa)}function eun(e){JT=wL=EL=SL=xL=TL=AL=CL=0,Hq=new Va,qq=new Va,Wq=new Va,lp(e,cf);var t=+Hq,n=+qq,r=+Wq,i=Fq(t,n,r);return i<hL&&(t=TL,n=AL,r=CL,wL<Wt&&(t=EL,n=SL,r=xL),i=Fq(t,n,r),i<hL)?[NaN,NaN]:[vc(n,t)*ss,Bu(r/i)*ss]}function Gq(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Yq(e,t){return Zn(e)>Mn&&(e-=Math.round(e/Xa)*Xa),[e,t]}Yq.invert=Yq;function gUe(e,t,n){return(e%=Xa)?t||n?Gq(r1e(e),i1e(t,n)):r1e(e):t||n?i1e(t,n):Yq}function n1e(e){return function(t,n){return t+=e,Zn(t)>Mn&&(t-=Math.round(t/Xa)*Xa),[t,n]}}function r1e(e){var t=n1e(e);return t.invert=n1e(-e),t}function i1e(e,t){var n=Kt(e),r=zt(e),i=Kt(t),s=zt(t);function o(a,u){var l=Kt(u),c=Kt(a)*l,f=zt(a)*l,d=zt(u),h=d*n+c*r;return[vc(f*i-h*s,c*n-d*r),Bu(h*i+f*s)]}return o.invert=function(a,u){var l=Kt(u),c=Kt(a)*l,f=zt(a)*l,d=zt(u),h=d*i-f*s;return[vc(f*i+d*s,c*n+h*r),Bu(h*n-c*r)]},o}function tun(e){e=gUe(e[0]*Nn,e[1]*Nn,e.length>2?e[2]*Nn:0);function t(n){return n=e(n[0]*Nn,n[1]*Nn),n[0]*=ss,n[1]*=ss,n}return t.invert=function(n){return n=e.invert(n[0]*Nn,n[1]*Nn),n[0]*=ss,n[1]*=ss,n},t}function nun(e,t,n,r,i,s){if(n){var o=Kt(t),a=zt(t),u=r*n;i==null?(i=t+r*Xa,s=t-u/2):(i=s1e(o,i),s=s1e(o,s),(r>0?i<s:i>s)&&(i+=r*Xa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=_L([o,-a*Kt(c),-a*zt(c)]),e.point(l[0],l[1])}}function s1e(e,t){t=$1(t),t[0]-=e,bL(t);var n=sUe(-t[1]);return((-t[2]<0?-n:n)+Xa-Wt)%Xa}function yUe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Co,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function SR(e,t){return Zn(e[0]-t[0])<Wt&&Zn(e[1]-t[1])<Wt}function Fk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function vUe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(SR(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Wt}s.push(v=new Fk(g,p,null,!0)),o.push(v.o=new Fk(g,null,v,!1)),s.push(v=new Fk(y,p,null,!1)),o.push(v.o=new Fk(y,null,v,!0))}}),!!s.length){for(o.sort(t),o1e(s),o1e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function o1e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function TU(e){return Zn(e[0])<=Mn?e[0]:rc(e[0])*((Zn(e[0])+Mn)%Xa-Mn)}function run(e,t){var n=TU(t),r=t[1],i=zt(r),s=[zt(n),-Kt(n),0],o=0,a=0,u=new Va;i===1?r=Qi+Wt:i===-1&&(r=-Qi-Wt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=TU(h),m=h[1]/2+pL,g=zt(m),y=Kt(m),v=0;v<d;++v,p=w,g=E,y=b,h=_){var _=f[v],w=TU(_),x=_[1]/2+pL,E=zt(x),b=Kt(x),T=w-p,C=T>=0?1:-1,A=C*T,O=A>Mn,N=g*E;if(u.add(vc(N*C*zt(A),y*b+N*Kt(A))),o+=O?T+C*Xa:T,O^p>=n^w>=n){var k=FE($1(h),$1(_));bL(k);var L=FE(s,k);bL(L);var B=(O^T>=0?-1:1)*Bu(L[2]);(r>B||r===B&&(k[0]||k[1]))&&(a+=O^T>=0?1:-1)}}return(o<-Wt||o<Wt&&u<-hL)^a&1}function _Ue(e,t,n,r){return function(i){var s=t(i),o=yUe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=rUe(c);var w=run(l,r);c.length?(u||(i.polygonStart(),u=!0),vUe(c,sun,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,x){e(w,x)&&i.point(w,x)}function p(w,x){s.point(w,x)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,x){f.push([w,x]),a.point(w,x)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),E,b=x.length,T,C,A;if(f.pop(),l.push(f),f=null,!!b){if(w&1){if(C=x[0],(T=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),E=0;E<T;++E)i.point((A=C[E])[0],A[1]);i.lineEnd()}return}b>1&&w&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(iun))}}return d}}function iun(e){return e.length>1}function sun(e,t){return((e=e.x)[0]<0?e[1]-Qi-Wt:Qi-e[1])-((t=t.x)[0]<0?t[1]-Qi-Wt:Qi-t[1])}const a1e=_Ue(function(){return!0},oun,uun,[-Mn,-Qi]);function oun(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Mn:-Mn,u=Zn(s-t);Zn(u-Mn)<Wt?(e.point(t,n=(n+o)/2>0?Qi:-Qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Mn&&(Zn(t-r)<Wt&&(t-=r*Wt),Zn(s-a)<Wt&&(s-=a*Wt),n=aun(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aun(e,t,n,r){var i,s,o=zt(e-n);return Zn(o)>Wt?ZS((zt(t)*(s=Kt(r))*zt(n)-zt(r)*(i=Kt(t))*zt(e))/(i*s*o)):(t+r)/2}function uun(e,t,n,r){var i;if(e==null)i=n*Qi,r.point(-Mn,i),r.point(0,i),r.point(Mn,i),r.point(Mn,0),r.point(Mn,-i),r.point(0,-i),r.point(-Mn,-i),r.point(-Mn,0),r.point(-Mn,i);else if(Zn(e[0]-t[0])>Wt){var s=e[0]<t[0]?Mn:-Mn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function lun(e){var t=Kt(e),n=2*Nn,r=t>0,i=Zn(t)>Wt;function s(c,f,d,h){nun(h,e,n,d,c,f)}function o(c,f){return Kt(c)*Kt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),x=r?w?0:l(g,y):w?l(g+(g<0?Mn:-Mn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||SR(f,_)||SR(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var E;!(x&d)&&(E=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}w&&(!f||!SR(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=$1(c),p=$1(f),m=[1,0,0],g=FE(h,p),y=Mk(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,x=-t*v/_,E=FE(m,g),b=Lk(m,w),T=Lk(g,x);xU(b,T);var C=E,A=Mk(b,C),O=Mk(C,C),N=A*A-O*(Mk(b,b)-1);if(!(N<0)){var k=Qa(N),L=Lk(C,(-A-k)/O);if(xU(L,b),L=_L(L),!d)return L;var B=c[0],U=f[0],G=c[1],H=f[1],Y;U<B&&(Y=B,B=U,U=Y);var q=U-B,D=Zn(q-Mn)<Wt,M=D||q<Wt;if(!D&&H<G&&(Y=G,G=H,H=Y),M?D?G+H>0^L[1]<(Zn(L[0]-B)<Wt?G:H):G<=L[1]&&L[1]<=H:q>Mn^(B<=L[0]&&L[0]<=U)){var W=Lk(C,(-A+k)/O);return xU(W,b),[L,_L(W)]}}}function l(c,f){var d=r?e:Mn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return _Ue(o,a,s,r?[0,-e]:[-Mn,e-Mn])}function cun(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var ZT=1e9,Bk=-ZT;function bUe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Zn(l[0]-e)<Wt?c>0?0:3:Zn(l[0]-n)<Wt?c>0?2:1:Zn(l[1]-t)<Wt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=yUe(),d,h,p,m,g,y,v,_,w,x,E,b={point:T,lineStart:N,lineEnd:k,polygonStart:A,polygonEnd:O};function T(B,U){i(B,U)&&c.point(B,U)}function C(){for(var B=0,U=0,G=h.length;U<G;++U)for(var H=h[U],Y=1,q=H.length,D=H[0],M,W,z=D[0],V=D[1];Y<q;++Y)M=z,W=V,D=H[Y],z=D[0],V=D[1],W<=r?V>r&&(z-M)*(r-W)>(V-W)*(e-M)&&++B:V<=r&&(z-M)*(r-W)<(V-W)*(e-M)&&--B;return B}function A(){c=f,d=[],h=[],E=!0}function O(){var B=C(),U=E&&B,G=(d=rUe(d)).length;(U||G)&&(l.polygonStart(),U&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&vUe(d,a,B,s,l),l.polygonEnd()),c=l,d=h=p=null}function N(){b.point=L,h&&h.push(p=[]),x=!0,w=!1,v=_=NaN}function k(){d&&(L(m,g),y&&w&&f.rejoin(),d.push(f.result())),b.point=T,w&&c.lineEnd()}function L(B,U){var G=i(B,U);if(h&&p.push([B,U]),x)m=B,g=U,y=G,x=!1,G&&(c.lineStart(),c.point(B,U));else if(G&&w)c.point(B,U);else{var H=[v=Math.max(Bk,Math.min(ZT,v)),_=Math.max(Bk,Math.min(ZT,_))],Y=[B=Math.max(Bk,Math.min(ZT,B)),U=Math.max(Bk,Math.min(ZT,U))];cun(H,Y,e,t,n,r)?(w||(c.lineStart(),c.point(H[0],H[1])),c.point(Y[0],Y[1]),G||c.lineEnd(),E=!1):G&&(c.lineStart(),c.point(B,U),E=!1)}v=B,_=U,w=G}return b}}function u1e(e,t,n){var r=Xb(e,t-Wt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function l1e(e,t,n){var r=Xb(e,t-Wt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function fun(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Xb(Dk(r/c)*c,n,c).map(p).concat(Xb(Dk(a/f)*f,o,f).map(m)).concat(Xb(Dk(t/u)*u,e,u).filter(function(_){return Zn(_%c)>Wt}).map(d)).concat(Xb(Dk(s/l)*l,i,l).filter(function(_){return Zn(_%f)>Wt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=u1e(s,i,90),h=l1e(t,e,g),p=u1e(a,o,90),m=l1e(r,n,g),y):g},y.extentMajor([[-180,-90+Wt],[180,90-Wt]]).extentMinor([[-180,-80-Wt],[180,80+Wt]])}const DC=e=>e;var AU=new Va,Kq=new Va,wUe,EUe,Xq,Qq,yg={point:Co,lineStart:Co,lineEnd:Co,polygonStart:function(){yg.lineStart=dun,yg.lineEnd=pun},polygonEnd:function(){yg.lineStart=yg.lineEnd=yg.point=Co,AU.add(Zn(Kq)),Kq=new Va},result:function(){var e=AU/2;return AU=new Va,e}};function dun(){yg.point=hun}function hun(e,t){yg.point=SUe,wUe=Xq=e,EUe=Qq=t}function SUe(e,t){Kq.add(Qq*e-Xq*t),Xq=e,Qq=t}function pun(){SUe(wUe,EUe)}const c1e=yg;var BE=1/0,IL=BE,MC=-BE,OL=MC,mun={point:gun,lineStart:Co,lineEnd:Co,polygonStart:Co,polygonEnd:Co,result:function(){var e=[[BE,IL],[MC,OL]];return MC=OL=-(IL=BE=1/0),e}};function gun(e,t){e<BE&&(BE=e),e>MC&&(MC=e),t<IL&&(IL=t),t>OL&&(OL=t)}const PL=mun;var Jq=0,Zq=0,e2=0,kL=0,$L=0,Qb=0,eW=0,tW=0,t2=0,xUe,TUe,Sd,xd,af={point:R1,lineStart:f1e,lineEnd:d1e,polygonStart:function(){af.lineStart=_un,af.lineEnd=bun},polygonEnd:function(){af.point=R1,af.lineStart=f1e,af.lineEnd=d1e},result:function(){var e=t2?[eW/t2,tW/t2]:Qb?[kL/Qb,$L/Qb]:e2?[Jq/e2,Zq/e2]:[NaN,NaN];return Jq=Zq=e2=kL=$L=Qb=eW=tW=t2=0,e}};function R1(e,t){Jq+=e,Zq+=t,++e2}function f1e(){af.point=yun}function yun(e,t){af.point=vun,R1(Sd=e,xd=t)}function vun(e,t){var n=e-Sd,r=t-xd,i=Qa(n*n+r*r);kL+=i*(Sd+e)/2,$L+=i*(xd+t)/2,Qb+=i,R1(Sd=e,xd=t)}function d1e(){af.point=R1}function _un(){af.point=wun}function bun(){AUe(xUe,TUe)}function wun(e,t){af.point=AUe,R1(xUe=Sd=e,TUe=xd=t)}function AUe(e,t){var n=e-Sd,r=t-xd,i=Qa(n*n+r*r);kL+=i*(Sd+e)/2,$L+=i*(xd+t)/2,Qb+=i,i=xd*e-Sd*t,eW+=i*(Sd+e),tW+=i*(xd+t),t2+=i*3,R1(Sd=e,xd=t)}const h1e=af;function CUe(e){this._context=e}CUe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Xa);break}}},result:Co};var nW=new Va,CU,IUe,OUe,n2,r2,RL={point:Co,lineStart:function(){RL.point=Eun},lineEnd:function(){CU&&PUe(IUe,OUe),RL.point=Co},polygonStart:function(){CU=!0},polygonEnd:function(){CU=null},result:function(){var e=+nW;return nW=new Va,e}};function Eun(e,t){RL.point=PUe,IUe=n2=e,OUe=r2=t}function PUe(e,t){n2-=e,r2-=t,nW.add(Qa(n2*n2+r2*r2)),n2=e,r2=t}const p1e=RL;let m1e,NL,g1e,y1e;class v1e{constructor(t){this._append=t==null?kUe:Sun(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==g1e||this._append!==NL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,g1e=r,NL=this._append,y1e=this._,this._=i}this._+=y1e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function kUe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Sun(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return kUe;if(t!==m1e){const n=10**t;m1e=t,NL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return NL}function $Ue(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),lp(a,i(s))),s.result()}return o.area=function(a){return lp(a,i(c1e)),c1e.result()},o.measure=function(a){return lp(a,i(p1e)),p1e.result()},o.bounds=function(a){return lp(a,i(PL)),PL.result()},o.centroid=function(a){return lp(a,i(h1e)),h1e.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,DC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new v1e(n)):new CUe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new v1e(n)),o},o.projection(e).digits(n).context(t)}function q5(e){return function(t){var n=new rW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function rW(){}rW.prototype={constructor:rW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qte(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),lp(n,e.stream(PL)),t(PL.result()),r!=null&&e.clipExtent(r),e}function W5(e,t,n){return Qte(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function Jte(e,t,n){return W5(e,[[0,0],t],n)}function Zte(e,t,n){return Qte(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function ene(e,t,n){return Qte(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var _1e=16,xun=Kt(30*Nn);function b1e(e,t){return+t?Aun(e,t):Tun(e)}function Tun(e){return q5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Aun(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+d,x=a+h,E=u+p,b=Qa(w*w+x*x+E*E),T=Bu(E/=b),C=Zn(Zn(E)-1)<Wt||Zn(s-f)<Wt?(s+f)/2:vc(x,w),A=e(C,T),O=A[0],N=A[1],k=O-r,L=N-i,B=v*k-y*L;(B*B/_>t||Zn((y*k+v*L)/_-.5)>.3||o*d+a*h+u*p<xun)&&(n(r,i,s,o,a,u,O,N,C,w/=b,x/=b,E,m,g),g.point(O,N),n(O,N,C,w,x,E,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,C){T=e(T,C),r.point(T[0],T[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(T,C){var A=$1([T,C]),O=e(T,C);n(f,d,c,h,p,m,f=O[0],d=O[1],c=T,h=A[0],p=A[1],m=A[2],_1e,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function x(){v(),g.point=E,g.lineEnd=b}function E(T,C){_(i=T,C),s=f,o=d,a=h,u=p,l=m,g.point=_}function b(){n(f,d,c,h,p,m,s,o,i,a,u,l,_1e,r),g.lineEnd=w,w()}return g}}var Cun=q5({point:function(e,t){this.stream.point(e*Nn,t*Nn)}});function Iun(e){return q5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Oun(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function w1e(e,t,n,r,i,s){if(!s)return Oun(e,t,n,r,i);var o=Kt(s),a=zt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Th(e){return RUe(function(){return e})()}function RUe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=a1e,g=null,y,v,_,w=DC,x=.5,E,b,T,C,A;function O(B){return T(B[0]*Nn,B[1]*Nn)}function N(B){return B=T.invert(B[0],B[1]),B&&[B[0]*ss,B[1]*ss]}O.stream=function(B){return C&&A===B?C:C=Cun(Iun(c)(m(E(w(A=B)))))},O.preclip=function(B){return arguments.length?(m=B,p=void 0,L()):m},O.postclip=function(B){return arguments.length?(w=B,g=y=v=_=null,L()):w},O.clipAngle=function(B){return arguments.length?(m=+B?lun(p=B*Nn):(p=null,a1e),L()):p*ss},O.clipExtent=function(B){return arguments.length?(w=B==null?(g=y=v=_=null,DC):bUe(g=+B[0][0],y=+B[0][1],v=+B[1][0],_=+B[1][1]),L()):g==null?null:[[g,y],[v,_]]},O.scale=function(B){return arguments.length?(n=+B,k()):n},O.translate=function(B){return arguments.length?(r=+B[0],i=+B[1],k()):[r,i]},O.center=function(B){return arguments.length?(s=B[0]%360*Nn,o=B[1]%360*Nn,k()):[s*ss,o*ss]},O.rotate=function(B){return arguments.length?(a=B[0]%360*Nn,u=B[1]%360*Nn,l=B.length>2?B[2]%360*Nn:0,k()):[a*ss,u*ss,l*ss]},O.angle=function(B){return arguments.length?(f=B%360*Nn,k()):f*ss},O.reflectX=function(B){return arguments.length?(d=B?-1:1,k()):d<0},O.reflectY=function(B){return arguments.length?(h=B?-1:1,k()):h<0},O.precision=function(B){return arguments.length?(E=b1e(b,x=B*B),L()):Qa(x)},O.fitExtent=function(B,U){return W5(O,B,U)},O.fitSize=function(B,U){return Jte(O,B,U)},O.fitWidth=function(B,U){return Zte(O,B,U)},O.fitHeight=function(B,U){return ene(O,B,U)};function k(){var B=w1e(n,0,0,d,h,f).apply(null,t(s,o)),U=w1e(n,r-B[0],i-B[1],d,h,f);return c=gUe(a,u,l),b=Gq(t,U),T=Gq(c,b),E=b1e(b,x),L()}function L(){return C=A=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&N,k()}}function tne(e){var t=0,n=Mn/3,r=RUe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Nn,n=s[1]*Nn):[t*ss,n*ss]},i}function Pun(e){var t=Kt(e);function n(r,i){return[r*t,zt(i)/t]}return n.invert=function(r,i){return[r/t,Bu(i*t)]},n}function kun(e,t){var n=zt(e),r=(n+zt(t))/2;if(Zn(r)<Wt)return Pun(e);var i=1+n*(2*r-n),s=Qa(i)/r;function o(a,u){var l=Qa(i-2*r*zt(u))/r;return[l*zt(a*=r),s-l*Kt(a)]}return o.invert=function(a,u){var l=s-u,c=vc(a,Zn(l))*rc(l);return l*r<0&&(c-=Mn*rc(a)*rc(l)),[c/r,Bu((i-(a*a+l*l)*r*r)/(2*r))]},o}function DL(){return tne(kun).scale(155.424).center([0,33.6442])}function NUe(){return DL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function $un(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Run(){var e,t,n=NUe(),r,i=DL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=DL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=$un([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Wt,m+.12*h+Wt],[p-.214*h-Wt,m+.234*h-Wt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Wt,m+.166*h+Wt],[p-.115*h-Wt,m+.234*h-Wt]]).stream(l),f()},c.fitExtent=function(d,h){return W5(c,d,h)},c.fitSize=function(d,h){return Jte(c,d,h)},c.fitWidth=function(d,h){return Zte(c,d,h)},c.fitHeight=function(d,h){return ene(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function DUe(e){return function(t,n){var r=Kt(t),i=Kt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*zt(t),s*zt(n)]}}function CO(e){return function(t,n){var r=Qa(t*t+n*n),i=e(r),s=zt(i),o=Kt(i);return[vc(t*s,r*o),Bu(r&&n*s/r)]}}var MUe=DUe(function(e){return Qa(2/(1+e))});MUe.invert=CO(function(e){return 2*Bu(e/2)});function Nun(){return Th(MUe).scale(124.75).clipAngle(180-.001)}var LUe=DUe(function(e){return(e=sUe(e))&&e/zt(e)});LUe.invert=CO(function(e){return e});function Dun(){return Th(LUe).scale(79.4188).clipAngle(180-.001)}function G5(e,t){return[e,mL(Kte((Qi+t)/2))]}G5.invert=function(e,t){return[e,2*ZS(iUe(t))-Qi]};function Mun(){return FUe(G5).scale(961/Xa)}function FUe(e){var t=Th(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Mn*r(),d=t(tun(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===G5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function jk(e){return Kte((Qi+e)/2)}function Lun(e,t){var n=Kt(e),r=e===t?zt(e):mL(n/Kt(t))/mL(jk(t)/jk(e)),i=n*SU(jk(e),r)/r;if(!r)return G5;function s(o,a){i>0?a<-Qi+Wt&&(a=-Qi+Wt):a>Qi-Wt&&(a=Qi-Wt);var u=i/SU(jk(a),r);return[u*zt(r*o),i-u*Kt(r*o)]}return s.invert=function(o,a){var u=i-a,l=rc(r)*Qa(o*o+u*u),c=vc(o,Zn(u))*rc(u);return u*r<0&&(c-=Mn*rc(o)*rc(u)),[c/r,2*ZS(SU(i/l,1/r))-Qi]},s}function Fun(){return tne(Lun).scale(109.5).parallels([30,30])}function ML(e,t){return[e,t]}ML.invert=ML;function Bun(){return Th(ML).scale(152.63)}function jun(e,t){var n=Kt(e),r=e===t?zt(e):(n-Kt(t))/(t-e),i=n/r+e;if(Zn(r)<Wt)return ML;function s(o,a){var u=i-a,l=r*o;return[u*zt(l),i-u*Kt(l)]}return s.invert=function(o,a){var u=i-a,l=vc(o,Zn(u))*rc(u);return u*r<0&&(l-=Mn*rc(o)*rc(u)),[l/r,i-rc(r)*Qa(o*o+u*u)]},s}function Uun(){return tne(jun).scale(131.154).center([0,13.9389])}var nA=1.340264,rA=-.081106,iA=893e-6,sA=.003796,LL=Qa(3)/2,zun=12;function BUe(e,t){var n=Bu(LL*zt(t)),r=n*n,i=r*r*r;return[e*Kt(n)/(LL*(nA+3*rA*r+i*(7*iA+9*sA*r))),n*(nA+rA*r+i*(iA+sA*r))]}BUe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<zun&&(a=n*(nA+rA*r+i*(iA+sA*r))-t,u=nA+3*rA*r+i*(7*iA+9*sA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Zn(o)<hL));++s);return[LL*e*(nA+3*rA*r+i*(7*iA+9*sA*r))/Kt(n),Bu(zt(n)/LL)]};function Vun(){return Th(BUe).scale(177.158)}function jUe(e,t){var n=Kt(t),r=Kt(e)*n;return[n*zt(e)/r,zt(t)/r]}jUe.invert=CO(ZS);function Hun(){return Th(jUe).scale(144.049).clipAngle(60)}function qun(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=q5({point:function(w,x){var E=_([w,x]);this.stream.point(E[0],E[1])}}),m=DC,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var x=w[0]*d,E=w[1]*h;if(s){var b=E*o-x*a;x=x*o+E*a,E=b}return[x+t,E+n]}return _.invert=function(w){var x=w[0]-t,E=w[1]-n;if(s){var b=E*o+x*a;x=x*o-E*a,E=b}return[x/d,E/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,DC):bUe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Nn,a=zt(s),o=Kt(s),v()):s*ss},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,x){return W5(_,w,x)},_.fitSize=function(w,x){return Jte(_,w,x)},_.fitWidth=function(w,x){return Zte(_,w,x)},_.fitHeight=function(w,x){return ene(_,w,x)},_}function UUe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}UUe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Zn(i)>Wt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Wun(){return Th(UUe).scale(175.295)}function zUe(e,t){return[Kt(t)*zt(e),zt(t)]}zUe.invert=CO(Bu);function Gun(){return Th(zUe).scale(249.5).clipAngle(90+Wt)}function VUe(e,t){var n=Kt(t),r=1+Kt(e)*n;return[n*zt(e)/r,zt(t)/r]}VUe.invert=CO(function(e){return 2*ZS(e)});function Yun(){return Th(VUe).scale(250).clipAngle(142)}function HUe(e,t){return[mL(Kte((Qi+t)/2)),-e]}HUe.invert=function(e,t){return[-t,2*ZS(iUe(e))-Qi]};function Kun(){var e=FUe(HUe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Xun=Math.abs,iW=Math.cos,FL=Math.sin,Qun=1e-6,qUe=Math.PI,sW=qUe/2,E1e=Jun(2);function S1e(e){return e>1?sW:e<-1?-sW:Math.asin(e)}function Jun(e){return e>0?Math.sqrt(e):0}function Zun(e,t){var n=e*FL(t),r=30,i;do t-=i=(t+FL(t)-n)/(1+iW(t));while(Xun(i)>Qun&&--r>0);return t/2}function eln(e,t,n){function r(i,s){return[e*i*iW(s=Zun(n,s)),t*FL(s)]}return r.invert=function(i,s){return s=S1e(s/t),[i/(e*iW(s)),S1e((2*s+FL(2*s))/n)]},r}var tln=eln(E1e/sW,E1e,qUe);function nln(){return Th(tln).scale(169.529)}const rln=$Ue(),oW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function iln(e,t){return function n(){const r=t();return r.type=e,r.path=$Ue().projection(r),r.copy=r.copy||function(){const i=n();return oW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},lBe(r)}}function nne(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(BL[e]=iln(e,t),this):BL[e]||null}function WUe(e){return e&&e.path||rln}const BL={albers:NUe,albersusa:Run,azimuthalequalarea:Nun,azimuthalequidistant:Dun,conicconformal:Fun,conicequalarea:DL,conicequidistant:Uun,equalEarth:Vun,equirectangular:Bun,gnomonic:Hun,identity:qun,mercator:Mun,mollweide:nln,naturalEarth1:Wun,orthographic:Gun,stereographic:Yun,transversemercator:Kun};for(const e in BL)nne(e,BL[e]);function sln(){}const zh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function GUe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),oln(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(aln((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,zh[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,zh[m|g<<1].forEach(_);for(zh[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,zh[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,zh[m|g<<1|y<<2|v<<3].forEach(_);zh[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,zh[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,zh[y<<2|v<<3].forEach(_);zh[y<<3].forEach(_);function _(w){var x=[w[0][0]+h,w[0][1]+p],E=[w[1][0]+h,w[1][1]+p],b=o(x),T=o(E),C,A;(C=d[b])?(A=f[T])?(delete d[C.end],delete f[A.start],C===A?(C.ring.push(E),c(C.ring)):f[C.start]=d[A.end]={start:C.start,end:A.end,ring:C.ring.concat(A.ring)}):(delete d[C.end],C.ring.push(E),d[C.end=T]=C):(C=f[T])?(A=d[b])?(delete f[C.start],delete d[A.end],C===A?(C.ring.push(E),c(C.ring)):f[A.start]=d[C.end]={start:A.start,end:C.end,ring:A.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(x),f[C.start=b]=C):f[b]=d[T]={start:b,end:T,ring:[x,E]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||$e("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:sln,r):n===a},r}function oln(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function aln(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=uln(e,t[n]))return i;return 0}function uln(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(lln(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function lln(e,t,n){var r;return cln(e,t,n)&&fln(e[r=+(e[0]===t[0])],n[r],t[r])}function cln(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function fln(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function YUe(e,t,n){return function(r){var i=lh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?AC(s,o,e):a/(e+1);return y_(s+u,o,u)}}function rne(e){Ie.call(this,null,e)}rne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};tt(rne,Ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ea,s=GUe().smooth(e.smooth!==!1),o=e.thresholds||dln(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ne(o)?o:o(c.values));hln(f,c,l,e),f.forEach(d=>{u.push(_5(l,Cr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function dln(e,t,n){const r=YUe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Zv(t(i).values)))}function hln(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Sn(i)&&(i=i(n,r)),Sn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(fr(i)?i:i[0])||1,a=(fr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(KUe(t,o,a,u,l))}function KUe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function x1e(e,t,n){const r=e>=0?e:dee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function IU(e){return Sn(e)?e:Sa(+e)}function XUe(){var e=u=>u[0],t=u=>u[1],n=HS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=x1e(r[0],u,e)>>o,f=x1e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const x=d+(+e(w)>>o),E=h+(+t(w)>>o);x>=0&&x<p&&E>=0&&E<m&&(g[x+E*p]+=+n(w))}),c>0&&f>0?(Z_(p,m,g,y,c),eb(p,m,y,g,f),Z_(p,m,g,y,c),eb(p,m,y,g,f),Z_(p,m,g,y,c),eb(p,m,y,g,f)):c>0?(Z_(p,m,g,y,c),Z_(p,m,y,g,c),Z_(p,m,g,y,c),v=y):f>0&&(eb(p,m,g,y,f),eb(p,m,y,g,f),eb(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/$8e(v);for(let w=0,x=p*m;w<x;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=IU(u),a):e},a.y=function(u){return arguments.length?(t=IU(u),a):t},a.weight=function(u){return arguments.length?(n=IU(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||$e("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||$e("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ft(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&$e("invalid bandwidth"),r=u,a):r},a}function Z_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function eb(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function ine(e){Ie.call(this,null,e)}ine.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const pln=["x","y","weight","size","cellSize","bandwidth"];function QUe(e,t){return pln.forEach(n=>t[n]!=null?e[n](t[n]):0),e}tt(ine,Ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=mln(r,e.groupby),s=(e.groupby||[]).map(Ji),o=QUe(XUe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Cr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mln(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function sne(e){Ie.call(this,null,e)}sne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};tt(sne,Ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=GUe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||YUe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=QUe(XUe(),e)(i,!0),u=KUe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ne(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Cr),n}});const aW="Feature",one="FeatureCollection",gln="MultiPoint";function ane(e){Ie.call(this,null,e)}ane.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};tt(ane,Ie,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ea,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(da(a))||s&&t.modified(da(s))||o&&t.modified(da(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:aW,geometry:{type:gln,coordinates:r}})),this.value={type:one,features:n}}});function une(e){Ie.call(this,null,e)}une.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};tt(une,Ie,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ea,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=WUe(e.projection),n.materialize().reflow()):o=i===Ea||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=yln(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function yln(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function lne(e){Ie.call(this,null,e)}lne.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};tt(lne,Ie,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function cne(e){Ie.call(this,null,e)}cne.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};tt(cne,Ie,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=vln(WUe(e.projection),e.field||pc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function vln(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function fne(e){Ie.call(this,[],e),this.generator=fun()}fne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};tt(fne,Ie,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Sn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(h9e(n[0],i)):t.add.push(Cr(i)),n[0]=i,t}});function dne(e){Ie.call(this,null,e)}dne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};tt(dne,Ie,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ea,s=bln(e.opacity,e),o=_ln(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Zv(n.map(l=>Zv(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=En({},l,u);r||(f.$max=Zv(c.values||[])),l[a]=wln(c,f,o.dep?o:Sa(o(f)),s.dep?s:Sa(s(f)))}),t.reflow(!0).modifies(a)}});function _ln(e,t){let n;return Sn(e)?(n=r=>g0(e(r,t)),n.dep=JUe(e)):n=Sa(g0(e||"#888")),n}function bln(e,t){let n;return Sn(e)?(n=r=>e(r,t),n.dep=JUe(e)):e?n=Sa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function JUe(e){if(!Sn(e))return!1;const t=Cf(da(e));return t.$x||t.$y||t.$value||t.$max}function wln(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:gg,d=s0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function ZUe(e){Ie.call(this,null,e),this.modified(!0)}tt(ZUe,Ie,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Sln(e.type),oW.forEach(r=>{e[r]!=null&&T1e(n,r,e[r])})):oW.forEach(r=>{e.modified(r)&&T1e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Eln(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Eln(e,t){const n=xln(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Sln(e){const t=nne((e||"mercator").toLowerCase());return t||$e("Unrecognized projection type: "+e),t()}function T1e(e,t,n){Sn(e[t])&&e[t](n)}function xln(e){return e=ft(e),e.length===1?e[0]:{type:one,features:e.reduce((t,n)=>t.concat(Tln(n)),[])}}function Tln(e){return e.type===one?e.features:ft(e).filter(t=>t!=null).map(t=>t.type===aW?t:{type:aW,geometry:t})}const Aln=Object.freeze(Object.defineProperty({__proto__:null,contour:sne,geojson:ane,geopath:une,geopoint:lne,geoshape:cne,graticule:fne,heatmap:dne,isocontour:rne,kde2d:ine,projection:ZUe},Symbol.toStringTag,{value:"Module"})),A1e={center:HCt,collide:lIt,nbody:bIt,link:fIt,x:wIt,y:EIt},i2="forces",uW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Cln=["static","iterations"],e7e=["x","y","vx","vy"];function hne(e){Ie.call(this,null,e)}hne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:e7e}]};tt(hne,Ie,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(uW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&t7e(n,e,0,t)):(this.value=n=Oln(t.source,e),n.on("tick",Iln(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Cln)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==i2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(e7e)}});function Iln(e,t){return()=>e.touch(t).run()}function Oln(e,t){const n=_It(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),t7e(n,t,!0).on("end",()=>s=!0)}function t7e(e,t,n,r){var i=ft(t.forces),s,o,a,u;for(s=0,o=uW.length;s<o;++s)a=uW[s],a!==i2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=i2+s,a=n||t.modified(i2,s)?kln(i[s]):r&&Pln(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(i2+s,null);return e.numForces=i.length,e}function Pln(e,t){var n,r;for(n in e)if(Sn(r=e[n])&&t.modified(da(r)))return 1;return 0}function kln(e){var t,n;Vt(A1e,e.force)||$e("Unrecognized force: "+e.force),t=A1e[e.force]();for(n in e)Sn(t[n])&&$ln(t[n],e[n],e);return t}function $ln(e,t,n){e(Sn(t)?r=>t(r,n):t)}const Rln=Object.freeze(Object.defineProperty({__proto__:null,force:hne},Symbol.toStringTag,{value:"Module"}));function lW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function pne(e){Ie.call(this,null,e)}pne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Nln=e=>e.values;tt(pne,Ie,{transform(e,t){t.source||$e("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&v5(o.data)&&i.rem.push(o.data)}),this.value=s=q4({values:ft(e.keys).reduce((o,a)=>(o.key(a),o),Dln()).entries(i.source)},Nln),n&&s.each(o=>{o.children&&(o=Cr(o.data),i.add.push(o),i.source.push(o))}),lW(s,Ut,Ut)),i.source.root=s,i}});function Dln(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Am(e){Ie.call(this,null,e)}const Mln=(e,t)=>e.parent===t.parent?1:2;tt(Am,Ie,{transform(e,t){(!t.source||!t.source.root)&&$e(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(v_(e.sort,o=>o.data)),Lln(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Mln:HS);try{this.value=n(i)}catch(o){$e(o)}return i.each(o=>Fln(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Lln(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function Fln(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const cW=["x","y","r","depth","children"];function mne(e){Am.call(this,e)}mne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cW.length,default:cW}]};tt(mne,Am,{layout:I$e,params:["radius","size","padding"],fields:cW});const fW=["x0","y0","x1","y1","depth","children"];function gne(e){Am.call(this,e)}gne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fW.length,default:fW}]};tt(gne,Am,{layout:pOt,params:["size","round","padding"],fields:fW});function yne(e){Ie.call(this,null,e)}yne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};tt(yne,Ie,{transform(e,t){t.source||$e("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?lW(Qhe().id(e.key).parentId(e.parentKey)(i.source),e.key,mc):lW(Qhe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const C1e={tidy:xOt,cluster:LIt},dW=["x","y","depth","children"];function vne(e){Am.call(this,e)}vne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:dW.length,default:dW}]};tt(vne,Am,{layout(e){const t=e||"tidy";if(Vt(C1e,t))return C1e[t]();$e("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:dW});function _ne(e){Ie.call(this,[],e)}_ne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};tt(_ne,Ie,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||$e("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ut(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ut(a)]&&s[Ut(u)]&&i.add.push(Cr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ut(o)]=1),n.forEach(o=>{(s[Ut(o.source)]||s[Ut(o.target)])&&i.mod.push(o)})),i}});const I1e={binary:AOt,dice:CI,slice:W4,slicedice:COt,squarify:$$e,resquarify:IOt},hW=["x0","y0","x1","y1","depth","children"];function bne(e){Am.call(this,e)}bne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hW.length,default:hW}]};tt(bne,Am,{layout(){const e=TOt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Vt(I1e,t)?e.tile(I1e[t]):$e("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:hW});const Bln=Object.freeze(Object.defineProperty({__proto__:null,nest:pne,pack:mne,partition:gne,stratify:yne,tree:vne,treelinks:_ne,treemap:bne},Symbol.toStringTag,{value:"Module"})),OU=4278190080;function jln(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Uln(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=s0(s,o).getContext("2d"),l=s0(s,o).getContext("2d"),c=a&&s0(s,o).getContext("2d");n.forEach(T=>xR(u,T,!1)),xR(l,t,!1),a&&xR(c,t,!0);const f=PU(u,s,o),d=PU(l,s,o),h=a&&PU(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,x,E,b;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,x=f[w]&OU,b=d[w]&OU,E=a&&h[w]&OU,(x||E||b)&&(v=e(g),_=e(y),!i&&(x||b)&&p.set(v,_),a&&(x||E)&&m.set(v,_));return[p,m]}function PU(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function xR(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>xR(e,s.items,n))}):Cl[r].draw(e,{items:n?t.map(zln):t})}function zln(e){const t=_5(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Vh=5,ka=31,LC=32,og=new Uint32Array(LC+1),ef=new Uint32Array(LC+1);ef[0]=0;og[0]=~ef[0];for(let e=1;e<=LC;++e)ef[e]=ef[e-1]<<1|1,og[e]=~ef[e];function Vln(e,t){const n=new Uint32Array(~~((e*t+LC)/LC));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Vh]&1<<(a&ka)},set:(s,o)=>{const a=o*e+s;r(a>>>Vh,1<<(a&ka))},clear:(s,o)=>{const a=o*e+s;i(a>>>Vh,~(1<<(a&ka)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Vh,h=f>>>Vh,d===h){if(n[d]&og[c&ka]&ef[(f&ka)+1])return!0}else{if(n[d]&og[c&ka]||n[h]&ef[(f&ka)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Vh,d=c>>>Vh,f===d)r(f,og[l&ka]&ef[(c&ka)+1]);else for(r(f,og[l&ka]),r(d,ef[(c&ka)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Vh,d=c>>>Vh,f===d)i(f,ef[l&ka]|og[(c&ka)+1]);else for(i(f,ef[l&ka]),i(d,og[(c&ka)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function Hln(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Vln(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function qln(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=yl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function jL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Rg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function Wln(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!jL(p,m,d,h,i,s)&&!Rg(e,p,m,h,d,g,o,a)&&!Rg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Rg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=yl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,x,E,b,T,C,A,O,N,k,L,B,U,G,H;for(let Y=0;Y<f;++Y){for(v=c[Y].x,w=c[Y].y,_=c[Y].x2===void 0?v:c[Y].x2,x=c[Y].y2===void 0?w:c[Y].y2,v>_&&(H=v,v=_,_=H),w>x&&(H=w,w=x,x=H),A=e(v),N=e(_),O=~~((A+N)/2),k=e(w),B=e(x),L=~~((k+B)/2),T=O;T>=A;--T)for(C=L;C>=k;--C)G=u(T,C,p,h,d),G&&([l.x,l.y,p,m]=G);for(T=O;T<=N;++T)for(C=L;C<=B;++C)G=u(T,C,p,h,d),G&&([l.x,l.y,p,m]=G);!m&&!n&&(U=Math.abs(_-v+x-w),E=(v+_)/2,b=(w+x)/2,U>=y&&!jL(E,b,h,d,i,s)&&!Rg(e,E,b,d,h,d,o,null)&&(y=U,l.x=E,l.y=b,g=!0))}return m||g?(E=h/2,b=d/2,o.setRange(e(l.x-E),e(l.y-b),e(l.x+E),e(l.y+b)),l.align="center",l.baseline="middle",!0):!1}}const Gln=[-1,-1,1,1],Yln=[-1,1,-1,1];function Kln(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=yl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,x,E,b,T,C,A,O,N,k,L;for(let B=0;B<f;++B){for(_=c[B].x,x=c[B].y,w=c[B].x2===void 0?_:c[B].x2,E=c[B].y2===void 0?x:c[B].y2,p.push([e((_+w)/2),e((x+E)/2)]);p.length;)if([C,A]=p.pop(),!(o.get(C,A)||a.get(C,A)||u.get(C,A))){u.set(C,A);for(let U=0;U<4;++U)b=C+Gln[U],T=A+Yln[U],u.outOfBounds(b,T,b,T)||p.push([b,T]);if(b=e.invert(C),T=e.invert(A),O=m,N=s,!jL(b,T,h,d,i,s)&&!Rg(e,b,T,d,h,O,o,a)&&!Rg(e,b,T,d,h,d,o,null)){for(;N-O>=1;)k=(O+N)/2,Rg(e,b,T,d,h,k,o,a)?N=k:O=k;O>m&&(l.x=b,l.y=T,m=O,g=!0)}}!g&&!n&&(L=Math.abs(w-_+E-x),b=(_+w)/2,T=(x+E)/2,L>=v&&!jL(b,T,h,d,i,s)&&!Rg(e,b,T,d,h,d,o,null)&&(v=L,l.x=b,l.y=T,y=!0))}return g||y?(b=h/2,T=d/2,o.setRange(e(l.x-b),e(l.y-T),e(l.x+b),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const Xln=["right","center","left"],Qln=["bottom","middle","top"];function Jln(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,x,E,b,T,C,A,O;for(let N=0;N<u;++N){if(h=(n[N]&3)-1,p=(n[N]>>>2&3)-1,m=h===0&&p===0||r[N]<0,g=h&&p?Math.SQRT1_2:1,y=r[N]<0?-1:1,v=c[1+h]+r[N]*h*g,b=c[4+p]+y*f*p/2+r[N]*p*g,w=b-f/2,x=b+f/2,T=e(v),A=e(w),O=e(x),!d)if(O1e(T,T,A,O,o,a,v,v,w,x,c,m))d=yl.width(l.datum,l.datum.text);else continue;if(E=v+y*d*h/2,v=E-d/2,_=E+d/2,T=e(v),C=e(_),O1e(T,C,A,O,o,a,v,_,w,x,c,m))return l.x=h?h*y<0?_:v:E,l.y=p?p*y<0?x:w:b,l.align=Xln[h*y+1],l.baseline=Qln[p*y+1],o.setRange(T,A,C,O),!0}return!1}}function O1e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const kU=0,$U=4,RU=8,NU=0,DU=1,MU=2,Zln={"top-left":kU+NU,top:kU+DU,"top-right":kU+MU,left:$U+NU,middle:$U+DU,right:$U+MU,"bottom-left":RU+NU,bottom:RU+DU,"bottom-right":RU+MU},ecn={naive:qln,"reduced-search":Wln,floodfill:Kln};function tcn(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=ncn(r,f),h=rcn(i,f),p=icn(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=scn(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,x=-1;const E=e.map(A=>{const O=v?yl.width(A,A.text):void 0;return w=Math.max(w,O),x=Math.max(x,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(A),textWidth:O}});l=l===null||l===1/0?Math.max(w,x)+Math.max(...r):l;const b=Hln(t[0],t[1],l);let T;if(!_){n&&E.sort((N,k)=>n(N.datum,k.datum));let A=!1;for(let N=0;N<h.length&&!A;++N)A=h[N]===5||d[N]<0;const O=(p&&o||g)&&e.map(N=>N.datum);T=s.length||O?Uln(b,O||[],s,A,g):jln(b,o&&E)}const C=g?ecn[c](b,T,o,u):Jln(b,T,h,d);return E.forEach(A=>A.opacity=+C(A)),E}function ncn(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function rcn(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Zln[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function icn(e){return e&&e.mark&&e.mark.marktype}function scn(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const pW=["x","y","opacity","align","baseline"],n7e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function wne(e){Ie.call(this,null,e)}wne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:n7e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:pW.length,default:pW}]};tt(wne,Ie,{transform(e,t){function n(s){const o=e[s];return Sn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&$e("Size parameter should be specified as a [width, height] array.");const i=e.as||pW;return tcn(t.materialize(t.SOURCE).source||[],e.size,e.sort,ft(e.offset==null?1:e.offset),ft(e.anchor||n7e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const ocn=Object.freeze(Object.defineProperty({__proto__:null,label:wne},Symbol.toStringTag,{value:"Module"}));function r7e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ene(e){Ie.call(this,null,e)}Ene.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};tt(Ene,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=r7e(r,e.groupby),s=(e.groupby||[]).map(Ji),o=s.length,a=e.as||[Ji(e.x),Ji(e.y)],u=[];i.forEach(l=>{k9e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Cr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const mW={constant:xee,linear:Tee,log:C9e,exp:I9e,pow:O9e,quad:Aee,poly:P9e},acn=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Sne(e){Ie.call(this,null,e)}Sne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(mW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};tt(Sne,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=r7e(r,e.groupby),s=(e.groupby||[]).map(Ji),o=e.method||"linear",a=e.order==null?3:e.order,u=acn(o,a),l=e.as||[Ji(e.x),Ji(e.y)],c=mW[o],f=[];let d=e.extent;Vt(mW,o)||$e("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Cr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||lh(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Cr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):A5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const ucn=Object.freeze(Object.defineProperty({__proto__:null,loess:Ene,regression:Sne},Symbol.toStringTag,{value:"Module"})),P1e=1e-6;class Mv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>P1e||Math.abs(this._y1-s)>P1e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class gW{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let lcn=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,x=r[m+1]*2,E=r[m+2]*2,b=t[w],T=t[w+1],C=t[x],A=t[x+1],O=t[E],N=t[E+1],k=C-b,L=A-T,B=O-b,U=N-T,G=(k*U-L*B)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const Y of n)s+=t[Y*2],o+=t[Y*2+1];s/=n.length,o/=n.length}const H=1e9*Math.sign((s-b)*U-(o-T)*B);v=(b+O)/2-H*U,_=(T+N)/2+H*B}else{const H=1/G,Y=k*k+L*L,q=B*B+U*U;v=b+(U*Y-L*q)*H,_=T+(k*q-B*Y)*H}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Mv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Mv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Mv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new gW;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const ccn=2*Math.PI,tb=Math.pow;function fcn(e){return e[0]}function dcn(e){return e[1]}function hcn(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function pcn(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class xne{static from(t,n=fcn,r=dcn,i){return new xne("length"in t?mcn(t,n,r,i):Float64Array.from(gcn(t,n,r,i)))}constructor(t){this._delaunator=new b3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&hcn(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=pcn(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new b3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new lcn(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=tb(n-l[t*2],2)+tb(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=tb(n-l[p*2],2)+tb(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&tb(n-l[h*2],2)+tb(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Mv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Mv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,ccn)}return r&&r.value()}renderHull(t){const n=t==null?t=new Mv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gW;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Mv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gW;return this.renderTriangle(t,n),n.value()}}function mcn(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*gcn(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Tne(e){Ie.call(this,null,e)}Tne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const ycn=[-1e5,-1e5,1e5,1e5];tt(Tne,Ie,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:ycn;const s=this.value=xne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!_cn(u)?vcn(u):null}return t.reflow(e.modified()).modifies(n)}});function vcn(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function _cn(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const bcn=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Tne},Symbol.toStringTag,{value:"Module"}));var LU=Math.PI/180,s2=64,TR=2048;function wcn(){var e=[256,256],t,n,r,i,s,o,a,u=i7e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(s0()),m=Ccn((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(E=>({text:t(E),font:n(E),style:i(E),weight:s(E),rotate:o(E),size:~~(r(E)+1e-14),padding:a(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,b)=>b.size-E.size);++v<y;){var x=w[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,Ecn(p,x,w,v),x.hasText&&h(m,x,g)&&(_.push(x),g?xcn(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(s2<<5)/m,p.height=TR/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),x=c()<.5?1:-1,E=-x,b,T,C;(b=w(E+=x))&&(T=~~b[0],C=~~b[1],!(Math.min(Math.abs(T),Math.abs(C))>=_));)if(m.x=y+T,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Scn(m,p,e[0]))&&(!g||Tcn(m,g))){for(var A=m.sprite,O=m.width>>5,N=e[0]>>5,k=m.x-(O<<4),L=k&127,B=32-L,U=m.y1-m.y0,G=(m.y+m.y0)*N+(k>>5),H,Y=0;Y<U;Y++){H=0;for(var q=0;q<=O;q++)p[G+q]|=H<<B|(q<O?(H=A[Y*O+q])>>>L:0);G+=N}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Ny(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Ny(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Ny(p),f):s},f.rotate=function(p){return arguments.length?(o=Ny(p),f):o},f.text=function(p){return arguments.length?(t=Ny(p),f):t},f.spiral=function(p){return arguments.length?(u=Icn[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Ny(p),f):r},f.padding=function(p){return arguments.length?(a=Ny(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Ecn(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(s2<<5)/s,TR/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*LU),g=Math.cos(t.rotate*LU),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=s2<<5&&(o=0,a+=u,u=0),a+d>=TR)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*LU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(s2<<5)/s,TR/s).data,E=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)E[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var b=0,T=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),A=x[(a+p)*(s2<<5)+(o+h)<<2]?1<<31-h%32:0;E[C]|=A,b|=A}b?T=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+T,t.sprite=E.slice(0,(t.y1-t.y0)*f)}}}function Scn(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function xcn(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Tcn(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function i7e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Acn(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Ccn(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ny(e){return typeof e=="function"?e:function(){return e}}var Icn={archimedean:i7e,rectangular:Acn};const s7e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Ocn=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Ane(e){Ie.call(this,wcn(),e)}Ane.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:s7e}]};tt(Ane,Ie,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&$e("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Sn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Ocn.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||s7e;let a=e.fontSize||14,u;if(Sn(a)?u=e.fontSizeRange:a=Sa(a),u){const p=a,m=br("sqrt")().domain(lh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(yc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Pcn=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Ane},Symbol.toStringTag,{value:"Module"})),kcn=e=>new Uint8Array(e),$cn=e=>new Uint16Array(e),oA=e=>new Uint32Array(e);function Rcn(){let e=8,t=[],n=oA(0),r=Uk(0,e),i=Uk(0,e);return{data:()=>t,seen:()=>n=Ncn(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=Uk(s,e,r),i=Uk(s,e))}}}function Ncn(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Uk(e,t,n){const r=(t<257?kcn:t<65537?$cn:oA)(e);return n&&r.set(n),r}function k1e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function $1e(){let e=oA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=oA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Dcn(h,d),c)p=t,m=e,t=Array(c+f),e=oA(c+f),Mcn(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Hen(u,a[0],0,l),QM(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Dcn(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Yen(e,t)}function Mcn(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Cne(e){Ie.call(this,Rcn(),e),this._indices=null,this._dims=null}Cne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};tt(Cne,Ie,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=$1e()),s.push(k1e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,x,E,b;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,x=0,E=v.length;x<E;++x)w[v[x]._index]=1;for(x=0;x<h;++x)b=r[x],(!o[x]||e.modified("fields",x)||t.modified(b.fields))&&(y=b.fname,(m=p[y])||(s[y]=g=$1e(),p[y]=m=g.insert(b,t.source,0)),o[x]=k1e(g,x,i[x]).onAdd(m,u));for(x=0,E=a.data().length;x<E;++x)_[x]||(l[x]!==u[x]?f.push(x):w[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Ine(e){Ie.call(this,null,e)}Ine.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};tt(Ine,Ie,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Lcn=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Cne,resolvefilter:Ine},Symbol.toStringTag,{value:"Module"})),Fcn="RawCode",N1="Literal",Bcn="Property",jcn="Identifier",Ucn="ArrayExpression",zcn="BinaryExpression",o7e="CallExpression",Vcn="ConditionalExpression",Hcn="LogicalExpression",qcn="MemberExpression",Wcn="ObjectExpression",Gcn="UnaryExpression";function Ff(e){this.type=e}Ff.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Ycn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Ycn(e){switch(e.type){case Ucn:return e.elements;case zcn:case Hcn:return[e.left,e.right];case o7e:return[e.callee].concat(e.arguments);case Vcn:return[e.test,e.consequent,e.alternate];case qcn:return[e.object,e.property];case Wcn:return e.properties;case Bcn:return[e.key,e.value];case Gcn:return[e.argument];case jcn:case N1:case Fcn:default:return[]}}var Ah,Rt,Pe,pa,Dr,Y5=1,IO=2,D1=3,hy=4,K5=5,w_=6,hu=7,OO=8,Kcn=9;Ah={};Ah[Y5]="Boolean";Ah[IO]="<end>";Ah[D1]="Identifier";Ah[hy]="Keyword";Ah[K5]="Null";Ah[w_]="Numeric";Ah[hu]="Punctuator";Ah[OO]="String";Ah[Kcn]="RegularExpression";var Xcn="ArrayExpression",Qcn="BinaryExpression",Jcn="CallExpression",Zcn="ConditionalExpression",a7e="Identifier",efn="Literal",tfn="LogicalExpression",nfn="MemberExpression",rfn="ObjectExpression",ifn="Property",sfn="UnaryExpression",io="Unexpected token %0",ofn="Unexpected number",afn="Unexpected string",ufn="Unexpected identifier",lfn="Unexpected reserved word",cfn="Unexpected end of input",yW="Invalid regular expression",FU="Invalid regular expression: missing /",u7e="Octal literals are not allowed in strict mode.",ffn="Duplicate data property in object literal not allowed in strict mode",Io="ILLEGAL",FC="Disabled.",dfn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),hfn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function X5(e,t){if(!e)throw new Error("ASSERT: "+t)}function tp(e){return e>=48&&e<=57}function One(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function aA(e){return"01234567".indexOf(e)>=0}function pfn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function BC(e){return e===10||e===13||e===8232||e===8233}function PO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&dfn.test(String.fromCharCode(e))}function UL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&hfn.test(String.fromCharCode(e))}const mfn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function l7e(){for(;Pe<pa;){const e=Rt.charCodeAt(Pe);if(pfn(e)||BC(e))++Pe;else break}}function vW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Pe<pa&&One(Rt[Pe])?(r=Rt[Pe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):vr({},io,Io);return String.fromCharCode(i)}function gfn(){var e,t,n,r;for(e=Rt[Pe],t=0,e==="}"&&vr({},io,Io);Pe<pa&&(e=Rt[Pe++],!!One(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&vr({},io,Io),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function c7e(){var e,t;for(e=Rt.charCodeAt(Pe++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt(Pe)!==117&&vr({},io,Io),++Pe,e=vW("u"),(!e||e==="\\"||!PO(e.charCodeAt(0)))&&vr({},io,Io),t=e);Pe<pa&&(e=Rt.charCodeAt(Pe),!!UL(e));)++Pe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt(Pe)!==117&&vr({},io,Io),++Pe,e=vW("u"),(!e||e==="\\"||!UL(e.charCodeAt(0)))&&vr({},io,Io),t+=e);return t}function yfn(){var e,t;for(e=Pe++;Pe<pa;){if(t=Rt.charCodeAt(Pe),t===92)return Pe=e,c7e();if(UL(t))++Pe;else break}return Rt.slice(e,Pe)}function vfn(){var e,t,n;return e=Pe,t=Rt.charCodeAt(Pe)===92?c7e():yfn(),t.length===1?n=D1:mfn.hasOwnProperty(t)?n=hy:t==="null"?n=K5:t==="true"||t==="false"?n=Y5:n=D1,{type:n,value:t,start:e,end:Pe}}function BU(){var e=Pe,t=Rt.charCodeAt(Pe),n,r=Rt[Pe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Pe,{type:hu,value:String.fromCharCode(t),start:e,end:Pe};default:if(n=Rt.charCodeAt(Pe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Pe+=2,{type:hu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Pe};case 33:case 61:return Pe+=2,Rt.charCodeAt(Pe)===61&&++Pe,{type:hu,value:Rt.slice(e,Pe),start:e,end:Pe}}}if(o=Rt.substr(Pe,4),o===">>>=")return Pe+=4,{type:hu,value:o,start:e,end:Pe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Pe+=3,{type:hu,value:s,start:e,end:Pe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Pe+=2,{type:hu,value:i,start:e,end:Pe};if(i==="//"&&vr({},io,Io),"<>=!+-*%&|^/".indexOf(r)>=0)return++Pe,{type:hu,value:r,start:e,end:Pe};vr({},io,Io)}function _fn(e){let t="";for(;Pe<pa&&One(Rt[Pe]);)t+=Rt[Pe++];return t.length===0&&vr({},io,Io),PO(Rt.charCodeAt(Pe))&&vr({},io,Io),{type:w_,value:parseInt("0x"+t,16),start:e,end:Pe}}function bfn(e){let t="0"+Rt[Pe++];for(;Pe<pa&&aA(Rt[Pe]);)t+=Rt[Pe++];return(PO(Rt.charCodeAt(Pe))||tp(Rt.charCodeAt(Pe)))&&vr({},io,Io),{type:w_,value:parseInt(t,8),octal:!0,start:e,end:Pe}}function R1e(){var e,t,n;if(n=Rt[Pe],X5(tp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Pe,e="",n!=="."){if(e=Rt[Pe++],n=Rt[Pe],e==="0"){if(n==="x"||n==="X")return++Pe,_fn(t);if(aA(n))return bfn(t);n&&tp(n.charCodeAt(0))&&vr({},io,Io)}for(;tp(Rt.charCodeAt(Pe));)e+=Rt[Pe++];n=Rt[Pe]}if(n==="."){for(e+=Rt[Pe++];tp(Rt.charCodeAt(Pe));)e+=Rt[Pe++];n=Rt[Pe]}if(n==="e"||n==="E")if(e+=Rt[Pe++],n=Rt[Pe],(n==="+"||n==="-")&&(e+=Rt[Pe++]),tp(Rt.charCodeAt(Pe)))for(;tp(Rt.charCodeAt(Pe));)e+=Rt[Pe++];else vr({},io,Io);return PO(Rt.charCodeAt(Pe))&&vr({},io,Io),{type:w_,value:parseFloat(e),start:t,end:Pe}}function wfn(){var e="",t,n,r,i,s=!1;for(t=Rt[Pe],X5(t==="'"||t==='"',"String literal must starts with a quote"),n=Pe,++Pe;Pe<pa;)if(r=Rt[Pe++],r===t){t="";break}else if(r==="\\")if(r=Rt[Pe++],!r||!BC(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[Pe]==="{"?(++Pe,e+=gfn()):e+=vW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:aA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Pe<pa&&aA(Rt[Pe])&&(s=!0,i=i*8+"01234567".indexOf(Rt[Pe++]),"0123".indexOf(r)>=0&&Pe<pa&&aA(Rt[Pe])&&(i=i*8+"01234567".indexOf(Rt[Pe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[Pe]===`
`&&++Pe;else{if(BC(r.charCodeAt(0)))break;e+=r}return t!==""&&vr({},io,Io),{type:OO,value:e,octal:s,start:n,end:Pe}}function Efn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";vr({},yW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{vr({},yW)}try{return new RegExp(e,t)}catch{return null}}function Sfn(){var e,t,n,r,i;for(e=Rt[Pe],X5(e==="/","Regular expression literal must start with a slash"),t=Rt[Pe++],n=!1,r=!1;Pe<pa;)if(e=Rt[Pe++],t+=e,e==="\\")e=Rt[Pe++],BC(e.charCodeAt(0))&&vr({},FU),t+=e;else if(BC(e.charCodeAt(0)))vr({},FU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||vr({},FU),i=t.substr(1,t.length-2),{value:i,literal:t}}function xfn(){var e,t,n;for(t="",n="";Pe<pa&&(e=Rt[Pe],!!UL(e.charCodeAt(0)));)++Pe,e==="\\"&&Pe<pa?vr({},io,Io):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&vr({},yW,n),{value:n,literal:t}}function Tfn(){var e,t,n,r;return Dr=null,l7e(),e=Pe,t=Sfn(),n=xfn(),r=Efn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Pe}}function Afn(e){return e.type===D1||e.type===hy||e.type===Y5||e.type===K5}function f7e(){if(l7e(),Pe>=pa)return{type:IO,start:Pe,end:Pe};const e=Rt.charCodeAt(Pe);return PO(e)?vfn():e===40||e===41||e===59?BU():e===39||e===34?wfn():e===46?tp(Rt.charCodeAt(Pe+1))?R1e():BU():tp(e)?R1e():BU()}function wu(){const e=Dr;return Pe=e.end,Dr=f7e(),Pe=e.end,e}function d7e(){const e=Pe;Dr=f7e(),Pe=e}function Cfn(e){const t=new Ff(Xcn);return t.elements=e,t}function N1e(e,t,n){const r=new Ff(e==="||"||e==="&&"?tfn:Qcn);return r.operator=e,r.left=t,r.right=n,r}function Ifn(e,t){const n=new Ff(Jcn);return n.callee=e,n.arguments=t,n}function Ofn(e,t,n){const r=new Ff(Zcn);return r.test=e,r.consequent=t,r.alternate=n,r}function Pne(e){const t=new Ff(a7e);return t.name=e,t}function o2(e){const t=new Ff(efn);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function D1e(e,t,n){const r=new Ff(nfn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Pfn(e){const t=new Ff(rfn);return t.properties=e,t}function M1e(e,t,n){const r=new Ff(ifn);return r.key=t,r.value=n,r.kind=e,r}function kfn(e,t){const n=new Ff(sfn);return n.operator=e,n.argument=t,n.prefix=!0,n}function vr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(X5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Pe,n.description=i,n}function Q5(e){e.type===IO&&vr(e,cfn),e.type===w_&&vr(e,ofn),e.type===OO&&vr(e,afn),e.type===D1&&vr(e,ufn),e.type===hy&&vr(e,lfn),vr(e,io,e.value)}function ma(e){const t=wu();(t.type!==hu||t.value!==e)&&Q5(t)}function yi(e){return Dr.type===hu&&Dr.value===e}function jU(e){return Dr.type===hy&&Dr.value===e}function $fn(){const e=[];for(Pe=Dr.start,ma("[");!yi("]");)yi(",")?(wu(),e.push(null)):(e.push(M1()),yi("]")||ma(","));return wu(),Cfn(e)}function L1e(){Pe=Dr.start;const e=wu();return e.type===OO||e.type===w_?(e.octal&&vr(e,u7e),o2(e)):Pne(e.value)}function Rfn(){var e,t,n,r;if(Pe=Dr.start,e=Dr,e.type===D1)return n=L1e(),ma(":"),r=M1(),M1e("init",n,r);if(e.type===IO||e.type===hu)Q5(e);else return t=L1e(),ma(":"),r=M1(),M1e("init",t,r)}function Nfn(){var e=[],t,n,r,i={},s=String;for(Pe=Dr.start,ma("{");!yi("}");)t=Rfn(),t.key.type===a7e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?vr({},ffn):i[r]=!0,e.push(t),yi("}")||ma(",");return ma("}"),Pfn(e)}function Dfn(){ma("(");const e=kne();return ma(")"),e}const Mfn={if:1};function Lfn(){var e,t,n;if(yi("("))return Dfn();if(yi("["))return $fn();if(yi("{"))return Nfn();if(e=Dr.type,Pe=Dr.start,e===D1||Mfn[Dr.value])n=Pne(wu().value);else if(e===OO||e===w_)Dr.octal&&vr(Dr,u7e),n=o2(wu());else{if(e===hy)throw new Error(FC);e===Y5?(t=wu(),t.value=t.value==="true",n=o2(t)):e===K5?(t=wu(),t.value=null,n=o2(t)):yi("/")||yi("/=")?(n=o2(Tfn()),d7e()):Q5(wu())}return n}function Ffn(){const e=[];if(ma("("),!yi(")"))for(;Pe<pa&&(e.push(M1()),!yi(")"));)ma(",");return ma(")"),e}function Bfn(){Pe=Dr.start;const e=wu();return Afn(e)||Q5(e),Pne(e.value)}function jfn(){return ma("."),Bfn()}function Ufn(){ma("[");const e=kne();return ma("]"),e}function zfn(){var e,t,n;for(e=Lfn();;)if(yi("."))n=jfn(),e=D1e(".",e,n);else if(yi("("))t=Ffn(),e=Ifn(e,t);else if(yi("["))n=Ufn(),e=D1e("[",e,n);else break;return e}function F1e(){const e=zfn();if(Dr.type===hu&&(yi("++")||yi("--")))throw new Error(FC);return e}function AR(){var e,t;if(Dr.type!==hu&&Dr.type!==hy)t=F1e();else{if(yi("++")||yi("--"))throw new Error(FC);if(yi("+")||yi("-")||yi("~")||yi("!"))e=wu(),t=AR(),t=kfn(e.value,t);else{if(jU("delete")||jU("void")||jU("typeof"))throw new Error(FC);t=F1e()}}return t}function B1e(e){let t=0;if(e.type!==hu&&e.type!==hy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Vfn(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=AR(),r=Dr,i=B1e(r),i===0)return u;for(r.prec=i,wu(),t=[e,Dr],o=AR(),s=[u,r,o];(i=B1e(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=N1e(a,u,o),s.push(n);r=wu(),r.prec=i,s.push(r),t.push(Dr),n=AR(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=N1e(s[l-1].value,s[l-2],n),l-=2;return n}function M1(){var e,t,n;return e=Vfn(),yi("?")&&(wu(),t=M1(),ma(":"),n=M1(),e=Ofn(e,t,n)),e}function kne(){const e=M1();if(yi(","))throw new Error(FC);return e}function $ne(e){Rt=e,Pe=0,pa=Rt.length,Dr=null,d7e();const t=kne();if(Dr.type!==IO)throw new Error("Unexpect token after expression.");return t}var h7e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function p7e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&$e("Missing arguments to clamp function."),o.length>3&&$e("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&$e("Missing arguments to if function."),o.length>3&&$e("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Hfn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function m7e(e){e=e||{};const t=e.allowed?Cf(e.allowed):{},n=e.forbidden?Cf(e.forbidden):{},r=e.constants||h7e,i=(e.functions||p7e)(f),s=e.globalvar,o=e.fieldvar,a=Sn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(dt(p))return p;const m=d[p.type];return m==null&&$e("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Vt(n,m)?$e("Illegal identifier: "+m):Vt(r,m)?r[m]:Vt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[Hfn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&$e("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Vt(i,m)&&i[m];return y||$e("Unrecognized function: "+m),Sn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const j1e=Symbol("vega_selection_getter");function g7e(e){return(!e.getter||!e.getter[j1e])&&(e.getter=pc(e.field),e.getter[j1e]=!0),e.getter}const Rne="intersect",U1e="union",qfn="vlMulti",Wfn="vlPoint",z1e="or",Gfn="and",dd="_vgsid_",jC=pc(dd),Yfn="E",Kfn="R",Xfn="R-E",Qfn="R-LE",Jfn="R-RE",zL="index:unit";function V1e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=g7e(a)(e),n0(o)&&(o=la(o)),n0(r[s])&&(r[s]=la(r[s])),Ne(r[s])&&n0(r[s][0])&&(r[s]=r[s].map(la)),a.type===Yfn){if(Ne(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===Kfn){if(!Gb(o,r[s]))return!1}else if(a.type===Jfn){if(!Gb(o,r[s],!0,!1))return!1}else if(a.type===Xfn){if(!Gb(o,r[s],!1,!1))return!1}else if(a.type===Qfn&&!Gb(o,r[s],!1,!0))return!1;return!0}function Zfn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[zL]&&r[zL].value:void 0,o=n===Rne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=V1e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=V1e(t,l),o^h)return h;return a&&o}const y7e=fO(jC),edn=y7e.left,tdn=y7e.right;function ndn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[zL]&&r[zL].value:void 0,o=n===Rne,a=jC(t),u=edn(i,a);if(u===i.length||jC(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(tdn(i,a)-u<s.size)return!1}return!0}function rdn(e,t){return e.map(n=>En(t.fields?{values:t.fields.map(r=>g7e(r)(n.datum))}:{[dd]:jC(n.datum)},t))}function idn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,w=0,x,E;w<_;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,E=c.length;x<E;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=UU[`${y}_union`],m[d]=v(g,ft(f[x]));n&&(g=a[d]||(a[d]=[]),g.push(ft(f).reduce((b,T,C)=>(b[c[C].field]=T,b),{})))}else h=dd,p=jC(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[dd]:p}));if(t=t||U1e,o[dd]?o[dd]=UU[`${dd}_${t}`](...Object.values(o[dd])):Object.keys(o).forEach(b=>{o[b]=Object.keys(o[b]).map(T=>o[b][T]).reduce((T,C)=>T===void 0?C:UU[`${u[b]}_${t}`](T,C))}),s=Object.keys(a),n&&s.length){const b=r?Wfn:qfn;o[b]=t===U1e?{[z1e]:s.reduce((T,C)=>(T.push(...a[C]),T),[])}:{[Gfn]:s.map(T=>({[z1e]:a[T]}))}}return o}var UU={[`${dd}_union`]:rtn,[`${dd}_intersect`]:ttn,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=la(t[0]),r=la(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=la(t[0]),r=la(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const sdn=":",odn="@";function Nne(e,t,n,r){t[0].type!==N1&&$e("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&er(t).value,o="unit",a=odn+o,u=sdn+i;s===Rne&&!Vt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Vt(r,u)||(r[u]=n.getData(i).tuplesRef())}function v7e(e){const t=this.context.data[e];return t?t.values.value:[]}function adn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function udn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(mc).insert(t)),1}function ldn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const kO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},cdn=kO("format"),_7e=kO("timeFormat"),fdn=kO("utcFormat"),ddn=kO("timeParse"),hdn=kO("utcParse"),zk=new Date(2e3,0,1);function J5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(zk.setYear(2e3),zk.setMonth(e),zk.setDate(t),_7e.call(this,zk,n))}function pdn(e){return J5.call(this,e,1,"%B")}function mdn(e){return J5.call(this,e,1,"%b")}function gdn(e){return J5.call(this,0,2+e,"%A")}function ydn(e){return J5.call(this,0,2+e,"%a")}const vdn=":",_dn="@",_W="%",b7e="$";function Dne(e,t,n,r){t[0].type!==N1&&$e("First argument to data functions must be a string literal.");const i=t[0].value,s=vdn+i;if(!Vt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function bdn(e,t,n,r){t[0].type!==N1&&$e("First argument to indata must be a string literal."),t[1].type!==N1&&$e("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=_dn+s;Vt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ha(e,t,n,r){if(t[0].type===N1)H1e(n,r,t[0].value);else for(e in n.scales)H1e(n,r,e)}function H1e(e,t,n){const r=_W+n;if(!Vt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ch(e,t){if(Sn(e))return e;if(dt(e)){const n=t.scales[e];return n&&Irn(n.value)?n.value:void 0}}function wdn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ha,n._range=Ha,n._scale=Ha;const r=i=>"_["+(i.type===N1?it(_W+i.value):it(_W)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Mne(e,t){return function(n,r,i){if(n){const s=Ch(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Edn=Mne("area",Han),Sdn=Mne("bounds",Yan),xdn=Mne("centroid",eun);function Tdn(e,t){const n=Ch(e,(t||this).context);return n&&n.scale()}function Adn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Lne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Cdn(){return Lne(this.context.dataflow,"warn",arguments)}function Idn(){return Lne(this.context.dataflow,"info",arguments)}function Odn(){return Lne(this.context.dataflow,"debug",arguments)}function zU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bW(e){const t=g0(e),n=zU(t.r),r=zU(t.g),i=zU(t.b);return .2126*n+.7152*r+.0722*i}function Pdn(e,t){const n=bW(e),r=bW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function kdn(){const e=[].slice.call(arguments);return e.unshift({}),En(...e)}function w7e(e,t){return e===t||e!==e&&t!==t?!0:Ne(e)?Ne(t)&&e.length===t.length?$dn(e,t):!1:mt(e)&&mt(t)?E7e(e,t):!1}function $dn(e,t){for(let n=0,r=e.length;n<r;++n)if(!w7e(e[n],t[n]))return!1;return!0}function E7e(e,t){for(const n in e)if(!w7e(e[n],t[n]))return!1;return!0}function q1e(e){return t=>E7e(e,t)}function Rdn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?mc:Ne(n)||v5(n)?n:q1e(n),c.remove(f)),t&&c.insert(t),r&&(f=q1e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Ndn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Ddn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const W1e={};function Mdn(e,t){const n=W1e[t]||(W1e[t]=pc(t));return Ne(e)?e.map(n):n(e)}function Fne(e){return Ne(e)||ArrayBuffer.isView(e)?e:null}function Bne(e){return Fne(e)||(dt(e)?e:null)}function Ldn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fne(e).join(...n)}function Fdn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bne(e).indexOf(...n)}function Bdn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bne(e).lastIndexOf(...n)}function jdn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bne(e).slice(...n)}function Udn(e,t,n){return Sn(n)&&$e("Function argument passed to replace."),String(e).replace(t,n)}function zdn(e){return Fne(e).slice().reverse()}function Vdn(e,t,n){return Jee(e||0,t||0,n||0)}function Hdn(e,t){const n=Ch(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function qdn(e,t){const n=Ch(e,(t||this).context);return n?n.copy():void 0}function Wdn(e,t){const n=Ch(e,(t||this).context);return n?n.domain():[]}function Gdn(e,t,n){const r=Ch(e,(n||this).context);return r?Ne(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Ydn(e,t){const n=Ch(e,(t||this).context);return n&&n.range?n.range():[]}function Kdn(e,t,n){const r=Ch(e,(n||this).context);return r?r(t):void 0}function Xdn(e,t,n,r,i){e=Ch(e,(i||this).context);const s=IBe(t,n);let o=e.domain(),a=o[0],u=er(o),l=Ea;return u-a?l=gBe(e,a,u):e=(e.interpolator?br("sequential")().interpolator(e.interpolator()):br("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==er(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Qdn(e,t,n){const r=Ch(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Jdn(e){let t=null;return function(n){return n?PC(n,t=t||NE(e)):e}}const S7e=e=>e.data;function x7e(e,t){const n=v7e.call(t,e);return n.root&&n.root.lookup||{}}function Zdn(e,t,n){const r=x7e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(S7e):void 0}function ehn(e,t){const n=x7e(e,this)[t];return n?n.ancestors().map(S7e):void 0}const T7e=()=>typeof window<"u"&&window||null;function thn(){const e=T7e();return e?e.screen:{}}function nhn(){const e=T7e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function rhn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function A7e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return wje(o,s,ihn(t))}function ihn(e){let t=null;if(e){const n=ft(e.marktype),r=ft(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function shn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ft(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function ohn(e){return ft(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function ahn(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),A7e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>uhn(u.x,u.y,t))}function uhn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const UC={random(){return yc()},cumulativeNormal:S5,cumulativeLogNormal:vee,cumulativeUniform:Eee,densityNormal:hee,densityLogNormal:yee,densityUniform:wee,quantileNormal:x5,quantileLogNormal:_ee,quantileUniform:See,sampleNormal:E5,sampleLogNormal:gee,sampleUniform:bee,isArray:Ne,isBoolean:dy,isDate:n0,isDefined(e){return e!==void 0},isNumber:fr,isObject:mt,isRegExp:_8e,isString:dt,isTuple:v5,isValid(e){return e!=null&&e===e},toBoolean:QZ,toDate(e){return JZ(e)},toNumber:la,toString:ZZ,indexof:Fdn,join:Ldn,lastindexof:Bdn,replace:Udn,reverse:zdn,slice:jdn,flush:y8e,lerp:b8e,merge:kdn,pad:S8e,peek:er,pluck:Mdn,span:cO,inrange:Gb,truncate:x8e,rgb:g0,lab:g3,hcl:y3,hsl:p3,luminance:bW,contrast:Pdn,sequence:y_,format:cdn,utcFormat:fdn,utcParse:hdn,utcOffset:q8e,utcSequence:Y8e,timeFormat:_7e,timeParse:ddn,timeOffset:H8e,timeSequence:G8e,timeUnitSpecifier:R8e,monthFormat:pdn,monthAbbrevFormat:mdn,dayFormat:gdn,dayAbbrevFormat:ydn,quarter:h8e,utcquarter:p8e,week:D8e,utcweek:F8e,dayofyear:N8e,utcdayofyear:L8e,warn:Cdn,info:Idn,debug:Odn,extent(e){return lh(e)},inScope:Adn,intersect:A7e,clampRange:m8e,pinchDistance:Ndn,pinchAngle:Ddn,screen:thn,containerSize:rhn,windowSize:nhn,bandspace:Vdn,setdata:udn,pathShape:Jdn,panLinear:l8e,panLog:c8e,panPow:f8e,panSymlog:d8e,zoomLinear:qZ,zoomLog:WZ,zoomPow:XM,zoomSymlog:GZ,encode:ldn,modify:Rdn,lassoAppend:shn,lassoPath:ohn,intersectLasso:ahn},lhn=["view","item","group","xy","x","y"],chn="event.vega.",C7e="this.",jne={},I7e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${it(b7e+e)}]`,functions:fhn,constants:h7e,visitors:jne},wW=m7e(I7e);function fhn(e){const t=p7e(e);lhn.forEach(n=>t[n]=chn+n);for(const n in UC)t[n]=C7e+n;return En(t,wdn(e,UC,jne)),t}function cs(e,t,n){return arguments.length===1?UC[e]:(UC[e]=t,n&&(jne[e]=n),wW&&(wW.functions[e]=C7e+e),this)}cs("bandwidth",Hdn,Ha);cs("copy",qdn,Ha);cs("domain",Wdn,Ha);cs("range",Ydn,Ha);cs("invert",Gdn,Ha);cs("scale",Kdn,Ha);cs("gradient",Xdn,Ha);cs("geoArea",Edn,Ha);cs("geoBounds",Sdn,Ha);cs("geoCentroid",xdn,Ha);cs("geoShape",Qdn,Ha);cs("geoScale",Tdn,Ha);cs("indata",adn,bdn);cs("data",v7e,Dne);cs("treePath",Zdn,Dne);cs("treeAncestors",ehn,Dne);cs("vlSelectionTest",Zfn,Nne);cs("vlSelectionIdTest",ndn,Nne);cs("vlSelectionResolve",idn,Nne);cs("vlSelectionTuples",rdn);function dh(e,t){const n={};let r;try{e=dt(e)?e:it(e)+"",r=$ne(e)}catch{$e("Expression parse error: "+e)}r.visit(s=>{if(s.type!==o7e)return;const o=s.callee.name,a=I7e.visitors[o];a&&a(o,s.arguments,t,n)});const i=wW(r);return i.globals.forEach(s=>{const o=b7e+s;!Vt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:En({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function dhn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const hhn=Cf(["rule"]),G1e=Cf(["group","image","rect"]);function phn(e,t){let n="";return hhn[t]||(e.x2&&(e.x?(G1e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(G1e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Une(e){return(e+"").toLowerCase()}function mhn(e){return Une(e)==="operator"}function ghn(e){return Une(e)==="collect"}function aT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function yhn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var vhn={operator:(e,t)=>aT(e,["_"],t.code),parameter:(e,t)=>aT(e,["datum","_"],t.code),event:(e,t)=>aT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return aT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+it(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=phn(r,n),i+="return m;",aT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(it).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),yhn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function _hn(e){const t=this;mhn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function bhn(e){const t=this;if(e.params){const n=t.get(e.id);n||$e("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function whn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ne(i)?i.map(s=>Y1e(s,n,t)):Y1e(i,n,t)}return t}function Y1e(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=K1e.length,s;r<i;++r)if(s=K1e[r],Vt(e,s.key))return s.parse(e,t,n);return e}var K1e=[{key:"$ref",parse:Ehn},{key:"$key",parse:xhn},{key:"$expr",parse:Shn},{key:"$field",parse:Thn},{key:"$encode",parse:Chn},{key:"$compare",parse:Ahn},{key:"$context",parse:Ihn},{key:"$subflow",parse:Ohn},{key:"$tupleid",parse:Phn}];function Ehn(e,t){return t.get(e.$ref)||$e("Operator not defined: "+e.$ref)}function Shn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Wu(t.parameterExpression(e.$expr),e.$fields))}function xhn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=XZ(e.$key,e.$flat,t.expr.codegen))}function Thn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=pc(e.$field,e.$name,t.expr.codegen))}function Ahn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ft(e.$compare).map(i=>i&&i.$tupleid?Ut:i);return t.fn[n]||(t.fn[n]=YZ(r,e.$order,t.expr.codegen))}function Chn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Wu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Ihn(e,t){return t}function Ohn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Phn(){return Ut}function khn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&$e("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function $hn(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||$e("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Rhn={skip:!0};function Nhn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Dhn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Rhn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(mc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function O7e(e,t,n,r){return new P7e(e,t,n,r)}function P7e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||vhn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function X1e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}P7e.prototype=X1e.prototype={fork(){const e=new X1e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),ghn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Une(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:dhn,parseOperator:_hn,parseOperatorParameters:bhn,parseParameters:whn,parseStream:khn,parseUpdate:$hn,getState:Nhn,setState:Dhn};function Mhn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),k7e(t,e.description()))}function k7e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Lhn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const VU="default";function Fhn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:VU,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?dt(i)?i:i.user:VU,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return dt(r)||(i=r.item,r=r.user),EW(e,r&&r!==VU?r:i||r),i},{cursor:t})}function EW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function VL(e,t){var n=e._runtime.data;return Vt(n,t)||$e("Unrecognized data set: "+t),n[t]}function Bhn(e,t){return arguments.length<2?VL(this,e).values.value:Z5.call(this,e,__().remove(mc).insert(t))}function Z5(e,t){p9e(t)||$e("Second argument to changes must be a changeset.");const n=VL(this,e);return n.modified=!0,this.pulse(n.input,t)}function jhn(e,t){return Z5.call(this,e,__().insert(t))}function Uhn(e,t){return Z5.call(this,e,__().remove(t))}function $7e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function R7e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function e8(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function zhn(e){var t=e8(e),n=$7e(e),r=R7e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Vhn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=e8(e),o=t.changedTouches?t.changedTouches[0]:t,s=U5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Hhn(e,n,s),t}function Hhn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;dt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Sa(e),item:Sa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Q1e="view",qhn="timer",Whn="window",Ghn={trap:!1};function Yhn(e){const t=En({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ne(r[s])&&(r[s]=Cf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function N7e(e,t,n,r){e._eventListeners.push({type:n,sources:ft(t),handler:r})}function Khn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Vk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Xhn(e,t,n){var r=this,i=new w5(n),s=function(l,c){r.runAsync(null,()=>{e===Q1e&&Khn(r,t)&&l.preventDefault(),i.receive(Vhn(r,l,c))})},o;if(e===qhn)Vk(r,"timer",t)&&r.timer(s,t);else if(e===Q1e)Vk(r,"view",t)&&r.addEventListener(t,s,Ghn);else if(e===Whn?Vk(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&Vk(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);N7e(r,o,t,s)}return i}function J1e(e){return e.item}function Z1e(e){return e.item.mark.source}function e_e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Qhn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",J1e),Z1e,e_e(e)),this.on(this.events("view","pointerout",J1e),Z1e,e_e(t)),this}function Jhn(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function vl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Zhn="vega-bind",epn="vega-bind-name",tpn="vega-bind-radio";function npn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=KZ(r.debounce,i.update))),(r.input==null&&r.element?rpn:spn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function rpn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),N7e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(ipn(i))}}function ipn(e){return typeof Event<"u"?new Event(e):{type:e}}function spn(e,t,n,r){const i=r.signal(n.signal),s=vl("div",{class:Zhn}),o=n.input==="radio"?s:s.appendChild(vl("label"));o.appendChild(vl("span",{class:epn},n.name||n.signal)),t.appendChild(s);let a=opn;switch(n.input){case"checkbox":a=apn;break;case"select":a=upn;break;case"radio":a=lpn;break;case"range":a=cpn;break}a(e,o,n,i)}function opn(e,t,n,r){const i=vl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function apn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=vl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function upn(e,t,n,r){const i=vl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};HL(o,r)&&(u.selected=!0),i.appendChild(vl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(HL(n.options[a],o)){i.selectedIndex=a;return}}}function lpn(e,t,n,r){const i=vl("span",{class:tpn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};HL(o,r)&&(u.checked=!0);const l=vl("input",u);l.addEventListener("change",()=>e.update(o));const c=vl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)HL(a[l].value,o)&&(a[l].checked=!0)}}function cpn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||AC(s,i,100),a=vl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=vl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function HL(e,t){return e===t||e+""==t+""}function D7e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,$7e(e),R7e(e),e8(e),i,s).background(e.background())}function zne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function fpn(e,t,n,r){const i=new r(e.loader(),zne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,e8(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function dpn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=V5(r);e=n._el=e?HU(n,e,!0):null,Mhn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||F0,a=e?s.renderer:s.headless;return n._renderer=a?D7e(n,n._renderer,e,a):null,n._handler=fpn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=HU(n,t,!0):e.appendChild(vl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=HU(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{npn(n,u.element||t,u)})),n}function HU(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const uT=e=>+e||0,hpn=e=>({top:e,bottom:e,left:e,right:e});function t_e(e){return mt(e)?{top:uT(e.top),bottom:uT(e.bottom),left:uT(e.left),right:uT(e.right)}:hpn(uT(e))}async function Vne(e,t,n,r){const i=V5(t),s=i&&i.headless;return s||$e("Unrecognized renderer type: "+t),await e.runAsync(),D7e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function ppn(e,t){e!==Pg.Canvas&&e!==Pg.SVG&&e!==Pg.PNG&&$e("Unrecognized image type: "+e);const n=await Vne(this,e,t);return e===Pg.SVG?mpn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function mpn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function gpn(e,t){return(await Vne(this,Pg.Canvas,e,t)).canvas()}async function ypn(e){return(await Vne(this,Pg.SVG,e)).svg()}function vpn(e,t,n){return O7e(e,PE,UC,n).parse(t)}function _pn(e){var t=this._runtime.scales;return Vt(t,e)||$e("Unrecognized scale or projection: "+e),t[e].value}var M7e="width",L7e="height",Hne="padding",n_e={skip:!0};function F7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Hne?r.left+r.right:0)}function B7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Hne?r.top+r.bottom:0)}function bpn(e){var t=e._signals,n=t[M7e],r=t[L7e],i=t[Hne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=F7e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=B7e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function wpn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(M7e,n,n_e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(L7e,r,n_e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Epn(e){return this._runtime.getState(e||{data:Spn,signals:xpn,recurse:!0})}function Spn(e,t){return t.modified&&Ne(t.input.value)&&!e.startsWith("_:vega:_")}function xpn(e,t){return!(e==="parent"||t instanceof PE.proxy)}function Tpn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Apn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(eAt(n,t))}function Cpn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Ipn(r))}function Ipn(e){return e==null?"":Ne(e)?j7e(e):mt(e)&&!n0(e)?Opn(e):e+""}function Opn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ne(n)?j7e(n):U7e(n))}).join(`
`)}function j7e(e){return"["+e.map(U7e).join(", ")+"]"}function U7e(e){return Ne(e)?"[]":mt(e)&&!n0(e)?"{}":e}function Ppn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function z7e(e,t){const n=this;if(t=t||{},Ow.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=En({},e.locale,t.locale);n.locale(i9e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Pg.Canvas,n._scenegraph=new Ite;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Cpn,n._redraw=!0,n._handler=new F0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Yhn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=vpn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:En({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=F7e(n,n._width),n._viewHeight=B7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,bpn(n),Lhn(n),Fhn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Hk(e,t){return Vt(e._signals,t)?e._signals[t]:$e("Unrecognized signal name: "+it(t))}function V7e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function r_e(e,t,n,r){let i=V7e(n,r);return i||(i=zne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function i_e(e,t,n){const r=V7e(t,n);return r&&t._targets.remove(r),e}tt(z7e,Ow,{async evaluate(e,t,n){if(await Ow.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,zhn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&hR(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&k7e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Hk(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",t_e(e)):t_e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(V5(e)||$e("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Ow.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Hk(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:wpn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=zne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return r_e(this,e,Hk(this,e),t)},removeSignalListener(e,t){return i_e(this,Hk(this,e),t)},addDataListener(e,t){return r_e(this,e,VL(this,e).values,t)},removeDataListener(e,t){return i_e(this,VL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=EW(this,null);this._globalCursor=!!e,t&&EW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Apn,events:Xhn,finalize:Jhn,hover:Qhn,data:Bhn,change:Z5,insert:jhn,remove:Uhn,scale:_pn,initialize:dpn,toImageURL:ppn,toCanvas:gpn,toSVG:ypn,getState:Epn,setState:Tpn,_watchPixelRatio:Ppn});const kpn="view",qL="[",WL="]",H7e="{",q7e="}",$pn=":",W7e=",",Rpn="@",Npn=">",Dpn=/[[\]{}]/,Mpn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let G7e,Y7e;function py(e,t,n){return G7e=t||kpn,Y7e=n||Mpn,K7e(e.trim()).map(SW)}function Lpn(e){return Y7e[e]}function uA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function K7e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=uA(e,i,W7e,qL+H7e,WL+q7e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function SW(e){return e[0]==="["?Fpn(e):Bpn(e)}function Fpn(e){const t=e.length;let n=1,r;if(n=uA(e,n,WL,qL,WL),n===t)throw"Empty between selector: "+e;if(r=K7e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Npn)throw"Expected '>' after between selector: "+e;r=r.map(SW);const i=SW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Bpn(e){const t={source:G7e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===q7e){if(a=e.lastIndexOf(H7e),a>=0){try{r=jpn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Rpn&&(i=++a),u=uA(e,a,$pn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=uA(e,a,qL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=uA(e,a,WL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==qL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Dpn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Lpn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function jpn(e){const t=e.split(W7e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Upn(e){return mt(e)?e:{type:e||"pad"}}const lT=e=>+e||0,zpn=e=>({top:e,bottom:e,left:e,right:e});function Vpn(e){return mt(e)?e.signal?e:{top:lT(e.top),bottom:lT(e.bottom),left:lT(e.left),right:lT(e.right)}:zpn(lT(e))}const so=e=>mt(e)&&!Ne(e)?En({},e):{value:e};function s_e(e,t,n,r){return n!=null?(mt(n)&&!Ne(n)||Ne(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Mo(e,t,n){for(const r in t)s_e(e,r,t[r]);for(const r in n)s_e(e,r,n[r],"update")}function ex(e,t,n){for(const r in t)n&&Vt(n,r)||(e[r]=En(e[r]||{},t[r]));return e}function Sb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const qne="mark",Wne="frame",Gne="scope",Hpn="axis",qpn="axis-domain",Wpn="axis-grid",Gpn="axis-label",Ypn="axis-tick",Kpn="axis-title",Xpn="legend",Qpn="legend-band",Jpn="legend-entry",Zpn="legend-gradient",X7e="legend-label",emn="legend-symbol",tmn="legend-title",nmn="title",rmn="title-text",imn="title-subtitle";function smn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Sb(u,e)&&qU(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Wne?i.group:n===qne?En({},i.mark,i[t]):null;for(u in c)l=Sb(u,e)||(u==="fill"||u==="stroke")&&(Sb("fill",e)||Sb("stroke",e)),l||qU(s,u,c[u]);ft(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Sb(h,e)||qU(s,h,d[h])}),e=En({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=En(o,e.enter),a&&(e.update=En(a,e.update)),e}function qU(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Q7e=e=>dt(e)?it(e):e.signal?`(${e.signal})`:J7e(e);function t8(e){if(e.gradient!=null)return amn(e);let t=e.signal?`(${e.signal})`:e.color?omn(e.color):e.field!=null?J7e(e.field):e.value!==void 0?it(e.value):void 0;return e.scale!=null&&(t=umn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${CR(e.exponent)})`),e.mult!=null&&(t+=`*${CR(e.mult)}`),e.offset!=null&&(t+=`+${CR(e.offset)}`),e.round&&(t=`round(${t})`),t}const qk=(e,t,n,r)=>`(${e}(${[t,n,r].map(t8).join(",")})+'')`;function omn(e){return e.c?qk("hcl",e.h,e.c,e.l):e.h||e.s?qk("hsl",e.h,e.s,e.l):e.l||e.a?qk("lab",e.l,e.a,e.b):e.r||e.g||e.b?qk("rgb",e.r,e.g,e.b):null}function amn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:it(n));for(;t.length&&er(t)==null;)t.pop();return t.unshift(Q7e(e.gradient)),`gradient(${t.join(",")})`}function CR(e){return mt(e)?"("+t8(e)+")":e}function J7e(e){return Z7e(mt(e)?e:{datum:e})}function Z7e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):$e("Invalid field reference: "+it(e));return e.signal||(r=dt(r)?Sh(r).map(it).join("]["):Z7e(r)),t+"["+r+"]"}function umn(e,t){const n=Q7e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+CR(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function lmn(e){let t="";return e.forEach(n=>{const r=t8(n);t+=n.test?`(${n.test})?${r}:`:r}),er(t)===":"&&(t+="null"),t}function eze(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=smn(e,t,n,r,i.config);for(const a in e)o[a]=cmn(e[a],t,s,i);return s}function cmn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=dmn(fmn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function fmn(e){return Ne(e)?lmn(e):t8(e)}function dmn(e,t,n,r){const i=dh(e,t);return i.$fields.forEach(s=>r[s]=1),En(n,i.$params),i.$expr}const hmn="outer",pmn=["value","update","init","react","bind"];function o_e(e,t){$e(e+' for "outer" push: '+it(t))}function tze(e,t){const n=e.name;if(e.push===hmn)t.signals[n]||o_e("No prior signal definition",n),pmn.forEach(r=>{e[r]!==void 0&&o_e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function xW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function n8(e,t,n,r){return new xW(e,t,n,r)}function GL(e,t){return n8("operator",e,t)}function jt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function zC(e,t){return t?{$field:e,$name:t}:{$field:e}}const TW=zC("key");function a_e(e,t){return{$compare:e,$order:t}}function mmn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const gmn="ascending",ymn="descending";function vmn(e){return mt(e)?(e.order===ymn?"-":"+")+r8(e.op,e.field):""}function r8(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Yne="scope",AW="view";function zs(e){return e&&e.signal}function _mn(e){return e&&e.expr}function IR(e){if(zs(e))return!0;if(mt(e)){for(const t in e)if(IR(e[t]))return!0}return!1}function Qc(e,t){return e??t}function t1(e){return e&&e.signal||e}const u_e="timer";function VC(e,t){return(e.merge?wmn:e.stream?Emn:e.type?Smn:$e("Invalid stream specification: "+it(e)))(e,t)}function bmn(e){return e===Yne?AW:e||AW}function wmn(e,t){const n=e.merge.map(i=>VC(i,t)),r=Kne({merge:n},e,t);return t.addStream(r).id}function Emn(e,t){const n=VC(e.stream,t),r=Kne({stream:n},e,t);return t.addStream(r).id}function Smn(e,t){let n;e.type===u_e?(n=t.event(u_e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(bmn(e.source),e.type);const r=Kne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Kne(e,t,n){let r=t.between;return r&&(r.length!==2&&$e('Stream "between" parameter must have 2 entries: '+it(t)),e.between=[VC(r[0],n),VC(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(xmn(t.marktype,t.markname,t.markrole)),t.source===Yne&&r.push("inScope(event.item)"),r.length&&(e.filter=dh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function xmn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Tmn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Amn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||$e("Signal update missing events specification."),dt(s)&&(s=py(s,t.isSubscope()?Yne:AW)),s=ft(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Imn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&$e("Signal encode and update are mutually exclusive."),o="encode(item(),"+it(r)+")"),i.update=dt(o)?dh(o,t):o.expr!=null?dh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Tmn,$params:{$value:t.signalRef(o.signal)}}:$e("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(En(Cmn(u,t),i)))}function Cmn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):VC(e,t)}}function Imn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Omn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?$e("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=dh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Amn(i,t,n.id))}const Kr=e=>(t,n,r)=>n8(e,n,t||void 0,r),nze=Kr("aggregate"),Pmn=Kr("axisticks"),rze=Kr("bound"),Bf=Kr("collect"),l_e=Kr("compare"),kmn=Kr("datajoin"),ize=Kr("encode"),$mn=Kr("expression"),Rmn=Kr("facet"),Nmn=Kr("field"),Dmn=Kr("key"),Mmn=Kr("legendentries"),Lmn=Kr("load"),Fmn=Kr("mark"),Bmn=Kr("multiextent"),jmn=Kr("multivalues"),Umn=Kr("overlap"),zmn=Kr("params"),sze=Kr("prefacet"),Vmn=Kr("projection"),Hmn=Kr("proxy"),qmn=Kr("relay"),oze=Kr("render"),Wmn=Kr("scale"),E_=Kr("sieve"),Gmn=Kr("sortitems"),aze=Kr("viewlayout"),Ymn=Kr("values");let Kmn=0;const uze={min:"min",max:"max",count:"sum"};function Xmn(e,t){const n=e.type||"linear";cBe(n)||$e("Unrecognized scale type: "+it(n)),t.addScale(e.name,{type:n,domain:void 0})}function Qmn(e,t){const n=t.getScale(e.name).params;let r;n.domain=lze(e.domain,e,t),e.range!=null&&(n.range=fze(e,t,n)),e.interpolate!=null&&agn(e.interpolate,n),e.nice!=null&&(n.nice=ogn(e.nice,t)),e.bins!=null&&(n.bins=sgn(e.bins,t));for(r in e)Vt(n,r)||r==="name"||(n[r]=ic(e[r],t))}function ic(e,t){return mt(e)?e.signal?t.signalRef(e.signal):$e("Unsupported object: "+it(e)):e}function OR(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ic(n,t))}function i8(e){$e("Can not find data set: "+it(e))}function lze(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&$e("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ne(e)?Jmn:e.fields?egn:Zmn)(e,t,n)}function Jmn(e,t,n){return e.map(r=>ic(r,n))}function Zmn(e,t,n){const r=n.getData(e.data);return r||i8(e.data),RE(t.type)?r.valuesRef(n,e.field,cze(e.sort,!1)):hBe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function egn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=dt(o)?{data:r,field:o}:Ne(o)||o.signal?tgn(o,n):o,s.push(o),s),[]);return(RE(t.type)?ngn:hBe(t.type)?rgn:ign)(e,n,i)}function tgn(e,t){const n="_:vega:_"+Kmn++,r=Bf({});if(Ne(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+it(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,E_({})]),{data:n,field:"data"}}function ngn(e,t,n){const r=cze(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||i8(l.data),c.countsRef(t,l.field,r)}),a={groupby:TW,pulse:o};r&&(i=r.op||"count",s=r.field?r8(i,r.field):"count",a.ops=[uze[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(nze(a));const u=t.add(Bf({pulse:jt(i)}));return s=t.add(Ymn({field:TW,sort:t.sortRef(r),pulse:jt(u)})),jt(s)}function cze(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?$e("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!uze[e.op]&&$e("Multiple domain scales can not be sorted using "+e.op)),e}function rgn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||i8(i.data),s.domainRef(t,i.field)});return jt(t.add(jmn({values:r})))}function ign(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||i8(i.data),s.extentRef(t,i.field)});return jt(t.add(Bmn({extents:r})))}function sgn(e,t){return e.signal||Ne(e)?OR(e,t):t.objectProperty(e)}function ogn(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:ic(e.interval),step:ic(e.step)}:ic(e)}function agn(e,t){t.interpolate=ic(e.type||e),e.gamma!=null&&(t.interpolateGamma=ic(e.gamma))}function fze(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(dt(i)){if(r&&Vt(r,i))return e=En({},e,{range:r[i]}),fze(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=RE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:$e("Unrecognized scale range value: "+it(i))}else if(i.scheme){n.scheme=Ne(i.scheme)?OR(i.scheme,t):ic(i.scheme,t),i.extent&&(n.schemeExtent=OR(i.extent,t)),i.count&&(n.schemeCount=ic(i.count,t));return}else if(i.step){n.rangeStep=ic(i.step,t);return}else{if(RE(e.type)&&!Ne(i))return lze(i,e,t);Ne(i)||$e("Unsupported range type: "+it(i))}return i.map(s=>(Ne(s)?OR:ic)(s,t))}function ugn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=CW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=CW(n[i],i,t));t.addProjection(e.name,r)}function CW(e,t,n){return Ne(e)?e.map(r=>CW(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:$e("Unsupported parameter object: "+it(e)):e}const jf="top",tx="left",nx="right",j0="bottom",dze="center",lgn="vertical",cgn="start",fgn="middle",dgn="end",IW="index",Xne="label",hgn="offset",jE="perc",pgn="perc2",uc="value",$O="guide-label",Qne="guide-title",mgn="group-title",ggn="group-subtitle",c_e="symbol",PR="gradient",OW="discrete",PW="size",ygn="shape",vgn="fill",_gn="stroke",bgn="strokeWidth",wgn="strokeDash",Egn="opacity",Jne=[PW,ygn,vgn,_gn,bgn,wgn,Egn],RO={name:1,style:1,interactive:1},ar={value:0},lc={value:1},s8="group",hze="rect",Zne="rule",Sgn="symbol",S_="text";function HC(e){return e.type=s8,e.interactive=e.interactive||!1,e}function Gu(e,t){const n=(r,i)=>Qc(e[r],Qc(t[r],i));return n.isVertical=r=>lgn===Qc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Qc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Qc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Qc(e.columns,Qc(t.columns,+n.isVertical(!0))),n}function pze(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function xgn(e,t,n){const r=t.config.style[n];return r&&r[e]}function o8(e,t,n){return`item.anchor === '${cgn}' ? ${e} : item.anchor === '${dgn}' ? ${t} : ${n}`}const ere=o8(it(tx),it(nx),it(dze));function Tgn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function mze(e,t){return t?e?mt(e)?Object.assign({},e,{offset:mze(e.offset,t)}):{value:e,offset:t}:t:e}function Il(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=ex(e.encode,t,RO)):e.interactive=!1,e}function Agn(e,t,n,r){const i=Gu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:ar,x:ar,y:ar,width:so(f),height:so(d)},update:En({},u,{opacity:lc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ar}};return Mo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Il({type:hze,role:Zpn,encode:h},r)}function Cgn(e,t,n,r,i){const s=Gu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ar,fill:{scale:t,field:uc}};p[l]={signal:h+"datum."+jE,mult:u},p[c]=ar,p[f]={signal:h+"datum."+pgn,mult:u},p[d]=so(a);const m={enter:p,update:En({},p,{opacity:lc}),exit:{opacity:ar}};return Mo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Il({type:hze,role:Qpn,key:uc,from:i,encode:m},r)}const Ign=`datum.${jE}<=0?"${tx}":datum.${jE}>=1?"${nx}":"${dze}"`,Ogn=`datum.${jE}<=0?"${j0}":datum.${jE}>=1?"${jf}":"${fgn}"`;function f_e(e,t,n,r){const i=Gu(e,t),s=i.isVertical(),o=so(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ar},update:c={opacity:lc,text:{field:Xne}},exit:{opacity:ar}};return Mo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Qc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:Ogn},f="y",d="x",h="1-"):(l.align=c.align={signal:Ign},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+jE,mult:a},l[d]=c[d]=o,o.offset=Qc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+IW}:void 0,Il({type:S_,role:X7e,style:$O,key:uc,from:r,encode:p,overlap:u},n)}function Pgn(e,t,n,r,i){const s=Gu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${hgn} : datum.${PW}`,h=l?so(l):{field:PW},p=`datum.${IW}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:ar,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:lc,x:y.x,y:y.y},exit:{opacity:ar}};let x=null,E=null;e.fill||(x=t.symbolBaseFillColor,E=t.symbolBaseStrokeColor),Mo(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",E),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Jne.forEach(A=>{e[A]&&(v[A]=y[A]={scale:e[A],field:uc})});const b=Il({type:Sgn,role:emn,key:uc,from:f,clip:l?!0:void 0,encode:g},n.symbols),T=so(c);T.offset=s("labelOffset"),g={enter:y={opacity:ar,x:{signal:d,offset:T},y:h},update:v={opacity:lc,text:{field:Xne},x:y.x,y:y.y},exit:{opacity:ar}},Mo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=Il({type:S_,role:X7e,style:$O,key:uc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:ar,height:l?so(l):ar,opacity:ar},exit:{opacity:ar},update:v={opacity:lc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:IW}},HC({role:Gne,from:r,encode:ex(g,o,RO),marks:[b,C],name:u,interactive:a,sort:w})}function kgn(e,t){const n=Gu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const tre='item.orient === "left"',nre='item.orient === "right"',a8=`(${tre} || ${nre})`,$gn=`datum.vgrad && ${a8}`,Rgn=o8('"top"','"bottom"','"middle"'),Ngn=o8('"right"','"left"','"center"'),Dgn=`datum.vgrad && ${nre} ? (${Ngn}) : (${a8} && !(datum.vgrad && ${tre})) ? "left" : ${ere}`,Mgn=`item._anchor || (${a8} ? "middle" : "start")`,Lgn=`${$gn} ? (${tre} ? -90 : 90) : 0`,Fgn=`${a8} ? (datum.vgrad ? (${nre} ? "bottom" : "top") : ${Rgn}) : "top"`;function Bgn(e,t,n,r){const i=Gu(e,t),s={enter:{opacity:ar},update:{opacity:lc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ar}};return Mo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Mgn},angle:{signal:Lgn},align:{signal:Dgn},baseline:{signal:Fgn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Il({type:S_,role:tmn,style:Qne,from:r,encode:s},n)}function jgn(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+d_e(e.path)+")":e.sphere&&(n="geoShape("+d_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function d_e(e){return mt(e)&&e.signal?e.signal:it(e)}function gze(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===s8?Gne:t||qne}function Ugn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||gze(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function zgn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function rre(e,t){const n=y9e(e.type);n||$e("Unrecognized transform type: "+it(e.type));const r=n8(n.type.toLowerCase(),null,yze(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function yze(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Vgn(o,t,n)}return r}function Vgn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Hgn(e,t,n);if(i===void 0){e.required&&$e("Missing required "+it(t.type)+" parameter: "+it(e.name));return}else{if(r==="param")return qgn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!zs(i)?i.map(s=>h_e(e,s,n)):h_e(e,i,n)}function h_e(e,t,n){const r=e.type;if(zs(t))return m_e(r)?$e("Expression references can not be signals."):WU(r)?n.fieldRef(t):g_e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||WU(r);return i&&Wgn(t)?n.exprRef(t.expr,t.as):i&&Ggn(t)?zC(t.field,t.as):m_e(r)?dh(t,n):Ygn(r)?jt(n.getData(t).values):WU(r)?zC(t):g_e(r)?n.compareRef(t):t}}function Hgn(e,t,n){return dt(t.from)||$e('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function qgn(e,t,n){const r=t[e.name];return e.array?(Ne(r)||$e("Expected an array of sub-parameters. Instead: "+it(r)),r.map(i=>p_e(e,i,n))):p_e(e,r,n)}function p_e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||$e("Unsupported parameter: "+it(t));const s=En(yze(i,t,n),i.key);return jt(n.add(zmn(s)))}const Wgn=e=>e&&e.expr,Ggn=e=>e&&e.field,Ygn=e=>e==="data",m_e=e=>e==="expr",WU=e=>e==="field",g_e=e=>e==="compare";function Kgn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||$e("Only group marks can be faceted."),r.field!=null?o=a=kR(r,n):(e.data?a=jt(n.getData(e.data).aggregate):(s=rre(En({type:"aggregate",groupby:ft(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=kR(r,n),o=a=jt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=jt(n.add(Bf(null,[{}]))),o||(o=kR(e,n)),{key:i,pulse:o,parent:a}}function kR(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:jt(t.getData(e.data).output)}function L1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}L1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=jt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new L1(e,s,i,r,o)};function vze(e){return dt(e)?e:null}function y_e(e,t,n){const r=r8(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function cT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=vmn(s);let l=vze(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:TW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:jt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(n8(r,void 0,d)),o&&(t.index[i]=f),c=jt(f),l!=null&&(a[l]=c)}return c}L1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=vze(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&y_e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:jt(r.output)},n&&n.field&&y_e(e,u,n),a=e.add(nze(u)),o=e.add(Bf({pulse:jt(a)})),o={agg:a,ref:jt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return jt(this.values)},extentRef(e,t){return cT(e,this,"extent","extent",t,!1)},domainRef(e,t){return cT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return cT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return cT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return cT(e,this,"indata","tupleindex",t,!0,!0)}};function Xgn(e,t,n){const r=e.from.facet,i=r.name,s=kR(r,t);let o;r.name||$e("Facet must have a name: "+it(r)),r.data||$e("Facet must reference a data set: "+it(r)),r.field?o=t.add(sze({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Rmn({key:t.keyRef(r.groupby),group:jt(t.proxy(n.parent)),pulse:s})):$e("Facet must specify groupby or field: "+it(r));const a=t.fork(),u=a.add(Bf()),l=a.add(E_({pulse:jt(u)}));a.addData(i,new L1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Qgn(e,t,n){const r=t.add(sze({pulse:n.pulse})),i=t.fork();i.add(E_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function _ze(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(GL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=dh(l,t);u.update=c.$expr,u.params=c.$params}function u8(e,t){const n=gze(e),r=e.type===s8,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Gne||n===Wne,a,u,l,c,f,d,h;const p=n===qne||o||i,m=Kgn(e.from,r,t);u=t.add(kmn({key:m.key||(e.key?zC(e.key):void 0),pulse:m.pulse,clean:!r}));const g=jt(u);u=l=t.add(Bf({pulse:g})),u=t.add(Fmn({markdef:Ugn(e),interactive:zgn(e.interactive,t),clip:jgn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:jt(u)}));const y=jt(u);u=c=t.add(ize(eze(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(E=>{const b=rre(E,t),T=b.metadata;(T.generates||T.changes)&&$e("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),b.params.pulse=jt(u),t.add(u=b)}),e.sort&&(u=t.add(Gmn({sort:t.compareRef(e.sort),pulse:jt(u)})));const v=jt(u);(i||o)&&(o=t.add(aze({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=jt(o));const _=t.add(rze({mark:y,pulse:d||v}));h=jt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?Xgn(e,t,m):p?Qgn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=Jgn(s,h,t));const w=t.add(oze({pulse:h})),x=t.add(E_({pulse:jt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new L1(t,l,w,x)),e.on&&e.on.forEach(E=>{(E.insert||E.remove||E.toggle)&&$e("Marks only support modify triggers."),_ze(E,t,f)}))}function Jgn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:zs(s)?n.signalRef(s.signal):s,method:zs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=zs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return jt(n.add(Umn(o)))}function Zgn(e,t){const n=t.config.legend,r=e.encode||{},i=Gu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Jne.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||$e("Missing valid scale for legend.");const p=e0n(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=jt(t.add(Bf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=jt(t.add(Mmn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===PR?(h=[Agn(e,c,n,r.gradient),f_e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${t1(i.gradientLength())})/100))`)):p===OW?h=[Cgn(e,c,n,r.gradient,v),f_e(e,n,r.labels,v)]:(f=kgn(e,n),h=[Pgn(e,n,r,v,t1(f.columns))],d.size=r0n(e,t,h[0].marks)),h=[HC({role:Jpn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(Bgn(e,n,r.title,g)),u8(HC({role:Xpn,from:g,encode:ex(n0n(i,e,n),s,RO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function e0n(e,t){let n=e.type||c_e;return!e.type&&t0n(e)===1&&(e.fill||e.stroke)&&(n=rte(t)?PR:Eq(t)?OW:c_e),n!==PR?n:Eq(t)?OW:PR}function t0n(e){return Jne.reduce((t,n)=>t+(e[n]?1:0),0)}function n0n(e,t,n){const r={enter:{},update:{}};return Mo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function r0n(e,t,n){const r=t1(v_e("size",e,n)),i=t1(v_e("strokeWidth",e,n)),s=t1(i0n(n[1].encode,t,$O));return dh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function v_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:pze(e,n[0].encode)}function i0n(e,t,n){return pze("fontSize",e)||xgn("fontSize",t,n)}const s0n=`item.orient==="${tx}"?-90:item.orient==="${nx}"?90:0`;function o0n(e,t){e=dt(e)?{text:e}:e;const n=Gu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=jt(t.add(Bf(null,[l])));return u.push(l0n(e,n,a0n(e),c)),e.subtitle&&u.push(c0n(e,n,r.subtitle,c)),u8(HC({role:nmn,from:c,encode:u0n(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function a0n(e){const t=e.encode;return t&&t.title||En({name:e.name,interactive:e.interactive,style:e.style},t)}function u0n(e,t){const n={enter:{},update:{}};return Mo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ere},angle:{signal:s0n},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),ex(n,t,RO)}function l0n(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Mo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Il({type:S_,role:rmn,style:mgn,from:r,encode:o},n)}function c0n(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Mo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Il({type:S_,role:imn,style:ggn,from:r,encode:o},n)}function f0n(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(rre(r,t))}),e.on&&e.on.forEach(r=>{_ze(r,t,e.name)}),t.addDataPipeline(e.name,d0n(e,t,n))}function d0n(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?zs(e.values)||IR(e.format)?(r.push(__e(t,e)),r.push(i=Dy())):r.push(i=Dy({$ingest:e.values,$format:e.format})):e.url?IR(e.url)||IR(e.format)?(r.push(__e(t,e)),r.push(i=Dy())):r.push(i=Dy({$request:e.url,$format:e.format})):e.source&&(i=a=ft(e.source).map(d=>jt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Dy()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=qmn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Dy())),i||r.push(Dy()),r.push(E_({})),r}function Dy(e){const t=Bf({},e);return t.metadata={source:!0},t}function __e(e,t){return Lmn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const bze=e=>e===j0||e===jf,l8=(e,t,n)=>zs(e)?g0n(e.signal,t,n):e===tx||e===jf?t:n,oo=(e,t,n)=>zs(e)?p0n(e.signal,t,n):bze(e)?t:n,bf=(e,t,n)=>zs(e)?m0n(e.signal,t,n):bze(e)?n:t,wze=(e,t,n)=>zs(e)?y0n(e.signal,t,n):e===jf?{value:t}:{value:n},h0n=(e,t,n)=>zs(e)?v0n(e.signal,t,n):e===nx?{value:t}:{value:n},p0n=(e,t,n)=>Eze(`${e} === '${jf}' || ${e} === '${j0}'`,t,n),m0n=(e,t,n)=>Eze(`${e} !== '${jf}' && ${e} !== '${j0}'`,t,n),g0n=(e,t,n)=>ire(`${e} === '${tx}' || ${e} === '${jf}'`,t,n),y0n=(e,t,n)=>ire(`${e} === '${jf}'`,t,n),v0n=(e,t,n)=>ire(`${e} === '${nx}'`,t,n),Eze=(e,t,n)=>(t=t!=null?so(t):t,n=n!=null?so(n):n,b_e(t)&&b_e(n)?(t=t?t.signal||it(t.value):null,n=n?n.signal||it(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[En({test:e},t)].concat(n||[])),b_e=e=>e==null||Object.keys(e).length===1,ire=(e,t,n)=>({signal:`${e} ? (${Jb(t)}) : (${Jb(n)})`}),_0n=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${tx}' ? (${Jb(r)}) : `:"")+(n!=null?`${e} === '${j0}' ? (${Jb(n)}) : `:"")+(i!=null?`${e} === '${nx}' ? (${Jb(i)}) : `:"")+(t!=null?`${e} === '${jf}' ? (${Jb(t)}) : `:"")+"(null)"}),Jb=e=>zs(e)?e.signal:e==null?null:it(e),b0n=(e,t)=>t===0?0:zs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},kw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function nb(e,t,n,r){let i;if(t&&Vt(t,e))return t[e];if(Vt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Qne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[$O][i]}return null}function w_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function w0n(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(zs(o)){const f=w_e([n.axisX,n.axisY]),d=w_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=oo(o,nb(l,n.axisX,i,r),nb(l,n.axisY,i,r));u={};for(l of d)u[l]=_0n(o.signal,nb(l,n.axisTop,i,r),nb(l,n.axisBottom,i,r),nb(l,n.axisLeft,i,r),nb(l,n.axisRight,i,r))}else a=o===jf||o===j0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?En({},i,a,u,s):i}function E0n(e,t,n,r){const i=Gu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:ar},update:a={opacity:lc},exit:{opacity:ar}};Mo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=E_e(e,0),c=E_e(e,1);return o.x=a.x=oo(s,l,ar),o.x2=a.x2=oo(s,c),o.y=a.y=bf(s,l,ar),o.y2=a.y2=bf(s,c),Il({type:Zne,role:qpn,from:r,encode:u},n)}function E_e(e,t){return{scale:e.scale,range:t}}function S0n(e,t,n,r,i){const s=Gu(e,t),o=e.orient,a=e.gridScale,u=l8(o,1,-1),l=x0n(e.offset,u);let c,f,d;const h={enter:c={opacity:ar},update:d={opacity:lc},exit:f={opacity:ar}};Mo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:uc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=oo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:En(m,{mult:u,offset:l});return c.x=d.x=oo(o,p,g),c.y=d.y=bf(o,p,g),c.x2=d.x2=bf(o,y),c.y2=d.y2=oo(o,y),f.x=oo(o,p),f.y=bf(o,p),Il({type:Zne,role:Wpn,key:uc,from:r,encode:h},n)}function x0n(e,t){if(t!==1)if(!mt(e))e=zs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=En({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=En({},n.mult);else return n.mult=zs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function T0n(e,t,n,r,i,s){const o=Gu(e,t),a=e.orient,u=l8(a,-1,1);let l,c,f;const d={enter:l={opacity:ar},update:f={opacity:lc},exit:c={opacity:ar}};Mo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=so(i);h.mult=u;const p={scale:e.scale,field:uc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=oo(a,ar,p),f.y2=l.y2=oo(a,h),c.x=oo(a,p),f.x=l.x=bf(a,ar,p),f.x2=l.x2=bf(a,h),c.y=bf(a,p),Il({type:Zne,role:Ypn,key:uc,from:r,encode:d},n)}function GU(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function A0n(e,t,n,r,i,s){const o=Gu(e,t),a=e.orient,u=e.scale,l=l8(a,-1,1),c=t1(o("labelFlush")),f=t1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=so(i);g.mult=l,g.offset=so(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:uc,band:.5,offset:mze(s.offset,o("labelOffset"))},v=oo(a,p?GU(u,c,'"left"','"right"','"center"'):{value:"center"},h0n(a,"left","right")),_=oo(a,wze(a,"bottom","top"),p?GU(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=GU(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:ar,x:oo(a,y,g),y:bf(a,y,g)},E={enter:x,update:m={opacity:lc,text:{field:Xne},x:x.x,y:x.y,align:v,baseline:_},exit:{opacity:ar,x:x.x,y:x.y}};Mo(E,{dx:!d&&p?oo(a,w):null,dy:!h&&p?bf(a,w):null}),Mo(E,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const b=o("labelBound");let T=o("labelOverlap");return T=T||b?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:b?{scale:u,orient:a,tolerance:b}:null}:void 0,m.align!==v&&(m.align=kw(m.align,v)),m.baseline!==_&&(m.baseline=kw(m.baseline,_)),Il({type:S_,role:Gpn,style:$O,key:uc,from:r,encode:E,overlap:T},n)}function C0n(e,t,n,r){const i=Gu(e,t),s=e.orient,o=l8(s,-1,1);let a,u;const l={enter:a={opacity:ar,anchor:so(i("titleAnchor",null)),align:{signal:ere}},update:u=En({},a,{opacity:lc,text:so(e.title)}),exit:{opacity:ar}},c={signal:`lerp(range("${e.scale}"), ${o8(0,1,.5)})`};return u.x=oo(s,c),u.y=bf(s,c),a.angle=oo(s,ar,b0n(o,90)),a.baseline=oo(s,wze(s,j0,jf),{value:j0}),u.angle=a.angle,u.baseline=a.baseline,Mo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),I0n(i,s,l,n),l.update.align=kw(l.update.align,a.align),l.update.angle=kw(l.update.angle,a.angle),l.update.baseline=kw(l.update.baseline,a.baseline),Il({type:S_,role:Kpn,style:Qne,from:r,encode:l},n)}function I0n(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=kw(so(a),n.update[u]),!1):!Sb(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?so(o):oo(t,so(o),so(s))}function O0n(e,t){const n=w0n(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Gu(e,n),l=Tgn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=jt(t.add(Bf({},[c]))),d=jt(t.add(Pmn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(S0n(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(T0n(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(A0n(e,n,r.labels,d,p,l))),c.domain&&h.push(E0n(e,n,r.domain,f)),c.title&&h.push(C0n(e,n,r.title,f)),u8(HC({role:Hpn,from:f,encode:ex(P0n(u,e),i,RO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function P0n(e,t){const n={enter:{},update:{}};return Mo(n,{orient:e("orient"),offset:e("offset")||0,position:Qc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Sze(e,t,n){const r=ft(e.signals),i=ft(e.scales);return n||r.forEach(s=>tze(s,t)),ft(e.projections).forEach(s=>ugn(s,t)),i.forEach(s=>Xmn(s,t)),ft(e.data).forEach(s=>f0n(s,t)),i.forEach(s=>Qmn(s,t)),(n||r).forEach(s=>Omn(s,t)),ft(e.axes).forEach(s=>O0n(s,t)),ft(e.marks).forEach(s=>u8(s,t)),ft(e.legends).forEach(s=>Zgn(s,t)),e.title&&o0n(e.title,t),t.parseLambdas(),t}const k0n=e=>ex({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function $0n(e,t){const n=t.config,r=jt(t.root=t.add(GL())),i=R0n(e,n);i.forEach(l=>tze(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Bf()),o=t.add(ize(eze(k0n(e.encode),s8,Wne,e.style,t,{pulse:jt(s)}))),a=t.add(aze({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:jt(o)}));t.operators.pop(),t.pushState(jt(o),jt(a),null),Sze(e,t,i),t.operators.push(a);let u=t.add(rze({mark:r,pulse:jt(a)}));return u=t.add(oze({pulse:jt(u)})),u=t.add(E_({pulse:jt(u)})),t.addData("root",new L1(t,s,s,u)),t}function fT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function R0n(e,t){const n=o=>Qc(e[o],t[o]),r=[fT("background",n("background")),fT("autosize",Upn(n("autosize"))),fT("padding",Vpn(n("padding"))),fT("width",n("width")||0),fT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ft(e.signals).forEach(o=>{Vt(i,o.name)?o=En(i[o.name],o):r.push(o),s[o.name]=o}),ft(t.signals).forEach(o=>{!Vt(s,o.name)&&!Vt(i,o.name)&&r.push(o)}),r}function xze(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function S_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}xze.prototype=S_e.prototype={parse(e){return Sze(e,this)},fork(){return new S_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof xW?jt(e):e;return this.add(Hmn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(jt(this.add(E_({pulse:e})))),this._parent.push(t),this._lookup.push(n?jt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return er(this._parent)},encode(){return er(this._encode)},lookup(){return er(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(dt(e))return zC(e,t);e.signal||$e("Unsupported field reference: "+it(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=jt(this.add(Nmn(i)))}return r},compareRef(e){let t=!1;const n=s=>zs(s)?(t=!0,this.signalRef(s.signal)):_mn(s)?(t=!0,this.exprRef(s.expr)):s,r=ft(e.field).map(n),i=ft(e.order).map(n);return t?jt(this.add(l_e({fields:r,orders:i}))):a_e(r,i)},keyRef(e,t){let n=!1;const r=s=>zs(s)?(n=!0,jt(i[s.signal])):s,i=this.signals;return e=ft(e).map(r),n?jt(this.add(Dmn({fields:e,flat:t}))):mmn(e,t)},sortRef(e){if(!e)return e;const t=r8(e.op,e.field),n=e.order||gmn;return n.signal?jt(this.add(l_e({fields:t,orders:this.signalRef(n.signal)}))):a_e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Vt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&$e("Duplicate signal name: "+it(e));const n=t instanceof xW?t:this.add(GL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||$e("Unrecognized signal name: "+it(e)),this.signals[e]},signalRef(e){return this.signals[e]?jt(this.signals[e]):(Vt(this.lambdas,e)||(this.lambdas[e]=this.add(GL(null))),jt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=dh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||sre(e))},exprRef(e,t){const n={expr:dh(e,this)};return t&&(n.expr.$name=t),jt(this.add($mn(n)))},addBinding(e,t){this.bindings||$e("Nested signals do not support binding: "+it(e)),this.bindings.push(En({signal:e},t))},addScaleProj(e,t){Vt(this.scales,e)&&$e("Duplicate scale or projection name: "+it(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Wmn(t))},addProjection(e,t){this.addScaleProj(e,Vmn(t))},getScale(e){return this.scales[e]||$e("Unrecognized scale name: "+it(e)),this.scales[e]},scaleRef(e){return jt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Vt(this.data,e)&&$e("Duplicate data set name: "+it(e)),this.data[e]=t},getData(e){return this.data[e]||$e("Undefined data set name: "+it(e)),this.data[e]},addDataPipeline(e,t){return Vt(this.data,e)&&$e("Duplicate data set name: "+it(e)),this.addData(e,L1.fromEntries(this,t))}};function sre(e){return(Ne(e)?N0n:D0n)(e)}function N0n(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||sre(i):it(i))}return n+"]"}function D0n(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+it(r)+":"+(mt(i)?i.signal||sre(i):it(i));return t+"}"}function M0n(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function L0n(e,t,n){return mt(e)||$e("Input Vega specification must be an object."),t=qS(M0n(),t,e.config),$0n(e,new xze(t,n)).toRuntime()}var F0n="5.28.0";En(PE,_rn,aan,Ban,Aln,Rln,ocn,Bln,ucn,bcn,Pcn,Lcn);const B0n=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:F0,CanvasRenderer:NC,DATE:Fu,DAY:ua,DAYOFYEAR:ch,Dataflow:Ow,Debug:i8e,Error:zZ,EventStream:w5,Gradient:IBe,GroupItem:N5,HOURS:Tl,Handler:L0,HybridHandler:Lte,HybridRenderer:dL,Info:r8e,Item:R5,MILLISECONDS:If,MINUTES:Al,MONTH:ha,Marks:Cl,MultiPulse:uee,None:n8e,Operator:ni,Parameters:b5,Pulse:i0,QUARTER:Lu,RenderType:Pg,Renderer:Dl,ResourceLoader:dte,SECONDS:gc,SVGHandler:Pte,SVGRenderer:z5,SVGStringRenderer:Mte,Scenegraph:Ite,TIME_UNITS:eee,Transform:Ie,View:z7e,WEEK:Ms,Warn:VZ,YEAR:$o,accessor:Wu,accessorFields:da,accessorName:Ji,array:ft,ascending:p5,bandwidthNRD:dee,bin:b9e,bootstrapCI:w9e,boundClip:Tje,boundContext:EO,boundItem:Iq,boundMark:GBe,boundStroke:Tm,changeset:__,clampRange:m8e,codegenExpression:m7e,compare:YZ,constant:Sa,cumulativeLogNormal:vee,cumulativeNormal:S5,cumulativeUniform:Eee,dayofyear:N8e,debounce:KZ,defaultLocale:ree,definition:y9e,densityLogNormal:yee,densityNormal:hee,densityUniform:wee,domChild:Ns,domClear:Zl,domCreate:Ig,domFind:Ote,dotbin:E9e,error:$e,expressionFunction:cs,extend:En,extent:lh,extentIndex:g8e,falsy:Km,fastmap:GS,field:pc,flush:y8e,font:B5,fontFamily:TO,fontSize:xh,format:dR,formatLocale:JM,formats:oee,hasOwnProperty:Vt,id:lO,identity:Ea,inferType:o9e,inferTypes:a9e,ingest:Cr,inherits:tt,inrange:Gb,interpolate:ite,interpolateColors:k5,interpolateRange:pBe,intersect:wje,intersectBoxLine:Yb,intersectPath:hte,intersectPoint:pte,intersectRule:MBe,isArray:Ne,isBoolean:dy,isDate:n0,isFunction:Sn,isIterable:v8e,isNumber:fr,isObject:mt,isRegExp:_8e,isString:dt,isTuple:v5,key:XZ,lerp:b8e,lineHeight:D0,loader:g5,locale:i9e,logger:HZ,lruCache:w8e,markup:Dte,merge:E8e,mergeConfig:qS,multiLineOffset:Tte,one:HS,pad:S8e,panLinear:l8e,panLog:c8e,panPow:f8e,panSymlog:d8e,parse:L0n,parseExpression:$ne,parseSelector:py,path:H4,pathCurves:lte,pathEqual:Aje,pathParse:NE,pathRectangle:kBe,pathRender:PC,pathSymbols:PBe,pathTrail:$Be,peek:er,point:U5,projection:nne,quantileLogNormal:_ee,quantileNormal:x5,quantileUniform:See,quantiles:cee,quantizeInterpolator:mBe,quarter:h8e,quartiles:fee,get random(){return yc},randomInteger:Snn,randomKDE:mee,randomLCG:Enn,randomLogNormal:x9e,randomMixture:T9e,randomNormal:pee,randomUniform:A9e,read:c9e,regressionConstant:xee,regressionExp:I9e,regressionLinear:Tee,regressionLoess:k9e,regressionLog:C9e,regressionPoly:P9e,regressionPow:O9e,regressionQuad:Aee,renderModule:V5,repeat:VT,resetDefaultLocale:_tn,resetSVGClipId:NBe,resetSVGDefIds:Ton,responseType:l9e,runtimeContext:O7e,sampleCurve:A5,sampleLogNormal:gee,sampleNormal:E5,sampleUniform:bee,scale:br,sceneEqual:Fte,sceneFromJSON:KBe,scenePickVisit:rL,sceneToJSON:YBe,sceneVisit:Of,sceneZOrder:mte,scheme:ste,serializeXML:dje,setHybridRendererOptions:won,setRandom:bnn,span:cO,splitAccessPath:Sh,stringValue:it,textMetrics:yl,timeBin:Q8e,timeFloor:U8e,timeFormatLocale:CC,timeInterval:YS,timeOffset:H8e,timeSequence:G8e,timeUnitSpecifier:R8e,timeUnits:tee,toBoolean:QZ,toDate:JZ,toNumber:la,toSet:Cf,toString:ZZ,transform:v9e,transforms:PE,truncate:x8e,truthy:mc,tupleid:Ut,typeParsers:_q,utcFloor:z8e,utcInterval:KS,utcOffset:q8e,utcSequence:Y8e,utcdayofyear:L8e,utcquarter:p8e,utcweek:F8e,version:F0n,visitArray:rg,week:D8e,writeConfig:WS,zero:gg,zoomLinear:qZ,zoomLog:WZ,zoomPow:XM,zoomSymlog:GZ},Symbol.toStringTag,{value:"Module"}));function j0n(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var U0n={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},z0n={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},V0n={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const H0n=Array.prototype.slice,My=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,H0n.call(t,1))},q0n=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var W0n={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:q0n,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return My("join",arguments)},indexof:function(){return My("indexOf",arguments)},lastindexof:function(){return My("lastIndexOf",arguments)},slice:function(){return My("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return My("substring",arguments,String)},split:function(){return My("split",arguments,String)},replace:function(){return My("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const G0n=["view","item","group","xy","x","y"],kW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&kW.add(setImmediate);const Y0n={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:U0n[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),kW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||W0n[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>z0n[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>V0n[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,kW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function dT(e,t,n,r,i,s){const o=a=>Y0n[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,G0n.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var K0n={operator(e,t){const n=t.ast,r=e.functions;return i=>dT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>dT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>dT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return dT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=dT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&j0n(o,r,s),l}}};const X0n="vega-lite",Q0n='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',J0n="5.17.0",Z0n=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],eyn="https://vega.github.io/vega-lite/",tyn="Vega-Lite is a concise high-level language for interactive visualization.",nyn=["vega","chart","visualization"],ryn="build/vega-lite.js",iyn="build/vega-lite.min.js",syn="build/vega-lite.min.js",oyn="build/src/index",ayn="build/src/index.d.ts",uyn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},lyn=["bin","build","src","vega-lite*","tsconfig.json"],cyn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},fyn={type:"git",url:"https://github.com/vega/vega-lite.git"},dyn="BSD-3-Clause",hyn={url:"https://github.com/vega/vega-lite/issues"},pyn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},myn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},gyn={vega:"^5.24.0"},yyn={node:">=18"},vyn={name:X0n,author:Q0n,version:J0n,collaborators:Z0n,homepage:eyn,description:tyn,keywords:nyn,main:ryn,unpkg:iyn,jsdelivr:syn,module:oyn,types:ayn,bin:uyn,files:lyn,scripts:cyn,repository:fyn,license:dyn,bugs:hyn,devDependencies:pyn,dependencies:myn,peerDependencies:gyn,engines:yyn};function ore(e){return!!e.or}function are(e){return!!e.and}function ure(e){return!!e.not}function $R(e,t){if(ure(e))$R(e.not,t);else if(are(e))for(const n of e.and)$R(n,t);else if(ore(e))for(const n of e.or)$R(n,t);else t(e)}function $w(e,t){return ure(e)?{not:$w(e.not,t)}:are(e)?{and:e.and.map(n=>$w(n,t))}:ore(e)?{or:e.or.map(n=>$w(n,t))}:t(e)}const tn=structuredClone;function Tze(e){throw new Error(e)}function UE(e,t){const n={};for(const r of t)Vt(e,r)&&(n[r]=e[r]);return n}function ku(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Gr(e)).join(",")})`};function Vn(e){if(fr(e))return e;const t=dt(e)?e:Gr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function $W(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function F1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function lre(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Aze(e,...t){for(const n of t)_yn(e,n??{});return e}function _yn(e,t){for(const n of ze(t))WS(e,n,t[n],!0)}function Pd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function byn(e,t){const n=ze(e),r=ze(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Cze(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function cre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function RW(e){const t=new Set;for(const n of e){const i=Sh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function fre(e,t){return e===void 0||t===void 0?!0:cre(RW(e),RW(t))}function Wr(e){return ze(e).length===0}const ze=Object.keys,Ro=Object.values,U0=Object.entries;function qC(e){return e===!0||e===!1}function $i(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function lA(e,t){return ure(e)?`!(${lA(e.not,t)})`:are(e)?`(${e.and.map(n=>lA(n,t)).join(") && (")})`:ore(e)?`(${e.or.map(n=>lA(n,t)).join(") || (")})`:t(e)}function YL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&YL(e[n],t)&&delete e[n],Wr(e)}function NO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function dre(e,t="datum"){const n=Sh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(it).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function Ize(e,t="datum"){return`${t}[${it(Sh(e).join("."))}]`}function wyn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function _c(e){return`${Sh(e).map(wyn).join("\\.")}`}function B1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function hre(e){return`${Sh(e).join(".")}`}function zE(e){return e?Sh(e).length:0}function us(...e){for(const t of e)if(t!==void 0)return t}let Oze=42;function Pze(e){const t=++Oze;return e?String(e)+t:t}function Eyn(){Oze=42}function kze(e){return $ze(e)?e:`__${e}`}function $ze(e){return e.startsWith("__")}function WC(e){if(e!==void 0)return(e%360+360)%360}function c8(e){return fr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const x_e=Object.getPrototypeOf(structuredClone({}));function hl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!hl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!hl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==x_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==x_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!hl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Gr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Dp="row",Mp="column",f8="facet",Ri="x",ho="y",Uf="x2",Ih="y2",my="xOffset",rx="yOffset",zf="radius",Cm="radius2",Rc="theta",Im="theta2",Vf="latitude",Hf="longitude",qf="latitude2",bc="longitude2",ju="color",Oh="fill",Ph="stroke",Uu="shape",Om="size",x_="angle",Pm="opacity",gy="fillOpacity",yy="strokeOpacity",vy="strokeWidth",_y="strokeDash",DO="text",VE="order",MO="detail",d8="key",j1="tooltip",h8="href",p8="url",m8="description",Syn={x:1,y:1,x2:1,y2:1},Rze={theta:1,theta2:1,radius:1,radius2:1};function Nze(e){return e in Rze}const pre={longitude:1,longitude2:1,latitude:1,latitude2:1};function Dze(e){switch(e){case Vf:return"y";case qf:return"y2";case Hf:return"x";case bc:return"x2"}}function Mze(e){return e in pre}const xyn=ze(pre),mre={...Syn,...Rze,...pre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Rw(e){return e===ju||e===Oh||e===Ph}const Lze={row:1,column:1,facet:1},sc=ze(Lze),gre={...mre,...Lze},Tyn=ze(gre),{order:GCn,detail:YCn,tooltip:KCn,...Ayn}=gre,{row:XCn,column:QCn,facet:JCn,...Cyn}=Ayn;function Iyn(e){return!!Cyn[e]}function Fze(e){return!!gre[e]}const Oyn=[Uf,Ih,qf,bc,Im,Cm];function Bze(e){return T_(e)!==e}function T_(e){switch(e){case Uf:return Ri;case Ih:return ho;case qf:return Vf;case bc:return Hf;case Im:return Rc;case Cm:return zf}return e}function z0(e){if(Nze(e))switch(e){case Rc:return"startAngle";case Im:return"endAngle";case zf:return"outerRadius";case Cm:return"innerRadius"}return e}function kh(e){switch(e){case Ri:return Uf;case ho:return Ih;case Vf:return qf;case Hf:return bc;case Rc:return Im;case zf:return Cm}}function zu(e){switch(e){case Ri:case Uf:return"width";case ho:case Ih:return"height"}}function jze(e){switch(e){case Ri:return"xOffset";case ho:return"yOffset";case Uf:return"x2Offset";case Ih:return"y2Offset";case Rc:return"thetaOffset";case zf:return"radiusOffset";case Im:return"theta2Offset";case Cm:return"radius2Offset"}}function yre(e){switch(e){case Ri:return"xOffset";case ho:return"yOffset"}}function Pyn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const kyn=ze(mre),{x:ZCn,y:eIn,x2:tIn,y2:nIn,xOffset:rIn,yOffset:iIn,latitude:sIn,longitude:oIn,latitude2:aIn,longitude2:uIn,theta:lIn,theta2:cIn,radius:fIn,radius2:dIn,...vre}=mre,$yn=ze(vre),_re={x:1,y:1},$h=ze(_re);function ls(e){return e in _re}const bre={theta:1,radius:1},Ryn=ze(bre);function g8(e){return e==="width"?Ri:ho}const Uze={xOffset:1,yOffset:1};function LO(e){return e in Uze}const{text:hIn,tooltip:pIn,href:mIn,url:gIn,description:yIn,detail:vIn,key:_In,order:bIn,...zze}=vre,Nyn=ze(zze);function Dyn(e){return!!vre[e]}function Myn(e){switch(e){case ju:case Oh:case Ph:case Om:case Uu:case Pm:case vy:case _y:return!0;case gy:case yy:case x_:return!1}}const Vze={..._re,...bre,...Uze,...zze},y8=ze(Vze);function km(e){return!!Vze[e]}function Lyn(e,t){return Byn(e)[t]}const Hze={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wIn,...Fyn}=Hze;function Byn(e){switch(e){case ju:case Oh:case Ph:case m8:case MO:case d8:case j1:case h8:case VE:case Pm:case gy:case yy:case vy:case f8:case Dp:case Mp:return Hze;case Ri:case ho:case my:case rx:case Vf:case Hf:return Fyn;case Uf:case Ih:case qf:case bc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Om:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case _y:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Uu:return{point:"always",geoshape:"always"};case DO:return{text:"always"};case x_:return{point:"always",square:"always",text:"always"};case p8:return{image:"always"};case Rc:return{text:"always",arc:"always"};case zf:return{text:"always",arc:"always"};case Im:case Cm:return{arc:"always"}}}function YU(e){switch(e){case Ri:case ho:case Rc:case zf:case my:case rx:case Om:case x_:case vy:case Pm:case gy:case yy:case Uf:case Ih:case Im:case Cm:return;case f8:case Dp:case Mp:case Uu:case _y:case DO:case j1:case h8:case p8:case m8:return"discrete";case ju:case Oh:case Ph:return"flexible";case Vf:case Hf:case qf:case bc:case MO:case d8:case VE:return}}const jyn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Uyn={count:1,min:1,max:1};function cm(e){return!!e&&!!e.argmin}function by(e){return!!e&&!!e.argmax}function wre(e){return dt(e)&&!!jyn[e]}const zyn=new Set(["count","valid","missing","distinct"]);function qze(e){return dt(e)&&zyn.has(e)}function Vyn(e){return dt(e)&&Hn(["min","max"],e)}const Hyn=new Set(["count","sum","distinct","valid","missing"]),qyn=new Set(["mean","average","median","q1","q3","min","max"]);function Wze(e){return dy(e)&&(e=O8(e,void 0)),"bin"+ze(e).map(t=>v8(e[t])?$i(`_${t}_${U0(e[t])}`):$i(`_${t}_${e[t]}`)).join("")}function ci(e){return e===!0||A_(e)&&!e.binned}function So(e){return e==="binned"||A_(e)&&e.binned===!0}function A_(e){return mt(e)}function v8(e){return e==null?void 0:e.param}function T_e(e){switch(e){case Dp:case Mp:case Om:case ju:case Oh:case Ph:case vy:case Pm:case gy:case yy:case Uu:return 6;case _y:return 4;default:return 10}}function FO(e){return!!(e!=null&&e.expr)}function yu(e){const t=ze(e||{}),n={};for(const r of t)n[r]=al(e[r]);return n}function Gze(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=UE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function ag(e){return dt(e)||Ne(e)&&dt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function wy(e){return!!e.step}function Wyn(e){return Ne(e)?!1:"fields"in e&&!("data"in e)}function Gyn(e){return Ne(e)?!1:"fields"in e&&"data"in e}function Sp(e){return Ne(e)?!1:"field"in e&&"data"in e}const Yyn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Kyn=ze(Yyn),Xyn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},NW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Yze(e){const t=Ne(e.condition)?e.condition.map(A_e):A_e(e.condition);return{...al(e),condition:t}}function al(e){if(FO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function A_e(e){if(FO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function vi(e){if(FO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function Qyn(e){return Nt(e)?e.signal:it(e)}function C_e(e){return Nt(e)?e.signal:it(e.value)}function ff(e){return Nt(e)?e.signal:e==null?null:it(e)}function Jyn(e,t,n){for(const r of n){const i=fm(r,t.markDef,t.config);i!==void 0&&(e[r]=vi(i))}return e}function Kze(e){return[].concat(e.type,e.style??[])}function Ar(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:fm(e,t,n,r)}function fm(e,t,n,{vgChannel:r}={}){return us(r?KL(e,t,n.style):void 0,KL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function KL(e,t,n){return Xze(e,Kze(t),n)}function Xze(e,t,n){t=ft(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function Qze(e,t){return ft(e).reduce((n,r)=>(n.field.push(ot(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Jze(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(hl(i,r))return;n.push(r)}),n}function Zze(e,t){return hl(e,t)||!t?e:e?[...ft(e),...ft(t)].join(", "):t}function eVe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ag(n)||Nt(n))&&(ag(r)||Nt(r)))return{explicit:e.explicit,value:Zze(n,r)};if(ag(n)||Nt(n))return{explicit:e.explicit,value:n};if(ag(r)||Nt(r))return{explicit:e.explicit,value:r};if(!ag(n)&&!Nt(n)&&!ag(r)&&!Nt(r))return{explicit:e.explicit,value:Jze(n,r)};throw new Error("It should never reach here")}function Ere(e){return`Invalid specification ${Gr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Zyn='Autosize "fit" only works for single views and layered views.';function I_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function O_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function P_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${zu(e)}.`:'Dropping "fit" because spec has discrete size.'}function Sre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function k_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function evn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function tvn(e){return`The "nearest" transform is not supported for ${e} marks.`}function tVe(e){return`Selection not supported for ${e} yet.`}function nvn(e){return`Cannot find a selection named "${e}".`}const rvn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",ivn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",svn="Legend bindings are only supported for selections over an individual field or encoding channel.";function ovn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function avn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const uvn="The same selection must be used to override scale domains in a layered view.",lvn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function cvn(e){return`Unknown repeated value "${e}".`}function $_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const fvn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function dvn(e){return`Unrecognized parse "${e}".`}function R_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const hvn="Attempt to add the same child twice.";function pvn(e){return`Ignoring an invalid transform: ${Gr(e)}.`}const mvn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function N_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function gvn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Gr(t)} is overridden by a child projection ${Gr(n)}.`}const yvn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function vvn(e){return`${e}Offset dropped because ${e} is continuous`}function _vn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Gr(n)}}.`}function nVe(e){return`Invalid field type "${e}".`}function bvn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function wvn(e){return`Invalid aggregation operator "${e}".`}function rVe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Evn(e){return`Position range does not support relative band size for ${e}.`}function DW(e,t){return`Dropping ${Gr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Svn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function _8(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function xvn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Tvn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Avn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Cvn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function KU(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Ivn(e){return`The ${e} for range marks cannot be an expression`}function Ovn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Pvn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function kvn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function $vn(e){return`Cannot use the relative band size with ${e} scale.`}function Rvn(e){return`Using unaggregated domain with raw field has no effect (${Gr(e)}).`}function Nvn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Dvn(e){return`Unaggregated domain is currently unsupported for log scale (${Gr(e)}).`}function Mvn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Lvn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Fvn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function iVe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function sVe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Bvn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gr(n)} and ${Gr(r)}). Using ${Gr(n)}.`}function jvn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gr(n)} and ${Gr(r)}). Using the union of the two domains.`}function Uvn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function zvn(e){return`Dropping sort property ${Gr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const D_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Vvn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Hvn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",qvn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Wvn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Gvn(e){return`Cannot stack non-linear scale (${e}).`}function Yvn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function XL(e,t){return`Invalid ${e}: ${Gr(t)}.`}function Kvn(e){return`Dropping day from datetime ${Gr(e)} as day cannot be combined with other units.`}function Xvn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Qvn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Jvn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function M_e(e){return`1D error band does not support ${e}.`}function oVe(e){return`Channel ${e} is required for "binned" bin.`}function Zvn(e){return`Channel ${e} should not be used with "binned" bin.`}function e1n(e){return`Domain for ${e} is required for threshold scale.`}const aVe=HZ(VZ);let HE=aVe;function t1n(e){return HE=e,HE}function n1n(){return HE=aVe,HE}function Qe(...e){HE.warn(...e)}function r1n(...e){HE.debug(...e)}function C_(e){if(e&&mt(e)){for(const t of Tre)if(t in e)return!0}return!1}const uVe=["january","february","march","april","may","june","july","august","september","october","november","december"],i1n=uVe.map(e=>e.substr(0,3)),lVe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],s1n=lVe.map(e=>e.substr(0,3));function o1n(e){if(c8(e)&&(e=+e),fr(e))return e>4&&Qe(XL("quarter",e)),e-1;throw new Error(XL("quarter",e))}function a1n(e){if(c8(e)&&(e=+e),fr(e))return e-1;{const t=e.toLowerCase(),n=uVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=i1n.indexOf(r);if(i!==-1)return i;throw new Error(XL("month",e))}}function u1n(e){if(c8(e)&&(e=+e),fr(e))return e%7;{const t=e.toLowerCase(),n=lVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=s1n.indexOf(r);if(i!==-1)return i;throw new Error(XL("day",e))}}function xre(e,t){const n=[];if(t&&e.day!==void 0&&ze(e).length>1&&(Qe(Kvn(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?a1n(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?o1n(e.quarter):e.quarter;n.push(fr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?u1n(e.day):e.day;n.push(fr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function U1(e){const n=xre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function l1n(e){const n=xre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function c1n(e){const t=xre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const cVe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Tre=ze(cVe);function f1n(e){return!!cVe[e]}function I_(e){return mt(e)?e.binned:fVe(e)}function fVe(e){return e&&e.startsWith("binned")}function Are(e){return e.startsWith("utc")}function d1n(e){return e.substring(3)}const h1n={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function b8(e){return Tre.filter(t=>hVe(e,t))}function dVe(e){const t=b8(e);return t[t.length-1]}function hVe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function p1n(e,t,{end:n}={end:!1}){const r=dre(t),i=Are(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Tre)hVe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),l1n(a)}function pVe(e){if(!e)return;const t=b8(e);return`timeUnitSpecifier(${Gr(t)}, ${Gr(h1n)})`}function m1n(e,t,n){if(!e)return;const r=pVe(e);return`${n||Are(e)?"utc":"time"}Format(${t}, ${r})`}function uo(e){if(!e)return;let t;return dt(e)?fVe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Are(t.unit)&&(t.utc=!0,t.unit=d1n(t.unit)),t}function g1n(e){const{utc:t,...n}=uo(e);return n.unit?(t?"utc":"")+ze(n).map(r=>$i(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ze(n).map(r=>$i(`_${r}_${n[r]}`)).join("")}function mVe(e,t=n=>n){const n=uo(e),r=dVe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=gVe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(U1(a))} - ${t(U1(i))}`}}const y1n={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function v1n(e){return!!y1n[e]}function gVe(e,t=1){if(v1n(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function _1n(e){return e==null?void 0:e.param}function Cre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ire(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ore(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Pre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function kre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function $re(e){if(e!=null&&e.field){if(Ne(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function Rre(e){return!!(e!=null&&e.field)&&(Ne(e.oneOf)||Ne(e.in))}function b1n(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function yVe(e){return Rre(e)||Cre(e)||$re(e)||Ire(e)||Pre(e)||Ore(e)||kre(e)}function Jf(e,t){return P8(e,{timeUnit:t,wrapTime:!0})}function w1n(e,t){return e.map(n=>Jf(n,t))}function vVe(e,t=!0){const{field:n}=e,r=uo(e.timeUnit),{unit:i,binned:s}=r||{},o=ot(e,{expr:"datum"}),a=i?`time(${s?o:p1n(i,n)})`:o;if(Cre(e))return`${a}===${Jf(e.equal,i)}`;if(Ire(e)){const u=e.lt;return`${a}<${Jf(u,i)}`}else if(Pre(e)){const u=e.gt;return`${a}>${Jf(u,i)}`}else if(Ore(e)){const u=e.lte;return`${a}<=${Jf(u,i)}`}else if(kre(e)){const u=e.gte;return`${a}>=${Jf(u,i)}`}else{if(Rre(e))return`indexof([${w1n(e.oneOf,i).join(",")}], ${a}) !== -1`;if(b1n(e))return Nre(a,e.valid);if($re(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Jf(l,i)+", "+Jf(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Jf(l,i)}`),c!==null&&f.push(`${a} <= ${Jf(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Gr(e)}`)}function Nre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function E1n(e){return yVe(e)&&e.timeUnit?{...e,timeUnit:uo(e.timeUnit)}:e}const BO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function S1n(e){return e==="quantitative"||e==="temporal"}function _Ve(e){return e==="ordinal"||e==="nominal"}const z1=BO.quantitative,Dre=BO.ordinal,qE=BO.temporal,Mre=BO.nominal,ix=BO.geojson;function x1n(e){if(e)switch(e=e.toLowerCase(),e){case"q":case z1:return"quantitative";case"t":case qE:return"temporal";case"o":case Dre:return"ordinal";case"n":case Mre:return"nominal";case ix:return"geojson"}}const $u={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},MW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function T1n(e,t){const n=MW[e],r=MW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const A1n={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function L_e(e){return A1n[e]}const bVe=new Set(["linear","log","pow","sqrt","symlog"]),wVe=new Set([...bVe,"time","utc"]);function EVe(e){return bVe.has(e)}const SVe=new Set(["quantile","quantize","threshold"]),C1n=new Set([...wVe,...SVe,"sequential","identity"]),I1n=new Set(["ordinal","bin-ordinal","point","band"]);function lo(e){return I1n.has(e)}function Ol(e){return C1n.has(e)}function df(e){return wVe.has(e)}function WE(e){return SVe.has(e)}const O1n={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function P1n(e){return!dt(e)&&!!e.name}function xVe(e){return e==null?void 0:e.param}function k1n(e){return e==null?void 0:e.unionWith}function $1n(e){return mt(e)&&"field"in e}const R1n={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:EIn,domain:SIn,range:xIn,rangeMax:TIn,rangeMin:AIn,scheme:CIn,...N1n}=R1n,D1n=ze(N1n);function LW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return df(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return df(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return df(e);case"nice":return df(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Ol(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function TVe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Rw(e)?void 0:kvn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function M1n(e,t){return Hn([Dre,Mre],t)?e===void 0||lo(e):t===qE?Hn([$u.TIME,$u.UTC,void 0],e):t===z1?EVe(e)||WE(e)||e===void 0:!0}function L1n(e,t,n=!1){if(!km(e))return!1;switch(e){case Ri:case ho:case my:case rx:case Rc:case zf:return df(t)||t==="band"?!0:t==="point"?!n:!1;case Om:case vy:case Pm:case gy:case yy:case x_:return df(t)||WE(t)||Hn(["band","point","ordinal"],t);case ju:case Oh:case Ph:return t!=="band";case _y:case Uu:return t==="ordinal"||WE(t)}}const ru={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},AVe=ru.arc,w8=ru.area,E8=ru.bar,F1n=ru.image,S8=ru.line,x8=ru.point,B1n=ru.rect,QL=ru.rule,CVe=ru.text,Lre=ru.tick,j1n=ru.trail,Fre=ru.circle,Bre=ru.square,IVe=ru.geoshape;function Ey(e){return["line","area","trail"].includes(e)}function GC(e){return["rect","bar","image","arc"].includes(e)}const U1n=new Set(ze(ru));function hh(e){return e.type}const z1n=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],V1n=["fill","fillOpacity"],H1n=[...z1n,...V1n],q1n={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},F_e=ze(q1n),W1n={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},G1n={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Y1n={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},OVe=ze(Y1n);function V1(e){return e&&e.band!=null}const K1n={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},PVe=5,X1n={binSpacing:1,continuousBandSize:PVe,minBandSize:.25,timeUnitBandPosition:.5},Q1n={binSpacing:0,continuousBandSize:PVe,minBandSize:.25,timeUnitBandPosition:.5},J1n={thickness:1};function Z1n(e){return hh(e)?e.type:e}function jre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=zre(e);return Ze(n)&&!qze(n.aggregate)&&i&&df(i.get("type"))?e_n({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function e_n({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Ey(n.type)?r:Ar("invalid",n,i)===null?[t_n(e,t),r]:r}function t_n(e,t){const n=Ure(e,!0),i=T_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Ure(e,t=!0){return Nre(dt(e)?e:ot(e,{expr:"datum"}),!t)}function n_n(e){const{datum:t}=e;return C_(t)?U1(t):`${Gr(t)}`}function n1(e,t,n,r){const i={};if(t&&(i.scale=t),Rh(e)){const{datum:s}=e;C_(s)?i.signal=U1(s):Nt(s)?i.signal=s.signal:FO(s)?i.signal=s.expr:i.value=s}else i.field=ot(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function JL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=ot(t,{expr:a,suffix:i}),l=n!==void 0?ot(n,{expr:a}):ot(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function r_n({scaleName:e,fieldDef:t}){const n=ot(t,{expr:"datum"}),r=ot(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function zre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(Ja(t)){c??(c=V0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ci(d)||c&&h&&p===qE)return a!=null&&a.impute?n1(t,s,{binSuffix:"mid"},{offset:u}):c&&!lo(f)?JL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):n1(t,s,VO(t,e)?{binSuffix:"range"}:{},{offset:u});if(So(d)){if(Ze(n))return JL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Qe(oVe(e===Ri?Uf:Ih))}}return n1(t,s,lo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Pf(t)){const f=t.value,d=u?{offset:u}:{};return{...cA(e,f),...d}}}return Sn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function cA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:vi(t)}function H1(e){return e&&e!=="number"&&e!=="time"}function kVe(e,t,n){return`${e}(${t}${n?`, ${Gr(n)}`:""})`}const i_n="  ";function Vre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(H1(n))return hf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=$Ve(e,r,i),a=GE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return hf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return hf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return hf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(KE(e)){const c=o_n({field:o,timeUnit:Ze(e)?(u=uo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:O_(e)&&((l=e.scale)==null?void 0:l.type)===$u.UTC});return c?{signal:c}:void 0}if(t=FW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&ci(e.bin)){const c=ot(e,{expr:r,binSuffix:"end"});return{signal:jO(o,c,t,n,s)}}else return t||GE(e)==="quantitative"?{signal:`${DVe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function $Ve(e,t,n){return Ze(e)?n?`${ot(e,{expr:t,suffix:"end"})}-${ot(e,{expr:t,suffix:"start"})}`:ot(e,{expr:t}):n_n(e)}function hf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=$Ve(e,r,i)),o!=="datum.value"&&Ze(e)&&ci(e.bin)){const a=ot(e,{expr:r,binSuffix:"end"});return{signal:jO(o,a,t,n,s)}}return{signal:kVe(n,o,t)}}function RVe(e,t,n,r,i,s){var o;if(!(dt(r)&&H1(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&GE(e)==="quantitative"&&(i.normalizedNumberFormatType&&YE(e)&&e.stack==="normalize"||i.numberFormatType))){if(YE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return FW({type:"quantitative",config:i,normalizeStack:!0});if(KE(e)){const a=Ze(e)?(o=uo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:s_n({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return FW({type:t,specifiedFormat:n,config:i})}}function NVe(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if(KE(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=uo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function FW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(dt(t))return t;if(e===z1)return r?n.normalizedNumberFormat:n.numberFormat}function s_n({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:pVe(t)}:r?void 0:n.timeFormat)}function DVe(e,t){return`format(${e}, "${t||""}")`}function B_e(e,t,n,r){return H1(n)?kVe(n,e,t):DVe(e,(dt(t)?t:void 0)??r.numberFormat)}function jO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return jO(e,t,i.numberFormat,i.numberFormatType,i);const s=B_e(e,n,r,i),o=B_e(t,n,r,i);return`${Nre(e,!1)} ? "null" : ${s} + "${i_n}" + ${o}`}function o_n({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=dt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):m1n(t,e,s)}const T8="min",a_n={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function j_e(e){return e in a_n}function MVe(e){return!!(e!=null&&e.encoding)}function Yd(e){return e&&(e.op==="count"||!!e.field)}function LVe(e){return e&&Ne(e)}function UO(e){return"row"in e||"column"in e}function Hre(e){return!!e&&"header"in e}function A8(e){return"facet"in e}function u_n(e){return e.param}function l_n(e){return e&&!dt(e)&&"repeat"in e}function U_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function qre(e){return"sort"in e}function V0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return fm("timeUnitBandPosition",n,r);if(ci(s))return .5}}function FVe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=zu(e),u=Ar(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:fm("timeUnitBandSize",r,i)};if(ci(h)&&!lo(s))return{band:1}}if(GC(r.type))return s?lo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function BVe(e,t,n,r){return ci(e.bin)||e.timeUnit&&Ja(e)&&e.type==="temporal"?V0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function jVe(e){return e&&!!e.sort&&!e.field}function C8(e){return e&&"condition"in e}function I8(e){const t=e==null?void 0:e.condition;return!!t&&!Ne(t)&&Ze(t)}function zO(e){const t=e==null?void 0:e.condition;return!!t&&!Ne(t)&&ln(t)}function c_n(e){const t=e==null?void 0:e.condition;return!!t&&(Ne(t)||Pf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function GE(e){return e==null?void 0:e.type}function Rh(e){return e&&"datum"in e}function Ng(e){return Ja(e)&&!e6(e)||ZL(e)}function z_e(e){return Ja(e)&&e.type==="quantitative"&&!e.bin||ZL(e)}function ZL(e){return Rh(e)&&fr(e.datum)}function ln(e){return Ze(e)||Rh(e)}function Ja(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Pf(e){return e&&"value"in e&&"value"in e}function O_(e){return e&&("scale"in e||"sort"in e)}function YE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function UVe(e){return e&&"legend"in e}function zVe(e){return e&&("format"in e||"formatType"in e)}function f_n(e){return ku(e,["legend","axis","header","scale"])}function d_n(e){return"op"in e}function ot(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(p_n(e))n=kze("count");else{let o;if(!t.nofn)if(d_n(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ci(a)?(o=Wze(a),i=(t.binSuffix??"")+(t.suffix??"")):u?by(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):cm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!I_(l)&&(o=g1n(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?hre(n):t.expr?Ize(n,t.expr)+s:_c(n)+s}function e6(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(nVe(e.type))}function h_n(e){var t;return O_(e)&&WE((t=e.scale)==null?void 0:t.type)}function p_n(e){return e.aggregate==="count"}function m_n(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ci(r))return`${n} (binned)`;if(i&&!I_(i)){const a=(o=uo(i))==null?void 0:o.unit;if(a)return`${n} (${b8(a).join("-")})`}else if(s)return by(s)?`${n} for max ${s.argmax}`:cm(s)?`${n} for min ${s.argmin}`:`${NO(s)} of ${n}`;return n}function g_n(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(by(t))return`${i} for argmax(${t.argmax})`;if(cm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!I_(r)?uo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ci(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const VVe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return g_n(e);default:return m_n(e,t)}};let HVe=VVe;function qVe(e){HVe=e}function y_n(){qVe(VVe)}function Nw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Wre(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Gre(s,t):void 0;return n?us(i,s.title,o):i??s.title??o}function Wre(e){if(YE(e)&&e.axis)return e.axis;if(UVe(e)&&e.legend)return e.legend;if(Hre(e)&&e.header)return e.header}function Gre(e,t){return HVe(e,t)}function t6(e){if(zVe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Wre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function v_n(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(qre(e)&&Ne(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!by(n)&&!cm(n))return"quantitative";if(O_(e)&&((s=e.scale)!=null&&s.type))switch(MW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ph(e){if(Ze(e))return e;if(I8(e))return e.condition}function Ls(e){if(ln(e))return e;if(zO(e))return e.condition}function WVe(e,t,n,r={}){if(dt(e)||fr(e)||dy(e)){const i=dt(e)?"string":fr(e)?"number":"boolean";return Qe(_vn(t,i,e)),{value:e}}return ln(e)?n6(e,t,n,r):zO(e)?{...e,condition:n6(e.condition,t,n,r)}:e}function n6(e,t,n,r){if(zVe(e)){const{format:i,formatType:s,...o}=e;if(H1(s)&&!n.customFormatTypes)return Qe(N_e(t)),n6(o,t,n,r)}else{const i=YE(e)?"axis":UVe(e)?"legend":Hre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(H1(o)&&!n.customFormatTypes)return Qe(N_e(t)),n6({...e,[i]:a},t,n,r)}}return Ze(e)?Yre(e,t,r):__n(e)}function __n(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=fr(n)?"quantitative":dt(n)?"nominal":C_(n)?"temporal":void 0,{...e,type:t}}function Yre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!wre(r)&&!by(r)&&!cm(r)&&(Qe(wvn(r)),delete a.aggregate),i&&(a.timeUnit=uo(i)),o&&(a.field=`${o}`),ci(s)&&(a.bin=O8(s,t)),So(s)&&!ls(t)&&Qe(Zvn(t)),Ja(a)){const{type:u}=a,l=x1n(u);u!==l&&(a.type=l),u!=="quantitative"&&qze(r)&&(Qe(bvn(u,r)),a.type="quantitative")}else if(!Bze(t)){const u=v_n(a,t);a.type=u}if(Ja(a)){const{compatible:u,warning:l}=b_n(a,t)||{};u===!1&&Qe(l)}if(qre(a)&&dt(a.sort)){const{sort:u}=a;if(j_e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&j_e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Hre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function O8(e,t){return dy(e)?{maxbins:T_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:T_e(t)}:e}const rb={compatible:!0};function b_n(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Dp:case Mp:case f8:return e6(e)?rb:{compatible:!1,warning:Tvn(t)};case Ri:case ho:case my:case rx:case ju:case Oh:case Ph:case DO:case MO:case d8:case j1:case h8:case p8:case x_:case Rc:case zf:case m8:return rb;case Hf:case bc:case Vf:case qf:return n!==z1?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:rb;case Pm:case gy:case yy:case vy:case Om:case Im:case Cm:case Uf:case Ih:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:rb;case Uu:case _y:return!e6(e)&&!h_n(e)?{compatible:!1,warning:Avn(t)}:rb;case VE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:rb}}function KE(e){const{formatType:t}=t6(e);return t==="time"||!t&&w_n(e)}function w_n(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function P8(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=uo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return FO(e)?a=e.expr:Nt(e)?a=e.signal:C_(e)?(o=!0,a=U1(e)):(dt(e)||fr(e))&&o&&(a=`datetime(${Gr(e)})`,f1n(s)&&(fr(e)&&e<1e4||dt(e)&&isNaN(Date.parse(e)))&&(a=U1({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Gr(e)}function GVe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!I_(e.timeUnit)?e.timeUnit:void 0,s=P8(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function VO(e,t){return ci(e.bin)?km(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const V_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function HO(e){return e==null?void 0:e.condition}const YVe=["domain","grid","labels","ticks","title"],E_n={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},KVe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},S_n={...KVe,style:1,labelExpr:1,encoding:1};function H_e(e){return!!S_n[e]}const x_n={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},XVe=ze(x_n);function $m(e){return"mark"in e}class k8{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return $m(t)?Z1n(t.mark)===this.name:!1}}function r1(e,t){const n=e&&e[t];return n?Ne(n)?F1(n,r=>!!r.field):Ze(n)||I8(n):!1}function QVe(e,t){const n=e&&e[t];return n?Ne(n)?F1(n,r=>!!r.field):Ze(n)||Rh(n)||zO(n):!1}function JVe(e,t){if(ls(t)){const n=e[t];if((Ze(n)||Rh(n))&&(_Ve(n.type)||Ze(n)&&n.timeUnit)){const r=yre(t);return QVe(e,r)}}return!1}function Kre(e){return F1(Tyn,t=>{if(r1(e,t)){const n=e[t];if(Ne(n))return F1(n,r=>!!r.aggregate);{const r=ph(n);return r&&!!r.aggregate}}return!1})}function ZVe(e,t){const n=[],r=[],i=[],s=[],o={};return Xre(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Wre(a),m=p==null?void 0:p.title;let g=ot(a,{forAs:!0});const y={...m?[]:{title:Nw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(by(c)?(v="argmax",g=ot({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):cm(c)?(v="argmin",g=ot({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),Ja(a)&&ci(f)){if(r.push({bin:f,field:l,as:g}),n.push(ot(a,{binSuffix:"end"})),VO(a,u)&&n.push(ot(a,{binSuffix:"range"})),ls(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",Bze(u)||(y.type=z1)}else if(d&&!I_(d)){i.push({timeUnit:d,field:l,as:g});const v=Ja(a)&&a.type!==qE&&"time";v&&(u===DO||u===j1?y.formatType=v:Dyn(u)?y.legend={formatType:v,...y.legend}:ls(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function T_n(e,t,n){const r=Lyn(t,n);if(r){if(r==="binned"){const i=e[t===Uf?Ri:ho];return!!(Ze(i)&&Ze(e[t])&&So(i.bin))}}else return!1;return!0}function A_n(e,t,n,r){const i={};for(const s of ze(e))Fze(s)||Qe(xvn(s));for(let s of kyn){if(!e[s])continue;const o=e[s];if(LO(s)){const a=Pyn(s),u=i[a];if(Ze(u)&&S1n(u.type)&&Ze(o)&&!u.timeUnit){Qe(vvn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Qe(yvn),s=Rc),!T_n(e,s,t)){Qe(_8(s,t));continue}if(s===Om&&t==="line"){const a=ph(e[s]);if(a!=null&&a.aggregate){Qe(Svn);continue}}if(s===ju&&(n?"fill"in e:"stroke"in e)){Qe(rVe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===MO||s===VE&&!Ne(o)&&!Pf(o)||s===j1&&Ne(o)){if(o){if(s===VE){const a=e[s];if(jVe(a)){i[s]=a;continue}}i[s]=ft(o).reduce((a,u)=>(Ze(u)?a.push(Yre(u,s)):Qe(DW(u,s)),a),[])}}else{if(s===j1&&o===null)i[s]=null;else if(!Ze(o)&&!Rh(o)&&!Pf(o)&&!C8(o)&&!Nt(o)){Qe(DW(o,s));continue}i[s]=WVe(o,s,r)}}return i}function $8(e,t){const n={};for(const r of ze(e)){const i=WVe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function C_n(e){const t=[];for(const n of ze(e))if(r1(e,n)){const r=e[n],i=ft(r);for(const s of i)Ze(s)?t.push(s):I8(s)&&t.push(s.condition)}return t}function Xre(e,t,n){if(e)for(const r of ze(e)){const i=e[r];if(Ne(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function I_n(e,t,n,r){return e?ze(e).reduce((i,s)=>{const o=e[s];return Ne(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function eHe(e,t){return ze(t).reduce((n,r)=>{switch(r){case Ri:case ho:case h8:case m8:case p8:case Uf:case Ih:case my:case rx:case Rc:case Im:case zf:case Cm:case Vf:case Hf:case qf:case bc:case DO:case Uu:case x_:case j1:return n;case VE:if(e==="line"||e==="trail")return n;case MO:case d8:{const i=t[r];if(Ne(i)||Ze(i))for(const s of ft(i))s.aggregate||n.push(ot(s,{}));return n}case Om:if(e==="trail")return n;case ju:case Oh:case Ph:case Pm:case gy:case yy:case _y:case vy:{const i=ph(t[r]);return i&&!i.aggregate&&n.push(ot(i,{})),n}}},[])}function O_n(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ne(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ne(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function BW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Qre(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=C_n(n).map(f_n);return{tooltip:[...i,...Pd(s,Vn)]}}function Qre(e){const{title:t,field:n}=e;return us(t,n)}function Jre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Qre(n);return tHe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...dt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function tHe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...hh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...dy(e[t])?{}:e[t]}}]:[]}function nHe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:Wk(s,n),continuousAxisChannelDef2:Wk(o,n),continuousAxisChannelDefError:Wk(a,n),continuousAxisChannelDefError2:Wk(u,n),continuousAxis:i}}function Wk(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Qe(Jvn(n,t)),r}else return e}function rHe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(hh(n)&&n.orient)return n.orient;if(Ng(i)){if(Ng(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return KE(s)&&!KE(i)?"horizontal":"vertical"}return"horizontal"}else{if(Ng(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const r6="boxplot",P_n=["box","median","outliers","rule","ticks"],k_n=new k8(r6,sHe);function iHe(e){return fr(e)?"tukey":e}function sHe(e,{config:t}){e={...e,encoding:$8(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=hh(n)?n:{type:n};i&&Qe(tVe("boxplot"));const u=a.extent??t.boxplot.extent,l=Ar("size",a,t),c=a.invalid,f=iHe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:E}=$_n(e,u,t),{color:b,size:T,...C}=_,A=Fe=>Jre(a,g,m,Fe,t.boxplot),O=A(C),N=A(_),k=A({...C,...T?{size:T}:{}}),L=BW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?L:BW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),G=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],H=[...f!=="tukey"?G:[],...N({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...k({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:H};const Y=`datum["lower_box_${m.field}"]`,q=`datum["upper_box_${m.field}"]`,D=`(${q} - ${Y})`,M=`${Y} - ${u} * ${D}`,W=`${q} + ${u} * ${D}`,z=`datum["${m.field}"]`,V={joinaggregate:oHe(m.field),groupby:y},te={transform:[{filter:`(${M} <= ${z}) && (${z} <= ${W})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:G},{tooltip:le,...me}=C,{scale:ye,axis:de}=m,we=Qre(m),he=ku(de,["title"]),Ve=tHe(a,"outliers",t.boxplot,{transform:[{filter:`(${z} < ${M}) || (${z} > ${W})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...we!==void 0?{title:we}:{},...ye!==void 0?{scale:ye}:{},...Wr(he)?{}:{axis:he}},...me,...b?{color:b}:{},...E?{tooltip:E}:{}}})[0];let Me;const Ye=[...d,...h,V];return Ve?Me={transform:Ye,layer:[Ve,te]}:(Me=te,Me.transform.unshift(...Ye)),{...o,layer:[Me,{transform:p,layer:H}]}}function oHe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function $_n(e,t,n){const r=rHe(e,r6),{continuousAxisChannelDef:i,continuousAxis:s}=nHe(e,r,r6),o=i.field,a=iHe(t),u=[...oHe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=O_n(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=ZVe(h,n),_=r==="vertical"?"horizontal":"vertical",w=r,x=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:x,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:d}}const Zre="errorbar",R_n=["ticks","rule"],N_n=new k8(Zre,aHe);function aHe(e,{config:t}){e={...e,encoding:$8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=uHe(e,Zre,t);delete s.size;const c=Jre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function D_n(e,t){const{encoding:n}=e;if(M_n(n))return{orient:rHe(e,t),inputType:"raw"};const r=L_n(n),i=F_n(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(Ng(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(Ng(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(Ng(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(Ng(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function M_n(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function L_n(e){return ln(e.x2)||ln(e.y2)}function F_n(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function uHe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=hh(r)?r:{type:r};s&&Qe(tVe(t));const{orient:l,inputType:c}=D_n(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=nHe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=B_n(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:E,[m==="x"?"xError2":"yError2"]:b,...T}=i,{bins:C,timeUnits:A,aggregate:O,groupby:N,encoding:k}=ZVe(T,n),L=[...O,...g],B=c!=="raw"?[]:N,U=BW(v,f,k,_);return{transform:[...a.transform??[],...C,...A,...L.length===0?[]:[{aggregate:L,groupby:B}],...y],groupby:B,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:k,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:U}}function B_n(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Qe(Qvn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:NO(h)},{fieldPrefix:"upper_",titlePrefix:q_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:q_e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Nw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Nw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Nw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Qe(Xvn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:B1(B1(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function q_e(e,t,n){return`${NO(e)} ${n} ${t}`}const eie="errorband",j_n=["band","borders"],U_n=new k8(eie,lHe);function lHe(e,{config:t}){e={...e,encoding:$8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=uHe(e,eie,t),l=o,c=Jre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Qe(M_e("interpolate")):l.tension&&Qe(M_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const cHe={};function tie(e,t,n){const r=new k8(e,t);cHe[e]={normalizer:r,parts:n}}function z_n(){return ze(cHe)}tie(r6,sHe,P_n);tie(Zre,aHe,R_n);tie(eie,lHe,j_n);const V_n=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],fHe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},dHe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},H_n=ze(fHe),q_n=ze(dHe),W_n={header:1,headerRow:1,headerColumn:1,headerFacet:1},hHe=ze(W_n),pHe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],G_n={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Y_n={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},kf="_vgsid_",K_n={point:{on:"click",fields:[kf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function nie(e){return e==="legend"||!!(e!=null&&e.legend)}function XU(e){return nie(e)&&mt(e)}function rie(e){return!!(e!=null&&e.select)}function mHe(e){const t=[];for(const n of e||[]){if(rie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function X_n(e){return R8(e)||sie(e)||iie(e)}function iie(e){return"concat"in e}function R8(e){return"vconcat"in e}function sie(e){return"hconcat"in e}function gHe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function mh(e){return mt(e)&&e.step!==void 0}function W_e(e){return e.view||e.width||e.height}const G_e=20,Q_n={align:1,bounds:1,center:1,columns:1,spacing:1},J_n=ze(Q_n);function Z_n(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(A8(e)&&!UO(e.facet)||iie(e))&&(i.columns=o),R8(e)&&(i.columns=1);for(const a of J_n)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=fr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function jW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function i6(e,t){const n=s6(e,t);return mh(n)?n.step:yHe}function s6(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return us(n,{step:e.step})}const yHe=20,ebn={continuousWidth:200,continuousHeight:200,step:yHe},tbn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:ebn,mark:G1n,arc:{},area:{},bar:X1n,circle:{},geoshape:{},image:{},line:{},point:{},rect:Q1n,rule:{color:"black"},square:{},text:{color:"black"},tick:J1n,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:O1n,projection:{},legend:G_n,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:K_n,style:{},title:{},facet:{spacing:G_e},concat:{spacing:G_e},normalizedNumberFormat:".0%"},Hh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Y_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},K_e={blue:Hh[0],orange:Hh[1],red:Hh[2],teal:Hh[3],green:Hh[4],yellow:Hh[5],purple:Hh[6],pink:Hh[7],brown:Hh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function nbn(e={}){return{signals:[{name:"color",value:mt(e)?{...K_e,...e}:K_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function rbn(e){return{signals:[{name:"fontSize",value:mt(e)?{...Y_e,...e}:Y_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function ibn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function vHe(e){const t=ze(e||{}),n={};for(const r of t){const i=e[r];n[r]=HO(i)?Yze(i):al(i)}return n}function sbn(e){const t=ze(e),n={};for(const r of t)n[r]=vHe(e[r]);return n}const obn=[...OVe,...XVe,...hHe,"background","padding","legend","lineBreak","scale","style","title","view"];function _He(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=qS({},tn(tbn),n?ibn(n):{},t?nbn(t):{},r?rbn(r):{},s||{});i&&WS(o,"selection",i,!0);const a=ku(o,obn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=al(o[u]));for(const u of OVe)o[u]&&(a[u]=yu(o[u]));for(const u of XVe)o[u]&&(a[u]=vHe(o[u]));for(const u of hHe)o[u]&&(a[u]=yu(o[u]));return o.legend&&(a.legend=yu(o.legend)),o.scale&&(a.scale=yu(o.scale)),o.style&&(a.style=sbn(o.style)),o.title&&(a.title=yu(o.title)),o.view&&(a.view=yu(o.view)),a}const abn=new Set(["view",...U1n]),ubn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],lbn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...W1n};function cbn(e){e=tn(e);for(const t of ubn)delete e[t];if(e.axis)for(const t in e.axis)HO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of V_n)delete e.legend[t];if(e.mark){for(const t of F_e)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(mHe(e.params)),delete e.params);for(const t of abn){for(const r of F_e)delete e[t][r];const n=lbn[t];if(n)for(const r of n)delete e[t][r];dbn(e,t)}for(const t of z_n())delete e[t];fbn(e);for(const t in e)mt(e[t])&&Wr(e[t])&&delete e[t];return Wr(e)?void 0:e}function fbn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Gze(e.title);Wr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Wr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Wr(r)?delete e.title:e.title=r}function dbn(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Wr(s)||(e.style[n??t]=s),r||delete e[t]}function N8(e){return"layer"in e}function hbn(e){return"repeat"in e}function pbn(e){return!Ne(e.repeat)&&e.repeat.layer}class oie{map(t,n){return A8(t)?this.mapFacet(t,n):hbn(t)?this.mapRepeat(t,n):sie(t)?this.mapHConcat(t,n):R8(t)?this.mapVConcat(t,n):iie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(N8(t))return this.mapLayer(t,n);if($m(t))return this.mapUnit(t,n);throw new Error(Ere(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const mbn={zero:1,center:1,normalize:1};function gbn(e){return e in mbn}const ybn=new Set([AVe,E8,w8,QL,x8,Fre,Bre,S8,CVe,Lre]),vbn=new Set([E8,w8,AVe]);function ib(e){return Ze(e)&&GE(e)==="quantitative"&&!e.bin}function X_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(ib(o)&&ib(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(ib(o))return t;if(ib(a))return i}else{if(ib(o))return s&&n==="vertical"?void 0:t;if(ib(a))return s&&n==="horizontal"?void 0:i}}function _bn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function bHe(e,t){var m,g;const n=hh(e)?e:{type:e},r=n.type;if(!ybn.has(r))return null;const i=X_e(t,"x",n)||X_e(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?ot(s,{}):void 0,a=_bn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?ot(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?ot(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=$yn.reduce((y,v)=>{if(v!=="tooltip"&&r1(t,v)){const _=t[v];for(const w of ft(_)){const x=ph(w);if(x.aggregate)continue;const E=ot(x,{});(!E||!l.has(E))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?dy(s.stack)?p=s.stack?"zero":null:p=s.stack:vbn.has(r)&&(p="zero"),!p||!gbn(p)||Kre(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==$u.LINEAR?(s!=null&&s.stack&&Qe(Gvn(s.scale.type)),null):ln(t[kh(i)])?(s.stack!==void 0&&Qe(Wvn(i)),null):(Ze(s)&&s.aggregate&&!Hyn.has(s.aggregate)&&Qe(Yvn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Ey(r),stackBy:h,offset:p})}function wHe(e,t,n){const r=yu(e),i=Ar("orient",r,n);if(r.orient=Sbn(r.type,t,i),i!==void 0&&i!==r.orient&&Qe(Pvn(r.orient,i)),r.type==="bar"&&r.orient){const u=Ar("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:K1n[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Ar("opacity",r,n),o=Ar("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=wbn(r.type,t)),Ar("cursor",r,n)===void 0&&(r.cursor=bbn(r,t,n)),r}function bbn(e,t,n){return t.href||e.href||Ar("href",e,n)?"pointer":e.cursor}function wbn(e,t){if(Hn([x8,Lre,Fre,Bre],e)&&!Kre(t))return .7}function Ebn(e,t,{graticule:n}){if(n)return!1;const r=fm("filled",e,t),i=e.type;return us(r,i!==x8&&i!==S8&&i!==QL)}function Sbn(e,t,n){switch(e){case x8:case Fre:case Bre:case CVe:case B1n:case F1n:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case E8:if(Ze(r)&&(So(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(So(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===z1&&!ci(r.bin)||ZL(r))&&Ze(i)&&So(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===z1&&!ci(i.bin)||ZL(i))&&Ze(r)&&So(r.bin)?"vertical":"horizontal"}case QL:if(s&&!(Ze(r)&&So(r.bin))&&o&&!(Ze(i)&&So(i.bin)))return;case w8:if(o)return Ze(i)&&So(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&So(r.bin)?"vertical":"horizontal";if(e===QL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case S8:case Lre:{const a=z_e(r),u=z_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Ja(r)&&r.type===qE,c=Ja(i)&&i.type===qE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function xbn(e){const{point:t,line:n,...r}=e;return ze(r).length>1?r:r.type}function Tbn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ku(e[t],["point","line"])});return e}function QU(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function Q_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Abn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if($m(t)){const{mark:r,encoding:i}=t,s=hh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!QU(s,n[s.type],i);case"area":return!!QU(s,n[s.type],i)||!!Q_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=$8(l,i),d=hh(a)?a:{type:a},h=QU(d,i[d.type],f),p=d.type==="area"&&Q_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:xbn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ku(f,["shape"])}],g=bHe(wHe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=ku(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...UE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...UE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Tbn(i)})}}function Cbn(e,t){return t?UO(e)?SHe(e,t):EHe(e,t):e}function JU(e,t){return t?SHe(e,t):e}function UW(e,t,n){const r=t[e];if(l_n(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Qe(cvn(r.repeat));return}return t}function EHe(e,t){if(e=UW("field",e,t),e!==void 0){if(e===null)return null;if(qre(e)&&Yd(e.sort)){const n=UW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function J_e(e,t){if(Ze(e))return EHe(e,t);{const n=UW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Z_e(e,t){if(ln(e)){const n=J_e(e,t);if(n)return n;if(C8(e))return{condition:e.condition}}else{if(zO(e)){const n=J_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function SHe(e,t){const n={};for(const r in e)if(Vt(e,r)){const i=e[r];if(Ne(i))n[r]=i.map(s=>Z_e(s,t)).filter(s=>s);else{const s=Z_e(i,t);s!==void 0&&(n[r]=s)}}return n}class Ibn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if($m(t)){const{encoding:n,mark:r}=t;if(r==="line"||hh(r)&&r.type==="line")for(const i of Oyn){const s=T_(i),o=n[s];if(n[i]&&(Ze(o)&&!So(o.bin)||Rh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Qe(Ovn(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class Obn extends oie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[k_n,N_n,U_n,new Abn,new Ibn]}map(t,n){if($m(t)){const r=r1(t.encoding,Dp),i=r1(t.encoding,Mp),s=r1(t.encoding,f8);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=JU(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return pbn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${$i(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ne(r)&&t.columns&&(t=ku(t,["columns"]),Qe($_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ne(r)&&r.row||[u?u.row:null],f=!Ne(r)&&r.column||[u?u.column:null],d=Ne(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ne(r)?`${$i(p)}`:(r.row?`row_${$i(m)}`:"")+(r.column?`column_${$i(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(ku(_,["data"]))}const h=Ne(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return UO(r)&&t.columns&&(t=ku(t,["columns"]),Qe($_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=tbe({parentProjection:o,projection:i}),l=ebe({parentEncoding:s,encoding:JU(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=JU(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Qe(Cvn([...r?[Dp]:[],...i?[Mp]:[]]));const o={},a={};for(const u of[Dp,Mp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Cbn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:ebe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:tbe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function ebe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ze(e),...ze(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else zO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Pf(a)||Nt(a)||ln(a)||Ne(a))&&(r[s]=a)}}else r=t;return!r||Wr(r)?void 0:r}function tbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Qe(gvn({parentProjection:t,projection:n})),n??t}function aie(e){return"filter"in e}function Pbn(e){return(e==null?void 0:e.stop)!==void 0}function xHe(e){return"lookup"in e}function kbn(e){return"data"in e}function $bn(e){return"param"in e}function Rbn(e){return"pivot"in e}function Nbn(e){return"density"in e}function Dbn(e){return"quantile"in e}function Mbn(e){return"regression"in e}function Lbn(e){return"loess"in e}function Fbn(e){return"sample"in e}function Bbn(e){return"window"in e}function jbn(e){return"joinaggregate"in e}function Ubn(e){return"flatten"in e}function zbn(e){return"calculate"in e}function THe(e){return"bin"in e}function Vbn(e){return"impute"in e}function Hbn(e){return"timeUnit"in e}function qbn(e){return"aggregate"in e}function Wbn(e){return"stack"in e}function Gbn(e){return"fold"in e}function Ybn(e){return"extent"in e&&!("density"in e)}function Kbn(e){return e.map(t=>aie(t)?{filter:$w(t.filter,E1n)}:t)}class Xbn extends oie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=nbe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=nbe(t,n),t.encoding){const r={};for(const[i,s]of U0(t.encoding))r[i]=AHe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:U0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Ro(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function nbe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(aie(s))return{filter:zW(s,t)};if(THe(s)&&A_(s.bin))return{...s,bin:CHe(s.bin)};if(xHe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function AHe(e,t){var r,i;const n=tn(e);if(Ze(n)&&A_(n.bin)&&(n.bin=CHe(n.bin)),O_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(C8(n))if(Ne(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:zW(s,t)}});else{const{selection:s,param:o,test:a,...u}=AHe(n.condition,t);n.condition=o?n.condition:{...u,test:zW(n.condition,t)}}return n}function CHe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function zW(e,t){const n=r=>$w(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):$w(e.test||e.filter,r=>r.selection?n(r.selection):r)}class VW extends oie{map(t,n){const r=n.selections??[];if(t.params&&!$m(t)){const i=[];for(const s of t.params)rie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(dt(a)&&(a===t.name||i.includes(a))||Ne(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=VW.prototype[e];VW.prototype[e]=function(n,r){return t.call(this,n,Qbn(n,r))}}function Qbn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function IHe(e,t){t===void 0&&(t=_He(e.config));const n=twn(e,t),{width:r,height:i}=e,s=nwn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Jbn=new Obn,Zbn=new Xbn,ewn=new VW;function twn(e,t={}){const n={config:t};return ewn.map(Jbn.map(Zbn.map(e,n),n),n)}function rbe(e){return dt(e)?{type:e}:e??{}}function nwn(e,t,n){let{width:r,height:i}=t;const s=$m(e)||N8(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Qe(I_e("width")),r=void 0),i=="container"&&(Qe(I_e("height")),i=void 0));const a={type:"pad",...o,...n?rbe(n.autosize):{},...rbe(e.autosize)};if(a.type==="fit"&&!s&&(Qe(Zyn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Qe(O_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Qe(O_e("height")),!hl(a,{type:"pad"}))return a}function rwn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function iwn(e){return e?`fit-${g8(e)}`:"fit"}const swn=["background","padding"];function ibe(e,t){const n={};for(const r of swn)e&&e[r]!==void 0&&(n[r]=al(e[r]));return t&&(n.params=e.params),n}class Rm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Rm(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return us(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ze(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function ud(e){return{explicit:!0,value:e}}function Ju(e){return{explicit:!1,value:e}}function OHe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:D8(t,n,r,i)}}function D8(e,t,n,r){return e.explicit&&t.explicit&&Qe(Bvn(n,r,e.value,t.value)),e}function H0(e,t,n,r,i=D8){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:hl(e.value,t.value)?e:i(e,t,n,r)}class own extends Rm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function XE(e){return"url"in e}function YC(e){return"values"in e}function PHe(e){return"name"in e&&!XE(e)&&!YC(e)&&!a0(e)}function a0(e){return e&&(kHe(e)||$He(e)||uie(e))}function kHe(e){return"sequence"in e}function $He(e){return"sphere"in e}function uie(e){return"graticule"in e}var ai;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ai||(ai={}));function RHe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=_c(i.field),i}function q1(e,t=!0,n=Ea){if(Ne(e)){const r=e.map(i=>q1(i,t,n));return t?`[${r.join(", ")}]`:r}else if(C_(e))return n(t?U1(e):c1n(e));return t?n(Gr(e)):e}function awn(e,t){for(const n of Ro(e.component.selection??{})){const r=n.name;let i=`${r}${W0}, ${n.resolve==="global"?"true":`{unit: ${i1(e)}}`}`;for(const s of B8)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Bwn,on:[{events:{signal:n.name+W0},update:`modify(${it(n.name+W1)}, ${i})`}]})}return lie(t)}function uwn(e,t){if(e.component.selection&&ze(e.component.selection).length){const n=it(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:py("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return lie(t)}function lwn(e,t){let n=!1;for(const r of Ro(e.component.selection??{})){const i=r.name,s=it(i+W1);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${QHe}(${s}, ${it(a)}${u}`})}n=!0;for(const a of B8)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),lie(t)}function cwn(e,t){const n=[...t],r=i1(e,{escape:!1});for(const i of Ro(e.component.selection??{})){const s={name:i.name+W1};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:kf}}]),i.init){const a=i.project.items.map(RHe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[kf]:q1(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:q1(u,!1)}))}n.filter(a=>a.name===i.name+W1).length||n.push(s)}return n}function NHe(e,t){for(const n of Ro(e.component.selection??{}))for(const r of B8)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function fwn(e,t){for(const n of e.children)Xi(n)&&(t=NHe(n,t));return t}function dwn(e,t,n,r){const i=nqe(e,t.param,t);return{signal:Ol(n.get("type"))&&Ne(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function lie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Br{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Qe(hvn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class qa extends Br{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Pze()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function ZU(e){return e.as!==void 0}function sbe(e){return`${e}_end`}class Kd extends Br{clone(){return new Kd(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(I_(u)){if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=V0({fieldDef:s,markDef:f,config:d});(GC(c)||h)&&(l={timeUnit:uo(u),field:a})}}else l={as:ot(s,{forAs:!0}),field:a,timeUnit:u};if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=V0({fieldDef:s,markDef:f,config:d});GC(c)&&ls(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return Wr(r)?null:new Kd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=uo(r),o={...i,timeUnit:s};return new Kd(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of U0(this.timeUnits)){const s=ZU(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ro(this.timeUnits).map(t=>ZU(t)?t.as:sbe(t.field)))}dependentFields(){return new Set(Ro(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of Ro(this.timeUnits)){const{rectBandPosition:r}=n,i=uo(n.timeUnit);if(ZU(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:_c(s),type:"timeunit",...a?{units:b8(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...obe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=DHe({timeUnit:i,field:o}),u=sbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...obe([o,u],r,i))}}return t}}const M8="offsetted_rect_start",L8="offsetted_rect_end";function DHe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=dVe(r),{part:o,step:a}=gVe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function obe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:abe([DHe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${M8}`},{type:"formula",expr:abe([i,s],n+.5),as:`${e}_${L8}`}]}return[]}function abe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const qO="_tuple_fields";class hwn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const pwn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new hwn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=$i(`${r}_${g}`);for(let v=1;a.has(y);v++)y=$i(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ft(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of ze(p))Iyn(m)?(h||(h=[])).push(m):l==="interval"?(Qe(lvn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Qe(evn(p,m.aggregate));continue}else if(!g){Qe(k_e(p));continue}if(m.timeUnit&&!I_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&km(p)&&Ol(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===kf,Mze(p)?(v.geoChannel=p,v.channel=Dze(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Qe(k_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===kf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Wr(o)||(i.timeUnit=new Kd(null,o))},signals:(e,t,n)=>{const r=t.name+qO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(RHe)})}},Lp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!km(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Qe(ivn),!s||!Ol(o)){Qe(rvn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||ube(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(QHe)>=0)i.update=`{${r.map(o=>`${it(_c(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${it(_c(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ube(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function HW(e,t){return`domain(${it(e.scaleName(t))})`}function ube(e){return e.parent&&lx(e.parent)&&!e.parent.parent}const Dw="_brush",MHe="_scale_trigger",hT="geo_interval_init_tick",LHe="_init",mwn="_center",gwn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[kf],i.encodings||(i.encodings=n.value?ze(n.value):[Hf,Vf]),n.select={type:"interval",...i}}if(t.translate&&!Lp.defined(t)){const i=`!event.item || event.item.mark.name !== ${it(t.name+Dw)}`;for(const s of t.events){if(!s.between){Qe(`${s} is not an ordered event stream for interval selections.`);continue}const o=ft((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+W0,s=Ro(t.project.hasChannel).filter(a=>a.channel===Ri||a.channel===ho),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(ywn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=it(e.projectionName()),u=e.projectionName()+mwn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+LHe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(E=>E.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${it(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${i1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:hT}]:[]],update:_}]})}else{if(!Lp.defined(t)){const l=r+MHe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=it(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Ol(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${i1(e)}, fields: ${r+qO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${q1(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Xi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===hT).length||n.unshift({name:hT,value:null,on:[{events:"timer{1}",update:`${hT} === null ? {} : ${hT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${it(t.name+W1)})`;if(Lp.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of ze(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${i1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ze(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Dw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Dw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function ywn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=it(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ri?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Lp.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:q1(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+MHe},update:Ol(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:q1(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ri?0:1,h=t.name+LHe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const vwn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+qO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ro(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Dw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${i1(e)}, `;if(t.project.hasSelectionId)l+=`${kf}: ${o}[${it(kf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${it(e.vgField(d.channel,{}))}], ${o}[${it(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${it(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+W0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function sx(e,t,n,r){const i=C8(t)&&t.condition,s=r(t);if(i){const a=ft(i).map(u=>{const l=r(u);if(u_n(u)){const{param:c,empty:f}=u;return{test:tqe(e,{param:c,empty:f}),...l}}else return{test:u6(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function cie(e,t="text"){const n=e.encoding[t];return sx(e,n,t,r=>F8(r,e.config))}function F8(e,t,n="datum"){if(e){if(Pf(e))return vi(e.value);if(ln(e)){const{format:r,formatType:i}=t6(e);return Vre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function FHe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ne(o))return{tooltip:lbe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return sx(e,o,"tooltip",u=>{const l=F8(u,i,a);if(l)return l;if(u===null)return;let c=Ar("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),dt(c))return{value:c};if(mt(c))return Nt(c)?c:c.content==="encoding"?lbe(n,s,i,t):{signal:a}})}}function BHe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=T_(f),h=Ja(c)?c:{...c,type:e[d].type},p=h.title||Gre(h,i),m=ft(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ls(f)){const y=f==="x"?"x2":"y2",v=ph(e[y]);if(So(h.bin)&&v){const _=ot(h,{expr:o}),w=ot(v,{expr:o}),{format:x,formatType:E}=t6(h);g=jO(_,w,x,E,i),s[y]=!0}}if((ls(f)||f===Rc||f===zf)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=t6(h);g=Vre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=F8(h,i,o).signal),a.push({channel:f,key:m,value:g})}Xre(e,(c,f)=>{Ze(c)?u(c,f):I8(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function lbe(e,t,n,{reactiveGeom:r}={}){const i=BHe(e,t,n,{reactiveGeom:r}),s=U0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function _wn(e){const{markDef:t,config:n}=e,r=Ar("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...bwn(e),...wwn(e)}}function bwn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ar("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Xyn?{}:{ariaRoleDescription:{value:t}}}function wwn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return sx(e,s,"description",u=>F8(u,e.config));const o=Ar("description",n,r);if(o!=null)return{description:vi(o)};if(r.aria===!1)return{};const a=BHe(t,i,r);if(!Wr(a))return{description:{signal:U0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function to(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Ar(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=vi(u)));const l=i[e];return sx(t,l,o??e,c=>zre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function jHe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Ar("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Ar(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Ar(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:vi(u)}:{},...l?{stroke:vi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Qe(rVe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...to("color",e,{vgChannel:c,defaultValue:o?u:l}),...to("fill",e,{defaultValue:r.fill?u:void 0}),...to("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Ewn(e){const{encoding:t,mark:n}=e,r=t.order;return!Ey(n)&&Pf(r)?sx(e,r,"zindex",i=>vi(i.value)):{}}function QE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:zre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:vi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ca(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[kh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=QE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=fie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ls(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Swn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Swn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return JL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return n1(n,r,{suffix:"end"},{offset:s})}return jre(e)}function fie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=T_(n),u=z0(n),l=Ar(n,s,o,{vgChannel:u});if(l!==void 0)return cA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([$u.LOG,$u.TIME,$u.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[zu(n)],mult:.5}}}}const xwn={left:"x",center:"xc",right:"x2"},Twn={top:"y",middle:"yc",bottom:"y2"};function UHe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return z0(e);const i=e==="x"?"align":"baseline",s=Ar(i,t,n);let o;return Nt(s)?(Qe(Ivn(i)),o=void 0):o=s,e==="x"?xwn[o||(r==="top"?"left":"center")]:Twn[o||r]}function o6(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?zHe(e,t,{defaultPos:n,defaultPos2:r}):ca(e,t,{defaultPos:n})}function zHe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=kh(e),a=zu(e),u=Awn(t,r,o),l=u[a]?UHe(e,i,s):z0(e);return{...ca(e,t,{defaultPos:n,vgChannel:l}),...u}}function Awn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=T_(n),l=zu(n),c=z0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?QE({channel:n,markDef:s,encoding:r,model:e}):QE({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=zu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Cwn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:Gk(n,s)||Gk(n,{[n]:KL(n,s,a.style),[l]:KL(l,s,a.style)})||Gk(n,a[i])||Gk(n,a.mark)||{[c]:fie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Cwn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?n1(t,s,{suffix:"start"},{offset:u}):jre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function Gk(e,t){const n=zu(e),r=z0(e);if(t[r]!==void 0)return{[r]:cA(e,t[r])};if(t[e]!==void 0)return{[r]:cA(e,t[e])};if(t[n]){const i=t[n];if(V1(i))Qe(Evn(n));else return{[n]:cA(e,i)}}}function q0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=kh(t),a=zu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Ar("size",i,n,{vgChannel:a}),p=jze(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(ci(u.bin)||So(u.bin)||u.timeUnit&&!l)&&!(h&&!V1(h))&&!r[p]&&!lo(f)?Pwn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&lo(f)||m)&&!l?Own(u,t,e):zHe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Iwn(e,t,n,r,i,s,o){if(V1(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=fm("minBandSize",{type:o},r);return{signal:c?`max(${ff(c)}, ${l})`:l}}else i.band!==1&&(Qe($vn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(wy(u)&&fr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=us(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(fr(f))return{signal:`${1-f} * ${e}`}}return{value:i6(r.view,e)-2}}function Own(e,t,n){var C,A;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=zu(t),f=kh(t),d=jze(t),h=n.scaleName(d),p=n.getScaleComponent(yre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=to("size",n,{vgChannel:c,defaultRef:vi(r.size)}):Qe(Mvn(r.type)));const y=!!g,v=FVe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:Iwn(c,h||u,p||l,s,v,!!e,r.type)};const _=((A=l||p)==null?void 0:A.get("type"))==="band"&&V1(v)&&!y?"top":"middle",w=UHe(t,r,s,_),x=w==="xc"||w==="yc",{offset:E,offsetType:b}=QE({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),T=jre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:E,defaultRef:fie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?b==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:V1(v)?(1-v.band)/2:0});if(c)return{[w]:T,...g};{const O=z0(f),N=g[c],k=E?{...N,offset:E}:N;return{[w]:T,[O]:Ne(T)?[T[0],{...T[1],offset:k}]:{...T,offset:k}}}}function cbe(e,t,n,r,i,s,o){if(Nze(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=ff(n),c=ff(i),f=ff(r),d=ff(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Pwn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var A;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=FVe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(A=r.component.axes[n])==null?void 0:A[0],h=(d==null?void 0:d.get("translate"))??.5,p=ls(n)?Ar("binSpacing",s,i)??0:0,m=kh(n),g=z0(n),y=z0(m),v=fm("minBandSize",s,i),{offset:_}=QE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=QE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=r_n({fieldDef:e,scaleName:u}),E=cbe(n,p,c,h,_,v,x),b=cbe(m,p,c,h,w??_,v,x),T=Nt(f)?{signal:`(1-${f.signal})/2`}:V1(f)?(1-f.band)/2:.5,C=V0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ci(e.bin)||e.timeUnit){const O=e.timeUnit&&C!==.5;return{[y]:fbe({fieldDef:e,scaleName:u,bandPosition:T,offset:b,useRectOffsetField:O}),[g]:fbe({fieldDef:e,scaleName:u,bandPosition:Nt(T)?{signal:`1-${T.signal}`}:1-T,offset:E,useRectOffsetField:O})}}else if(So(e.bin)){const O=n1(e,u,{},{offset:b});if(Ze(t))return{[y]:O,[g]:n1(t,u,{},{offset:E})};if(A_(e.bin)&&e.bin.step)return{[y]:O,[g]:{signal:`scale("${u}", ${ot(e,{expr:"datum"})} + ${e.bin.step})`,offset:E}}}Qe(oVe(m))}function fbe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return JL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:M8,endSuffix:L8}:{}})}const kwn=new Set(["aria","width","height"]);function Nc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?jHe(e):{};return{...$wn(e.markDef,t),...dbe(e,"fill",n),...dbe(e,"stroke",r),...to("opacity",e),...to("fillOpacity",e),...to("strokeOpacity",e),...to("strokeWidth",e),...to("strokeDash",e),...Ewn(e),...FHe(e),...cie(e,"href"),..._wn(e)}}function dbe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Ar("invalid",s,r)==="hide"&&n&&!Ey(i)){const a=Rwn(e,{invalid:!0,channels:y8});if(a)return{[t]:[{test:a,value:null},...ft(n)]}}return n?{[t]:n}:{}}function $wn(e,t){return Kyn.reduce((n,r)=>(!kwn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=vi(e[r])),n),{})}function Rwn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Ol(u)&&(s[l]=!0)}return s},{}),i=ze(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Ure(o,t)).join(` ${s} `)}}function die(e){const{config:t,markDef:n}=e;if(Ar("invalid",n,t)){const i=Nwn(e,{channels:$h});if(i)return{defined:{signal:i}}}return{}}function Nwn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Ol(l)&&(s[c]=!0)}return s},{}),i=ze(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Ure(o,t)).join(` ${s} `)}}function hbe(e,t){if(t!==void 0)return{[e]:vi(t)}}const e7="voronoi",VHe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(e7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Ey(s))return Qe(tvn(s)),n;const o={name:e.getName(e7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...FHe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(e7)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},HHe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!nie(e.bind),parse:(e,t,n)=>JHe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=VHe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=$i(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:q1(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${it(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+W0)[0],o=r+qO,a=i.items.map(l=>$i(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},a6="_toggle",qHe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+a6,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+W0,r=t.name+a6;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${i1(e)}}, `)+`${r} ? ${n} : null`}},Dwn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=dt(t.clear)?py(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(HHe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===$i(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+W0);r(i,"null"),qHe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+a6),r(i,"false"))}return n}},WHe={defined:e=>{const t=e.resolve==="global"&&e.bind&&nie(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==kf;return t&&!n&&Qe(svn),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=dt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},JHe(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ft(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=XU(t.bind)?t.bind.legend:"click",s=dt(i)?py(i,"view"):ft(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=XU(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${$i(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+W0),o=r+qO,a=i.items.filter(d=>d.hasLegend).map(d=>$i(`${r}_${$i(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+a6),f=XU(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Mwn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ro(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&WHe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const GHe="_translate_anchor",YHe="_translate_delta",Lwn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Lp.defined(t),s=r+GHe,{x:o,y:a}=t.project.hasChannel;let u=py(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Dw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?HW(e,Ri):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?HW(e,ho):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+YHe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&pbe(e,t,o,"width",n),a!==void 0&&pbe(e,t,a,"height",n),n}};function pbe(e,t,n,r,i){const s=t.name,o=s+GHe,a=s+YHe,u=n.channel,l=Lp.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ri?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const KHe="_zoom_anchor",XHe="_zoom_delta",Fwn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Lp.defined(t),s=r+XHe,{x:o,y:a}=t.project.hasChannel,u=it(e.scaleName(Ri)),l=it(e.scaleName(ho));let c=py(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Dw,f))),n.push({name:r+KHe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&mbe(e,t,o,"width",n),a!==void 0&&mbe(e,t,a,"height",n),n}};function mbe(e,t,n,r,i){const s=t.name,o=n.channel,a=Lp.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?HW(e,o):u.name,h=s+XHe,p=`${s}${KHe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const W1="_store",W0="_tuple",Bwn="_modify",QHe="vlSelectionResolve",B8=[vwn,gwn,pwn,qHe,HHe,Lp,WHe,Dwn,Lwn,Fwn,VHe];function jwn(e){let t=e.parent;for(;t&&!_l(t);)t=t.parent;return t}function i1(e,{escape:t}={escape:!0}){let n=t?it(e.name):e.name;const r=jwn(e);if(r){const{facet:i}=r;for(const s of sc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${it(r.vgField(s))}])`)}return n}function hie(e){return Ro(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function JHe(e,t){(dt(t.select)||!t.select.on)&&delete e.events,(dt(t.select)||!t.select.clear)&&delete e.clear,(dt(t.select)||!t.select.toggle)&&delete e.toggle}function qW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...qW(e.object)),t.push(...qW(e.property))),t)}function ZHe(e){return e.object.type==="MemberExpression"?ZHe(e.object):e.object.name==="datum"}function eqe(e){const t=$ne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&ZHe(r)&&n.add(qW(r).slice(1).join("."))}),n}class ox extends Br{clone(){return new ox(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=u6(this.model,this.filter,this),this._dependentFields=eqe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Uwn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=$i(i.name),o=i.select,a=dt(o)?o:o.type,u=mt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:dt(u.on)?py(u.on,"scope"):ft(tn(u.on))},f=tn(i);for(const d of B8)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function tqe(e,t,n,r="datum"){const i=dt(t)?t:t.param,s=$i(i),o=it(s+W1);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${it(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function nqe(e,t,n){const r=$i(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Qe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${it(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Qe((a.length?"Multiple ":"No ")+`matching ${it(i)} encoding found for selection ${it(n.param)}. Using "field": ${it(s)}.`)):s=a[0].field}return`${o.name}[${it(_c(s))}]`}function zwn(e,t){for(const[n,r]of U0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new qa(new ox(t,e,{param:n}),i,ai.Lookup,e.component.data.outputNodeRefCounts)}}function u6(e,t,n){return lA(t,r=>dt(r)?r:_1n(r)?tqe(e,r,n):vVe(r))}function Vwn(e,t){if(e)return Ne(e)&&!ag(e)?e.map(n=>Gre(n,t)).join(", "):e}function t7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function a2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=E_n[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(HO(m)){const{condition:g,...y}=m,v=ft(g),_=V_e[h];if(_){const{vgProp:w,part:x}=_,E=[...v.map(b=>{const{test:T,...C}=b;return{test:u6(null,T),...C}}),y];t7(c,x,w,E),delete c[h]}else if(_===null){const w={signal:v.map(x=>{const{test:E,...b}=x;return`${u6(null,E)} ? ${C_e(b)} : `}).join("")+C_e(y)};c[h]=w}}else if(Nt(m)){const g=V_e[h];if(g){const{vgProp:y,part:v}=g;t7(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Wr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:us(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=B1(a,"datum.label",c.encode.labels.update.text.signal)),t7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of YVe)e.hasAxisPart(p)||delete c.encode[p];Wr(c.encode)&&delete c.encode}const h=Vwn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:us(l,0)}}}}function rqe(e){const{axes:t}=e.component,n=[];for(const r of $h)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Hwn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>a2(i,"grid",t)),...r.map(i=>a2(i,"grid",t)),...n.map(i=>a2(i,"main",t)),...r.map(i=>a2(i,"main",t))].filter(i=>i)}function gbe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ze(o),...ze(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${ff(o[c])} : ${ff(a[c])}`};return l}return t[i]})])}function qwn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:EVe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${NO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:gbe(a,r,e,n),vgAxisConfig:gbe(u,r,e,n),axisConfigStyle:Wwn([...u,...a],r)}}function Wwn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ft(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function WW(e,t,n,r={}){var s;const i=Xze(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const ybe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Gwn(n,e),gridScale:({model:e,channel:t})=>Ywn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||sqe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||iqe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Xwn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Qwn(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Zwn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:eEn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=oqe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Jze(i?[U_e(i)]:[],Ze(o)?[U_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>tEn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??nEn(n,t)};function Gwn(e,t){return!lo(e)&&Ze(t)&&!ci(t==null?void 0:t.bin)&&!So(t==null?void 0:t.bin)}function Ywn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Kwn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:WC(s);{const{configValue:o}=WW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?WC(o):n===Ri&&Hn([Mre,Dre],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function GW(e){return`(((${e.signal} % 360) + 360) % 360)`}function iqe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=GW(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=GW(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function sqe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=GW(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Xwn(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function Qwn(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Jwn(e){return e==="x"?"bottom":"left"}function Zwn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!lo(t)&&t!=="log"){if(Ze(e)){if(ci(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=uo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function eEn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=mVe(n);if(r)return{signal:r}}}}function oqe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return Zze(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function tEn(e,t){const n=e.values;if(Ne(n))return GVe(t,n);if(Nt(n))return n}function nEn(e,t){return e==="rect"&&e6(t)?1:0}class JE extends Br{clone(){return new JE(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=eqe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(O_(r)&&LVe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${vVe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new JE(t,{calculate:u,as:ZE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function ZE(e,t,n){return ot(e,{prefix:t,suffix:"sort_index",...n})}function j8(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function eS(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return us((t||{})[e],i[e],n.header[e])}function U8(e,t,n,r){const i={};for(const s of e){const o=eS(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const pie=["row","column"],mie=["header","footer"];function rEn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=U8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=j8(t,a),l=WC(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...uqe(l,u),...aqe(u,l,s),...lqe(r,i,t,H_n,fHe)}}}function aqe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=sqe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function uqe(e,t){const n=iqe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function iEn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of mie)if(n[i])for(const s of n[i]){const o=oEn(e,t,i,n,s);o!=null&&r.push(o)}return r}function sEn(e,t){const{sort:n}=e;return Yd(n)?{field:ot(n,{expr:"datum"}),order:n.order??"ascending"}:Ne(n)?{field:ZE(e,t,{expr:"datum"}),order:"ascending"}:{field:ot(e,{expr:"datum"}),order:n??"ascending"}}function YW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=U8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Vre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=j8(t,a);return{text:{signal:u?B1(B1(u,"datum.label",l),"datum.value",ot(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...uqe(s,c),...aqe(c,s,o),...lqe(n,e,t,q_n,dHe)}}function oEn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=U8(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=YW(o,t,a))}const u=_l(e)&&!UO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:sEn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const aEn={column:{start:0,end:1},row:{start:1,end:0}};function uEn(e,t){return aEn[t][e]}function lEn(e,t){const n={};for(const r of sc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=U8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=j8(r,o),u=uEn(s,a);u!==void 0&&(n[a]=u)}}return Wr(n)?void 0:n}function lqe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=eS(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function gie(e){return[...Yk(e,"width"),...Yk(e,"height"),...Yk(e,"childWidth"),...Yk(e,"childHeight")]}function Yk(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(lo(o)&&wy(a)){const u=e.scaleName(n);return _l(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[vbe(u,a)]:[vbe(u,a),{name:i,update:cqe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=jW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function vbe(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function cqe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=us(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${ff(o)}, ${ff(s)}) * ${e}_step`}function fqe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function dqe(e,t){return ze(e).reduce((n,r)=>{const i=e[r];return{...n,...sx(t,i,r,s=>vi(s.value))}},{})}function hqe(e,t){if(_l(t))return e==="theta"?"independent":"shared";if(lx(t))return"shared";if(Sie(t))return ls(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function yie(e,t){const n=e.scale[t],r=ls(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Qe(Uvn(t)),"independent"):e[r][t]||"shared"}const cEn={...Y_n,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},pqe=ze(cEn);class fEn extends Rm{}const _be={symbols:dEn,gradient:hEn,labels:pEn,entries:mEn};function dEn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...Jyn({},n,H1n),...jHe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?mqe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ju)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=vi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=vi(m??1));else if(Ne(f.fill)){const g=KW(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=vi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===ju)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ne(f.stroke)){const g=us(KW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Pm){const g=Ze(t)&&yqe(n,i,t);g?f.opacity=[{test:g,...vi(m??1)},vi(u.legend.unselectedOpacity)]:m&&(f.opacity=vi(m))}return f={...f,...e},Wr(f)?void 0:f}function hEn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?mqe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=vi(l)),a={...a,...e},Wr(a)?void 0:a}function pEn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?yqe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;H1(c)?f=hf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=hf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=hf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Wr(d)?void 0:d}function mEn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function mqe(e){return gqe(e,(t,n)=>Math.max(t,n.value))}function KW(e){return gqe(e,(t,n)=>us(t,n.value))}function gqe(e,t){if(c_n(e))return ft(e.condition).reduce(t,e.value);if(Pf(e))return e.value}function yqe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=it(n.field);return r.map(s=>`(!length(data(${it($i(s)+W1)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const bbe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return RVe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return NVe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??EEn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??SEn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??yEn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Nw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Rw(n)&&df(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>gEn(t,e)};function gEn(e,t){const n=e.values;if(Ne(n))return GVe(t,n);if(Nt(n))return n}function yEn(e,t,n,r){if(t!=="shape"){const i=KW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function vEn(e){const{legend:t}=e;return us(t.type,_En(e))}function _En({channel:e,timeUnit:t,scaleType:n}){if(Rw(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(df(n))return"gradient"}return"symbol"}function bEn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??wEn(n,t)}function wEn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function EEn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(df(i))return n==="horizontal"?r==="top"||r==="bottom"?wbe(t,"width",o,s):o:wbe(t,"height",u,a)}function wbe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function SEn(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function vqe(e){const t=Xi(e)?xEn(e):IEn(e);return e.component.legends=t,t}function xEn(e){const{encoding:t}=e,n={};for(const r of[ju,...pHe]){const i=Ls(t[r]);!i||!e.getScaleComponent(r)||r===Uu&&Ze(i)&&i.type===ix||(n[r]=CEn(e,r))}return n}function TEn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function AEn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function CEn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new fEn({},TEn(e,t));Mwn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ls(i[t]),f=Ze(c)?(w=uo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=vEn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=bEn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of pqe){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const E=x in bbe?bbe[x](m):n[x];if(E!==void 0){const b=AEn(E,x,n,e.fieldDef(t));(b||s.legend[x]===void 0)&&a.set(x,E,b)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const E=dqe(g[x]??{},e),b=x in _be?_be[x](E,_):E;b!==void 0&&!Wr(b)&&(v[x]={...y!=null&&y.length&&Ze(c)?{name:`${$i(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:b})}return Wr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function IEn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){vqe(r);for(const i of ze(r.component.legends))n.legend[i]=yie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=_qe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ze(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function _qe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of pqe){const c=H0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return OEn(f,d);case"title":return eVe(f,d);case"type":return i=!0,Ju("symbol")}return D8(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&YL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&YL(e.explicit,["encode","gradient"])),e}function OEn(e,t){return t.value==="circle"?t:e}function PEn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function bqe(e){const t=e.component.legends,n={};for(const i of ze(t)){const s=e.getScaleComponent(i),o=Gr(s.get("domains"));if(n[o])for(const a of n[o])_qe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ro(n).flat().map(i=>kEn(i,e.config)).filter(i=>i!==void 0)}function kEn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of pHe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=B1(r,"datum.label",s.encode.labels.update.text.signal)),PEn(s,"labels","text",{signal:l})}return s}}function $En(e){return lx(e)||Sie(e)?REn(e):wqe(e)}function REn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),wqe(e))}function wqe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const NEn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Eqe extends Rm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Sqe(e){e.component.projection=Xi(e)?DEn(e):FEn(e)}function DEn(e){if(e.hasProjection){const t=yu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?MEn(e):void 0,s=new Eqe(e.projectionName(!0),{...yu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function MEn(e){const t=[],{encoding:n}=e;for(const r of[[Hf,Vf],[bc,qf]])(Ls(n[r[0]])||Ls(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Uu)&&e.typedFieldDef(Uu).type===ix&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ai.Main)),t}function LEn(e,t){const n=lre(NEn,i=>!!(!Vt(e.explicit,i)&&!Vt(t.explicit,i)||Vt(e.explicit,i)&&Vt(t.explicit,i)&&hl(e.get(i),t.get(i))));if(hl(e.size,t.size)){if(n)return e;if(hl(e.explicit,{}))return t;if(hl(t.explicit,{}))return e}return null}function FEn(e){if(e.children.length===0)return;let t;for(const r of e.children)Sqe(r);const n=lre(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=LEn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Eqe(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function BEn(e,t,n,r){if(VO(t,n)){const i=Xi(e)?e.axis(n)??e.legend(n)??{}:{},s=ot(t,{expr:"datum"}),o=ot(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ot(t,{binSuffix:"range",forAs:!0}),formula:jO(s,o,i.format,i.formatType,r)}}return{}}function xqe(e,t){return`${Wze(e)}_${t}`}function jEn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function vie(e,t,n){const r=O8(n,void 0)??{},i=xqe(r,t);return e.getName(`${i}_bins`)}function UEn(e){return"as"in e}function Ebe(e,t,n){let r,i;UEn(e)?r=dt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ot(e,{forAs:!0}),ot(e,{binSuffix:"end",forAs:!0})];const s={...O8(t,void 0)},o=xqe(s,e.field),{signal:a,extentSignal:u}=jEn(n,o);if(v8(s.extent)){const c=s.extent;i=nqe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Xd extends Br{clone(){return new Xd(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Ja(s)&&ci(s.bin)){const{key:a,binComponent:u}=Ebe(s,s.bin,n);i[a]={...u,...i[a],...BEn(n,s,o,n.config)}}return i},{});return Wr(r)?null:new Xd(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Ebe(n,n.bin,r);return new Xd(t,{[i]:s})}merge(t,n){for(const r of ze(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Pd([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ro(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ro(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return Ro(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:_c(t.field),as:r,signal:t.signal,...v8(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:_c(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:ot({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function zEn(e,t,n,r){var s;const i=Xi(r)?r.encoding[kh(t)]:void 0;if(Ja(n)&&Xi(r)&&BVe(n,i,r.markDef,r.config)){e.add(ot(n,{})),e.add(ot(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=V0({fieldDef:n,markDef:a,config:u});GC(o)&&l!==.5&&ls(t)&&(e.add(ot(n,{suffix:M8})),e.add(ot(n,{suffix:L8}))),n.bin&&VO(n,t)&&e.add(ot(n,{binSuffix:"range"}))}else if(Mze(t)){const o=Dze(t);e.add(r.getName(o))}else e.add(ot(n));return O_(n)&&$1n((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function VEn(e,t){for(const n of ze(t)){const r=t[n];for(const i of ze(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class wf extends Br{clone(){return new wf(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ot(o,{forAs:!0})]);else{if(cm(u)||by(u)){const c=cm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([ot({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([ot(o,{forAs:!0})]);km(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([ot({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([ot({field:l,aggregate:"max"},{forAs:!0})]))}else zEn(s,a,o,n)}),s.size+ze(i).length===0)?null:new wf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||ot(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||ot(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+ze(i).length===0?null:new wf(t,r,i)}merge(t){return Cze(this.dimensions,t.dimensions)?(VEn(this.measures,t.measures),!0):(r1n("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ze(this.measures)])}producedFields(){const t=new Set;for(const n of ze(this.measures))for(const r of ze(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ze(this.measures))for(const o of ze(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:_c(s));return{type:"aggregate",groupby:[...this.dimensions].map(_c),ops:t,fields:n,as:r}}}class ax extends Br{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of sc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ot(o),...ci(a)?[ot(o,{binSuffix:"end"})]:[]],...Yd(u)?{sortField:u}:Ne(u)?{sortIndexField:ZE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of sc)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of sc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of sc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of $h){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(lo(i)&&wy(s)){const o=z8(this.childModel,n),a=Eie(o);a?t[n]=a:Qe(Sre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=T8,field:f}=u;s.push(f),o.push(c),a.push(ot(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of pie){for(const c of mie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Mp,Dp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Sbe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function HEn(e,t){const n=dre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Sbe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Sbe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Qe(dvn(t)),null}function qEn(e){const t={};return $R(e.filter,n=>{if(yVe(n)){let r=null;Cre(n)?r=al(n.equal):Ore(n)?r=al(n.lte):Ire(n)?r=al(n.lt):Pre(n)?r=al(n.gt):kre(n)?r=al(n.gte):$re(n)?r=n.range[0]:Rre(n)&&(r=(n.oneOf??n.in)[0]),r&&(C_(r)?t[n.field]="date":fr(r)?t[n.field]="number":dt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function WEn(e){const t={};function n(r){KE(r)?t[r.field]="date":r.type==="quantitative"&&Vyn(r.aggregate)?t[r.field]="number":zE(r.field)>1?r.field in t||(t[r.field]="flatten"):O_(r)&&Yd(r.sort)&&zE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Xi(e)||_l(e))&&e.forEachFieldDef((r,i)=>{if(Ja(r))n(r);else{const s=T_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Xi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Ey(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function GEn(e){const t={};if(Xi(e)&&e.component.selection)for(const n of ze(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&zE(i.field)>1&&(t[i.field]="flatten")}return t}class fa extends Br{clone(){return new fa(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!a0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ze(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Qe(R_e(a,r[a],u.value)))}for(const a of ze(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Qe(R_e(a,n[a],u)))}const s=new Rm(n,r);i.copyAll(s);const o={};for(const a of ze(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return ze(o).length===0||i.parseNothing?null:new fa(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ze(this._parse)){const r=this._parse[n];zE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ze(this._parse))}dependentFields(){return new Set(ze(this._parse))}assembleTransforms(t=!1){return ze(this._parse).filter(n=>t?zE(n)>1:!0).map(n=>{const r=HEn(n,this._parse[n]);return r?{type:"formula",expr:r,as:hre(n)}:null}).filter(n=>n!==null)}}class G0 extends Br{clone(){return new G0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([kf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:kf}}}class WO extends Br{clone(){return new WO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class GO extends Br{clone(){return new GO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class G1 extends Br{constructor(t){super(null),t??(t={name:"source"});let n;if(a0(t)||(n=t.format?{...ku(t.format,["parse"])}:{}),YC(t))this._data={values:t.values};else if(XE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else $He(t)?this._data={values:[{type:"Sphere"}]}:(PHe(t)||a0(t))&&(this._data={});this._generator=a0(t),t.name&&(this._name=t.name),n&&!Wr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var xbe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},YEn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},u2;function _ie(e){return e instanceof G1||e instanceof WO||e instanceof GO}class bie{constructor(){u2.set(this,void 0),xbe(this,u2,!1,"f")}setModified(){xbe(this,u2,!0,"f")}get modifiedFlag(){return YEn(this,u2,"f")}}u2=new WeakMap;class P_ extends bie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class wie extends bie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class KEn extends wie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ze(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class XEn extends wie{constructor(t){super(),this.requiresSelectionId=t&&hie(t)}run(t){t instanceof G0&&(this.requiresSelectionId&&(_ie(t.parent)||t.parent instanceof wf||t.parent instanceof fa)||(this.setModified(),t.remove()))}}class QEn extends bie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Kd&&(r=t.producedFields(),cre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class JEn extends wie{constructor(){super()}run(t){t instanceof qa&&!t.isRequired()&&(this.setModified(),t.remove())}}class ZEn extends P_{run(t){if(!_ie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof fa)if(t instanceof fa)this.setModified(),t.merge(n);else{if(fre(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class eSn extends P_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof fa);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of ze(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Wr(i)){this.setModified();const o=new fa(t,i);for(const a of n){if(a instanceof fa)for(const u of ze(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof fa&&ze(a.parse).length===0&&a.remove()}}}}}class tSn extends P_{run(t){t instanceof qa||t.numChildren()>0||t instanceof ax||t instanceof G1||(this.setModified(),t.remove())}}class nSn extends P_{run(t){const n=t.children.filter(i=>i instanceof Kd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class rSn extends P_{run(t){const n=t.children.filter(i=>i instanceof wf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ze(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class iSn extends P_{constructor(t){super(),this.model=t}run(t){const n=!(_ie(t)||t instanceof ox||t instanceof fa||t instanceof G0),r=[],i=[];for(const s of t.children)s instanceof Xd&&(n&&!fre(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Xd?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class sSn extends P_{run(t){const n=[...t.children];if(!F1(n,o=>o instanceof qa)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof qa){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof qa)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class k_ extends Br{clone(){return new k_(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Pd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ot(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function oSn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ot(r);return i&&t.push(i),t},[])}function aSn(e){return Ne(e)&&e.every(t=>dt(t))&&e.length>1}class Fp extends Br{clone(){return new Fp(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(us(f.order,"ascending"));const l={field:a,order:u};let c;return aSn(s)?c=s:dt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Fp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return ph(p)}).filter(h=>!!h),c=oSn(n),f=n.encoding.order;let d;if(Ne(f)||Ze(f))d=Qze(f);else{const h=jVe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Fp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ot(i,{binSuffix:"mid"})]:[ot(i,{}),ot(i,{binSuffix:"end"})]:[ot(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ot(c,{expr:"datum"}),p=ot(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:ot(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:ot(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class ux extends Br{clone(){return new ux(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Pd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ot(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>wre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function uSn(e){function t(n){if(!(n instanceof ax)){const r=n.clone();if(r instanceof qa){const i=QW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof wf||r instanceof Fp||r instanceof ux||r instanceof k_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function XW(e){if(e instanceof ax)if(e.numChildren()===1&&!(e.children[0]instanceof qa)){const t=e.children[0];(t instanceof wf||t instanceof Fp||t instanceof ux||t instanceof k_)&&t.addDimensions(e.fields),t.swapWithParent(),XW(e)}else{const t=e.model.component.data.main;Tqe(t);const n=uSn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(XW)}function Tqe(e){if(e instanceof qa&&e.type===ai.Main&&e.numChildren()===1){const t=e.children[0];t instanceof ax||(t.swapWithParent(),Tqe(e))}}const QW="scale_",Kk=5;function JW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!JW(t.children))return!1}return!0}function Bc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Tbe(e,t,n){let r=e.sources,i=!1;return i=Bc(new JEn,r)||i,i=Bc(new XEn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Bc(new tSn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Bc(new ZEn,r)||i,i=Bc(new iSn(t),r)||i,i=Bc(new QEn,r)||i,i=Bc(new eSn,r)||i,i=Bc(new rSn,r)||i,i=Bc(new nSn,r)||i,i=Bc(new KEn,r)||i,i=Bc(new sSn,r)||i),e.sources=r,i}function lSn(e,t){JW(e.sources);let n=0,r=0;for(let i=0;i<Kk&&Tbe(e,t,!0);i++)n++;e.sources.map(XW);for(let i=0;i<Kk&&Tbe(e,t,!1);i++)r++;JW(e.sources),Math.max(n,r)===Kk&&Qe(`Maximum optimization runs(${Kk}) reached.`)}class Zs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Zs(()=>t(n))}}function Aqe(e){Xi(e)?cSn(e):fSn(e)}function cSn(e){const t=e.component.scales;for(const n of ze(t)){const r=hSn(e,n);if(t[n].setWithExplicit("domains",r),mSn(e,n),e.component.data.isFaceted){let s=e;for(;!_l(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Sp(a)&&(a.data=QW+a.data.replace(QW,""))}}}function fSn(e){for(const n of e.children)Aqe(n);const t=e.component.scales;for(const n of ze(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=H0(r,o.getWithExplicit("domains"),"domains","scale",ZW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Qe(uvn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function dSn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Abe(t,n);if(!i){Qe(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Abe(t,n);if(i)return"unaggregated"}return e}function hSn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=dSn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ls(r.x2)?Ls(r.x)?H0(Qm(n,i,e,"x"),Qm(n,i,e,"x2"),"domain","scale",ZW):Qm(n,i,e,"x2"):t==="y"&&Ls(r.y2)?Ls(r.y)?H0(Qm(n,i,e,"y"),Qm(n,i,e,"y2"),"domain","scale",ZW):Qm(n,i,e,"y2"):Qm(n,i,e,t)}function pSn(e,t,n){return e.map(r=>({signal:`{data: ${P8(r,{timeUnit:n,type:t})}}`}))}function n7(e,t,n){var i;const r=(i=uo(n))==null?void 0:i.unit;return t==="temporal"||r?pSn(e,t,r):[e]}function Qm(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ls(i[r]),{type:c}=l,f=l.timeUnit;if(k1n(t)){const p=Qm(e,void 0,n,r),m=n7(t.unionWith,c,f);return ud([...m,...p.value])}else{if(Nt(t))return ud([t]);if(t&&t!=="unaggregated"&&!xVe(t))return ud(n7(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ju([[0,1]]);const p=n.requestDataName(ai.Main);return Ju([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=km(r)&&Ze(l)?gSn(n,r,e):void 0;if(Rh(l)){const p=n7([l.datum],c,f);return Ju(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ai.Main),{field:m}=l;return Ju([{data:p,field:ot({field:m,aggregate:"min"})},{data:p,field:ot({field:m,aggregate:"max"})}])}else if(ci(h.bin)){if(lo(e))return Ju(e==="bin-ordinal"?[]:[{data:qC(d)?n.requestDataName(ai.Main):n.requestDataName(ai.Raw),field:n.vgField(r,VO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ci(p)){const m=vie(n,h.field,p);return Ju([new Zs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ju([{data:n.requestDataName(ai.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[kh(r)];if(BVe(h,p,s,a)){const m=n.requestDataName(ai.Main),g=V0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=GC(o)&&g!==.5&&ls(r);return Ju([{data:m,field:n.vgField(r,y?{suffix:M8}:{})},{data:m,field:n.vgField(r,{suffix:y?L8:"end"})}])}}return Ju(d?[{data:qC(d)?n.requestDataName(ai.Main):n.requestDataName(ai.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ai.Main),field:n.vgField(r)}])}function r7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":T8),...r?{field:_c(r)}:{},...i?{order:i}:{}}}function mSn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=xVe(r)&&r,o=A_(i)&&v8(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function gSn(e,t,n){if(!lo(n))return;const r=e.fieldDef(t),i=r.sort;if(LVe(i))return{op:"min",field:ZE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Yd(i)){const a=s&&!o.has(i.field);return r7(i,a)}else if(MVe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(cm(c)||by(c))return r7({field:ot(l),order:u},d);if(wre(c)||!c)return r7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function Abe(e,t){const{aggregate:n,type:r}=e;return n?dt(n)&&!qyn.has(n)?{valid:!1,reason:Nvn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Dvn(e)}:{valid:!0}:{valid:!1,reason:Rvn(e)}}function ZW(e,t,n,r){return e.explicit&&t.explicit&&Qe(jvn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ySn(e){const t=Pd(e.map(o=>{if(Sp(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=Pd(e.map(o=>{if(Sp(o)){const a=o.sort;return a!==void 0&&!qC(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Sp(o)&&n.length>0){let a=n[0];if(n.length>1){Qe(D_e);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Pd(n.map(o=>qC(o)||!("op"in o)||dt(o.op)&&o.op in Uyn?o:(Qe(zvn(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Qe(D_e),i=!0);const s=Pd(e.map(o=>Sp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Eie(e){if(Sp(e)&&dt(e.field))return e.field;if(Wyn(e)){let t;for(const n of e.fields)if(Sp(n)&&dt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Qe(Vvn),t}return Qe(Hvn),t}else if(Gyn(e)){Qe(qvn);const t=e.fields[0];return dt(t)?t:void 0}}function z8(e,t){const r=e.component.scales[t].get("domains").map(i=>(Sp(i)&&(i.data=e.lookupDataSource(i.data)),i));return ySn(r)}function Cqe(e){return lx(e)||Sie(e)?e.children.reduce((t,n)=>t.concat(Cqe(n)),Cbe(e)):Cbe(e)}function Cbe(e){return ze(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=vSn(i.range,s,n,e),h=z8(e,n),p=a?dwn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function vSn(e,t,n,r){if(ls(n)){if(wy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&Sp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Iqe extends Rm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:F1(this.get("domains"),t=>Ne(t)&&t.length===2&&fr(t[0])&&t[0]<=0&&fr(t[1])&&t[1]>=0)}}const _Sn=["range","scheme"];function bSn(e){const t=e.component.scales;for(const n of y8){const r=t[n];if(!r)continue;const i=wSn(n,e);r.setWithExplicit("range",i)}}function Ibe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=zu(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Zs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ci(r)){const a=vie(e,i,r);return new Zs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function wSn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of _Sn)if(n[f]!==void 0){const d=LW(s,f),h=TVe(e,f);if(!d)Qe(iVe(s,f,e));else if(h)Qe(h);else switch(f){case"range":{const p=n.range;if(Ne(p)){if(ls(e))return ud(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Zs.fromName(y,g)}return m}))}else if(mt(p))return ud({data:t.requestDataName(ai.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return ud(p)}case"scheme":return ud(ESn(n[f]))}}const o=e===Ri||e==="xOffset"?"width":"height",a=r[o];if(mh(a)){if(ls(e))if(lo(s)){const f=Pqe(a,t,e);if(f)return ud({step:f})}else Qe(sVe(o));else if(LO(e)){const f=e===my?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=kqe(a,s);if(p)return ud(p)}}}const{rangeMin:u,rangeMax:l}=n,c=SSn(e,t);return(u!==void 0||l!==void 0)&&LW(s,"rangeMin")&&Ne(c)&&c.length===2?ud([u??c[0],l??c[1]]):Ju(c)}function ESn(e){return P1n(e)?{scheme:e.name,...ku(e,["name"])}:{scheme:e}}function Oqe(e,t,n,{center:r}={}){const i=zu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===ho&&Ol(n)?r?[Zs.fromName(a=>`${o(a)}/2`,s),Zs.fromName(a=>`-${o(a)}/2`,s)]:[Zs.fromName(o,s),0]:r?[Zs.fromName(a=>`-${o(a)}/2`,s),Zs.fromName(a=>`${o(a)}/2`,s)]:[0,Zs.fromName(o,s)]}function SSn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ls(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ri:case ho:{if(Hn(["point","band"],u)){const f=$qe(e,n,r.view);if(mh(f))return{step:Pqe(f,t,e)}}return Oqe(e,t,u)}case my:case rx:return xSn(e,t,u);case Om:{const f=t.component.scales[e].get("zero"),d=Rqe(i,f,r),h=CSn(i,n,t,r);return WE(u)?ASn(d,h,TSn(u,r,l,e)):[d,h]}case Rc:return[0,Math.PI*2];case x_:return[0,360];case zf:return[0,new Zs(()=>{const f=t.getSignalName(_l(t.parent)?"child_width":"width"),d=t.getSignalName(_l(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case vy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case _y:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Uu:return"symbol";case ju:case Oh:case Ph:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Pm:case gy:case yy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Pqe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=yre(n),o=r[s];if(gHe({step:e,offsetIsDiscrete:ln(o)&&_Ve(o.type)})==="offset"&&QVe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Qyn(f)})`}}else return e.step}function kqe(e,t){if(gHe({step:e,offsetIsDiscrete:lo(t)})==="offset")return{step:e.step}}function xSn(e,t,n){const r=e===my?"x":"y",i=t.getScaleComponent(r);if(!i)return Oqe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=$qe(r,t.size,t.config.view);if(mh(l)){const c=kqe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=mVe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=V0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return Tze(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function $qe(e,t,n){const r=e===Ri?"width":"height",i=t[r];return i||s6(n,r)}function TSn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ne(n)?n.length+1:(Qe(e1n(r)),3)}}function ASn(e,t,n){const r=()=>{const i=ff(t),s=ff(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new Zs(r):{signal:r()}}function Rqe(e,t,n){if(t)return Nt(t)?{signal:`${t.signal} ? 0 : ${Rqe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(_8("size",e))}const Obe=.95;function CSn(e,t,n,r){const i={x:Ibe(n,"x"),y:Ibe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Pbe(t,i,r.view);return fr(s)?s-1:new Zs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Pbe(t,i,r.view);return fr(s)?Math.pow(Obe*s,2):new Zs(()=>`pow(${Obe} * ${s.signal}, 2)`)}}throw new Error(_8("size",e))}function Pbe(e,t,n){const r=mh(e.width)?e.width.step:i6(n,"width"),i=mh(e.height)?e.height.step:i6(n,"height");return t.x||t.y?new Zs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Nqe(e,t){Xi(e)?ISn(e,t):Mqe(e,t)}function ISn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of ze(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ls(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=LW(h,t),y=TVe(a,t);if(d!==void 0&&(g?y&&Qe(y):Qe(iVe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":C_(u[t])||_==="temporal"||v?l.set(t,{signal:P8(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in kbe?kbe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:JVe(i,a),hasSecondaryRangeChannel:!!i[kh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const kbe={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?OSn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>PSn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>kSn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>$Sn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>RSn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>NSn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return DSn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>MSn(e,t,n,r,i,s.scale,o)};function Dqe(e){Xi(e)?bSn(e):Mqe(e,"range")}function Mqe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Dqe(r):Nqe(r,t);for(const r of ze(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=H0(i,a,t,"scale",OHe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function OSn(e,t){const n=t.bin;if(ci(n)){const r=vie(e,t.field,n);return new Zs(()=>e.getSignalName(r))}else if(So(n)&&A_(n)&&n.step!==void 0)return{step:n.step}}function PSn(e,t){if(Hn([ju,Oh,Ph],e)&&t!=="nominal")return"hcl"}function kSn(e,t,n,r,i,s){var o;if(!((o=ph(s))!=null&&o.bin||Ne(n)||i!=null||r!=null||Hn([$u.TIME,$u.UTC],e)))return ls(t)?!0:void 0}function $Sn(e,t,n,r,i,s){if(ls(e)){if(df(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===$u.POINT)return n.pointPadding}}function RSn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:us(o,n==="bar"?a:u)}else if(LO(t)&&r===$u.BAND)return i.offsetBandPaddingInner}}function NSn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===$u.BAND)return us(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(LO(t)){if(n===$u.POINT)return .5;if(n===$u.BAND)return i.offsetBandPaddingOuter}}}function DSn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Ol(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Ol(e)&&t==="descending")return!0}function MSn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Ol(i)){if(Ne(n)){const u=n[0],l=n[n.length-1];if(fr(u)&&u<=0&&fr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!WE(i))return!0;if(!(Ze(t)&&t.bin)&&Hn([...$h,...Ryn],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function LSn(e,t,n,r,i=!1){const s=FSn(t,n,r,i),{type:o}=e;return km(t)?o!==void 0?L1n(t,o)?Ze(n)&&!M1n(o,n.type)?(Qe(Fvn(o,s)),s):o:(Qe(Lvn(t,o,s)),s):s:null}function FSn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Rw(e)||YU(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Qe(KU(e,"ordinal")),"ordinal";if(ls(e)||LO(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in bre)return"band";const s=n[zu(e)];return V1(s)||YE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Rw(e)?"time":YU(e)==="discrete"?(Qe(KU(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&uo(t.timeUnit).utc?"utc":"time";case"quantitative":return Rw(e)?Ze(t)&&ci(t.bin)?"bin-ordinal":"linear":YU(e)==="discrete"?(Qe(KU(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(nVe(t.type))}function BSn(e,{ignoreRange:t}={}){Lqe(e),Aqe(e);for(const n of D1n)Nqe(e,n);t||Dqe(e)}function Lqe(e){Xi(e)?e.component.scales=jSn(e):e.component.scales=zSn(e)}function jSn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of y8){const o=Ls(t[s]);if(o&&n===IVe&&s===Uu&&o.type===ix)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=JVe(t,s),l=LSn(a,s,o,r,u);i[s]=new Iqe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const USn=OHe((e,t)=>L_e(e)-L_e(t));function zSn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Lqe(s);for(const o of ze(s.component.scales))if((t=i.scale)[o]??(t[o]=hqe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?T1n(a.value,u.value)?r[o]=H0(a,u,"type","scale",USn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of ze(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new Iqe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class i7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Xi(e){return(e==null?void 0:e.type)==="unit"}function _l(e){return(e==null?void 0:e.type)==="facet"}function Sie(e){return(e==null?void 0:e.type)==="concat"}function lx(e){return(e==null?void 0:e.type)==="layer"}class xie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=yu(a),this.name=t.name??i,this.title=ag(t.title)?{text:t.title}:t.title?yu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new i7,this.projectionNameMap=r?r.projectionNameMap:new i7,this.signalNameMap=r?r.signalNameMap:new i7,this.data=t.data,this.description=t.description,this.transforms=Kbn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Z_n(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:A8(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Rm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){BSn(this)}parseProjection(){Sqe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){vqe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of ze(r)){const o=r[s];o!==void 0&&(i[s]=vi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=vi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Wr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=lEn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of sc)t[r].title&&n.push(rEn(this,r));for(const r of pie)n=n.concat(iEn(this,r));return n}assembleAxes(){return Hwn(this.component.axes,this.config)}assembleLegends(){return bqe(this)}assembleProjections(){return $En(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Gze(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Wr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||_l(this.parent)?Cqe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return $i((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ai[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(_l(this.parent)){const n=fqe(t),r=g8(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(lo(s)&&wy(o)){const a=i.get("name"),u=z8(this,r),l=Eie(u);if(l){const c=ot({aggregate:"distinct",field:l},{expr:"datum"});return{signal:cqe(a,i,c)}}else return Qe(Sre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Fze(t)&&km(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(nvn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Fqe extends xie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ot(r,n)}reduceFieldDef(t,n){return I_n(this.getMapping(),(r,i,s)=>{const o=ph(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Xre(this.getMapping(),(r,i)=>{const s=ph(r);s&&t(s,i)},n)}}class V8 extends Br{clone(){return new V8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class H8 extends Br{clone(){return new H8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class KC extends Br{clone(){return new KC(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Ar("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=km(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Ol(d)&&l.aggregate!=="count"&&!Ey(i)&&(u[l.field]=l)}return u},{});return ze(a).length?new KC(t,a):null}dependentFields(){return new Set(ze(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=ze(this.filter).reduce((n,r)=>{const i=this.filter[r],s=ot(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class q8 extends Br{clone(){return new q8(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class W8 extends Br{clone(){return new W8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Mw extends Br{clone(){return new Mw(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Hf,Vf],[bc,qf]]){const s=i.map(o=>{const a=Ls(n.encoding[o]);return Ze(a)?a.field:Rh(a)?{expr:`${a.datum}`}:Pf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Mw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Uu)){const i=n.typedFieldDef(Uu);i.type===ix&&(t=new Mw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(dt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class XC extends Br{clone(){return new XC(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Hf,Vf],[bc,qf]]){const i=r.map(o=>{const a=Ls(n.encoding[o]);return Ze(a)?a.field:Rh(a)?{expr:`${a.datum}`}:Pf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===bc?"2":"";(i[0]||i[1])&&(t=new XC(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(dt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class s1 extends Br{clone(){return new s1(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new s1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=eHe(n.mark,r);return new s1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Pbn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class G8 extends Br{clone(){return new G8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class QC extends Br{clone(){return new QC(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(kbn(o)){let u=Uqe(o.data,s);u||(u=new G1(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new qa(u,l,ai.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if($bn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent($i(u),u)}catch{throw new Error(ovn(u))}if(a=l.materialized,!a)throw new Error(avn(u))}return new QC(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ft(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ft(this.transform.as)}:{}};else{let n=this.transform.as;dt(n)||(Qe(mvn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Y8 extends Br{clone(){return new Y8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class K8 extends Br{clone(){return new K8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class X8 extends Br{clone(){return new X8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Pd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class Q8 extends Br{clone(){return new Q8(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Bqe(e){let t=0;function n(r,i){if(r instanceof G1&&!r.isGenerator&&!XE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof fa&&(r.parent instanceof G1&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof ax){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof WO||r instanceof GO||r instanceof KC||r instanceof ox||r instanceof JE||r instanceof XC||r instanceof wf||r instanceof QC||r instanceof ux||r instanceof k_||r instanceof W8||r instanceof q8||r instanceof V8||r instanceof G8||r instanceof Y8||r instanceof K8||r instanceof G0||r instanceof Q8||r instanceof X8||r instanceof H8)&&i.transform.push(r.assemble()),(r instanceof Xd||r instanceof Kd||r instanceof s1||r instanceof Fp||r instanceof Mw)&&i.transform.push(...r.assemble()),r instanceof qa&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof qa?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof qa&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function VSn(e){const t=[],n=Bqe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function HSn(e,t){const n=[],r=Bqe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function qSn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function WSn(e){for(const t of sc)GSn(e,t);$be(e,"x"),$be(e,"y")}function GSn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=eS("title",null,r,t);let l=Nw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ne(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=eS("labelOrient",a.header,r,t),f=a.header!==null?us((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[jqe(e,t,f)]}}}function jqe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function $be(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=yie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=qSn(a.get("orient"));o[u]??(o[u]=[jqe(e,s,!1)]);const l=a2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function YSn(e){Tie(e),l6(e,"width"),l6(e,"height")}function KSn(e){Tie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";l6(e,t),l6(e,n)}function Tie(e){for(const t of e.children)t.parseLayoutSize()}function l6(e,t){const n=fqe(t),r=g8(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??hqe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=H0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function XSn(e){const{size:t,component:n}=e;for(const r of $h){const i=zu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,mh(s)?"step":s,!0)}else{const s=QSn(e,i);n.layoutSize.set(i,s,!1)}}}function QSn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(lo(s)){const a=s6(r.view,t);return wy(o)||mh(a)?"step":a}else return jW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return jW(r.view,t);{const s=s6(r.view,t);return mh(s)?s.step:s}}}function eG(e,t,n){return ot(t,{suffix:`by_${ot(e)}`,...n})}class fA extends Fqe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Pie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!UO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ze(t),r={};for(const i of n){if(![Dp,Mp].includes(i)){Qe(_8(i,"facet"));break}const s=t[i];if(s.field===void 0){Qe(DW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Yre(t,n);return r.header?r.header=yu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=J8(this),this.child.parseData()}parseLayoutSize(){Tie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),WSn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of sc)for(const r of mie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=eS("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=j8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof fA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof fA?{...this.channelHasField("column")?{encode:{update:{columns:{field:ot(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof fA){if(this.child.channelHasField("column")){const i=ot(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of $h){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(lo(o)&&wy(a)){const u=z8(this.child,i),l=Eie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Qe(Sre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of sc){const f=this.facet[c];if(f){u.push(ot(f));const{bin:d,sort:h}=f;if(ci(d)&&u.push(ot(f,{binSuffix:"end"})),Yd(h)){const{field:p,op:m=T8}=h,g=eG(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ne(h)){const p=ZE(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Yd(r.sort)?[eG(r,r.sort,{expr:"datum"})]:Ne(r.sort)?[ZE(r,t,{expr:"datum"})]:[ot(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Yd(i)?i.order:!Ne(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return YW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of pie)if(t[s]){const o=eS("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return YW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=VSn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:sc.map(u=>this.facetSortFields(u)).flat(),order:sc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(uwn(this,[]))}]}getMapping(){return this.facet}}function JSn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Yd(s.sort)){const{field:o,op:a=T8}=s.sort;e=i=new k_(e,{joinaggregate:[{op:a,field:o,as:eG(s,s.sort,{forAs:!0})}],groupby:[ot(s)]})}return i}return null}function Uqe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(YC(e)&&YC(a)){if(hl(e.values,a.values))return o}else if(XE(e)&&XE(a)){if(e.url===a.url)return o}else if(PHe(e)&&e.name===o.dataName)return o}}return null}function ZSn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new G1({values:[]});return t.push(r),r}const n=Uqe(e.data,t);if(n)return a0(e.data)||(n.data.format=Aze({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new G1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function exn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(zbn(i))o=e=new JE(e,i),s="derived";else if(aie(i)){const a=qEn(i);o=e=fa.makeWithAncestors(e,{},a,n)??e,e=new ox(e,t,i.filter)}else if(THe(i))o=e=Xd.makeFromTransform(e,i,t),s="number";else if(Hbn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new fa(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Kd.makeFromTransform(e,i);else if(qbn(i))o=e=wf.makeFromTransform(e,i),s="number",hie(t)&&(e=new G0(e));else if(xHe(i))o=e=QC.make(e,t,i,r++),s="derived";else if(Bbn(i))o=e=new ux(e,i),s="number";else if(jbn(i))o=e=new k_(e,i),s="number";else if(Wbn(i))o=e=Fp.makeFromTransform(e,i),s="derived";else if(Gbn(i))o=e=new W8(e,i),s="derived";else if(Ybn(i))o=e=new H8(e,i),s="derived";else if(Ubn(i))o=e=new q8(e,i),s="derived";else if(Rbn(i))o=e=new X8(e,i),s="derived";else if(Fbn(i))e=new Q8(e,i);else if(Vbn(i))o=e=s1.makeFromTransform(e,i),s="derived";else if(Nbn(i))o=e=new V8(e,i),s="derived";else if(Dbn(i))o=e=new Y8(e,i),s="derived";else if(Mbn(i))o=e=new K8(e,i),s="derived";else if(Lbn(i))o=e=new G8(e,i),s="derived";else{Qe(pvn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function J8(e){var m;let t=ZSn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(a0(i)||XE(i)||YC(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new own;a0(i)?(kHe(i)?t=new GO(t,i.sequence):uie(i)&&(t=new WO(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=fa.makeExplicit(t,e,o)??t,t=new G0(t);const a=e.parent&&lx(e.parent);(Xi(e)||_l(e))&&a&&(t=Xd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=exn(t,e,o));const u=GEn(e),l=WEn(e);t=fa.makeWithAncestors(t,{},{...u,...l},o)??t,Xi(e)&&(t=Mw.parseAll(t,e),t=XC.parseAll(t,e)),(Xi(e)||_l(e))&&(a||(t=Xd.makeFromEncoding(t,e)??t),t=Kd.makeFromEncoding(t,e)??t,t=JE.parseAllForSortIndex(t,e));const c=e.getDataName(ai.Raw),f=new qa(t,c,ai.Raw,r);if(n[c]=f,t=f,Xi(e)){const g=wf.makeFromEncoding(t,e);g&&(t=g,hie(e)&&(t=new G0(t))),t=s1.makeFromEncoding(t,e)??t,t=Fp.makeFromEncoding(t,e)??t}Xi(e)&&(t=KC.make(t,e)??t);const d=e.getDataName(ai.Main),h=new qa(t,d,ai.Main,r);n[d]=h,t=h,Xi(e)&&zwn(e,h);let p=null;if(_l(e)){const g=e.getName("facet");t=JSn(t,e.facet)??t,p=new ax(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class txn extends xie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Qe(fvn),this.children=this.getChildren(t).map((l,c)=>Pie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=J8(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ze(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return R8(t)?t.vconcat:sie(t)?t.hconcat:t.concat}parseLayoutSize(){KSn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=gie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function nxn(e){return e===!1||e===null}const rxn={disable:1,gridScale:1,scale:1,...KVe,labelExpr:1,encode:1},zqe=ze(rxn);class Aie extends Rm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Aie(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!nxn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function ixn(e,t,n){const{encoding:r,config:i}=e,s=Ls(r[t])??Ls(r[kh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(H1(u))return{text:hf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(GE(s)==="quantitative"){if(YE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:hf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:hf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(GE(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:hf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function sxn(e){return $h.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[dxn(n,e)]),t),{})}const oxn={bottom:"top",top:"bottom",left:"right",right:"left"};function axn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of ze(i.component.axes))n.axis[s]=yie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=uxn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of $h){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=oxn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function uxn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=lxn(i,s)}}}else return t.map(n=>n.clone());return e}function lxn(e,t){for(const n of zqe){const r=H0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return eVe(i,s);case"gridScale":return{explicit:i.explicit,value:us(i.value,s.value)}}return D8(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function cxn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:WC(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===oqe(r,i))return!0}return e===n[t]}const fxn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function dxn(e,t){var y,v;let n=t.axis(e);const r=new Aie,i=Ls(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Jwn(e),u=t.getScaleComponent(e).get("type"),l=qwn(e,u,a,t.config),c=n!==void 0?!n:WW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Kwn(i,n,e,o.style,l),d=NVe(n.formatType,i,u),h=RVe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of zqe){const w=_ in ybe?ybe[_](p):H_e(_)?n[_]:void 0,x=w!==void 0,E=cxn(w,_,n,t,e);if(x&&E)r.set(_,w,E);else{const{configValue:b=void 0,configFrom:T=void 0}=H_e(_)&&_!=="values"?WW(_,o.style,n.style,l):{},C=b!==void 0;x&&!C?r.set(_,w,E):(T!=="vgAxisConfig"||fxn.has(_)&&C||HO(b)||Nt(b))&&r.set(_,b,!1)}}const m=n.encoding??{},g=YVe.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const x=dqe(m[w]??{},t),E=w==="labels"?ixn(t,e,x):x;return E!==void 0&&!Wr(E)&&(_[w]={update:E}),_},{});return Wr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function hxn({encoding:e,size:t}){for(const n of $h){const r=zu(n);mh(t[r])&&Ng(e[n])&&(delete t[r],Qe(sVe(r)))}return t}const pxn={vgMark:"arc",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...q0(e,"radius"),...q0(e,"theta")})},mxn={vgMark:"area",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...o6("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...o6("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...die(e)})},gxn={vgMark:"rect",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...q0(e,"x"),...q0(e,"y")})},yxn={vgMark:"shape",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===ix?{field:ot(n,{expr:"datum"})}:{}}]}},vxn={vgMark:"image",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...q0(e,"x"),...q0(e,"y"),...cie(e,"url")})},_xn={vgMark:"line",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...to("size",e,{vgChannel:"strokeWidth"}),...die(e)})},bxn={vgMark:"trail",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...to("size",e),...die(e)})};function Cie(e,t){const{config:n}=e;return{...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...to("size",e),...to("angle",e),...wxn(e,n,t)}}function wxn(e,t,n){return n?{shape:{value:n}}:to("shape",e)}const Exn={vgMark:"symbol",encodeEntry:e=>Cie(e)},Sxn={vgMark:"symbol",encodeEntry:e=>Cie(e,"circle")},xxn={vgMark:"symbol",encodeEntry:e=>Cie(e,"square")},Txn={vgMark:"rect",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...q0(e,"x"),...q0(e,"y")})},Axn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...o6("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...o6("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...to("size",e,{vgChannel:"strokeWidth"})}}},Cxn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Nc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...cie(e),...to("size",e,{vgChannel:"fontSize"}),...to("angle",e),...hbe("align",Ixn(e.markDef,n,t)),...hbe("baseline",Oxn(e.markDef,n,t)),...ca("radius",e,{defaultPos:null}),...ca("theta",e,{defaultPos:null})}}};function Ixn(e,t,n){if(Ar("align",e,n)===void 0)return"center"}function Oxn(e,t,n){if(Ar("baseline",e,n)===void 0)return"middle"}const Pxn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ca("y",e,{defaultPos:"mid",vgChannel:"yc"}),...to("size",e,{defaultValue:kxn(e),vgChannel:i}),[s]:vi(Ar("thickness",n,t))}}};function kxn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Ar("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&wy(a)&&fr(a.step)?a.step*3/4:i6(t.view,i)*3/4}}const Xk={arc:pxn,area:mxn,bar:gxn,circle:Sxn,geoshape:yxn,image:vxn,line:_xn,point:Exn,rect:Txn,rule:Axn,square:xxn,text:Cxn,tick:Pxn,trail:bxn};function $xn(e){if(Hn([S8,w8,j1n],e.mark)){const t=eHe(e.mark,e.encoding);if(t.length>0)return Rxn(e,t)}else if(e.mark===E8){const t=NW.some(n=>Ar(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Nxn(e)}return Iie(e)}const Rbe="faceted_path_";function Rxn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Rbe+e.requestDataName(ai.Main),data:e.requestDataName(ai.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Iie(e,{fromPrefix:Rbe})}]}const Nbe="stack_group_";function Nxn(e){var l;const[t]=Iie(e,{fromPrefix:Nbe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...UE(t.encode.update,["y","yc","y2","height",...NW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ku(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...UE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ku(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of NW){const f=fm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=vi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ot(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ot(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=fm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:vi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ai.Main),name:Nbe+e.requestDataName(ai.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Dxn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ne(o)&&Pf(o)&&$W(o.value)||!o&&$W(Ar("order",i,s)))){if((Ne(o)||Ze(o))&&!n)return Qze(o,{expr:"datum"});if(Ey(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(Ne(c))return{field:ot(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Yd(c))return{field:ot({aggregate:Kre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(MVe(c)){const f=e.fieldDef(c.encoding);return{field:ot(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ot(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Iie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=us(r.clip,Mxn(e),Lxn(e)),a=Kze(r),u=i.key,l=Dxn(e),c=Fxn(e),f=Ar("aria",r,s),d=Xk[n].postEncodingTransform?Xk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Xk[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ai.Main)},encode:{update:Xk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Mxn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Lxn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Fxn(e){if(!e.component.selection)return null;const t=ze(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ze(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Vqe extends Fqe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,W_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=hh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Ebn(o,s,{graticule:t.data&&uie(t.data)}));const u=this.encoding=A_n(t.encoding||{},a,o.filled,s);this.markDef=wHe(o,u,s),this.size=hxn({encoding:u,size:W_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=bHe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>rie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===IVe,r=t&&xyn.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return y8.reduce((r,i)=>{const s=Ls(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=yu(t);return Ne(n)&&(i.domain=n.map(al)),Ne(r)&&(i.range=r.map(al)),i}initAxes(t){return $h.reduce((n,r)=>{const i=t[r];if(ln(i)||r===Ri&&ln(t.x2)||r===ho&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=ze(t),r={};for(const i of n){const s=t[i];r[i]=HO(s)?Yze(s):al(s)}return r}initLegends(t){return Nyn.reduce((n,r)=>{const i=Ls(t[r]);if(i&&Myn(r)){const s=i.legend;n[r]=s&&yu(s)}return n},{})}parseData(){this.component.data=J8(this)}parseLayoutSize(){XSn(this)}parseSelections(){this.component.selection=Uwn(this,this.selection)}parseMarkGroup(){this.component.mark=$xn(this)}parseAxesAndHeaders(){this.component.axes=sxn(this)}assembleSelectionTopLevelSignals(t){return lwn(this,t)}assembleSignals(){return[...rqe(this),...awn(this,[])]}assembleSelectionData(t){return cwn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return gie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!lx(this.parent))&&(t=NHe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return r1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ph(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ja(n)?n:null}}class Oie extends xie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(N8(a))return new Oie(a,this,this.getName(`layer_${u}`),o,s);if($m(a))return new Vqe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Ere(a))})}parseData(){this.component.data=J8(this);for(const t of this.children)t.parseData()}parseLayoutSize(){YSn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ze(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){axn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),rqe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),gie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ft(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return fwn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),bqe(this))}}function Pie(e,t,n,r,i){if(A8(e))return new fA(e,t,n,i);if(N8(e))return new Oie(e,t,n,r,i);if($m(e))return new Vqe(e,t,n,r,i);if(X_n(e))return new txn(e,t,n,i);throw new Error(Ere(e))}function Bxn(e,t={}){t.logger&&t1n(t.logger),t.fieldTitle&&qVe(t.fieldTitle);try{const n=_He(qS(t.config,e.config)),r=IHe(e,n),i=Pie(r,null,"",void 0,n);return i.parse(),lSn(i.component.data,i),{spec:Uxn(i,jxn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&n1n(),t.fieldTitle&&y_n()}}function jxn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):dt(t)&&(t={type:t}),i&&s&&rwn(t.type)){if(i==="step"&&s==="step")Qe(P_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Qe(P_e(g8(o)));const a=o==="width"?"height":"width";t.type=iwn(a)}}return{...ze(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...ibe(n,!1),...ibe(e,!0)}}function Uxn(e,t,n={},r){const i=e.config?cbn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),HSn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...mHe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const zxn=vyn.version,Vxn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:zE,accessPathWithDatum:dre,compile:Bxn,contains:Hn,deepEqual:hl,deleteNestedProperty:YL,duplicate:tn,entries:U0,every:lre,fieldIntersection:fre,flatAccessWithDatum:Ize,getFirstDefined:us,hasIntersection:cre,hash:Vn,internalField:kze,isBoolean:qC,isEmpty:Wr,isEqual:byn,isInternalField:$ze,isNullOrFalse:$W,isNumeric:c8,keys:ze,logicalExpr:lA,mergeDeep:Aze,never:Tze,normalize:IHe,normalizeAngle:WC,omit:ku,pick:UE,prefixGenerator:RW,removePathFromField:hre,replaceAll:B1,replacePathInField:_c,resetIdCounter:Eyn,setEqual:Cze,some:F1,stringify:Gr,titleCase:NO,unique:Pd,uniqueId:Pze,vals:Ro,varName:$i,version:zxn},Symbol.toStringTag,{value:"Module"}));function Hqe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Hxn="vega-themes",qxn="2.14.0",Wxn="Themes for stylized Vega and Vega-Lite visualizations.",Gxn=["vega","vega-lite","themes","style"],Yxn="BSD-3-Clause",Kxn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Xxn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Qxn="build/vega-themes.js",kie="build/vega-themes.module.js",Jxn="build/vega-themes.min.js",Zxn="build/vega-themes.min.js",eTn="build/vega-themes.module.d.ts",tTn={type:"git",url:"https://github.com/vega/vega-themes.git"},nTn=["src","build"],rTn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},iTn={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},sTn={vega:"*","vega-lite":"*"},oTn={},aTn={name:Hxn,version:qxn,description:Wxn,keywords:Gxn,license:Yxn,author:Kxn,contributors:Xxn,main:Qxn,module:kie,unpkg:Jxn,jsdelivr:Zxn,types:eTn,repository:tTn,files:nTn,scripts:rTn,devDependencies:iTn,peerDependencies:sTn,dependencies:oTn};const sb="#fff",Dbe="#888",uTn={background:"#333",view:{stroke:Dbe},title:{color:sb,subtitleColor:sb},style:{"guide-label":{fill:sb},"guide-title":{fill:sb}},axis:{domainColor:sb,gridColor:Dbe,tickColor:sb}},Ly="#4572a7",lTn={background:"#fff",arc:{fill:Ly},area:{fill:Ly},line:{stroke:Ly,strokeWidth:2},path:{stroke:Ly},rect:{fill:Ly},shape:{stroke:Ly},symbol:{fill:Ly,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Fy="#30a2da",s7="#cbcbcb",cTn="#999",fTn="#333",Mbe="#f0f0f0",Lbe="#333",dTn={arc:{fill:Fy},area:{fill:Fy},axis:{domainColor:s7,grid:!0,gridColor:s7,gridWidth:1,labelColor:cTn,labelFontSize:10,titleColor:fTn,tickColor:s7,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Mbe,group:{fill:Mbe},legend:{labelColor:Lbe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Lbe,titleFontSize:14,titlePadding:10},line:{stroke:Fy,strokeWidth:2},path:{stroke:Fy,strokeWidth:.5},rect:{fill:Fy},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Fy},bar:{binSpacing:2,fill:Fy,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},By="#000",hTn={group:{fill:"#e5e5e5"},arc:{fill:By},area:{fill:By},line:{stroke:By},path:{stroke:By},rect:{fill:By},shape:{stroke:By},symbol:{fill:By,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},pTn=22,mTn="normal",Fbe="Benton Gothic, sans-serif",Bbe=11.5,gTn="normal",jy="#82c6df",o7="Benton Gothic Bold, sans-serif",jbe="normal",Ube=13,pT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},yTn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:o7,fontSize:pTn,fontWeight:mTn},arc:{fill:jy},area:{fill:jy},line:{stroke:jy,strokeWidth:2},path:{stroke:jy},rect:{fill:jy},shape:{stroke:jy},symbol:{fill:jy,size:30},axis:{labelFont:Fbe,labelFontSize:Bbe,labelFontWeight:gTn,titleFont:o7,titleFontSize:Ube,titleFontWeight:jbe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Fbe,labelFontSize:Bbe,symbolType:"square",titleFont:o7,titleFontSize:Ube,titleFontWeight:jbe},range:{category:pT["category-6"],diverging:pT["fireandice-6"],heatmap:pT["fire-7"],ordinal:pT["fire-7"],ramp:pT["fire-7"]}},Uy="#ab5787",Qk="#979797",vTn={background:"#f9f9f9",arc:{fill:Uy},area:{fill:Uy},line:{stroke:Uy},path:{stroke:Uy},rect:{fill:Uy},shape:{stroke:Uy},symbol:{fill:Uy,size:30},axis:{domainColor:Qk,domainWidth:.5,gridWidth:.2,labelColor:Qk,tickColor:Qk,tickWidth:.2,titleColor:Qk},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},zy="#3e5c69",_Tn={background:"#fff",arc:{fill:zy},area:{fill:zy},line:{stroke:zy},path:{stroke:zy},rect:{fill:zy},shape:{stroke:zy},symbol:{fill:zy},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},zl="#1696d2",zbe="#000000",bTn="#FFFFFF",Jk="Lato",a7="Lato",wTn="Lato",ETn="#DEDDDD",STn=18,mT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},xTn={background:bTn,title:{anchor:"start",fontSize:STn,font:Jk},axisX:{domain:!0,domainColor:zbe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:a7,labelAngle:0,tickColor:zbe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Jk},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:ETn,gridWidth:1,labelFontSize:12,labelFont:a7,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Jk,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:a7,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Jk,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:mT["six-groups-cat-1"],diverging:mT["diverging-colors"],heatmap:mT["diverging-colors"],ordinal:mT["six-groups-seq"],ramp:mT["shades-blue"]},area:{fill:zl},rect:{fill:zl},line:{color:zl,stroke:zl,strokeWidth:5},trail:{color:zl,stroke:zl,strokeWidth:0,size:1},path:{stroke:zl,strokeWidth:.5},point:{filled:!0},text:{font:wTn,color:zl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:zl,stroke:null}},arc:{fill:zl},shape:{stroke:zl},symbol:{fill:zl,size:30}},Vy="#3366CC",Vbe="#ccc",Zk="Arial, sans-serif",TTn={arc:{fill:Vy},area:{fill:Vy},path:{stroke:Vy},rect:{fill:Vy},shape:{stroke:Vy},symbol:{stroke:Vy},circle:{fill:Vy},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Zk,fontSize:12},"guide-title":{font:Zk,fontSize:12},"group-title":{font:Zk,fontSize:12}},title:{font:Zk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Vbe,tickColor:Vbe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},$ie=e=>e*(1/3+1),Hbe=$ie(9),qbe=$ie(10),Wbe=$ie(12),gT="Segoe UI",Gbe="wf_standard-font, helvetica, arial, sans-serif",Ybe="#252423",yT="#605E5C",Kbe="transparent",ATn="#C8C6C4",Hc="#118DFF",CTn="#12239E",ITn="#E66C37",OTn="#6B007B",PTn="#E044A7",kTn="#744EC2",$Tn="#D9B300",RTn="#D64550",qqe=Hc,Wqe="#DEEFFF",Xbe=[Wqe,qqe],NTn=[Wqe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",qqe],DTn={view:{stroke:Kbe},background:Kbe,font:gT,header:{titleFont:Gbe,titleFontSize:Wbe,titleColor:Ybe,labelFont:gT,labelFontSize:qbe,labelColor:yT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:yT,labelFontSize:Hbe,titleFont:Gbe,titleColor:Ybe,titleFontSize:Wbe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:ATn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hc},line:{stroke:Hc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:gT,fontSize:Hbe,fill:yT},arc:{fill:Hc},area:{fill:Hc,line:!0,opacity:.6},path:{stroke:Hc},rect:{fill:Hc},point:{fill:Hc,filled:!0,size:75},shape:{stroke:Hc},symbol:{fill:Hc,strokeWidth:1.5,size:50},legend:{titleFont:gT,titleFontWeight:"bold",titleColor:yT,labelFont:gT,labelFontSize:qbe,labelColor:yT,symbolType:"circle",symbolSize:75},range:{category:[Hc,CTn,ITn,OTn,PTn,kTn,$Tn,RTn],diverging:Xbe,heatmap:Xbe,ordinal:NTn}},u7='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Qbe=400,MTn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],LTn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Z8({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?MTn:LTn,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:u7,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:u7,fill:r,fontWeight:Qbe},"guide-title":{font:u7,fill:r,fontWeight:Qbe}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const FTn=Z8({type:"light",background:"#ffffff"}),BTn=Z8({type:"light",background:"#f4f4f4"}),jTn=Z8({type:"dark",background:"#262626"}),UTn=Z8({type:"dark",background:"#161616"}),zTn=aTn.version,VTn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:BTn,carbong100:UTn,carbong90:jTn,carbonwhite:FTn,dark:uTn,excel:lTn,fivethirtyeight:dTn,ggplot2:hTn,googlecharts:TTn,latimes:yTn,powerbi:DTn,quartz:vTn,urbaninstitute:xTn,version:zTn,vox:_Tn},Symbol.toStringTag,{value:"Module"}));function HTn(e,t,n,r){if(Ne(e))return`[${e.map(i=>t(dt(i)?i:Jbe(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=Jbe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function qTn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Jbe(e,t){return JSON.stringify(e,qTn(t))}var WTn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Gqe="vg-tooltip-element",GTn={offsetX:10,offsetY:10,id:Gqe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:YTn,maxDepth:2,formatTooltip:HTn,baseURL:""};function YTn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function KTn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return WTn.toString().replace(Gqe,e)}function XTn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class QTn{constructor(t){this.options={...GTn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=KTn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=XTn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var l7={};function JTn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c7,Zbe;function ZTn(){return Zbe||(Zbe=1,c7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),c7}var e2n=wr;wr.Node=Y1;wr.create=wr;function wr(e){var t=this;if(t instanceof wr||(t=new wr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}wr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};wr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};wr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};wr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n2n(this,arguments[e]);return this.length};wr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)r2n(this,arguments[e]);return this.length};wr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};wr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};wr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};wr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};wr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};wr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};wr.prototype.map=function(e,t){t=t||this;for(var n=new wr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};wr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new wr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};wr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};wr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};wr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};wr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};wr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};wr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};wr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=t2n(this,i,n[r]);return s};wr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function t2n(e,t,n){var r=t===e.head?new Y1(n,null,t,e):new Y1(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function n2n(e,t){e.tail=new Y1(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function r2n(e,t){e.head=new Y1(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Y1(e,t,n,r){if(!(this instanceof Y1))return new Y1(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{ZTn()(wr)}catch{}const i2n=e2n,yv=Symbol("max"),np=Symbol("length"),ob=Symbol("lengthCalculator"),dA=Symbol("allowStale"),Lv=Symbol("maxAge"),Qh=Symbol("dispose"),ewe=Symbol("noDisposeOnSet"),Ks=Symbol("lruList"),qc=Symbol("cache"),Yqe=Symbol("updateAgeOnGet"),f7=()=>1;class s2n{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[yv]=t.max||1/0;const n=t.length||f7;if(this[ob]=typeof n!="function"?f7:n,this[dA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Lv]=t.maxAge||0,this[Qh]=t.dispose,this[ewe]=t.noDisposeOnSet||!1,this[Yqe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[yv]=t||1/0,vT(this)}get max(){return this[yv]}set allowStale(t){this[dA]=!!t}get allowStale(){return this[dA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Lv]=t,vT(this)}get maxAge(){return this[Lv]}set lengthCalculator(t){typeof t!="function"&&(t=f7),t!==this[ob]&&(this[ob]=t,this[np]=0,this[Ks].forEach(n=>{n.length=this[ob](n.value,n.key),this[np]+=n.length})),vT(this)}get lengthCalculator(){return this[ob]}get length(){return this[np]}get itemCount(){return this[Ks].length}rforEach(t,n){n=n||this;for(let r=this[Ks].tail;r!==null;){const i=r.prev;twe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ks].head;r!==null;){const i=r.next;twe(this,t,r,n),r=i}}keys(){return this[Ks].toArray().map(t=>t.key)}values(){return this[Ks].toArray().map(t=>t.value)}reset(){this[Qh]&&this[Ks]&&this[Ks].length&&this[Ks].forEach(t=>this[Qh](t.key,t.value)),this[qc]=new Map,this[Ks]=new i2n,this[np]=0}dump(){return this[Ks].map(t=>c6(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ks]}set(t,n,r){if(r=r||this[Lv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[ob](n,t);if(this[qc].has(t)){if(s>this[yv])return Lw(this,this[qc].get(t)),!1;const u=this[qc].get(t).value;return this[Qh]&&(this[ewe]||this[Qh](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[np]+=s-u.length,u.length=s,this.get(t),vT(this),!0}const o=new o2n(t,n,s,i,r);return o.length>this[yv]?(this[Qh]&&this[Qh](t,n),!1):(this[np]+=o.length,this[Ks].unshift(o),this[qc].set(t,this[Ks].head),vT(this),!0)}has(t){if(!this[qc].has(t))return!1;const n=this[qc].get(t).value;return!c6(this,n)}get(t){return d7(this,t,!0)}peek(t){return d7(this,t,!1)}pop(){const t=this[Ks].tail;return t?(Lw(this,t),t.value):null}del(t){Lw(this,this[qc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[qc].forEach((t,n)=>d7(this,n,!1))}}const d7=(e,t,n)=>{const r=e[qc].get(t);if(r){const i=r.value;if(c6(e,i)){if(Lw(e,r),!e[dA])return}else n&&(e[Yqe]&&(r.value.now=Date.now()),e[Ks].unshiftNode(r));return i.value}},c6=(e,t)=>{if(!t||!t.maxAge&&!e[Lv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Lv]&&n>e[Lv]},vT=e=>{if(e[np]>e[yv])for(let t=e[Ks].tail;e[np]>e[yv]&&t!==null;){const n=t.prev;Lw(e,t),t=n}},Lw=(e,t)=>{if(t){const n=t.value;e[Qh]&&e[Qh](n.key,n.value),e[np]-=n.length,e[qc].delete(n.key),e[Ks].removeNode(t)}};class o2n{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const twe=(e,t,n,r)=>{let i=n.value;c6(e,i)&&(Lw(e,n),e[dA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var a2n=s2n;const u2n=Object.freeze({loose:!0}),l2n=Object.freeze({}),c2n=e=>e?typeof e!="object"?u2n:e:l2n;var Rie=c2n,tG={exports:{}};const f2n="2.0.0",Kqe=256,d2n=Number.MAX_SAFE_INTEGER||9007199254740991,h2n=16,p2n=Kqe-6,m2n=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Nie={MAX_LENGTH:Kqe,MAX_SAFE_COMPONENT_LENGTH:h2n,MAX_SAFE_BUILD_LENGTH:p2n,MAX_SAFE_INTEGER:d2n,RELEASE_TYPES:m2n,SEMVER_SPEC_VERSION:f2n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const g2n=typeof process=="object"&&l7&&l7.NODE_DEBUG&&/\bsemver\b/i.test(l7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var e9=g2n;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Nie,s=e9;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(tG,tG.exports);var Die=tG.exports;const nwe=/^[0-9]+$/,Xqe=(e,t)=>{const n=nwe.test(e),r=nwe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},y2n=(e,t)=>Xqe(t,e);var v2n={compareIdentifiers:Xqe,rcompareIdentifiers:y2n};const e$=e9,{MAX_LENGTH:rwe,MAX_SAFE_INTEGER:t$}=Nie,{safeRe:iwe,t:swe}=Die,_2n=Rie,{compareIdentifiers:ab}=v2n;let b2n=class Zf{constructor(t,n){if(n=_2n(n),t instanceof Zf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>rwe)throw new TypeError(`version is longer than ${rwe} characters`);e$("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?iwe[swe.LOOSE]:iwe[swe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>t$||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t$||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t$||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<t$)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e$("SemVer.compare",this.version,this.options,t),!(t instanceof Zf)){if(typeof t=="string"&&t===this.version)return 0;t=new Zf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Zf||(t=new Zf(t,this.options)),ab(this.major,t.major)||ab(this.minor,t.minor)||ab(this.patch,t.patch)}comparePre(t){if(t instanceof Zf||(t=new Zf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(e$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ab(r,i)}while(++n)}compareBuild(t){t instanceof Zf||(t=new Zf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(e$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ab(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),ab(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Mie=b2n;const owe=Mie,w2n=(e,t,n)=>new owe(e,n).compare(new owe(t,n));var cx=w2n;const E2n=cx,S2n=(e,t,n)=>E2n(e,t,n)===0;var x2n=S2n;const T2n=cx,A2n=(e,t,n)=>T2n(e,t,n)!==0;var C2n=A2n;const I2n=cx,O2n=(e,t,n)=>I2n(e,t,n)>0;var P2n=O2n;const k2n=cx,$2n=(e,t,n)=>k2n(e,t,n)>=0;var R2n=$2n;const N2n=cx,D2n=(e,t,n)=>N2n(e,t,n)<0;var M2n=D2n;const L2n=cx,F2n=(e,t,n)=>L2n(e,t,n)<=0;var B2n=F2n;const j2n=x2n,U2n=C2n,z2n=P2n,V2n=R2n,H2n=M2n,q2n=B2n,W2n=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return j2n(e,n,r);case"!=":return U2n(e,n,r);case">":return z2n(e,n,r);case">=":return V2n(e,n,r);case"<":return H2n(e,n,r);case"<=":return q2n(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var G2n=W2n,h7,awe;function Y2n(){if(awe)return h7;awe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}h7=t;const n=Rie,{safeRe:r,t:i}=Die,s=G2n,o=e9,a=Mie,u=Qqe();return h7}var p7,uwe;function Qqe(){if(uwe)return p7;uwe=1;class e{constructor(L,B){if(B=r(B),L instanceof e)return L.loose===!!B.loose&&L.includePrerelease===!!B.includePrerelease?L:new e(L.raw,B);if(L instanceof i)return this.raw=L.value,this.set=[[L]],this.format(),this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=L.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(L=>L.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(L){const U=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+L,G=n.get(U);if(G)return G;const H=this.options.loose,Y=H?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];L=L.replace(Y,O(this.options.includePrerelease)),s("hyphen replace",L),L=L.replace(a[u.COMPARATORTRIM],l),s("comparator trim",L),L=L.replace(a[u.TILDETRIM],c),s("tilde trim",L),L=L.replace(a[u.CARETTRIM],f),s("caret trim",L);let q=L.split(" ").map(z=>y(z,this.options)).join(" ").split(/\s+/).map(z=>A(z,this.options));H&&(q=q.filter(z=>(s("loose invalid filter",z,this.options),!!z.match(a[u.COMPARATORLOOSE])))),s("range list",q);const D=new Map,M=q.map(z=>new i(z,this.options));for(const z of M){if(p(z))return[z];D.set(z.value,z)}D.size>1&&D.has("")&&D.delete("");const W=[...D.values()];return n.set(U,W),W}intersects(L,B){if(!(L instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>g(U,B)&&L.set.some(G=>g(G,B)&&U.every(H=>G.every(Y=>H.intersects(Y,B)))))}test(L){if(!L)return!1;if(typeof L=="string")try{L=new o(L,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(N(this.set[B],L,this.options))return!0;return!1}}p7=e;const t=a2n,n=new t({max:1e3}),r=Rie,i=Y2n(),s=e9,o=Mie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Die,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Nie,p=k=>k.value==="<0.0.0-0",m=k=>k.value==="",g=(k,L)=>{let B=!0;const U=k.slice();let G=U.pop();for(;B&&U.length;)B=U.every(H=>G.intersects(H,L)),G=U.pop();return B},y=(k,L)=>(s("comp",k,L),k=x(k,L),s("caret",k),k=_(k,L),s("tildes",k),k=b(k,L),s("xrange",k),k=C(k,L),s("stars",k),k),v=k=>!k||k.toLowerCase()==="x"||k==="*",_=(k,L)=>k.trim().split(/\s+/).map(B=>w(B,L)).join(" "),w=(k,L)=>{const B=L.loose?a[u.TILDELOOSE]:a[u.TILDE];return k.replace(B,(U,G,H,Y,q)=>{s("tilde",k,U,G,H,Y,q);let D;return v(G)?D="":v(H)?D=`>=${G}.0.0 <${+G+1}.0.0-0`:v(Y)?D=`>=${G}.${H}.0 <${G}.${+H+1}.0-0`:q?(s("replaceTilde pr",q),D=`>=${G}.${H}.${Y}-${q} <${G}.${+H+1}.0-0`):D=`>=${G}.${H}.${Y} <${G}.${+H+1}.0-0`,s("tilde return",D),D})},x=(k,L)=>k.trim().split(/\s+/).map(B=>E(B,L)).join(" "),E=(k,L)=>{s("caret",k,L);const B=L.loose?a[u.CARETLOOSE]:a[u.CARET],U=L.includePrerelease?"-0":"";return k.replace(B,(G,H,Y,q,D)=>{s("caret",k,G,H,Y,q,D);let M;return v(H)?M="":v(Y)?M=`>=${H}.0.0${U} <${+H+1}.0.0-0`:v(q)?H==="0"?M=`>=${H}.${Y}.0${U} <${H}.${+Y+1}.0-0`:M=`>=${H}.${Y}.0${U} <${+H+1}.0.0-0`:D?(s("replaceCaret pr",D),H==="0"?Y==="0"?M=`>=${H}.${Y}.${q}-${D} <${H}.${Y}.${+q+1}-0`:M=`>=${H}.${Y}.${q}-${D} <${H}.${+Y+1}.0-0`:M=`>=${H}.${Y}.${q}-${D} <${+H+1}.0.0-0`):(s("no pr"),H==="0"?Y==="0"?M=`>=${H}.${Y}.${q}${U} <${H}.${Y}.${+q+1}-0`:M=`>=${H}.${Y}.${q}${U} <${H}.${+Y+1}.0-0`:M=`>=${H}.${Y}.${q} <${+H+1}.0.0-0`),s("caret return",M),M})},b=(k,L)=>(s("replaceXRanges",k,L),k.split(/\s+/).map(B=>T(B,L)).join(" ")),T=(k,L)=>{k=k.trim();const B=L.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return k.replace(B,(U,G,H,Y,q,D)=>{s("xRange",k,U,G,H,Y,q,D);const M=v(H),W=M||v(Y),z=W||v(q),V=z;return G==="="&&V&&(G=""),D=L.includePrerelease?"-0":"",M?G===">"||G==="<"?U="<0.0.0-0":U="*":G&&V?(W&&(Y=0),q=0,G===">"?(G=">=",W?(H=+H+1,Y=0,q=0):(Y=+Y+1,q=0)):G==="<="&&(G="<",W?H=+H+1:Y=+Y+1),G==="<"&&(D="-0"),U=`${G+H}.${Y}.${q}${D}`):W?U=`>=${H}.0.0${D} <${+H+1}.0.0-0`:z&&(U=`>=${H}.${Y}.0${D} <${H}.${+Y+1}.0-0`),s("xRange return",U),U})},C=(k,L)=>(s("replaceStars",k,L),k.trim().replace(a[u.STAR],"")),A=(k,L)=>(s("replaceGTE0",k,L),k.trim().replace(a[L.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=k=>(L,B,U,G,H,Y,q,D,M,W,z,V,te)=>(v(U)?B="":v(G)?B=`>=${U}.0.0${k?"-0":""}`:v(H)?B=`>=${U}.${G}.0${k?"-0":""}`:Y?B=`>=${B}`:B=`>=${B}${k?"-0":""}`,v(M)?D="":v(W)?D=`<${+M+1}.0.0-0`:v(z)?D=`<${M}.${+W+1}.0-0`:V?D=`<=${M}.${W}.${z}-${V}`:k?D=`<${M}.${W}.${+z+1}-0`:D=`<=${D}`,`${B} ${D}`.trim()),N=(k,L,B)=>{for(let U=0;U<k.length;U++)if(!k[U].test(L))return!1;if(L.prerelease.length&&!B.includePrerelease){for(let U=0;U<k.length;U++)if(s(k[U].semver),k[U].semver!==i.ANY&&k[U].semver.prerelease.length>0){const G=k[U].semver;if(G.major===L.major&&G.minor===L.minor&&G.patch===L.patch)return!0}return!1}return!0};return p7}const K2n=Qqe(),X2n=(e,t,n)=>{try{t=new K2n(t,n)}catch{return!1}return t.test(e)};var Q2n=X2n,Jqe=JTn(Q2n);function J2n(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Z2n=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Zqe(e,...t){for(const n of t)eAn(e,n);return e}function eAn(e,t){for(const n of Object.keys(t))WS(e,n,t[n],!0)}const Gc=B0n;let JC=Vxn;const n$=typeof window<"u"?window:void 0;var gwe;JC===void 0&&((gwe=n$==null?void 0:n$.vl)!=null&&gwe.compile)&&(JC=n$.vl);const tAn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},nAn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},l2={vega:"Vega","vega-lite":"Vega-Lite"},f6={vega:Gc.version,"vega-lite":JC?JC.version:"not available"},rAn={vega:e=>e,"vega-lite":(e,t)=>JC.compile(e,{config:t}).spec},iAn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,sAn="chart-wrapper";function oAn(e){return typeof e=="function"}function lwe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${l2[r]} JSON Source`}function aAn(e,t){if(e.$schema){const n=Hqe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${l2[n.library]}, but mode argument sets ${l2[t]??t}.`);const r=n.library;return Jqe(f6[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${l2[r]} ${n.version}, but the current version of ${l2[r]} is v${f6[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function eWe(e){return!!(e&&"load"in e)}function cwe(e){return eWe(e)?e:Gc.loader(e)}function uAn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return dt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function lAn(e,t,n={}){let r,i;dt(t)?(i=cwe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=uAn(r),o=s.loader;(!i||o)&&(i=cwe(n.loader??o));const a=await fwe(s,i),u=await fwe(n,i),l={...Zqe(u,a),config:qS(u.config??{},a.config??{})};return await fAn(e,r,l,i)}async function fwe(e,t){const n=dt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=dt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function cAn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function fAn(e,t,n={},r){const i=n.theme?qS(VTn[n.theme],n.config??{}):n.config,s=dy(n.actions)?n.actions:Zqe({},tAn,n.actions??{}),o={...nAn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Gc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:E,rootContainer:b}=cAn(c);if(!E.getElementById(x)){const T=document.createElement("style");T.id=x,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Z2n.toString():n.defaultStyle,b.appendChild(T)}}const f=aAn(t,n.mode);let d=rAn[f](t,i);if(f==="vega-lite"&&d.$schema){const x=Hqe(d.$schema);Jqe(f6.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${f6.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(sAn),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):f5(d,p,!0,!1).newDocument),n.formatLocale&&Gc.formatLocale(n.formatLocale),n.timeFormatLocale&&Gc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const E=n.expressionFunctions[x];"fn"in E?Gc.expressionFunction(x,E.fn,E.visitor):E instanceof Function&&Gc.expressionFunction(x,E)}const{ast:m}=n,g=Gc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Gc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Gc.expressionInterpreter??n.expr??K0n}:{}});if(y.addSignalListener("autosize",(x,E)=>{const{type:b}=E;b=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):b=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):b=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:E}=n,b=x&&!eWe(x)?x==null?void 0:x.baseURL:void 0,T=oAn(E)?E:new QTn({baseURL:b,...E===!0?{}:E}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:x,updateSet:E}=typeof v=="boolean"?{}:v;y.hover(x,E)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const b=document.createElement("details");b.title=o.CLICK_TO_VIEW_ACTIONS,c.append(b),x=b;const T=document.createElement("summary");T.innerHTML=iAn,b.append(T),_=C=>{b.contains(C.target)||b.removeAttribute("open")},document.addEventListener("click",_)}const E=document.createElement("div");if(x.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(const b of["svg","png"])if(s===!0||s.export===!0||s.export[b]){const T=o[`${b.toUpperCase()}_ACTION`],C=document.createElement("a"),A=mt(n.scaleFactor)?n.scaleFactor[b]:n.scaleFactor;C.text=T,C.href="#",C.target="_blank",C.download=`${l}.${b}`,C.addEventListener("mousedown",async function(O){O.preventDefault();const N=await y.toImageURL(b,A);this.href=N}),E.append(C)}}if(s===!0||s.source!==!1){const b=document.createElement("a");b.text=o.SOURCE_ACTION,b.href="#",b.addEventListener("click",function(T){lwe(fU(t),n.sourceHeader??"",n.sourceFooter??"",f),T.preventDefault()}),E.append(b)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const b=document.createElement("a");b.text=o.COMPILED_ACTION,b.href="#",b.addEventListener("click",function(T){lwe(fU(d),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),E.append(b)}if(s===!0||s.editor!==!1){const b=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(C){J2n(window,b,{config:i,mode:f,renderer:a,spec:fU(t)}),C.preventDefault()}),E.append(T)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function dAn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function hAn(e,t,n){n&&(dAn(n)?n(e.data(t)):e.change(t,Gc.changeset().remove(()=>!0).insert(n)))}function pAn(e,t){Object.keys(t).forEach(n=>{hAn(e,n,t[n])})}function tWe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const nWe=()=>{};function m7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function mAn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=tWe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!tV(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function dwe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function g7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function c2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rWe extends j.PureComponent{constructor(){super(...arguments),c2(this,"containerRef",j.createRef()),c2(this,"resultPromise",void 0),c2(this,"handleError",t=>{const{onError:n=nWe}=this.props;n(t,this.containerRef.current),console.warn(t)}),c2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=tWe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=mAn(g7(this.props),g7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!rq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&dwe(a,s),i&&m7(a,i)),a.run()})}else rq(i,s)||this.modifyView(o=>{s&&dwe(o,s),i&&m7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=g7(this.props);this.resultPromise=lAn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;m7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return j.createElement("div",{ref:this.containerRef,className:t,style:n})}}c2(rWe,"propTypes",{className:Yt.string,onError:Yt.func});function nG(){return nG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nG.apply(this,arguments)}function rG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gAn={};class iWe extends j.PureComponent{constructor(){super(...arguments),rG(this,"vegaEmbed",j.createRef()),rG(this,"handleNewView",t=>{this.update();const{onNewView:n=nWe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){rq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{pAn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return j.createElement(rWe,nG({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}rG(iWe,"defaultProps",{data:gAn});function iG(){return iG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iG.apply(this,arguments)}function yAn(e){return j.createElement(iWe,iG({},e,{mode:"vega-lite"}))}function hwe(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function vAn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=Mb(!1),a=hm(),[u,l]=jv(),c=n.filter(A=>A.completed).map(A=>Math.max(...Object.values(A.answers).map(O=>O.endTime))),[f,d]=P.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=P.useMemo(()=>n.filter(A=>A.completed&&hwe(A.answers,f)),[n,f]),p=P.useMemo(()=>n.filter(A=>!A.completed&&hwe(A.answers,f)),[n,f]),m=P.useMemo(()=>{var A,O;return h.length>0?[{Date:(A=f[0])==null?void 0:A.getTime(),Participants:0},...h.map(N=>Math.max(...Object.values(N.answers).map(k=>k.endTime).flat())).sort((N,k)=>N-k).map((N,k)=>({Date:N,Participants:k})),{Date:(O=f[1])==null?void 0:O.getTime(),Participants:h.length}]:[]},[h,f]),g=P.useMemo(()=>{var A,O;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(A=f[0])==null?void 0:A.getTime(),(O=f[1])==null?void 0:O.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:_}]=Mb(!1),[w,{close:x,open:E}]=Mb(!1),[b,{close:T,open:C}]=Mb(!1);return $.jsxs(vm,{children:[$.jsxs(J6,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[$.jsxs(Ii,{align:"center",mb:16,justify:"space-between",children:[$.jsxs(Ii,{direction:"column",children:[$.jsx(sa,{order:5,mb:4,children:t}),$.jsxs(Ii,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[$.jsxs(ow,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),$.jsxs(ow,{size:"sm",color:"green",children:["Completed:",h.length]}),$.jsxs(ow,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),$.jsxs(va,{children:[$.jsxs(Ci,{opened:y,children:[$.jsx(Ci.Target,{children:$.jsx(Hr,{variant:"light",disabled:n.length===0,onClick:()=>{V2(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:_,onMouseLeave:v,px:4,children:$.jsx(lgt,{})})}),$.jsx(Ci.Dropdown,{children:$.jsx(gt,{children:"Download all participants data as JSON"})})]}),$.jsxs(Ci,{opened:w,children:[$.jsx(Ci.Target,{children:$.jsx(Hr,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:E,onMouseLeave:x,px:4,children:$.jsx(ygt,{})})}),$.jsx(Ci.Dropdown,{children:$.jsx(gt,{children:"Download all participants data as a tidy CSV"})})]}),$.jsxs(Ci,{opened:b,children:[$.jsx(Ci.Target,{children:$.jsx(Hr,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:C,onMouseLeave:T,px:4,children:$.jsx(sgt,{})})}),$.jsx(Ci.Dropdown,{children:$.jsx(gt,{children:"Analyze study data"})})]})]})]}),$.jsx(U5e,{label:$.jsx(gt,{children:"Time Filter:"}),placeholder:"Pick dates range",value:f,onChange:d}),m.length>0?$.jsxs($.Fragment,{children:[$.jsx(gt,{mt:16,children:"Finished Participants"}),$.jsx(yAn,{spec:g,actions:!1})]}):$.jsx(pt,{h:293.4,children:$.jsx(qp,{style:{height:"100%"},children:$.jsx(gt,{children:"Not enough participants for chart"})})})]}),$.jsx(mLe,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function _An(e){const{globalConfig:t}=e,[n,r]=P.useState(!1),[i,s]=P.useState({}),[o,a]=P.useState({}),{storageEngine:u}=xa();return P.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await LZ(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),$.jsxs(pt,{children:[$.jsx(sa,{mb:20,order:4,children:"Your Studies:"}),$.jsxs(xu,{children:[t.configsList.map(l=>i[l]&&$.jsx(xu.Col,{md:12,xl:6,children:$.jsx(vAn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),$.jsx(_m,{visible:n})]})]})}function bAn({globalConfig:e}){return $.jsxs(uI,{children:[$.jsx(Q2,{studyIds:e.configsList}),$.jsx(vm,{fluid:!0,children:$.jsx(_An,{globalConfig:e})})]})}function wAn(){const{user:e,triggerAuth:t}=VS(),{storageEngine:n}=xa(),[r,i]=P.useState(!1),[s,o]=P.useState([]),[a,u]=P.useState(!1),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(!1),[m,g]=P.useState(""),[y,v]=P.useState(null),_=_ke({initialValues:{email:""},validate:{email:cxt("Invalid email")}});P.useEffect(()=>{(async()=>{if(u(!0),n instanceof fd){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i(O==null?void 0:O.isEnabled);const N=await(n==null?void 0:n.getUserManagementData("adminUsers"));N&&N.adminUsersList&&o(N==null?void 0:N.adminUsersList.map(k=>k.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof fd){const A=await i5e(n,u);A&&A.email&&v({email:A.email,uid:A.uid}),p(!0)}u(!1)},x=async A=>{u(!0),n instanceof fd&&A&&(await n.changeAuth(!0),await n.addAdminUser(A),o([A.email]),i(!0),t()),p(!1),u(!1)},E=async()=>{if(u(!0),n instanceof fd){await n.addAdminUser({email:_.values.email,uid:null});const A=await n.getUserManagementData("adminUsers");o(A==null?void 0:A.adminUsersList.map(O=>O.email))}u(!1),c(!1),_.setValues({email:""})},b=A=>{d(!0),g(A)},T=async()=>{if(u(!0),n instanceof fd){await n.removeAdminUser(m);const A=await n.getUserManagementData("adminUsers");o(A==null?void 0:A.adminUsersList.map(O=>O.email))}d(!1),u(!1)},C=P.useMemo(()=>n instanceof fd,[n]);return $.jsxs($.Fragment,{children:[$.jsx(vm,{children:$.jsxs(J6,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[$.jsx(sa,{mb:20,order:3,children:"Authentication"}),r?$.jsx(Ii,{children:$.jsx(gt,{children:"Authentication is enabled."})}):$.jsxs(Ii,{justify:"space-between",children:[$.jsx(pt,{children:$.jsx(gt,{children:"Authentication is currently disabled."})}),$.jsx(aw,{label:"You can only enable auth when using Firebase",disabled:C,children:$.jsx(Hr,{onClick:A=>C?w():A.preventDefault(),color:"green","data-disabled":C?void 0:!0,sx:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?$.jsxs(Ii,{mt:40,direction:"column",children:[$.jsxs(Ii,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[$.jsx(sa,{order:6,children:"Enabled Users"}),$.jsx(_gt,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(A=>{var O;return $.jsxs(Ii,{justify:"space-between",mb:10,children:[$.jsx(gt,{children:A}),A===((O=e.user)==null?void 0:O.email)?$.jsx(gt,{color:"blue",size:"xs",children:"You"}):$.jsx(NA,{variant:"subtle",onClick:()=>b(A),children:$.jsx(vgt,{color:"red"})})]},A)}):null]}):null]})}),$.jsx(Ip,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:$.jsxs(pt,{component:"form",onSubmit:_.onSubmit(()=>E()),children:[$.jsx(Z6,{icon:$.jsx(egt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),$.jsxs(Ii,{mt:30,justify:"right",children:[$.jsx(Hr,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),$.jsx(Hr,{type:"submit",children:"Save"})]})]})}),$.jsxs(Ip,{opened:f,size:"large",onClose:()=>d(!1),title:$.jsxs(gt,{fw:700,children:["Remove",m,"?"]}),children:[$.jsxs(gt,{mt:40,children:["Are you sure you want to remove",$.jsx("b",{children:m})," ","as an administrator?"]}),$.jsxs(Ii,{mt:40,justify:"right",children:[$.jsx(Hr,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),$.jsx(Hr,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),$.jsxs(Ip,{opened:h,size:"md",onClose:()=>d(!1),title:$.jsx(gt,{fw:700,children:"Enable Authentication?"}),children:[$.jsxs(gt,{mt:40,children:["User"," ",$.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),$.jsxs(Ii,{mt:40,justify:"right",children:[$.jsx(Hr,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),$.jsx(Hr,{onClick:()=>x(y),children:"Yes, I'm sure."})]})]}),$.jsx(_m,{visible:a})]})}async function EAn(){const t=await(await fetch(`${Ec}global.json`)).text();return hjt(t)}async function SAn(e){const t={},n=e.configsList.map(o=>`${Ec}${e.configs[o].path}`),r=await Promise.all(n.map(o=>fetch(o))),i=await Promise.all(r.map(o=>o.text())),s=await Promise.all(i.map((o,a)=>hLe(o,e.configsList[a])));return e.configsList.forEach((o,a)=>{t[o]=s[a]}),t}function xAn(){const[e,t]=P.useState(null),[n,r]=P.useState({});return P.useEffect(()=>{async function i(){e&&r(await SAn(e))}i()},[e]),P.useEffect(()=>{e||EAn().then(i=>{t(i)})},[e]),e?$.jsx(NKe,{basename:Ec,children:$.jsx(sQt,{children:$.jsx(Bmt,{children:$.jsxs($Ke,{children:[$.jsx(qh,{path:"/",element:$.jsxs($.Fragment,{children:[$.jsx(Q2,{studyIds:e.configsList}),$.jsx(Xwt,{globalConfig:e,studyConfigs:n})]})}),$.jsx(qh,{path:"/:studyId/*",element:$.jsx(yQt,{globalConfig:e})}),$.jsx(qh,{path:"/analysis/dashboard",element:$.jsx(rU,{children:$.jsx(bAn,{globalConfig:e})})}),$.jsx(qh,{path:"/analysis",element:$.jsx(_H,{to:"/analysis/dashboard"})}),$.jsx(qh,{path:"/analysis/stats/:studyId/:tab",element:$.jsx(rU,{children:$.jsx(wQt,{globalConfig:e})})}),$.jsx(qh,{path:"/analysis/stats/:studyId",element:$.jsx(_H,{to:"./table",replace:!0})}),$.jsx(qh,{path:"/settings",element:$.jsx(rU,{children:$.jsxs(uI,{children:[$.jsx(Q2,{studyIds:e.configsList}),$.jsx(wAn,{})]})})}),$.jsx(qh,{path:"/login",element:$.jsxs($.Fragment,{children:[$.jsx(Q2,{studyIds:e.configsList}),$.jsx(EQt,{})]})})]})})})}):null}let r$;const TAn=new Uint8Array(16);function AAn(){if(!r$&&(r$=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r$(TAn)}const yo=[];for(let e=0;e<256;++e)yo.push((e+256).toString(16).slice(1));function CAn(e,t=0){return yo[e[t+0]]+yo[e[t+1]]+yo[e[t+2]]+yo[e[t+3]]+"-"+yo[e[t+4]]+yo[e[t+5]]+"-"+yo[e[t+6]]+yo[e[t+7]]+"-"+yo[e[t+8]]+yo[e[t+9]]+"-"+yo[e[t+10]]+yo[e[t+11]]+yo[e[t+12]]+yo[e[t+13]]+yo[e[t+14]]+yo[e[t+15]]}const IAn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),pwe={randomUUID:IAn};function mwe(e,t,n){if(pwe.randomUUID&&!t&&!e)return pwe.randomUUID();e=e||{};const r=e.random||(e.rng||AAn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return CAn(r)}class OAn extends e5e{constructor(){super("localStorage");Ku(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await ZH.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Iw(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await Iw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=mwe();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=ZH.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=mwe();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await Iw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function PAn(){let e,t=!1;{const n=new fd;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new OAn;await n.connect(),e=n}return e}function kAn(){const{storageEngine:e,setStorageEngine:t}=xa();return P.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await PAn();t(r)}n()},[t,e]),$.jsx(xAn,{})}y7.createRoot(document.getElementById("root")).render($.jsx(j.StrictMode,{children:$.jsx(DYe,{children:$.jsx(kAn,{})})}))});export default $An();
